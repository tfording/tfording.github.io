if (self.CavalryLogger) { CavalryLogger.start_js(["41EmE"]); }

__d("TrendingHovercard",["csx","Banzai","CSS","DOM","Hovercard","LitestandEllipsis","LitestandShareAttachment","Parent","TrendingEvent","$"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=100,j={},k={getLinksCurrentPosition:function l(m){var n=c("Parent").bySelector(c("$")(m),"._5my2");if(!n)return 0;return Number(n.getAttribute("data-position"))},registerSubtitleHack:function l(m,n){__p&&__p();var o=c("DOM").scry(m,"._6m7")[0];if(!o)return;c("$")(n).onmouseover=function(){var p=function p(){var q=c("LitestandShareAttachment").getNumDescriptionLines(m);if(q&&q>0){c("CSS").show(o);c("LitestandEllipsis").add(o,q*c("LitestandShareAttachment").getDescriptionLineHeight());c("$")(n).onmouseover=null}};setTimeout(p,c("Hovercard").getHideDelay()+i);setTimeout(p,c("Hovercard").getLoadingDelay()+i)}},setDialog:function l(m,n,o){__p&&__p();var p=[n.subscribe("show",function(){c("Banzai").post("trending_hovercard",babelHelpers["extends"]({},o,{trending_event:c("TrendingEvent").HOVERCARD_LOAD}));j[m]=Date.now()}),n.subscribe("hide",function(){if(Object.prototype.hasOwnProperty.call(j,m)){var q=Date.now()-j[m];if(q<0)q=0;c("Banzai").post("trending_hovercard",babelHelpers["extends"]({},o,{time_spent:q,trending_event:c("TrendingEvent").HOVERCARD_UNLOAD}));delete j[m]}}),n.subscribe("destroy",function(){p.forEach(function(q){return q.unsubscribe()});p=[]})];c("Hovercard").setDialog(m,n)},setDialogPushSafe:function l(m){k.setDialog(m.endpoint,m.dialog,m.logData)}};f.exports=k}),null);
__d("XPubcontentTrendingHovercardLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/trending/hovercard/logging/",{topic_id:{type:"Int",required:true},event:{type:"String",required:true},position:{type:"Int",required:true},source:{type:"String",required:true},query_id:{type:"Int",required:true},impression_guid:{type:"String",required:true}})}),null);
__d("TrendingHovercardLogger",["TrendingHovercard","TrendingRHCLogger","VideoPlayerController","XPubcontentTrendingHovercardLoggingController","AsyncRequest"],(function a(b,c,d,e,f,g){__p&&__p();function h(j,k,l,m,n,o){var p=c("XPubcontentTrendingHovercardLoggingController").getURIBuilder().setString("event",j).setInt("position",k).setInt("topic_id",Number(l)).setString("source",m).setInt("query_id",Number(n)).setString("impression_guid",o).getURI();new(c("AsyncRequest"))().setURI(p).send()}var i={registerArticleForClickEvent:function j(k,l,m,n,o,p){k.onclick=function(){var q=c("TrendingHovercard").getLinksCurrentPosition(o);if(q>0)c("TrendingRHCLogger").logHovercardArticleClick(String(q),l);h("hovercard_article_click",q,l,m,n,p)}},registerFeedLinkForClickEvent:function j(k,l,m,n,o,p){k.onclick=function(){var q=c("TrendingHovercard").getLinksCurrentPosition(o);if(q>0)c("TrendingRHCLogger").logHovercardFeedClick(String(q),l);h("hovercard_feed_click",q,l,m,n,p)}},registerHovercardForClickEvent:function j(k,l,m,n,o,p){k.onclick=function(){var q=c("TrendingHovercard").getLinksCurrentPosition(o);if(q>0)c("TrendingRHCLogger").logHovercardFeedClick(String(q),l);h("hovercard_context_click",q,l,m,n,p)}},registerHovercardForClickEventPushSafe:function j(k){i.registerHovercardForClickEvent(k.item,k.tag,k.source,k.query_id,k.topic_link_id,k.impression_guid)},registerShareForClickEvent:function j(k,l,m,n,o,p){k.onclick=function(){var q=c("TrendingHovercard").getLinksCurrentPosition(o);if(q>0)c("TrendingRHCLogger").logHovercardShare(String(q),l);h("topic_share",q,l,m,n,p)}},registerPlayOfHovercardVideoEvent:function j(k,l,m,n,o,p){k.addListener("beginPlayback",function(){h("hovercard_video_played",Number(l),m,n,o,p)})}};f.exports=i}),null);
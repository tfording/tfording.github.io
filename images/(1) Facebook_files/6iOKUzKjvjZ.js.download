if (self.CavalryLogger) { CavalryLogger.start_js(["GdAzZ"]); }

__d("FrameEditorSupportedGeneratedText",[],(function a(b,c,d,e,f,g){f.exports={"%City_Name%":"City name","%CITY_NAME%":"City name (all caps)"}}),null);
__d("FXMediaEffectProduct",[],(function a(b,c,d,e,f,g){f.exports={AML_CAMERA:"aml_camera",BIRTHDAY_CAMERA:"birthday_camera",BONFIRE:"bonfire",FACEBOOK:"facebook",FLASH:"flash",FLASH_ALDRIN:"flash_aldrin",INSTAGRAM:"instagram",MESSENGER:"messenger",MSQRD:"msqrd",TALK:"talk"}}),null);
__d("FXProductVisibilityPolicyTypeLabels",[],(function a(b,c,d,e,f,g){f.exports={ALL_PRODUCTS:"All products",OWNING_PRODUCT_ONLY:"Owning product only",SPECIFIC_PRODUCTS:"Specific products",ALL_EXCEPT_PRODUCTS:"All products except specific products",ANY_FACEBOOK_UNIVERSE:"Only Facebook-universe products"}}),null);
__d("OzConstants",[],(function a(b,c,d,e,f,g){f.exports={AUTHOR_TYPES:{BOT:"bot",TRAINER:"trainer",USER:"user"},ATTS:{COMMAND:"@COMMAND",IMAGE:"image",SUGG:"@SUGG",TEMPLATE:"template",SURVEY:"survey",QUICK_REPLIES:"@QUICK_REPLIES",OPENTABLEQR:"opentableQuickReply"},SESSION_INFO_EVENT:"iframenonce_fb_session_info",TOKENS:{USER_FIRST_NAME:"user-first-name"},REMINDERS:{RANGE_IN_YEARS:5},M_FBIDS:{M:"881263441913087",M_DEV:"1579802578966277",P:"506060876211905"}}}),null);
__d("AdsTargetingLocationClusterRecord",["cx","fbt","invariant","AdsTargetingLocationMapMetaRecord","GeoCoordinates","immutable","LegacyMapCoordinate","LocationConstants","MapRects","Rect","leaflet"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("LocationConstants").Aggregation,n=m.AGGREGATION_RADIUS,o=m.LARGE_CLUSTER_THRESHOLD,p=m.MEDIUM_CLUSTER_THRESHOLD,q=m.SMALL_CLUSTER_THRESHOLD;k=babelHelpers.inherits(r,c("immutable").Record({center:null,members:c("immutable").Set(),radius:0,rect:null}));l=k&&k.prototype;r.fromSingleRecord=function(s,t){var u=this.calculateAbsoluteCenter(s.geoLocation.latitude,s.geoLocation.longitude,t);return new r({center:u,members:c("immutable").Set.of(s),radius:n,rect:new(c("Rect"))(u.y,u.x,u.y,u.x)})};r.toSingleRecordWithOptions=function(s,t,u,v,w){if(u||s.members.size>1){var x=c("LegacyMapCoordinate").fromMap(s.center.x,s.center.y,t),y=new(c("GeoCoordinates"))(x.getLatitude(),x.getLongitude()),z=w(s),A=0,B={center:y,key:this.keyFromKeys(s.members.map(this.memberToKey).toArray()),name:z,radius:A,type:c("LocationConstants").CUSTOM_LOCATIONS},C=this.iconForCluster(v(s)),D=s.members.map(function(s){return s.meta});return new(c("AdsTargetingLocationMapMetaRecord"))({center:y,coordinateLists:null,geoLocation:B,icon:C,meta:D,name:z,popup:null,radius:A})}return s.members.first()};r.countFromCluster=function(s){return s.members.size};r.nameFromCluster=function(s){return i._("{count} Locations",[i.param("count",s.members.size)])};r.toSingleRecord=function(s,t){return this.toSingleRecordWithOptions(s,t,false,this.countFromCluster,this.nameFromCluster)};r.memberToKey=function(s){return s.geoLocation.key};r.keyFromKeys=function(s){return s.join("-")};r.keysFromKey=function(s){return s.split("-")};r.iconForCluster=function(s){var t=[0,18],u="_n9c",v=r.markerIconSizeForCluster(s);v=[v,v];return c("leaflet").divIcon({className:u,html:s,iconSize:v,popupAnchor:t})};r.markerIconSizeForCluster=function(s){if(s==null||s<q)return 24;else if(s<p)return 36;else if(s<o)return 48;else return 60};r.markerRadiusForCluster=function(s){if(s==null||s<=1)return 100;else if(s<q)return 1e4;else if(s<p)return 4e4;else if(s<o)return 7e4;else return 1e5};r.calculateAbsoluteCenter=function(s,t,u){return c("LegacyMapCoordinate").fromLatLong(s,t).getMapXY(u)};r.combine=function(s,t){s.asMutable()===s||j(0);s.rect=c("MapRects").boundingBox(s.rect,t.rect);s.radius=Math.max(s.radius,t.radius);s.center=s.rect.getCenter();s.members=s.members.union(t.members)};function r(){k.apply(this,arguments)}f.exports=r}),null);
__d("AdsTargetingAggregatedMapUtils",["AdsTargetingLocationClusterRecord","immutable","MapAggregation"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k,l,m,n){var o=k.map(function(r){return c("AdsTargetingLocationClusterRecord").fromSingleRecord(r,l).asMutable()}).toArray(),p=new(c("MapAggregation"))().aggregate(o,c("AdsTargetingLocationClusterRecord").combine),q=p.map(function(r){return c("AdsTargetingLocationClusterRecord").toSingleRecordWithOptions(r,l,k.size!==p.length,m||c("AdsTargetingLocationClusterRecord").countFromCluster,n||c("AdsTargetingLocationClusterRecord").nameFromCluster)});return c("immutable").Set(q)}function i(k){return c("immutable").Set(c("AdsTargetingLocationClusterRecord").keysFromKey(k))}var j={aggregateMapRecords:h,extractRecordKey:c("AdsTargetingLocationClusterRecord").memberToKey,splitClusterKey:i};f.exports=j}),null);
__d("AdsTargetingAggregatedMap.react",["AdsTargetingAggregatedMapUtils","AdsTargetingLocationInlineMap.react","FbtResultBase","immutable","LeafletUtils","LeafletView","LocationConstants","React","areEqual","emptyFunction","emptyObject","AdsTargetingLocationTypeAliases"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("AdsTargetingAggregatedMapUtils").aggregateMapRecords,k=c("AdsTargetingAggregatedMapUtils").extractRecordKey,l=c("AdsTargetingAggregatedMapUtils").splitClusterKey,m=c("React").Component,n=c("React").PropTypes,o=c("AdsTargetingLocationTypeAliases").CLICK_BEHAVIORS,p=c("LocationConstants").Aggregation,q=p.MAX_LOCATIONS_SIZE,r=p.MIN_ZOOM_LEVEL_FOR_FILTERING;h=babelHelpers.inherits(s,m);i=h&&h.prototype;function s(t){__p&&__p();i.constructor.call(this,t);this.$AdsTargetingAggregatedMap5=function(u,v){var w=this.props.onLocationsSelect;if(!w)return;w(this.$AdsTargetingAggregatedMap4(v))}.bind(this);this.$AdsTargetingAggregatedMap6=function(u,v){if(this.props.onViewChange)this.props.onViewChange(u,v);if(!v){if(!this.props.view)this.setState({view:u});return}this.$AdsTargetingAggregatedMap2(this.props,u,v)}.bind(this);this.state={bounds:null,clusteredLocations:c("immutable").Set(),inRangeLocations:c("immutable").Set(),locationRecordMap:c("immutable").Map(),size:null,view:this.props.view}}s.prototype.render=function(){if(this.state.clusteredLocations.size>q)return null;return c("React").createElement("div",{style:{height:this.props.height}},this.$AdsTargetingAggregatedMap1())};s.prototype.componentWillReceiveProps=function(t){this.$AdsTargetingAggregatedMap2(t)};s.prototype.shouldComponentUpdate=function(t,u){var v=t.height!==this.props.height||!c("areEqual")(t.locationRecords,this.props.locationRecords)||!c("areEqual")(t.menuItems,this.props.menuItems)||!c("LeafletUtils").areViewEqual(t.view,this.props.view),w=u!==undefined&&(u.bounds&&!u.bounds.equals(this.state.bounds)||!c("areEqual")(u.clusteredLocations,this.state.clusteredLocations)||!c("LeafletUtils").areViewEqual(u.view,this.state.view));return v||w};s.prototype.$AdsTargetingAggregatedMap3=function(t,u){if(u&&t)return c("LeafletUtils").getViewBounds(t,{width:u.x,height:u.y});return c("LeafletUtils").WHOLE_WORLD_BOUNDS};s.prototype.$AdsTargetingAggregatedMap4=function(t){var u=l(t.key);return u.map(function(v){return this.state.locationRecordMap.get(v)}.bind(this))};s.prototype.$AdsTargetingAggregatedMap2=function(t,u,v){__p&&__p();var w=t.view||u||this.state.view,x=v||this.state.size,y=this.$AdsTargetingAggregatedMap3(w,x),z=w&&w.zoom;if(z===undefined||!y)return;var A=false;if(t.disableAggregation)A=t.disableAggregation(z);var B=void 0;if(z<r)B=t.locationRecords;else B=t.locationRecords.filter(function(F){return y.contains(c("LeafletUtils").toLatLng(F.center))});var C=z==this.state.zoom&&(B.equals(this.state.inRangeLocations)||B.map(k).equals(this.state.inRangeLocations.map(k))),D=this.state.locationRecordMap;if(!C)D=c("immutable").Map().withMutations(function(F){B.forEach(function(G){return F.set(G.geoLocation.key,G)})});var E=void 0;if(A||B.size<2)E=B;else if(C)E=this.state.clusteredLocations;else E=j(B,z,this.props.countFromCluster,this.props.nameFromCluster);this.setState({bounds:y,clusteredLocations:E,inRangeLocations:B,locationRecordMap:D,size:x,view:w})};s.prototype.$AdsTargetingAggregatedMap1=function(){var t=this.state.clusteredLocations.isEmpty()?this.props.locationRecords:this.state.clusteredLocations;return c("React").createElement(c("AdsTargetingLocationInlineMap.react"),babelHelpers["extends"]({addLocationMode:c("LocationConstants").INCLUDE,addingLocation:false,centerLocations:t,clickBehavior:this.props.clickBehavior,disableCollapseButton:this.props.disableCollapseButton,disableScrollWheelZoom:this.props.disableScrollWheelZoom,enableDropPin:false,excludedLocations:c("immutable").Set(),fitLocations:c("immutable").Set(),highlightLocations:c("immutable").Set(),locations:this.state.clusteredLocations,maxBounds:c("LeafletUtils").WHOLE_WORLD_BOUNDS,menuItems:this.props.menuItems||c("emptyObject"),onlyInclusion:true,showPopupOnHover:true,view:this.state.view||undefined,onAddLocationFromMap:c("emptyFunction"),onCollapseMap:c("emptyFunction"),onSingleNodeClick:this.props.onSingleNodeClick,onPopupMenuItemSelect:this.$AdsTargetingAggregatedMap5,onViewChange:this.$AdsTargetingAggregatedMap6},this.props.inlineMapProps))};s.propTypes={clickBehavior:n.oneOf(Object.keys(o)),countFromCluster:n.func,disableAggregation:n.func,disableCollapseButton:n.bool,disableScrollWheelZoom:n.bool,height:n.number.isRequired,inlineMapProps:n.object,locationRecords:n.instanceOf(c("immutable").Set).isRequired,menuItems:n.shape({INCLUDE:n.oneOfType([n.instanceOf(c("FbtResultBase")),n.string]),EXCLUDE:n.oneOfType([n.instanceOf(c("FbtResultBase")),n.string]),DELETE:n.oneOfType([n.instanceOf(c("FbtResultBase")),n.string])}),nameFromCluster:n.func,view:n.instanceOf(c("LeafletView")),onLocationsSelect:n.func,onViewChange:n.func};s.defaultProps={clickBehavior:o.ZOOM_TO_NEXT_RANGE,inlineMapProps:{}};f.exports=s}),null);
__d("AdsDayPartingHourBox.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$AdsDayPartingHourBox2=function(){this.props.onMouseEnter(this.props.day,this.props.hour)}.bind(this),this.$AdsDayPartingHourBox1=function(event){event.preventDefault();this.props.onMouseDown(this.props.day,this.props.hour)}.bind(this),this.$AdsDayPartingHourBox3=function(event){event.preventDefault();event.stopPropagation();this.props.onMouseUp(this.props.day,this.props.hour)}.bind(this),n}l.prototype.render=function(){var m=this.props.hour;return c("React").createElement("div",{className:(this.props.isSelected&&!this.props.isHighlighted?"_4axe":"")+(this.props.isSelected&&this.props.isHighlighted?" _4axf":"")+(!this.props.isSelected&&this.props.isHighlighted?" _4axg":"")+" _4axh _4axi"+(m===0?" _4axj":"")+(m%3===2?" _4axk":"")+(m%3!==2&&m!==0?" _4axl":"")+(this.props.reducedWidth?" _4axm":""),onMouseDown:this.$AdsDayPartingHourBox1,onMouseEnter:this.$AdsDayPartingHourBox2,onMouseUp:this.$AdsDayPartingHourBox3})};l.propTypes={day:k.number,hour:k.number.isRequired,isHighlighted:k.bool,isSelected:k.bool.isRequired,reducedWidth:k.bool,onMouseDown:k.func.isRequired,onMouseEnter:k.func.isRequired,onMouseUp:k.func.isRequired};f.exports=l}),null);
__d("AdsDayPartingTableRow.react",["cx","fbt","AdsDayPartingHourBox.react","DateStrings","DayPartingGrid","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){var n=[];for(var o=0;o<24;o++){var p=!!this.props.highlighted&&this.props.highlighted.isSelected(this.props.day,o);n.push(c("React").createElement(c("AdsDayPartingHourBox.react"),{day:this.props.day,hour:o,isHighlighted:p,isSelected:this.props.grid.isSelected(this.props.day,o),key:o,reducedWidth:this.props.reducedWidth,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,onMouseUp:this.props.onMouseUp}))}var q=this.props.day===null;return c("React").createElement("div",{className:"clearfix"+(this.props.day===0?" _14f-":"")+(q?" _14f_":"")},c("React").createElement("div",{className:"_4axh _14g1 _14g2"+(this.props.reducedWidth?" _14gd":"")},this.$AdsDayPartingTableRow1()),n)};m.prototype.$AdsDayPartingTableRow1=function(){if(this.props.day==null)return i._("Every Day");if(this.props.reducedWidth)return c("DateStrings").getWeekdayNameShort(this.props.grid.toAPIDayIndex(this.props.day));return c("DateStrings").getWeekdayName(this.props.grid.toAPIDayIndex(this.props.day))};function m(){j.apply(this,arguments)}m.propTypes={day:l.number,grid:l.instanceOf(c("DayPartingGrid")).isRequired,highlighted:l.instanceOf(c("DayPartingGrid")),reducedWidth:l.bool,onMouseDown:l.func.isRequired,onMouseEnter:l.func.isRequired,onMouseUp:l.func.isRequired};f.exports=m}),null);
__d("AdsDayPartingTable.react",["cx","fbt","AdsDayPartingTableRow.react","DayPartingGrid","DayPartingUtils","React","XUIError.react","nullthrows"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=[i._("12am"),i._("3am"),i._("6am"),i._("9am"),i._("12pm"),i._("3pm"),i._("6pm"),i._("9pm")],n=7,o=512;j=babelHelpers.inherits(p,c("React").Component);k=j&&j.prototype;function p(){__p&&__p();var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.state={isDragging:false,dragMode:false,dragStartDay:null,dragStartHour:null,dragEndDay:null,dragEndHour:null,renderedGrid:null},this.$AdsDayPartingTable6=function(){this.$AdsDayPartingTable5()}.bind(this),this.$AdsDayPartingTable5=function(){if(this.state.isDragging)this.setState({isDragging:false,renderedGrid:this.props.grid})}.bind(this),this.$AdsDayPartingTable3=function(v,w){if(!this.state.isDragging)return;this.$AdsDayPartingTable8({dragEndDay:v,dragEndHour:w})}.bind(this),this.$AdsDayPartingTable2=function(v,w){if(this.state.isDragging||this.props.isReadOnly)return;this.$AdsDayPartingTable8({isDragging:true,dragMode:!this.props.grid.isSelected(v,w),dragStartDay:v,dragStartHour:w,dragEndDay:v,dragEndHour:w})}.bind(this),this.$AdsDayPartingTable4=function(v,w){if(!this.state.isDragging)return;this.setState({isDragging:false,dragMode:false,dragStartDay:null,dragStartHour:null,dragEndDay:null,dragEndHour:null});this.props.onGridChange(this.$AdsDayPartingTable1())}.bind(this),r}p.prototype.componentWillReceiveProps=function(q){if("grid"in q)this.setState({renderedGrid:q.grid})};p.prototype.render=function(){__p&&__p();var q=this.$AdsDayPartingTable1(),r=[];for(var s=0;s<n;s++)r.push(c("React").createElement(c("AdsDayPartingTableRow.react"),{day:s,grid:q,highlighted:this.props.highlighted,key:s,reducedWidth:this.props.reducedWidth,onMouseDown:this.$AdsDayPartingTable2,onMouseEnter:this.$AdsDayPartingTable3,onMouseUp:this.$AdsDayPartingTable4}));if(!this.props.reducedWidth&&!this.props.hideAllDaysPicker)r.push(c("React").createElement(c("AdsDayPartingTableRow.react"),{day:null,grid:q,highlighted:this.props.highlighted,key:r.length,onMouseDown:this.$AdsDayPartingTable2,onMouseEnter:this.$AdsDayPartingTable3,onMouseUp:this.$AdsDayPartingTable4}));var t=[];for(var u=0;u<8;u++){t.push(c("React").createElement("div",{className:"_33bn"+(this.props.reducedWidth?" _33bo":""),key:"hour"+u},m[u]));t.push(c("React").createElement("div",{className:"_33bp",key:"hourA"+u}));t.push(c("React").createElement("div",{className:"_33bp",key:"hourB"+u}))}var v=this.props.width&&this.props.width<o;return c("React").createElement(c("XUIError.react"),this.props,c("React").createElement("div",{className:v?"_13h5":"",style:v?{width:this.props.width}:null},c("React").createElement("div",{className:"_5sn9"+(!this.props.isReadOnly?" _33bq":"")+(this.props.reducedWidth?" _26mb":""),onMouseLeave:this.$AdsDayPartingTable5,onMouseUp:this.$AdsDayPartingTable6},c("React").createElement("div",{className:"_33br clearfix"+(this.props.reducedWidth?" _33bs":"")},t),r,c("React").createElement("div",{className:"_5sne"},c("React").createElement("div",{className:"_4axe _5sny"+(this.props.reducedWidth?" _26mg":"")}),i._("Scheduled hours")),this.$AdsDayPartingTable7())))};p.prototype.$AdsDayPartingTable7=function(){if(!this.props.highlighted)return null;return c("React").createElement("div",{className:"_5sne"},c("React").createElement("div",{className:"_4axg _5sny"}),i._("Business opening hours"))};p.prototype.$AdsDayPartingTable8=function(q){var r=babelHelpers["extends"]({},this.state,q);r.renderedGrid=this.$AdsDayPartingTable9(r);this.setState(r)};p.prototype.$AdsDayPartingTable1=function(){return this.state.renderedGrid||this.props.grid};p.prototype.$AdsDayPartingTable9=function(q){__p&&__p();if(!q.isDragging)return this.props.grid;var r=new(c("DayPartingGrid"))(this.props.grid),s=q.dragStartDay,t=q.dragEndDay,u=c("nullthrows")(q.dragStartHour),v=c("nullthrows")(q.dragEndHour),w=q.dragMode;if(s!==null&&t===null)t=c("DayPartingUtils").DAYS_IN_WEEK-1;if(u!==null&&v===null)v=c("DayPartingUtils").HOURS_IN_DAY-1;if(s===null)r.setEveryDay(u,v,w);else if(u===null)r.setAllDay(s,t,w);else r.set(s,u,t,v,w);return r};p.propTypes=babelHelpers["extends"]({grid:l.instanceOf(c("DayPartingGrid")).isRequired,hideAllDaysPicker:l.bool,highlighted:l.instanceOf(c("DayPartingGrid")),isReadOnly:l.bool,reducedWidth:l.bool,onGridChange:l.func.isRequired,width:l.number},c("XUIError.react").propTypes);p.defaultProps={hideAllDaysPicker:false,isReadOnly:false,xuiErrorPosition:"above",xuiErrorAlignh:"left"};f.exports=p}),null);
__d("AdsTargetingLanguageSelector.react",["fbt","AdsGraphAPI","AdsStaticSearchSource","AdsTargetingTokenizer.react","BoostedComponentClientEvent","immutable","React","SearchableEntry","areEqual"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes,l=null,m=new(c("AdsStaticSearchSource"))([]),n=h._("Add languages...");i=babelHelpers.inherits(o,c("React").Component);j=i&&i.prototype;function o(){__p&&__p();var p,q;"use strict";for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.state={entries:[]},this.$AdsTargetingLanguageSelector3=function(u,v){this.props.onDataUpdate(c("BoostedComponentClientEvent").UPDATE_LANGUAGES,u.map(function(v){return parseInt(v.getUniqueID(),10)}))}.bind(this),this.$AdsTargetingLanguageSelector1=function(u){var v=c("immutable").Set(u||[]),w=[];l.forEach(function(x,y){if(v.contains(x.key))w.push(new(c("SearchableEntry"))({uniqueID:x.id,title:x.name}))});this.setState({entries:w,searchSource:this.state.searchSource||new(c("AdsStaticSearchSource"))(l)})}.bind(this),this.$AdsTargetingLanguageSelector2=function(u){l=u.data.map(function(v){return{id:v.key,name:v.name,key:v.key}});this.$AdsTargetingLanguageSelector1(this.props.selectedLanguages)}.bind(this),q}o.prototype.componentWillMount=function(){"use strict";if(l){this.$AdsTargetingLanguageSelector1(this.props.selectedLanguages);return}c("AdsGraphAPI").get(f.id).search("adlocale").get({limit:500}).done(this.$AdsTargetingLanguageSelector2)};o.prototype.componentWillReceiveProps=function(p){"use strict";if(l&&!c("areEqual")(p.selectedLanguages,this.props.selectedLanguages))this.$AdsTargetingLanguageSelector1(p.selectedLanguages)};o.prototype.render=function(){"use strict";var p=this.state.searchSource||m;return c("React").createElement(c("AdsTargetingTokenizer.react"),{disabled:this.props.disabled,entries:this.state.entries,placeholder:n,searchSource:p,smallInput:true,uri:"#",onDataUpdate:this.$AdsTargetingLanguageSelector3})};o.propTypes={disabled:k.bool,selectedLanguages:k.arrayOf(k.number),onDataUpdate:k.func.isRequired};f.exports=o}),null);
__d("EventPermalinkCameraFramesLogging",["EventsActionsLogger"],(function a(b,c,d,e,f,g){"use strict";f.exports={logClick:function h(i,j,k){c("EventsActionsLogger").log(this._eventID,{type:c("EventsActionsLogger").Type.CLICK,target:i,surface:c("EventsActionsLogger").Surface.PERMALINK,mechanism:c("EventsActionsLogger").Mechanism.PERMALINK,target_id:j,acontext:k},{})}}}),null);
__d("MediaEffectOwnerHubHeader.react",["fbt","Link.react","MediaEffectHubViewTab","React","XMediaEffectHubController","XUICardHeader.react","XUICardHeaderTitle.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.hubLinkTab,n=l.title,o=null;if(m){var p=c("XMediaEffectHubController").getURIBuilder().setEnum("tab",m).getURI(),q=m===c("MediaEffectHubViewTab").LEARN?h._("Learn More"):h._("Manage Effects");o=c("React").createElement(c("Link.react"),{href:p,target:"_blank"},q)}return c("React").createElement(c("XUICardHeader.react"),{link:o,type:"secondary"},c("React").createElement(c("XUICardHeaderTitle.react"),null,n))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MediaEffectWebdriverIDs",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({HUB_EFFECT_TABLE:"hub_effect_table",HUB_EFFECT_TABLE_PREVIEW_COLUMN:"hub_effect_table_preview_column",LWE_FRAME_CREATION_DIALOG:"lwe_frame_creation_dialog",LWE_EFFECT_OWNER_POPOVER_BUTTON:"lwe_effect_owner_popover_button",LWE_EFFECT_APP_POPOVER_BUTTON:"lwe_effect_app_popover_button",LWE_EFFECT_FRAME_NAME_INPUT:"lwe_effect_frame_name_input",HUB_EFFECT_CREATE_BUTTON:"hub_effect_create_button",HUB_AR_EFFECT_CREATE_BUTTON:"hub_ar_effect_create_button",LWE_EFFECT_CONTINUE_BUTTON:"lwe_effect_continue_button",LWE_EFFECT_CONFIRMATION_DIALOG:"lwe_effect_confirmation_dialog",LWE_EFFECT_PUBLISHED_CONFIRMATION_DIALOG_DONE_BUTTON:"lwe_effect_published_confirmation_dialog_done_button",LWE_EFFECT_EDUCATION_CONTINUE_BUTTON:"lwe_effect_education_continue_button",LWE_EFFECT_SAVE_DRAFT_BUTTON:"lwe_effect_save_draft_button",LWE_EFFECT_SAVE_DRAFT_SPINNER:"lwe_effect_save_draft_spinner"})}),null);
__d("EventPermalinkCameraFramesCreate.react",["cx","fbt","ix","AsyncDialog","AsyncRequest","EventPermalinkCameraFramesLogging","EventsActionsLogger","EventsPermalinkTabBar","Image.react","MediaEffectCreateStep","MediaEffectCreationReferrer","MediaEffectFlowType","MediaEffectHubViewTab","MediaEffectOwnerHubHeader.react","MediaEffectWebdriverIDs","React","ShimButton.react","XMediaEffectCreateDialogController","XUICard.react","XUICardSection.react"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").PureComponent);l=k&&k.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=l.constructor).call.apply(n,[this].concat(q)),this.$EventPermalinkCameraFramesCreate1=function(){c("EventPermalinkCameraFramesLogging").logClick(c("EventsActionsLogger").Target.FRAME_CREATE_RHC,this.props.eventID,this.props.actionContext);var s=c("XMediaEffectCreateDialogController").getURIBuilder().setEnum("flow_type",c("MediaEffectFlowType").EVENT).setFBID("source_id",this.props.eventID).setEnum("step",c("MediaEffectCreateStep").CREATE).setString("action_context",JSON.stringify(this.props.actionContext)).setEnum("active_tab",c("EventsPermalinkTabBar").getCurrentTab()).setEnum("ref",c("MediaEffectCreationReferrer").EVENT_PAGE).getURI();c("AsyncDialog").send(new(c("AsyncRequest"))(s))}.bind(this),o}m.prototype.render=function(){return c("React").createElement(c("XUICard.react"),{className:"_634s"},c("React").createElement(c("MediaEffectOwnerHubHeader.react"),{title:this.props.title,hubLinkTab:c("MediaEffectHubViewTab").LEARN}),c("React").createElement(c("XUICardSection.react"),null,c("React").createElement(c("ShimButton.react"),{className:"_weu","data-testid":c("MediaEffectWebdriverIDs").HUB_EFFECT_CREATE_BUTTON,onClick:this.$EventPermalinkCameraFramesCreate1},c("React").createElement(c("Image.react"),{src:j("293229")}),c("React").createElement("h1",{className:"_1x8l"},i._("Help people share at your event")),c("React").createElement("p",{className:"_wev"},i._("Create a custom camera frame for your event using handy templates. People can add it to the photos and videos they share with friends.")),c("React").createElement("p",{className:"_wew"},i._("Get Started")))))};f.exports=m}),null);
__d("FXEntMediaEffectStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ACTIVE:"active",ARCHIVED:"archived",COMPLETED:"completed",DISABLED:"disabled",DRAFT:"draft",INACTIVE:"inactive",IN_REVIEW:"in_review",NOT_APPROVED:"not_approved",SCHEDULED:"scheduled",NEEDS_ATTENTION:"needs_attention",DEPRECATED:"deprecated"})}),null);
__d("MediaEffectFunnelLoggingConstants",[],(function a(b,c,d,e,f,g){"use strict";f.exports={CREATION_FUNNEL_LOGGING_NAME:"CREATIVE_STUDIO_CREATION_FUNNEL",FUNNEL_LOGGING_EVENT:{ADD_DYNAMIC_TEXT:"add_dynamic_text",ADD_TEXT:"add_text",ASSET_INPLACE_WARNING:"asset_inplace_warning",CANCEL:"cancel",CHANGE_CATEGORY:"change_category",CHANGE_EDITOR_BACKGROUND_COLOR:"change_editor_background_color",CHANGE_EDITOR_BACKGROUND_IMAGE:"change_editor_background_image",CHANGE_END_TIME:"change_end_time",CHANGE_LOCATION:"change_location",CHANGE_NAME:"change_name",CHANGE_OWNER:"change_owner",CHANGE_START_TIME:"change_start_time",CHANGE_TAG:"change_tag",CHANGE_TEXT_ALIGNMENT:"change_text_alignment",CHANGE_TEXT_COLOR:"change_text_color",CHANGE_TEXT_FONT:"change_text_font",CHANGE_TEXT_CONTENT:"change_text_content",DELETE_ASSET:"delete_asset",DUPLICATE_ASSET:"duplicate_asset",ENTER_CREATION_FLOW_FROM_INLINE_NUX:"enter_creation_flow_from_inline_nux",EXPLICIT_DROPOFF:"explicit_dropoff",GALLERY_VIEW:"gallery_view",GALLERY_MEDIA_CLICK:"gallery_media_click",PREVIEW_ON_CAMERA:"preview_on_camera",SAVE_AS_DRAFT:"save_as_draft",SET_SCALE_WITH_WIDTH:"set_scale_with_width",SET_SCALE_WITH_HEIGHT:"set_scale_with_height",SHOW_PREVIEW:"show_preview",SHOWN_INLINE_NUX:"shown_inline_nux",SUBMIT:"submit",UPDATE_STEP:"update_step",UPLOAD_FILE:"upload_file",UPLOAD_FINISHED:"upload_finished",DIALOG_LOADED:"dialog_loaded",BACKGROUND_AUTO_REMOVAL_PREVIEW:"background_auto_removal_preview",BACKGROUND_AUTO_REMOVAL_APPLIED:"background_auto_removal_applied",ASSET_AUTO_SNAPPING:"asset_auto_snapping"},FUNNEL_LOGGING_TIMEOUT:999999,FUNNEL_LOGGING_TAGS:{BROWSER_NAME:"browser_name",CREATION_FLOW_TYPE:"creation_flow_type",EFFECT_ID:"effect_id",FAILURE:"failure",FRAME_EDITOR_SHOWN:"frame_editor_shown",NEW_EFFECT:"new_effect",REF:"ref",SOURCE_ID:"source_id",SUCCESS:"success",DIALOG_TYPE:"dialog_type",IS_FIRST_TIME_SAVE_OR_SUBMIT:"is_first_time_save_or_submit"},FUNNEL_LOGGING_PAYLOAD:{ALIGNMENT:"alignment",ASSET_INPLACE_WARNING_TYPE:"asset_inplace_warning_type",COLOR:"color",IMAGE:"image",EFFECT_ID:"effect_id",FONT:"font",NEW_EFFECT:"new_effect",OWNER_FIRST_PARTY:"owner_first_party",OWNER_ID:"owner_id",OWNER_TYPE:"owner_type",RESULT:"result",SCALE_WITH_HEIGHT:"scale_with_height",SCALE_WITH_WIDTH:"scale_with_width",TEXT:"text",STEP:"step",ASSET_ID:"asset_id",ASSETS:"assets",ASSET_AUTO_SNAPPING_TYPE:"asset_auto_snapping_type"}}}),null);
__d("MediaEffectErrorCode",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({HAS_DISALLOWED_LOCATION:"has_disallowed_location"})}),null);
__d("MediaEffectError",["fbt","immutable","MediaEffectErrorCode"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("immutable").Record,l=k({code:null,message:null,messageItems:[],params:[]});i=babelHelpers.inherits(m,l);j=i&&i.prototype;m.fromObject=function(p){return new m(babelHelpers["extends"]({},p,{message:n(p.code,p.params),messageItems:o(p.code,p.params)}))};function m(){i.apply(this,arguments)}function n(p,q){switch(p){case c("MediaEffectErrorCode").HAS_DISALLOWED_LOCATION:if(!q||q.length===0)return null;if(q.length===1)return h._("The location you added is no longer available to use with frames. Select a different location or General for no location.");else return h._("Some of the locations you added are no longer available to use with frames. Change these locations or select General for no location:")}return null}function o(p,q){switch(p){case c("MediaEffectErrorCode").HAS_DISALLOWED_LOCATION:if(!q)return null;if(q.length===1)return[];else return q}return null}f.exports=m}),null);
__d("MediaEffectFrameEditorDispatcher",["ExplicitRegistrationReactDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationReactDispatcher"));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:true})}),null);
__d("MediaEffectMetadataViewStore",["FluxReduceStore","immutable","MediaEffectError","MediaEffectFrameEditorDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l=c("immutable").List,m=c("immutable").Map,n=c("immutable").Record;h=babelHelpers.inherits(o,n({errors:l(),fbRankingStrategy:"DEFAULT",instructions:m(),instagramAttributionData:l(),ownersData:l(),potentialOwnersForAttribution:m(),templateCategories:m()}));i=h&&h.prototype;function o(){h.apply(this,arguments)}j=babelHelpers.inherits(p,c("FluxReduceStore"));k=j&&j.prototype;p.prototype.getInitialState=function(){return new o()};p.prototype.reduce=function(q,r){__p&&__p();switch(r.type){case"update/fbRankingStrategy":q=q.set("fbRankingStrategy",r.value);break;case"init/effectMetadata":var s=r.data,t=s.activationJSData,u=s.instructionsData,v=s.instagramAttributionData,w=s.ownersData,x=s.errorsData,y=s.templateCategoryData,z=s.potentialOwnersForAttribution,A=t.fbBoosted,B=t.fbRankWeight,C="DEFAULT";if(A)C="BOOST";else if(B)C="MANUAL";var D=l((x||[]).map(function(E){return c("MediaEffectError").fromObject(E)}));q=q.withMutations(function(E){E.set("fbRankingStrategy",C).set("instructions",m(u)).set("instagramAttributionData",l(v)).set("ownersData",l(w)).set("potentialOwnersForAttribution",m(z)).set("errors",D).set("templateCategories",m(y))});break}return q};p.prototype.getMediaEffectOwnerFromID=function(q,r){if(!r)return null;var s=q.filter(function(s){return s.id===r});if(s.size===1)return s.first();return null};p.prototype.getOwner=function(q){return this.getMediaEffectOwnerFromID(this.getState().get("ownersData"),q)};p.prototype.getInstagramAttribution=function(q){return this.getMediaEffectOwnerFromID(this.getState().get("instagramAttributionData"),q)};p.prototype.isFirstParty=function(q){var r=this.getOwner(q);if(!r)return false;return r.isFirstParty};p.prototype.isFirstPartyProduct=function(q,r){if(!this.isFirstParty(q))return false;var s=this.getOwner(q);if(!s)return false;return s.product===r};function p(){j.apply(this,arguments)}f.exports=new p(c("MediaEffectFrameEditorDispatcher"))}),null);
__d("MediaEffectEditorFunnelLogger",["invariant","FunnelLogger","MediaEffectFunnelLoggingConstants","MediaEffectMetadataStore","MediaEffectMetadataViewStore","MediaEffectReactFrameEditorImageAssetRecord","mergeDeep"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("MediaEffectFunnelLoggingConstants").CREATION_FUNNEL_LOGGING_NAME,j=c("MediaEffectFunnelLoggingConstants").FUNNEL_LOGGING_EVENT,k=c("MediaEffectFunnelLoggingConstants").FUNNEL_LOGGING_PAYLOAD,l=c("MediaEffectFunnelLoggingConstants").FUNNEL_LOGGING_TAGS,m={_funnelStarted:false,_bootstrapData:undefined,startFunnel:function n(){c("FunnelLogger").startFunnel(i);this._funnelStarted=true},startFunnelWithData:function n(o){this._bootstrapData=o;if(this._funnelStarted)this._appendAction(j.DIALOG_LOADED);else this.startFunnel()},endFunnel:function n(){this._funnelStarted=false;c("FunnelLogger").endFunnel(i)},logAddDynamicText:function n(o){var p;this._appendAction(j.ADD_DYNAMIC_TEXT,(p={},p[k.TEXT]=o,p))},logAddText:function n(){this._appendAction(j.ADD_TEXT,{})},logCancel:function n(){this._appendAction(j.CANCEL)},logChangeCategory:function n(){this._appendActionIfNew(j.CHANGE_CATEGORY)},logChangeEditorBackgroundColor:function n(o){var p;this._appendAction(j.CHANGE_EDITOR_BACKGROUND_COLOR,(p={},p[k.COLOR]=o,p))},logChangeEditorBackgroundImage:function n(o){var p,q=o&&o.match(/.*?\/([^\/]*\.jpg)/);this._appendAction(j.CHANGE_EDITOR_BACKGROUND_IMAGE,(p={},p[k.IMAGE]=!o?"no image":q?q[1]:"no image name found",p))},logChangeEndTime:function n(){this._appendActionIfNew(j.CHANGE_END_TIME)},logChangeLocation:function n(){this._appendActionIfNew(j.CHANGE_LOCATION)},logChangeName:function n(){this._appendActionIfNew(j.CHANGE_NAME)},logPreviewAutoBackgroundRemoval:function n(o){var p;this._appendAction(j.BACKGROUND_AUTO_REMOVAL_PREVIEW,(p={},p[k.ASSET_ID]=o,p))},logApplyAutoBackgroundRemoval:function n(o){var p;this._appendAction(j.BACKGROUND_AUTO_REMOVAL_APPLIED,(p={},p[k.ASSET_ID]=o,p))},logAutoSnapping:function n(o){var p;this._appendAction(j.ASSET_AUTO_SNAPPING,(p={},p[k.ASSET_AUTO_SNAPPING_TYPE]=o,p))},logChangeOwner:function n(){this._appendActionIfNew(j.CHANGE_OWNER)},logChangeStartTime:function n(){this._appendActionIfNew(j.CHANGE_START_TIME)},logChangeTag:function n(){this._appendActionIfNew(j.CHANGE_TAG)},logChangeTextAlignment:function n(o){var p;this._appendAction(j.CHANGE_TEXT_ALIGNMENT,(p={},p[k.ALIGNMENT]=o,p))},logChangeTextColor:function n(o){var p;this._appendAction(j.CHANGE_TEXT_COLOR,(p={},p[k.COLOR]=o,p))},logChangeTextFont:function n(o){var p;this._appendAction(j.CHANGE_TEXT_FONT,(p={},p[k.FONT]=o,p))},logChangeTextContent:function n(o){var p;this._appendAction(j.CHANGE_TEXT_CONTENT,(p={},p[k.TEXT]=o,p))},logDeleteAsset:function n(){this._appendAction(j.DELETE_ASSET)},logDuplicateAsset:function n(){this._appendAction(j.DUPLICATE_ASSET)},logStep:function n(o){var p;this._appendAction(j.UPDATE_STEP,(p={},p[k.STEP]=o,p))},logExplicitDropoff:function n(o){var p;this._appendAction(j.EXPLICIT_DROPOFF,(p={},p[k.STEP]=o,p))},logSaveAsDraft:function n(o,p,q){var r,s=o?l.SUCCESS:l.FAILURE,t=q?q.assets.toArray().map(function(u){var v=u instanceof c("MediaEffectReactFrameEditorImageAssetRecord");return{asset_type:v?"image":"text",is_processed:v?u.processApplied:false,asset_id:v?u.stickerFBID:null,snappedType:v?u.autoSnappedType:null}}):[];this._appendAction(j.SAVE_AS_DRAFT,(r={},r[k.RESULT]=s,r[k.EFFECT_ID]=p,r[k.ASSETS]=t,r))},logPreviewOnCamera:function n(){this._appendAction(j.PREVIEW_ON_CAMERA)},logSetScaleWithHeight:function n(o){var p;this._appendAction(j.SET_SCALE_WITH_HEIGHT,(p={},p[k.SCALE_WITH_HEIGHT]=o,p))},logSetScaleWithWidth:function n(o){var p;this._appendAction(j.SET_SCALE_WITH_WIDTH,(p={},p[k.SCALE_WITH_WIDTH]=o,p))},logSubmit:function n(o,p,q){var r,s=o?l.SUCCESS:l.FAILURE,t=q?q.assets.toArray().map(function(u){var v=u instanceof c("MediaEffectReactFrameEditorImageAssetRecord");return{asset_type:v?"image":"text",is_processed:v?u.processApplied:false,asset_id:v?u.stickerFBID:null,snappedType:v?u.autoSnappedType:null}}):[];this._appendAction(j.SUBMIT,(r={},r[k.RESULT]=s,r[k.EFFECT_ID]=p,r[k.ASSETS]=t,r))},logUploadFile:function n(){this._appendAction(j.UPLOAD_FILE)},logUploadFinished:function n(o){var p,q=o?l.SUCCESS:l.FAILURE;this._appendAction(j.UPLOAD_FINISHED,(p={},p[k.RESULT]=q,p))},logShownInlineNUX:function n(){this._appendAction(j.SHOWN_INLINE_NUX)},logEnterCreationFlowFromInlineNUX:function n(){this._appendAction(j.ENTER_CREATION_FLOW_FROM_INLINE_NUX)},logAssetInPlaceWarning:function n(o){var p;this._appendAction(j.ASSET_INPLACE_WARNING,(p={},p[k.ASSET_INPLACE_WARNING_TYPE]=o,p))},logGalleryView:function n(){this._appendAction(j.GALLERY_VIEW)},logGalleryMediaClick:function n(){this._appendAction(j.GALLERY_MEDIA_CLICK)},_appendActionIfNew:function n(o,p){if(!this._funnelStarted)return;p=c("mergeDeep")(p,this._getStandardPayload());c("FunnelLogger").appendActionWithPayloadIfNew(i,o,p)},_appendAction:function n(o,p){if(!this._funnelStarted)return;p=c("mergeDeep")(p,this._getStandardPayload());c("FunnelLogger").appendActionWithPayload(i,o,p)},_getStandardPayload:function n(){__p&&__p();var o,p=c("MediaEffectMetadataStore").getState(),q=this._bootstrapData&&this._bootstrapData.metadataJSData?this._bootstrapData.metadataJSData.id:undefined,r=p.selectedOwnerID,s=(o={},o[k.NEW_EFFECT]=!q,o);if(q){var t;s=babelHelpers["extends"]({},s,(t={},t[k.EFFECT_ID]=q,t))}if(r){var u,v=c("MediaEffectMetadataViewStore").getOwner(r);v||h(0);s=babelHelpers["extends"]({},s,(u={},u[k.OWNER_FIRST_PARTY]=v.isFirstParty,u[k.OWNER_ID]=r,u[k.OWNER_TYPE]=v.type,u))}return s}};f.exports=m}),null);
__d("FXEntMediaEffectSubmissionStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PENDING:0,APPROVED:1,DENIED:2,DRAFT:3,ARCHIVED:4,DISABLED:5,TAKEN_DOWN:6,SUBMITTED_UNREVIEWED:7})}),null);
__d("MediaEffectQE",["immutable","QE2Logger"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("immutable").Record({inExperiment:false,params:{},universe:""}));i=h&&h.prototype;j.prototype.getParam=function(k){var l=arguments.length<=1||arguments[1]===undefined?true:arguments[1];if(!this.inExperiment)return null;if(l)c("QE2Logger").logExposureForUser(this.universe);return this.params[k]};j.prototype.getParamBool=function(k){var l=arguments.length<=1||arguments[1]===undefined?true:arguments[1],m=this.getParam(k,l);return m==="0"?false:!!m};j.prototype.getParamInt=function(k){var l=arguments.length<=1||arguments[1]===undefined?true:arguments[1],m=this.getParam(k,l),n=parseInt(m,10);return isNaN(n)?null:n};j.prototype.getParamString=function(k){var l=arguments.length<=1||arguments[1]===undefined?true:arguments[1],m=this.getParam(k,l);return typeof m==="string"?m:null};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MediaEffectQEUtils",["MediaEffectFlowType","MediaEffectQE","MediaEffectUserContext"],(function a(b,c,d,e,f,g){"use strict";var h=[c("MediaEffectFlowType").INSTAGRAM_STICKER,c("MediaEffectFlowType").LIVE_TEMPLATE],i={shouldDefaultToPortrait:function j(k){if(this._shouldExclude(k))return false;var l=new(c("MediaEffectQE"))(c("MediaEffectUserContext").portraitCanvasQE);return l.getParamBool("show_portrait")},_shouldExclude:function j(k){return h.includes(k)}};f.exports=i}),null);
__d("MediaEffectEditingStep.react",["cx","FXEntMediaEffectSubmissionStatus","MediaEffectFlowType","MediaEffectFullscreenFrameEditorContainer.react","MediaEffectQEUtils","MediaEffectReactFrameEditorCanvasContainer.react","MediaEffectReactFrameEditorPreviewContainer.react","MediaEffectValidationDialogContainer.react","React","Vector"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.$MediaEffectEditingStep1=function(){return this.props.bootstrapData.metadataJSData.id};k.prototype.$MediaEffectEditingStep2=function(){return!this.$MediaEffectEditingStep1()};k.prototype.$MediaEffectEditingStep3=function(){return this.$MediaEffectEditingStep2()||!!this.props.frameEditorBootstrapData.frameData};k.prototype.$MediaEffectEditingStep4=function(){var l=this.props.bootstrapData.metadataJSData.submissionStatus;return l===c("FXEntMediaEffectSubmissionStatus").DRAFT||l===c("FXEntMediaEffectSubmissionStatus").DENIED||this.props.flowType===c("MediaEffectFlowType").LIVE_TEMPLATE};k.prototype.render=function(){var l=this.props,m=l.context,n=l.frameEditorBootstrapData,o=null,p=null;if(this.$MediaEffectEditingStep3()){o=this.$MediaEffectEditingStep4()?c("React").createElement(c("MediaEffectFullscreenFrameEditorContainer.react"),{context:{enableEditorCamera:m.enableEditorCamera,enableFontSettingsDialog:m.enableFontSettingsDialog,enableEditorFreeText:m.enableEditorFreeText},filtersData:n.filtersData,flowType:this.props.flowType,frameData:n.frameData}):c("React").createElement("div",{className:"_14bw _4a4u"},c("React").createElement(c("MediaEffectReactFrameEditorCanvasContainer.react"),{bootstrapData:n.frameData,includesPhoneFrame:c("MediaEffectQEUtils").shouldDefaultToPortrait(this.props.flowType),readOnly:true}));p=this.$MediaEffectEditingStep4()?null:c("React").createElement("div",{className:"_2odg"},c("React").createElement(c("MediaEffectReactFrameEditorPreviewContainer.react"),{previewScale:.3,previewSize:new(c("Vector"))(400,225)}),c("React").createElement("div",{className:"_3-8x"},c("React").createElement(c("MediaEffectReactFrameEditorPreviewContainer.react"),{previewScale:.3,previewSize:new(c("Vector"))(225,400)})))}return c("React").createElement("div",{className:"_3iei"},c("React").createElement(c("MediaEffectValidationDialogContainer.react"),null),o,p)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MediaEffectFrameCreateDialogDataStore",["FluxReduceStore","immutable","MediaEffectFlowType","MediaEffectFrameCreationStepsConfig","MediaEffectFrameEditorDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l=c("immutable").Record,m=c("MediaEffectFrameCreationStepsConfig").CreationSteps;h=babelHelpers.inherits(n,l({currentStep:0,creationReferrer:null,dialogHeight:0,screenWidth:0,validatingStep:-1,flowType:null,shownInlineNUX:false,sourceID:null,eventDialogContext:{}}));i=h&&h.prototype;function n(){h.apply(this,arguments)}j=babelHelpers.inherits(o,c("FluxReduceStore"));k=j&&j.prototype;o.prototype.getInitialState=function(){return new n()};o.prototype.reduce=function(p,q){__p&&__p();switch(q.type){case"init/effectData":p=p.set("validatingStep",-1);break;case"change/step":p=p.set("currentStep",q.step);break;case"form/validate":p=p.set("validatingStep",q.step);break;case"init/dialog":p=new n({creationReferrer:q.creationReferrer,flowType:q.flowType,sourceID:q.sourceID});break;case"init/eventDialog":p=p.set("eventDialogContext",q.dialogContext);break;case"set/screenDimensions":p=p.set("screenWidth",q.screenWidth).set("dialogHeight",q.dialogHeight);break;case"inlineNUX/enterCreationFlow":p=p.set("shownInlineNUX",true);break}return p};o.prototype.isTemplateFlow=function(){return this.getState().flowType===c("MediaEffectFlowType").TEMPLATE};o.prototype.getCreationFlowType=function(){return this.getState().flowType};o.prototype.isValidating=function(){var p=this.getState(),q=c("MediaEffectFrameCreationStepsConfig").getStep(p.flowType,p.validatingStep);return q!==m.NONE};function o(){j.apply(this,arguments)}f.exports=new o(c("MediaEffectFrameEditorDispatcher"))}),null);
__d("MediaEffectProfilePolicy",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SELF_LOCATION_ONLY:"self_location_only",LOCATION_PROHIBITED:"location_prohibited",USE_TRAILING_REVIEW:"use_trailing_review"})}),null);
__d("MediaEffectFrameCreationReview.react",["cx","fbt","Link.react","MediaEffectProfilePolicy","MediaEffectReviewStepConfig","React","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;l.prototype.render=function(){var m=!!this.props.owner&&this.props.owner.policies.includes(c("MediaEffectProfilePolicy").USE_TRAILING_REVIEW),n=m?i._("\"Publish\""):i._("\"Submit\""),o=c("React").createElement("div",{className:"_2pio _3s-b"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("By clicking {button_name} you agree to the Camera Effects Platform {terms} and {policies} Effects are public for anyone to use.",[i.param("button_name",n),i.param("terms",c("React").createElement(c("Link.react"),{href:"/legal/camera_effects_platform_terms",target:"_blank"},i._("terms"))),i.param("policies",c("React").createElement(c("Link.react"),{href:"/legal/camera_effects_platform_policies",target:"_blank"},i._("policies.")))])));return c("React").createElement("div",{className:"_1d1n"},c("MediaEffectReviewStepConfig")[this.props.flowType].map(function(p,q){return c("React").createElement(p,babelHelpers["extends"]({},this.props,{key:q}))}.bind(this)),o)};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("MediaEffectFrameEditorConstants",[],(function a(b,c,d,e,f,g){"use strict";var h={EDITOR_BUFFER_SIZE:35,PORTRAIT_CANVAS_RATIO:9/16,PHONE_SCREEN_TO_FRAME_WIDTH_RATIO:1094/1216,PHONE_SCREEN_TO_FRAME_HEIGHT_RATIO:1956/2458};f.exports=h}),null);
__d("MediaEffectFullscreenFrameEditorSizingUtils",["MediaEffectFrameEditorConstants"],(function a(b,c,d,e,f,g){"use strict";var h=c("MediaEffectFrameEditorConstants").EDITOR_BUFFER_SIZE,i=212,j=12,k=60,l=60,m=12,n=40,o=200,p=4,q=40,r=70,s=12,t=50,u={getDialogWidth:function v(w,x){return Math.max(m+i+h+j+this.getCanvasSize(w,x)+j+h+p+this.getPortraitPreviewHeight(w,x)+p+m)},getCanvasSize:function v(w,x){return Math.max(0,Math.min(w-(n+i+h+j+j+h+o+n)-1,x-(2*h+q+k+l)-1))},getPortraitPreviewHeight:function v(w,x){return Math.max(o,Math.min(w-(n+i+h+j+this.getCanvasSize(w,x)+j+h+n),this.getCanvasSize(w,x)/3))},getPortraitFullPreviewHeight:function v(w,x){return Math.max(0,Math.min(x-96,3*this.getPortraitPreviewHeight(w,x)))},getSquareReviewPreviewWidth:function v(w,x){var y=1+1.1325+1.2849*16/9+.25,z=120,A=(w-z)/y,B=x-(s+r+t+q+k+l);return Math.min(9*(B*.7694174757281553)/16,A)}};f.exports=u}),null);
__d("MediaEffectSquircleImage.react",["React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){var k=this.props,l=k.className,m=k.height,n=k.src,o=k.width,p=k.isTransparent;return c("React").createElement("div",null,c("React").createElement("svg",{baseProfile:"full",className:l,height:m,version:"1.2",width:o},c("React").createElement("defs",null,c("React").createElement("mask",{id:"masking_squircle",maskContentUnits:"userSpaceOnUse",maskUnits:"userSpaceOnUse",transform:"scale(1)"},c("React").createElement("image",{height:m,width:o,xlinkHref:"/images/media_effect/icon/squircle.png"}))),!p?c("React").createElement("rect",{fill:"#7f7f7f",height:m,mask:"url(#masking_squircle)",width:o}):null,c("React").createElement("image",{height:m,mask:"url(#masking_squircle)",width:o,xlinkHref:n})))};function j(){h.apply(this,arguments)}j.defaultProps={isTransparent:true};f.exports=j}),null);
__d("MediaEffectMaskPreview.react",["cx","fbt","MediaEffectSquircleImage.react","React","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(m,n){k.constructor.call(this,m,n)}l.prototype.render=function(){var m=this.props,n=m.cameraIconSrc,o=m.showTitles;return c("React").createElement("div",null,n?c("React").createElement("div",null,o?c("React").createElement(c("XUIText.react"),{className:"_38wf",display:"block"},i._("Effect Icon")):null,c("React").createElement(c("MediaEffectSquircleImage.react"),{height:72,src:n,width:72})):null)};f.exports=l}),null);
__d("MediaEffectARStudioEffectArfxFileTypes",[],(function a(b,c,d,e,f,g){"use strict";var h=["@uncompressed.arfx","@pvr.arfx","@etc.arfx"];f.exports=h}),null);
__d("MediaEffectCard.react",["cx","React","Tooltip.react","XUICard.react","XUICardHeader.react","XUICardHeaderTitle.react","XUICardSection.react","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;function k(l){j.constructor.call(this,l)}k.prototype.render=function(){var l="_-jo",m=null;if(!this.props.hideHeader){var n=this.props.tooltip?c("React").createElement(c("Tooltip.react"),{className:"_3-99",tooltip:this.props.tooltip},c("React").createElement("span",{className:"_3o-c"})):null;m=c("React").createElement(c("XUICardHeaderTitle.react"),null,this.props.title,n)}return c("React").createElement(c("XUICard.react"),{className:c("joinClasses")(l,this.props.className),style:{border:"none"}},c("React").createElement(c("XUICardHeader.react"),{className:"_-jp",type:"primary"},m),c("React").createElement(c("XUICardSection.react"),{background:"transparent",className:"_-jq _190n",style:{borderTop:"none"}},this.props.children))};f.exports=k}),null);
__d("ProfileInfoAddImage.react",["ix","cx","xuiglyph","Image.react","React","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m=c("React").PropTypes;k=babelHelpers.inherits(n,c("React").Component);l=k&&k.prototype;n.prototype.render=function(){"use strict";return c("React").createElement("div",{className:c("joinClasses")(this.props.className,"_u08"+(this.props.size==="medium"?" _518l":""))},c("React").createElement(c("Image.react"),{className:"_u09",src:h("89665")}))};function n(){"use strict";k.apply(this,arguments)}n.propTypes={size:m.oneOf(["medium","large"])};n.defaultProps={size:"large"};f.exports=n}),null);
__d("MediaEffectMaskFileSelect.react",["cssVar","cx","fbt","CenteredContainer.react","FileInput.react","Layout.react","ProfileInfoAddImage.react","React","SUIBusinessTheme","SUILink.react","XUIError.react","XUIGrayText.react","XUIText.react","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("Layout.react").Column,n=c("Layout.react").FillColumn,o=function o(r){var s=r.className,t=r.text,u=babelHelpers.objectWithoutProperties(r,["className","text"]);return c("React").createElement("div",{className:c("joinClasses")(s,"_2pid")},c("React").createElement(c("FileInput.react"),u,c("React").createElement(c("SUILink.react"),{showUnderline:"never",theme:c("SUIBusinessTheme")},c("React").createElement(c("Layout.react"),null,c("React").createElement(m,{className:"_3-92"},c("React").createElement(c("ProfileInfoAddImage.react"),null)),c("React").createElement(n,{style:{height:"36px"}},c("React").createElement(c("CenteredContainer.react"),{fullHeight:true,horizontal:false,vertical:true},c("React").createElement(c("XUIText.react"),{display:"block",size:"header4",style:{color:"#4080ff"}},t)))))))},p=function p(r){var s=r.className,t=r.disabled,u=r.files,v=r.expectFiles,w=r.preview,x=babelHelpers.objectWithoutProperties(r,["className","disabled","files","expectFiles","preview"]),y=j._("Upload More Files");if(u.length===v)y=v>1?j._("Update Files"):j._("Update");var z=u[0].src;return c("React").createElement("div",{className:c("joinClasses")(s,"_2pid")},c("React").createElement(c("Layout.react"),null,c("React").createElement(m,{className:"_3-92"},w),c("React").createElement(n,{style:{minHeight:"36px"}},c("React").createElement("div",null,u.map(function(A){return c("React").createElement(c("XUIText.react"),{display:"block",key:A.name},c("React").createElement(c("XUIGrayText.react"),{shade:"dark",size:"header4"},A.name))})),c("React").createElement(c("Layout.react"),null,t?null:c("React").createElement(m,{className:"_3-92"},c("React").createElement(c("FileInput.react"),x,c("React").createElement("a",{href:"#"},c("React").createElement(c("XUIText.react"),{display:"block",size:"header4",style:{color:"#4080ff"}},y)))),z?c("React").createElement(n,null,c("React").createElement("a",{href:z},c("React").createElement(c("XUIText.react"),{display:"block",size:"header4",style:{color:"#4080ff"}},j._("Download")))):null))))};k=babelHelpers.inherits(q,c("React").PureComponent);l=k&&k.prototype;q.prototype.render=function(){var r=this.props,s=r.disabled,t=r.expectFiles,u=r.error,v=r.files,w=r.preview,x=r.text,y=babelHelpers.objectWithoutProperties(r,["disabled","expectFiles","error","files","preview","text"]);return c("React").createElement(c("XUIError.react"),{xuiError:u},v.length===0?c("React").createElement(o,babelHelpers["extends"]({disabled:s,text:x},y)):c("React").createElement(p,babelHelpers["extends"]({disabled:s,expectFiles:t,files:v,preview:w},y)))};function q(){k.apply(this,arguments)}f.exports=q}),null);
__d("mediaEffectGKCheck",["MediaEffectGKConfig","invariant"],(function a(b,c,d,e,f,g){"use strict";var h=c("MediaEffectGKConfig").gk_results;function i(j){return!!h[j]}f.exports=i}),null);
__d("MediaEffectMaskProjectFileUpload.react",["cx","fbt","Image.react","MediaEffectCard.react","MediaEffectFrameEditorDispatcher","MediaEffectMaskFileSelect.react","React","XUIText.react","mediaEffectGKCheck"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;l.supportsPackagedProjectUpload=function(){return c("mediaEffectGKCheck")("cep_arprojpkg_upload")};l.supportsArexportProjectUpload=function(){return c("mediaEffectGKCheck")("media_effects_upload_form_arexport")};l.getSupportedFileExtensions=function(){if(this.supportsArexportProjectUpload())return[".fbfxproj",".arprojpkg",".arexport"];else if(this.supportsPackagedProjectUpload())return[".fbfxproj",".arprojpkg"];else return[".fbfxproj"]};l.isProjectFileValid=function(m){if(m===null||m===undefined)return false;var n=m.name;return this.getSupportedFileExtensions().some(function(o){return n?n.endsWith(o):false})};l.validateProjectFile=function(m){if(!this.isProjectFileValid(m))if(this.supportsArexportProjectUpload())return i._("Please upload a .arexport or .arprojpkg file to continue");else if(this.supportsPackagedProjectUpload())return i._("Please upload a .fbfxproj or .arprojpkg file to continue");else return i._("Please upload a .fbfxproj file to continue");return null};l.getUploadTitleTooltip=function(){if(this.supportsArexportProjectUpload())return i._("You can use either the .arexport file or the .arprojpkg file for your effect");else if(this.supportsPackagedProjectUpload())return i._("You can use either the .arprojpkg file or the .fbfxproj file for your effect");else return i._("AR Studio will export a .fbfxproj file when you save your project.")};l.getExplanatoryText=function(){if(this.supportsArexportProjectUpload())return i._("Upload the .arexport file that was created when you exported your effect from AR Studio.");else if(this.supportsPackagedProjectUpload())return i._("Upload either the .arprojpkg file that was created when you exported your project in AR Studio or the .fbfxproj file that were created when you saved it.");else return i._("Upload the .fbfxproj file created when saving your effect in AR Studio.")};l.getUploadLabel=function(){if(this.supportsArexportProjectUpload())return i._("Upload .arexport or .arprojpkg file");else if(this.supportsPackagedProjectUpload())return i._("Upload project file");return i._("Upload .fbfxproj File")};function l(m,n){k.constructor.call(this,m,n)}l.prototype.getIconPath=function(){var m=this.props.projectFile;if(m!==null&&m!==undefined&&m.name&&m.name.endsWith(".arprojpkg"))return"/images/media_effect/icon/arprojpkg-icon.png";else return"/images/media_effect/icon/fbfx-icon.png"};l.prototype.updateProjectFile=function(event){var m=event.target.files[0];c("MediaEffectFrameEditorDispatcher").dispatch({type:"projectFile/selected",payload:{file:m}})};l.prototype.getErrorMessage=function(){var m=this.props,n=m.projectFile,o=m.isValidating;if(!o)return null;return this.constructor.validateProjectFile(n)};l.prototype.render=function(){var m=this.props,n=m.projectFile,o=m.disabled,p=this.getErrorMessage();return c("React").createElement(c("MediaEffectCard.react"),{className:"_3vkg",title:i._("Effect File"),tooltip:this.constructor.getUploadTitleTooltip()},c("React").createElement(c("XUIText.react"),{display:"block"},this.constructor.getExplanatoryText()),c("React").createElement(c("MediaEffectMaskFileSelect.react"),{accept:this.constructor.getSupportedFileExtensions().join(","),disabled:o,error:p,expectFiles:1,files:n?[n]:[],name:"project_file",onChange:this.updateProjectFile,preview:c("React").createElement(c("Image.react"),{height:36,src:this.getIconPath(),width:36}),text:this.constructor.getUploadLabel()}))};f.exports=l}),null);
__d("XMediaEffectScreencastUploadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/ar_effect/screencast_upload/",{review_material_id:{type:"FBID"}})}),null);
__d("MediaEffectMaskScreencastUpload.react",["cx","fbt","ArbiterToken","AsyncUploadRequest","MediaEffectCard.react","MediaEffectFrameEditorDispatcher","MediaEffectMaskFileSelect.react","ProgressBar.react","React","XMediaEffectScreencastUploadController","XUINotice.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={listeners:[],progress:0,uploadError:false,uploading:false},this.updateScreencastFile=function(event){__p&&__p();if(!event.target.files||event.target.files.length===0)return;var r=event.target.files[0];this.setState({uploading:true,progress:0,uploadError:false});c("MediaEffectFrameEditorDispatcher").dispatch({type:"effectScreencastFile/selected",payload:{file:r,src:null,reviewMaterialID:this.props.reviewMaterialID}});var s=c("XMediaEffectScreencastUploadController").getURIBuilder().getURI(),t=this.props.reviewMaterialID,u=new(c("AsyncUploadRequest"))().setURI(s).setAllowCrossOrigin(false).setData({review_material_id:t}).setFiles({screencast:r}),v=[u.subscribe("progress",function(w,x){var event=x.getProgressEvent();this.setState({progress:parseInt(event.loaded/event.total*100,10)})}.bind(this)),u.subscribe("failure",function(w,x){this.setState({uploadError:true})}.bind(this)),u.subscribe("success",function(w,x){this.setState({uploading:false,progress:100});var y=x.getResponse(),z=y.payload,A=z.reviewMaterialID,B=z.screencastSrc;c("MediaEffectFrameEditorDispatcher").dispatch({type:"effectScreencastFile/selected",payload:{file:r,src:B,reviewMaterialID:A}});this.setState({uploadError:false})}.bind(this)),u.subscribe("complete",function(w,x){if(this)this.$MediaEffectMaskScreencastUpload1()})];this.setState({listeners:v});u.send()}.bind(this),n}l.validateScreencastFile=function(m,n){var o=m;if(!o||!o.name||!o.name.endsWith(".mov")||!o.name.endsWith(".mp4")){if(n)return null;return i._("Please select a video file of type MP4 or MOV")}if(!n)return i._("Please wait for the file to finish uploading");return null};l.prototype.componentWillUnmount=function(){this.$MediaEffectMaskScreencastUpload1()};l.prototype.$MediaEffectMaskScreencastUpload1=function(){var m=this.state.listeners;while(m.length)m.pop().unsubscribe()};l.prototype.getErrorMessage=function(){var m=this.props,n=m.screencastFile,o=m.screencastSrc,p=m.isValidating;if(!p)return null;return this.constructor.validateScreencastFile(n,o)};l.prototype.render=function(){var m=this.props,n=m.screencastFile,o=m.screencastSrc,p=this.state,q=p.uploadError,r=p.uploading,s=p.progress,t=this.getErrorMessage(),u=null;if(r)u=c("React").createElement(c("ProgressBar.react"),{label:s+"%",typesetting:"float",value:s});else if(o)u=c("React").createElement("video",{controls:true,src:o,width:"320px"});else if(q)u=c("React").createElement(c("XUINotice.react"),{warn:i._("Upload Failed")});return c("React").createElement(c("MediaEffectCard.react"),{className:"_3vkg",title:i._("Screencast")},c("React").createElement(c("XUIText.react"),{display:"block"},i._("Upload a video of someone using your effect. This is used to make sure your effect doesn't violate our policies. Your screencast will only be visible to reviewers. You can also see Apple's instructions on how to {ar studio link}.",[i.param("ar studio link",c("React").createElement("a",{href:"https://support.apple.com/en-us/HT201066#screen",target:"_blank"},i._("use Quicktime to capture a screencast")))])),c("React").createElement(c("MediaEffectMaskFileSelect.react"),{accept:"video/*",disabled:r,error:t,expectFiles:1,files:n?[n]:[],name:"screencast",onChange:this.updateScreencastFile,preview:c("React").createElement("div",{style:{width:320}},u),text:i._("Upload Screencast")}))};f.exports=l}),null);
__d("MediaEffectMaskThumbnailUpload.react",["cx","fbt","Event","MediaEffectCard.react","MediaEffectFrameEditorDispatcher","MediaEffectMaskFileSelect.react","MediaEffectSquircleImage.react","MediaEffectThumbnailValidationConfig","React","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=[".png",".jpg",".jpeg"];j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;m.validateThumbnail=function(n,o,p){__p&&__p();if(!o)return i._("Please upload an effect icon to continue");var q=n;if(q&&q.name&&q.name.length>0)if(!l.some(function(t){return q.name?q.name.endsWith(t):false}))return i._("Please upload a PNG or JPG file to continue");if(p){var r=p.width*p.height;if(p.width!==p.height||r>c("MediaEffectThumbnailValidationConfig").maxResolution){var s=Math.trunc(Math.sqrt(c("MediaEffectThumbnailValidationConfig").maxResolution));return i._("Camera effect icons must be square ratios and no more than {max height of image} x {max width of image}px",[i.param("max height of image",s),i.param("max width of image",s)])}}return null};m.prototype.updateThumbnailFile=function(event){var n=event.target.files[0],o=new FileReader();c("Event").listen(o,"load",function(p){var q=new window.Image();q.onload=function(){c("MediaEffectFrameEditorDispatcher").dispatch({type:"effectThumbnailFile/selected",payload:{file:n,src:o.result,dimensions:{width:q.width,height:q.height}}})};q.src=o.result});o.readAsDataURL(n)};m.prototype.getErrorMessage=function(){var n=this.props,o=n.cameraIconDimensions,p=n.cameraIconFile,q=n.cameraIconSrc,r=n.isValidating;if(!r)return null;return this.constructor.validateThumbnail(p,q,o)};m.prototype.render=function(){var n=this.props,o=n.cameraIconFile,p=n.cameraIconSrc,q=this.getErrorMessage();return c("React").createElement(c("MediaEffectCard.react"),{className:"_3vkg",title:i._("Effect Icon"),tooltip:i._("Include an image thumbnail for your effect that will appear in the camera tray.")},c("React").createElement(c("XUIText.react"),{display:"block"},i._("Upload a square effect icon that's 400 x 400 pixels. {effect icon link} to get started.",[i.param("effect icon link",c("React").createElement("a",{href:"https://developers.facebook.com/docs/ar-studio/design/effect-icons",target:"_blank"},i._("Download the effect icon template")))])),c("React").createElement(c("MediaEffectMaskFileSelect.react"),{accept:".png,.jpg,.jpeg",error:q,expectFiles:1,files:o?[o]:[],name:"thumbnail_file",onChange:this.updateThumbnailFile,preview:p?c("React").createElement(c("MediaEffectSquircleImage.react"),{height:36,src:p,width:36}):c("React").createElement("div",null),text:i._("Upload effect icon (jpg, gif or png)")}))};function m(){j.apply(this,arguments)}f.exports=m}),null);
__d("MediaEffectMaskUploadDataStore",["FluxReduceStore","immutable","MediaEffectARStudioEffectArfxFileTypes","MediaEffectFrameEditorDispatcher","MediaEffectMaskProjectFileUpload.react","MediaEffectMaskScreencastUpload.react","MediaEffectMaskThumbnailUpload.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l=c("immutable").Record,m=c("immutable").Set;h=babelHelpers.inherits(n,l({projectFile:null,projectFileForUpload:null,arfxFiles:m(),arfxFilesForUpload:m(),userIsAgreed:false,effectDescription:null,effectThumbnailFile:null,effectThumbnailFileForUpload:null,effectThumbnailSrc:null,effectThumbnailDimensions:null,hasFrameDescriptionError:false,screencastFile:null,screencastSrc:null,reviewMaterialID:null,immutable:false,arStudioVersionDiscontinuationDates:{},currentARStudioVersions:[],oldProjectFiles:[],isAutoupgraded:false}));i=h&&h.prototype;function n(){h.apply(this,arguments)}j=babelHelpers.inherits(o,c("FluxReduceStore"));k=j&&j.prototype;o.prototype.getInitialState=function(){return new n()};o.prototype.reduce=function(p,q){__p&&__p();var r=void 0,s=void 0,t=void 0;switch(q.type){case"init/maskUploadData":var u=q.data;p=!u?new n():new n(u).set("arfxFiles",m(u.arfxFiles));break;case"projectFile/selected":r=q.payload.file;if(r){p=this.getState().set("projectFileForUpload",r).set("projectFile",{name:r.name});if(r.name.endsWith(".arexport"))p=p.set("arfxFiles",m()).set("arfxFilesForUpload",m())}break;case"arfxFile/selected":r=q.payload.file;var v=q.payload.type;p=this.getState();var w=p.get("arfxFilesForUpload");w=w.remove(w.find(function(A){return A.name.endsWith(v)})).add(r);var x=p.get("arfxFiles");x=x.remove(x.find(function(A){return A.name.endsWith(v)})).add({name:r.name});p=p.set("arfxFilesForUpload",w).set("arfxFiles",x);break;case"effectDescription/change":p=this.getState().set("effectDescription",q.payload.text);break;case"effectScreencastFile/selected":r=q.payload.file;t=q.payload.reviewMaterialID;s=q.payload.src;if(r)p=this.getState().set("reviewMaterialID",t).set("screencastFile",{name:r.name}).set("screencastSrc",s);break;case"effectThumbnailFile/selected":r=q.payload.file;s=q.payload.src;var y=q.payload.dimensions;if(r)p=this.getState().set("effectThumbnailFileForUpload",r).set("effectThumbnailFile",{name:r.name}).set("effectThumbnailSrc",s).set("effectThumbnailDimensions",y);break;case"legalAgreement/userIsAgreed":var z=q.payload.userIsAgreed;p=this.getState().set("userIsAgreed",z);break;case"update/descriptionValidation":p=this.getState().set("hasFrameDescriptionError",q.isInvalid);break;case"uploadMethod/change":p=this.getState().set("uploadMethod",q.payload.uploadMethod);break;case"update/isAutoupgraded":p=this.getState().set("isAutoupgraded",q.payload.isAutoupgraded);break;default:return p}return p};o.prototype.getRequestFiles=function(){var p=this.getState();return{effect_review_material_id:p.get("reviewMaterialID"),thumbnail_file:p.get("effectThumbnailFileForUpload"),project_file:p.get("projectFileForUpload"),mask_files:p.get("arfxFilesForUpload").toArray()}};o.prototype.getMinARStudioVersion=function(){var p=this.getState(),q=p.currentARStudioVersions;if(q.length)return Math.min.apply(Math,q);return 0};o.prototype.getLatestARStudioVersion=function(){var p=this.getState(),q=p.currentARStudioVersions;if(q.length)return Math.max.apply(Math,q);return 0};o.prototype.getVersionWillBeDiscontinued=function(){var p=this.getState(),q=p.arStudioVersionDiscontinuationDates;if(q&&q[this.getArfxTopVersion()])return true;return false};o.prototype.getDiscontinuationDate=function(){var p=this.getState(),q=p.arStudioVersionDiscontinuationDates;if(q)return q[this.getArfxTopVersion()];return null};o.prototype.getArfxTopVersion=function(){var p=this.getState(),q=p.arfxFiles,r=q.map(function(s){return s.version&&Number(s.version)}).max();return r||0};o.prototype.isVersionOutOfDate=function(){var p=this.getArfxTopVersion(),q=this.getMinARStudioVersion();return!!p&&!!q&&p<q};o.prototype.isValidForSubmit=function(p){__p&&__p();var q=this.getState(),r=q.get("projectFile");if(c("MediaEffectMaskProjectFileUpload.react").validateProjectFile(r))return false;if(!r.name.endsWith(".arexport")&&!this.validateArfxFiles(q.get("arfxFilesForUpload")))return false;if(!p){if(c("MediaEffectMaskThumbnailUpload.react").validateThumbnail(q.get("effectThumbnailFile"),q.get("effectThumbnailSrc"),q.get("effectThumbnailDimensions")))return false;if(!q.get("userIsAgreed"))return false;var s=this.getState().hasFrameDescriptionError;if(s)return false;var t=q.get("screencastFile"),u=q.get("screencastSrc");if(c("MediaEffectMaskScreencastUpload.react").validateScreencastFile(t,u))return false}return true};o.prototype.validateArfxFiles=function(p){if(p.size===0)return true;if(p.size!==c("MediaEffectARStudioEffectArfxFileTypes").length)return false;return c("MediaEffectARStudioEffectArfxFileTypes").every(function(q){return p.some(function(r){return r.name.endsWith(q)})})};function o(){j.apply(this,arguments)}f.exports=new o(c("MediaEffectFrameEditorDispatcher"))}),null);
__d("MediaEffectMaskPreviewContainer.react",["FluxContainer","MediaEffectMaskPreview.react","MediaEffectMaskUploadDataStore","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("MediaEffectMaskUploadDataStore")]};j.calculateState=function(k){var l=c("MediaEffectMaskUploadDataStore").getState();return{cameraIconSrc:l.get("effectThumbnailSrc")}};j.prototype.render=function(){var k=this.state.cameraIconSrc;return c("React").createElement(c("MediaEffectMaskPreview.react"),{cameraIconSrc:k,showTitles:this.props.showTitles})};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("MediaEffectMetadataReviewItem.react",["cx","MediaEffectCard.react","React"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;function k(l){j.constructor.call(this,l)}k.prototype.render=function(){return c("React").createElement(c("MediaEffectCard.react"),{className:this.props.className?this.props.className:"_3vkg",title:this.props.title},this.props.children)};f.exports=k}),null);
__d("FXMediaEffectType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FRAME:"frame",GENERIC:"generic",MSQRD_MASK:"msqrd_mask",PARTICLE_EFFECT:"particle_effect",PROFILE_FRAME:"profile_frame",SHADER_FILTER:"shader_filter",STYLE_TRANSFER:"style_transfer",UNDERLAY:"underlay",WATERMARK:"watermark",PROFILE_OVERLAY_MASK_DEPRECATED:"profile_overlay_mask_DEPRECATED",TEST_MEDIA_EFFECT:"test_media_effect",FLT_TEST_MEDIA_EFFECT:"flt_test_media_effect"})}),null);
__d("MediaEffectHubStrings",["fbt","invariant","FXEntMediaEffectStatus","FXMediaEffectType"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=h._("Active"),k=h._("Archived"),l=h._("Inactive"),m=h._("Draft"),n=h._("Scheduled"),o=h._("Ongoing"),p=h._("Frame"),q=h._("Generic Effect"),r=h._("Mask"),s=h._("Reactive Effect"),t=h._("Profile Frame"),u=h._("Filter"),v=h._("Style Effect"),w=h._("Underlay"),x=h._("Rejected"),y=h._("Pending Review"),z=h._("Needs Attention"),A=h._("Completed Schedule"),B=h._("Out of Date"),C={ongoing:o,getTextForEffectType:function D(E){__p&&__p();switch(E){case c("FXMediaEffectType").FRAME:return p;case c("FXMediaEffectType").GENERIC:return q;case c("FXMediaEffectType").MSQRD_MASK:return r;case c("FXMediaEffectType").PARTICLE_EFFECT:return s;case c("FXMediaEffectType").PROFILE_FRAME:return t;case c("FXMediaEffectType").SHADER_FILTER:return u;case c("FXMediaEffectType").STYLE_TRANSFER:return v;case c("FXMediaEffectType").UNDERLAY:return w}return i(false,"Invalid effect type %s",E)},getTextForStatus:function D(E){return this.getTextForMinorStatus(E)||this.getTextForMajorStatus(E)},getTextForMajorStatus:function D(E){switch(E){case c("FXEntMediaEffectStatus").ACTIVE:case c("FXEntMediaEffectStatus").IN_REVIEW:case c("FXEntMediaEffectStatus").NEEDS_ATTENTION:return j;case c("FXEntMediaEffectStatus").INACTIVE:case c("FXEntMediaEffectStatus").COMPLETED:case c("FXEntMediaEffectStatus").DEPRECATED:case c("FXEntMediaEffectStatus").NOT_APPROVED:return l;case c("FXEntMediaEffectStatus").DRAFT:return m;case c("FXEntMediaEffectStatus").ARCHIVED:return k;case c("FXEntMediaEffectStatus").SCHEDULED:return n}return i(false,"Invalid effect major status %s",E)},getTextForMinorStatus:function D(E){switch(E){case c("FXEntMediaEffectStatus").IN_REVIEW:return y;case c("FXEntMediaEffectStatus").NEEDS_ATTENTION:return z;case c("FXEntMediaEffectStatus").COMPLETED:return A;case c("FXEntMediaEffectStatus").DEPRECATED:return B;case c("FXEntMediaEffectStatus").NOT_APPROVED:return x;case c("FXEntMediaEffectStatus").ACTIVE:case c("FXEntMediaEffectStatus").DRAFT:case c("FXEntMediaEffectStatus").SCHEDULED:case c("FXEntMediaEffectStatus").ARCHIVED:case c("FXEntMediaEffectStatus").INACTIVE:return null}return i(false,"Invalid effect minor status %s",E)}};f.exports=C}),null);
__d("MediaEffectLocationStrings",["fbt"],(function a(b,c,d,e,f,g,h){"use strict";var i={geoLocation:function j(k,l){return h._("{open brace}{latitude}, {longitude}{close brace}",[h.param("open brace","("),h.param("latitude",k),h.param("longitude",l),h.param("close brace",")")])}};f.exports=i}),null);
__d("MediaEffectPlaceDescriptionRecord",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("immutable").Record;h=babelHelpers.inherits(k,j({constrain_eligibility:false,name:null,key:null,latitude:null,longitude:null,manual_geo:false,polygons:null,radius:null}));i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("MediaEffectLocationTargetingMap.react",["cx","fbt","AdsTargetingLocationInlineMap.react","AdsTargetingLocationMapRecord","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","GeoCoordinates","immutable","LocationConstants","MediaEffectLocationStrings","MediaEffectPlaceDescriptionRecord","React","Tooltip","XUIButton.react","XUIText.react","emptyFunction","idx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$MediaEffectLocationTargetingMap2=function(){var r,s=this.props.onManualLocationToggled||c("emptyFunction");s(!((r=this.props.location)!=null?r.manual_geo:r))}.bind(this),n}l.prototype.$MediaEffectLocationTargetingMap1=function(m){if(!m||!m.latitude||!m.longitude)return null;var n=m.name||c("MediaEffectLocationStrings").geoLocation(m.latitude,m.longitude).toString();if(m.polygons&&m.polygons.length&&!m.manual_geo)return{latitude:m.latitude,longitude:m.longitude,name:n,polygons:m.polygons};if(m.radius)return{distance_unit:c("LocationConstants").KILOMETER_UNIT,latitude:m.latitude,longitude:m.longitude,name:n,radius:m.radius};return null};l.prototype.render=function(){var m,n,o=this.$MediaEffectLocationTargetingMap1(this.props.location),p=c("immutable").Set().asMutable();if(o){var q=c("AdsTargetingLocationMapRecord").fromGeoLocation(o).set("popup",c("React").createElement(c("XUIText.react"),null,o.name));p.add(q)}var r=p.asImmutable(),s=!((m=this.props.location)!=null?m.manual_geo:m)?{text:i._("Custom"),tooltip:i._("Customize the area where your effect can be discovered.")}:{text:i._("Default"),tooltip:i._("Switch to the default area where your effect can be discovered.")};return c("React").createElement(c("FBOverlayContainer.react"),null,c("React").createElement(c("FBOverlayBase.react"),null,c("React").createElement("div",{className:this.props.className},c("React").createElement(c("AdsTargetingLocationInlineMap.react"),{addLocationMode:c("LocationConstants").INCLUDE,disableCollapseButton:true,enableDropPin:!this.props.disabled&&!this.props.isLoading,excludedLocations:c("immutable").Set(),fitLocations:r,highlightLocations:c("immutable").Set(),locations:r,onAddLocationFromMap:this.props.onLocationSelected||c("emptyFunction"),onCollapseMap:c("emptyFunction"),onPopupMenuItemSelect:c("emptyFunction"),onlyInclusion:true}))),((n=this.props.location)!=null?n.polygons:n)&&!this.props.disabled?c("React").createElement(c("FBOverlayElement.react"),{horizontal:"left",vertical:"top"},c("React").createElement(c("XUIButton.react"),babelHelpers["extends"]({className:"_mvk",label:s.text,onClick:this.$MediaEffectLocationTargetingMap2,type:"button"},c("Tooltip").propsFor(s.tooltip)))):null)};f.exports=l}),null);
__d("MediaEffectReviewMetadataSection.react",["cx","fbt","AdsTargetingAggregatedMap.react","AdsTargetingLocationMapRecord","FBCollapsibleList.react","LocationConstants","MediaEffectFlowType","MediaEffectHubStrings","MediaEffectLocationTargetingMap.react","React","SUIMediaEffectTheme","SUIText.react","SUIThemeContainer.react","XUIText.react","formatDate","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("FBCollapsibleList.react").Delimiters,m=200;function n(p){var q=c("joinClasses")(p.className,"_1d1k");return c("React").createElement("div",{className:q},c("React").createElement("div",{className:"_1d1h"},c("React").createElement(c("XUIText.react"),{weight:"bold"},p.title)),p.children)}j=babelHelpers.inherits(o,c("React").PureComponent);k=j&&j.prototype;function o(p){k.constructor.call(this,p)}o.prototype.getNone=function(){return i._("None")};o.prototype.getDateString=function(){var p=this.props,q=p.startTime,r=p.endTime,s=null;if(!q)s=c("MediaEffectHubStrings").ongoing;else s=i._("{start date} \u2014 {end date}",[i.param("start date",c("formatDate")(q,"M j, Y")),i.param("end date",!r?c("MediaEffectHubStrings").ongoing:c("formatDate")(r,"M j, Y"))]);return s};o.prototype.getLocation=function(){var p;return this.props.location?c("React").createElement(c("MediaEffectLocationTargetingMap.react"),{className:"_10ev",disabled:true,location:this.props.location}):this.props.placeDescription?c("React").createElement(c("AdsTargetingAggregatedMap.react"),{height:m,locationRecords:c("AdsTargetingLocationMapRecord").fromGeoLocations((p={},p[c("LocationConstants").CUSTOM_LOCATIONS]=[this.props.placeDescription],p))}):c("React").createElement(c("XUIText.react"),null,i._("Any location"))};o.prototype.getKeywords=function(){var p=c("React").createElement(c("FBCollapsibleList.react"),{delimiter:l.COMMA,display:"inline",numVisible:3,showLessLink:true},this.props.tags.length>0?this.props.tags.map(function(q,r){return c("React").createElement(c("XUIText.react"),{key:r},q.title)}):[c("React").createElement(c("XUIText.react"),{key:"none"},this.getNone())]);return p};o.prototype.render=function(){__p&&__p();var p=this.getDateString(),q=c("React").createElement(n,{title:i._("Location")},this.getLocation());if(this.props.flowType===c("MediaEffectFlowType").MASK&&!this.props.canThirdPartyMaskLocation)q=null;var r=null;if(this.props.flowType===c("MediaEffectFlowType").MASK){var s=this.props.arfxFiles.map(function(u,v){return c("React").createElement("div",{key:v+1},c("React").createElement(c("SUIText.react"),{display:"truncate"},u.name))}),t=this.props.projectFile;if(t)s.unshift(c("React").createElement("div",{key:0},c("React").createElement(c("SUIText.react"),{display:"truncate"},t.name)));r=c("React").createElement(c("SUIThemeContainer.react"),{theme:c("SUIMediaEffectTheme")},c("React").createElement(n,{className:"_hyk",title:i._("Files Uploaded")},s))}return c("React").createElement("div",{className:"_1d1l"},c("React").createElement("div",{className:"_1d1m"},c("React").createElement(n,{title:i._("Schedule")},c("React").createElement(c("XUIText.react"),{display:"block"},p||this.getNone())),q,r,c("React").createElement(n,{title:i._("Keywords")},this.getKeywords())))};f.exports=o}),null);
__d("MediaEffectReviewMaskContainer.react",["cx","fbt","ImageCore.react","MediaEffectMetadataReviewItem.react","MediaEffectReviewMetadataSection.react","React","XUICard.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("MediaEffectReviewMetadataSection.react"));k=j&&j.prototype;function l(m){k.constructor.call(this,m)}l.prototype.$MediaEffectReviewMaskContainer1=function(m,n){var o=arguments.length<=2||arguments[2]===undefined?"":arguments[2];return c("React").createElement(c("MediaEffectMetadataReviewItem.react"),{className:o,title:m},n)};l.prototype.$MediaEffectReviewMaskContainer2=function(m,n){return this.$MediaEffectReviewMaskContainer1(m,c("React").createElement(c("XUIText.react"),{display:"block"},n))};l.prototype.$MediaEffectReviewMaskContainer3=function(m,n){return this.$MediaEffectReviewMaskContainer1(m,c("React").createElement(c("XUIText.react"),{display:"block"},n))};l.prototype.$MediaEffectReviewMaskContainer4=function(){var m=this.props.arfxFiles.map(function(n){return n.name}).sort(function(n,o){return n>o?1:n<o?-1:0});if(this.props.projectFile)m.unshift(this.props.projectFile.name);return c("React").createElement("div",null,m.map(function(n,o){return c("React").createElement(c("XUIText.react"),{display:"block",key:o},n)}))};l.prototype.$MediaEffectReviewMaskContainer5=function(m){var n=this.props.app,o=c("React").createElement(c("XUIText.react"),{display:"block"},this.getNone()),p="";if(n){o=[c("React").createElement(c("ImageCore.react"),{className:"_5hh3",key:"app_img",src:n.src}),c("React").createElement(c("XUIText.react"),{className:"_3ax0",display:"inline",key:"app_name"},n.name)];p="_3ax1"}return this.$MediaEffectReviewMaskContainer1(m,o,p)};l.prototype.render=function(){return c("React").createElement("div",{className:"_2041 _190n"},c("React").createElement(c("XUIText.react"),{className:"_38wf",display:"block"},i._("Effect summary")),c("React").createElement(c("XUICard.react"),{className:"_2o1j"},this.$MediaEffectReviewMaskContainer3(i._("Name"),this.props.frameName),c("React").createElement("div",{className:"_204i"}),this.$MediaEffectReviewMaskContainer3(i._("Description"),this.props.description),this.$MediaEffectReviewMaskContainer1(i._("Effect file"),this.$MediaEffectReviewMaskContainer4()),c("React").createElement("div",{className:"_204i"}),this.$MediaEffectReviewMaskContainer5(i._("Connected app")),this.$MediaEffectReviewMaskContainer1(i._("Location"),this.getLocation()),this.$MediaEffectReviewMaskContainer2(i._("Schedule"),this.getDateString()||this.getNone()),c("React").createElement("div",{className:"_204i"}),this.$MediaEffectReviewMaskContainer1(i._("Keywords"),this.getKeywords())))};f.exports=l}),null);
__d("MediaEffectFrameCreationReviewContainer.react",["cx","FluxContainer","MediaEffectFlowType","MediaEffectFrameCreateDialogDataStore","MediaEffectFrameCreationReview.react","MediaEffectFrameEditorDispatcher","MediaEffectFullscreenFrameEditorSizingUtils","MediaEffectMaskPreviewContainer.react","MediaEffectMaskUploadDataStore","MediaEffectMetadataStore","MediaEffectMetadataViewStore","MediaEffectReviewMaskContainer.react","React","mediaEffectGKCheck"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.getStores=function(){return[c("MediaEffectMetadataStore"),c("MediaEffectMetadataViewStore"),c("MediaEffectFrameCreateDialogDataStore"),c("MediaEffectMaskUploadDataStore")]};k.calculateState=function(){var l=c("MediaEffectMetadataStore").getState(),m=l.get("selectedOwnerID"),n=c("MediaEffectFrameCreateDialogDataStore").getState(),o=n.screenWidth,p=n.dialogHeight,q=c("MediaEffectFullscreenFrameEditorSizingUtils").getDialogWidth(o,p),r=c("MediaEffectMaskUploadDataStore").getState();return{name:l.get("name"),effectDescription:r.get("effectDescription"),selectedOwner:c("MediaEffectMetadataViewStore").getOwner(m),tags:l.get("tags"),startTime:l.startTime,endTime:l.endTime,location:l.location,placeDescription:l.placeDescription,dialogWidth:q,dialogHeight:p,arfxFiles:r.get("arfxFiles").toArray(),projectFile:r.get("projectFile"),effectThumbnailFile:r.get("effectThumbnailFile"),thumbnailSrc:r.get("effectThumbnailSrc"),selectedAppID:l.get("connectAppID")}};function k(l){j.constructor.call(this,l)}k.prototype.componentWillMount=function(){c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};k.prototype.render=function(){if(this.props.flowType===c("MediaEffectFlowType").MASK&&c("mediaEffectGKCheck")("media_effects_upload_form_arexport")){var l=this.props.appsData.filter(function(m){return m.id===this.state.selectedAppID}.bind(this))[0];return c("React").createElement("div",{className:"_2i5k"},c("React").createElement("div",{className:"_2i5l"},c("React").createElement(c("MediaEffectReviewMaskContainer.react"),{app:l,arfxFiles:this.state.arfxFiles,canThirdPartyMaskLocation:this.props.canThirdPartyMaskLocation,description:this.state.effectDescription,dialogHeight:this.state.dialogHeight,dialogWidth:this.state.dialogWidth,effectThumbnailFile:this.state.effectThumbnailFile,endTime:this.state.endTime,flowType:this.props.flowType,frameName:this.state.name,location:this.state.location,owner:this.state.selectedOwner,placeDescription:this.state.placeDescription,projectFile:this.state.projectFile,startTime:this.state.startTime,tags:this.state.tags,thumbnailImageSrc:this.state.thumbnailSrc})),c("React").createElement(c("MediaEffectMaskPreviewContainer.react"),{showTitles:true}))}else return c("React").createElement(c("MediaEffectFrameCreationReview.react"),{arfxFiles:this.state.arfxFiles,canThirdPartyMaskLocation:this.props.canThirdPartyMaskLocation,dialogHeight:this.state.dialogHeight,dialogWidth:this.state.dialogWidth,effectThumbnailFile:this.state.effectThumbnailFile,endTime:this.state.endTime,flowType:this.props.flowType,frameName:this.state.name,location:this.state.location,owner:this.state.selectedOwner,placeDescription:this.state.placeDescription,projectFile:this.state.projectFile,startTime:this.state.startTime,tags:this.state.tags,thumbnailImageSrc:this.state.thumbnailSrc})};f.exports=c("FluxContainer").create(k,{withProps:true})}),null);
__d("MediaEffectFrameCreationStepsConfig",["fbt","invariant","immutable","MediaEffectEditingStep.react","MediaEffectFlowType","MediaEffectFrameCreationReviewContainer.react","MediaEffectMaskFileUploadStep.react","MediaEffectTargetingStep.react","MediaEffectTemplateColorStepContainer.react","MediaEffectTemplateNewColorStepContainer.react","MediaEffectTemplateVariationStepContainer.react","keyMirror","mediaEffectGKCheck"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("keyMirror")({NONE:"",COLORS:"",EDITING:"",MASK_UPLOAD:"",NEW_COLORS:"",TARGETING:"",REVIEW:"",VARIATIONS:""}),m=(j={},j[c("MediaEffectFlowType").BASIC_HUB]=[l.EDITING,l.TARGETING,l.REVIEW],j[c("MediaEffectFlowType").INTERNAL_TOOL]=[l.TARGETING],j[c("MediaEffectFlowType").MASK]=[l.MASK_UPLOAD,l.TARGETING,l.REVIEW],j[c("MediaEffectFlowType").TEMPLATE]=c("mediaEffectGKCheck")("media_effect_frame_editor_template_variations")?[l.EDITING,l.COLORS,l.NEW_COLORS,l.VARIATIONS,l.TARGETING,l.REVIEW]:[l.EDITING,l.TARGETING,l.REVIEW],j[c("MediaEffectFlowType").EVENT]=[l.EDITING,l.REVIEW],j[c("MediaEffectFlowType").BIRTHDAY]=[l.EDITING,l.REVIEW],j[c("MediaEffectFlowType").LIVE_TEMPLATE]=[l.EDITING],j[c("MediaEffectFlowType").INSTAGRAM_STICKER]=[l.EDITING,l.TARGETING,l.REVIEW],j),n=(k={},k[l.EDITING]={component:c("MediaEffectEditingStep.react"),label:h._("Design")},k[l.COLORS]={component:c("MediaEffectTemplateColorStepContainer.react"),label:h._("Source Palette")},k[l.NEW_COLORS]={component:c("MediaEffectTemplateNewColorStepContainer.react"),label:h._("Destination Palette")},k[l.VARIATIONS]={component:c("MediaEffectTemplateVariationStepContainer.react"),label:h._("Variations")},k[l.MASK_UPLOAD]={component:c("MediaEffectMaskFileUploadStep.react"),label:h._("Upload")},k[l.TARGETING]={component:c("MediaEffectTargetingStep.react"),label:h._("Details")},k[l.REVIEW]={component:c("MediaEffectFrameCreationReviewContainer.react"),label:h._("Review")},k);function o(r,s){var t=q(r).indexOf(s);t>=0||i(0);return t}function p(r,s){if(s>=0)return q(r).get(s);return l.NONE}function q(r){return c("immutable").List(m[r])}f.exports={ComponentConfigs:n,CreationSteps:l,getStepIndex:o,getSteps:q,StepsConfigs:m,getStep:p}}),null);
__d("MediaEffectReviewPreviewSection.react",["cx","MediaEffectFramePhonePreviewContainer.react","MediaEffectFullscreenFrameEditorSizingUtils","MediaEffectOwnerByline.react","MediaEffectQEUtils","MediaEffectReactFrameEditorPreviewCanvasContainer.react","React","XUIText.react"],(function a(b,c,d,e,f,g,h){"use strict";var i=function i(j){var k=c("MediaEffectFullscreenFrameEditorSizingUtils").getSquareReviewPreviewWidth(j.dialogWidth,j.dialogHeight),l=16*k/9;return c("React").createElement("div",{className:"_2pio",style:{position:"relative"}},c("React").createElement("div",{style:{position:"absolute",width:"100%",height:"100%"}},c("React").createElement("div",{className:"_1ouw"},c("React").createElement(c("XUIText.react"),{className:"_1d1g",title:j.frameName},j.frameName)),j.owner?c("React").createElement(c("MediaEffectOwnerByline.react"),{owner:j.owner}):null),c("React").createElement("div",{className:"_3s-9"},c("React").createElement("div",{className:"_5gzu _fh0 _3-98"},c("React").createElement(c("MediaEffectReactFrameEditorPreviewCanvasContainer.react"),{previewHeight:k,previewWidth:k})),c("React").createElement("div",{className:"_fh0"},c("React").createElement(c("MediaEffectFramePhonePreviewContainer.react"),{previewHeight:k,previewWidth:l})),c("React").createElement("div",{className:"_fh0"},c("React").createElement(c("MediaEffectFramePhonePreviewContainer.react"),{previewHeight:l,previewWidth:k}))))};f.exports=i}),null);
__d("MediaEffectReviewMaskPreviewSection.react",["cx","Image.react","MediaEffectSquircleImage.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.getSquircleIcon=function(){var l=this.props.thumbnailImageSrc;if(!l)return null;return c("React").createElement(c("MediaEffectSquircleImage.react"),{className:"_4bmc _3-92",height:72,src:l,width:72})};k.prototype.getOwnerBlock=function(){var l=this.props.owner;if(!l)return null;return c("React").createElement("div",null,c("React").createElement(c("Image.react"),{className:"_4bmc _3-90",src:l.src}),l.name)};k.prototype.render=function(){return c("React").createElement("div",{className:"_4bmd"},c("React").createElement("div",null,this.getSquircleIcon(),c("React").createElement("div",{className:"_4bme"},c("React").createElement("span",{className:"_4bmf"},this.props.frameName),this.getOwnerBlock())))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MediaEffectReviewStepConfig",["MediaEffectFlowType","MediaEffectReviewMaskPreviewSection.react","MediaEffectReviewMetadataSection.react","MediaEffectReviewPreviewSection.react"],(function a(b,c,d,e,f,g){"use strict";var h,i=(h={},h[c("MediaEffectFlowType").BASIC_HUB]=[c("MediaEffectReviewPreviewSection.react"),c("MediaEffectReviewMetadataSection.react")],h[c("MediaEffectFlowType").TEMPLATE]=[c("MediaEffectReviewPreviewSection.react"),c("MediaEffectReviewMetadataSection.react")],h[c("MediaEffectFlowType").EVENT]=[c("MediaEffectReviewPreviewSection.react")],h[c("MediaEffectFlowType").BIRTHDAY]=[c("MediaEffectReviewPreviewSection.react")],h[c("MediaEffectFlowType").MASK]=[c("MediaEffectReviewMaskPreviewSection.react"),c("MediaEffectReviewMetadataSection.react")],h[c("MediaEffectFlowType").INSTAGRAM_STICKER]=[c("MediaEffectReviewPreviewSection.react"),c("MediaEffectReviewMetadataSection.react")],h);f.exports=i}),null);
__d("MediaEffectTargetingFramePreview.react",["cx","fbt","MediaEffectQEUtils","MediaEffectReactFrameEditorPreviewContainer.react","React","Vector","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;l.prototype.render=function(){return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{className:"_38wf",display:"block"},i._("Preview")),c("React").createElement(c("MediaEffectReactFrameEditorPreviewContainer.react"),{previewScale:.3,previewSize:new(c("Vector"))(400,625)}),c("React").createElement("div",{className:"_3-8x"},c("React").createElement(c("MediaEffectReactFrameEditorPreviewContainer.react"),{previewScale:.3,previewSize:new(c("Vector"))(400,400)})),c("React").createElement("div",{className:"_3-8x"},c("React").createElement(c("MediaEffectReactFrameEditorPreviewContainer.react"),{previewScale:.3,previewSize:new(c("Vector"))(625,400)})))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("MediaEffectTargetingStep.react",["cx","MediaEffectFlowType","MediaEffectMaskPreviewContainer.react","MediaEffectMetadataContainer.react","MediaEffectTargetingFramePreview.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.context,n=l.bootstrapData,o=l.flowType;return c("React").createElement("div",{className:"_2i5k"},c("React").createElement("div",{className:"_2i5l"},c("React").createElement(c("MediaEffectMetadataContainer.react"),{bootstrapData:n,canThirdPartyUpdateThumbnail:false,context:{allowLocationFrameCreation:m.allowLocationFrameCreation,explainFBOnly:m.explainFBOnly,includesFBOnly:m.includesFBOnly,canThirdPartyMaskLocation:m.canThirdPartyMaskLocation},flowType:this.props.flowType})),o===c("MediaEffectFlowType").MASK?c("React").createElement(c("MediaEffectMaskPreviewContainer.react"),{showTitles:true}):c("React").createElement(c("MediaEffectTargetingFramePreview.react"),null))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MediaEffectEventDataDispatcher",["GraphAPI","MediaEffectFrameEditorDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h={loadEventData:function i(j){c("GraphAPI")("2.5").object("eventID",j).get({fields:"name, place{name, location{city}}, start_time, end_time"}).then(function(k){c("MediaEffectFrameEditorDispatcher").dispatch({type:"event/getSuccess",event:k})}).done()}};f.exports=h}),null);
__d("MediaEffectEventDataStore",["FluxLoadObjectStore","MediaEffectEventDataDispatcher","MediaEffectFrameEditorDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxLoadObjectStore"));i=h&&h.prototype;j.prototype.reduce=function(k,l){switch(l.type){case"event/getSuccess":return this.__handleOne(k,l.event.id,babelHelpers["extends"]({},l.event));default:return k}};j.prototype.__load=function(k){c("MediaEffectEventDataDispatcher").loadEventData(k)};function j(){h.apply(this,arguments)}f.exports=new j(c("MediaEffectFrameEditorDispatcher"))}),null);
__d("MediaEffectEventOwnerTile.react",["ix","cx","fbt","Image.react","ProfileTile.react","React","XUIText.react","fbglyph","formatDate","parseISODate"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").PureComponent);l=k&&k.prototype;m.prototype.$MediaEffectEventOwnerTile1=function(n,o){var p="";if(n)p+=c("formatDate")(c("parseISODate")(n),"D M j");if(o)p+=" - "+c("formatDate")(c("parseISODate")(o),"D M j");return p};m.prototype.$MediaEffectEventOwnerTile2=function(n){var o="";if(n){o+=n.name;if(n.location)o+=", "+n.location.city}return o};m.prototype.render=function(){var n=this.props.event,o=n.start_time,p=n.end_time,q=n.place,r=n.name,s=n.id,t=this.$MediaEffectEventOwnerTile1(o,p),u=this.$MediaEffectEventOwnerTile2(q),v=c("React").createElement(c("Image.react"),{src:h("117711")});if(this.props.style==="byline")return c("React").createElement("div",{className:"_5zsm"},c("React").createElement("div",{className:"_3rd0"},v),c("React").createElement("div",{className:"_5zsn"},c("React").createElement(c("XUIText.react"),{weight:"bold"},j._("Event:")),c("React").createElement(c("XUIText.react"),{className:"_3-99"},j._("{date range}",[j.param("date range",t)]),t!==""&&u!==""?", ":null,j._("{location}",[j.param("location",u)]))));return c("React").createElement(c("ProfileTile.react"),{desc:c("React").createElement(c("XUIText.react"),{size:"meta1"},j._("{date range}",[j.param("date range",t)]),t!==""&&u!==""?", ":null,j._("{location}",[j.param("location",u)])),id:s,imageProps:{src:h("114508"),className:"_3ykz"},name:r,tileProps:{className:"_3yk-",target:"_blank"},titleProps:{className:"_3yk_"}})};function m(){k.apply(this,arguments)}f.exports=m}),null);
__d("MediaEffectEventOwnerBylineTileContainer.react",["FluxContainer","LoadingIndicator.react","MediaEffectEventDataStore","MediaEffectEventOwnerTile.react","MediaEffectFrameEditorDispatcher","MediaEffectMetadataStore","React","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("MediaEffectEventDataStore"),c("MediaEffectMetadataStore")]};j.calculateState=function(){var k=c("MediaEffectMetadataStore").getState().selectedOwnerID;if(k)return{event:c("MediaEffectEventDataStore").get(k)};return{}};j.prototype.componentWillMount=function(){c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(j.getStores())};j.prototype.render=function(){var event=this.state.event;return event&&event.hasValue()?c("React").createElement(c("MediaEffectEventOwnerTile.react"),{event:c("nullthrows")(this.state.event).getValueEnforcing(),style:"byline"}):c("React").createElement(c("LoadingIndicator.react"),{color:"white",size:"medium"})};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("MediaEffectReactFrameEditorScalarSizeRecord",["immutable"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").Record;h=babelHelpers.inherits(k,j({canvas_size_percentage:50,pixels:0}));i=h&&h.prototype;k.canonical=function(l,m,n){return new k({canvas_size_percentage:100*m/l})};k.prototype.toAbsolute=function(l){return this.canvas_size_percentage/100*l+this.pixels};function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("MediaEffectReactFrameEditorSize",["immutable","MediaEffectReactFrameEditorScalarSizeRecord","Vector"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l,m,n,o,p,q,r=c("immutable").Record;h=babelHelpers.inherits(s,r({width:null,height:null}));i=h&&h.prototype;s.canonical=function(x,y){return new s({width:c("MediaEffectReactFrameEditorScalarSizeRecord").canonical(y.x,x.w(),x.w()/2+x.l),height:c("MediaEffectReactFrameEditorScalarSizeRecord").canonical(y.y,x.h(),x.h()/2+x.t)})};s.prototype.isValid=function(){return Boolean(this.width&&this.height)};s.prototype.toAbsolute=function(x){return new(c("Vector"))(this.width.toAbsolute(x.x),this.height.toAbsolute(x.y))};function s(){h.apply(this,arguments)}j=babelHelpers.inherits(t,r({width:null,aspect_ratio:null}));k=j&&j.prototype;t.canonical=function(x,y){return new t({width:c("MediaEffectReactFrameEditorScalarSizeRecord").canonical(y.x,x.w(),x.w()/2+x.l),aspect_ratio:x.w()/x.h()})};t.prototype.isValid=function(){return Boolean(this.width&&this.aspect_ratio&&this.aspect_ratio>0)};t.prototype.toAbsolute=function(x){var y=this.width.toAbsolute(x.x);return new(c("Vector"))(y,y/this.aspect_ratio)};t.prototype.getDerivedAspectRatio=function(){return this.aspect_ratio};t.prototype.getDerivedWidth=function(){return this.width};t.prototype.getDerivedHeight=function(){return new(c("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:this.width.canvas_size_percentage/this.getDerivedAspectRatio()})};t.prototype.getScaledWithWidth=function(){return this};t.prototype.getNotScaledWithWidth=function(){return new w({width:this.getDerivedWidth(),height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()})};t.prototype.getScaledWithHeight=function(){return new v({width:this.getDerivedWidth(),height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()})};t.prototype.getNotScaledWithHeight=function(){return this};function t(){j.apply(this,arguments)}l=babelHelpers.inherits(u,r({height:null,aspect_ratio:null}));m=l&&l.prototype;u.canonical=function(x,y){return new s({height:c("MediaEffectReactFrameEditorScalarSizeRecord").canonical(y.y,x.h(),x.h()/2+x.t),aspect_ratio:x.w()/x.h()})};u.prototype.isValid=function(){return Boolean(this.height&&this.aspect_ratio&&this.aspect_ratio>0)};u.prototype.toAbsolute=function(x){var y=this.height.toAbsolute(x.y);return new(c("Vector"))(y*this.aspect_ratio,y)};u.prototype.getDerivedAspectRatio=function(){return this.aspect_ratio};u.prototype.getDerivedWidth=function(){return new(c("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:this.height.canvas_size_percentage*this.getDerivedAspectRatio()})};u.prototype.getDerivedHeight=function(){return this.height};u.prototype.getScaledWithWidth=function(){return new v({width:this.getDerivedWidth(),height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()})};u.prototype.getNotScaledWithWidth=function(){return this};u.prototype.getScaledWithHeight=function(){return this};u.prototype.getNotScaledWithHeight=function(){return new w({width:this.getDerivedWidth(),height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()})};function u(){l.apply(this,arguments)}n=babelHelpers.inherits(v,r({width:null,height:null,aspect_ratio:null}));o=n&&n.prototype;v.canonical=function(x,y){return new s({width:c("MediaEffectReactFrameEditorScalarSizeRecord").canonical(y.x,x.w(),x.w()/2+x.l),height:c("MediaEffectReactFrameEditorScalarSizeRecord").canonical(y.y,x.h(),x.h()/2+x.t),aspect_ratio:x.w()/x.h()})};v.prototype.isValid=function(){return Boolean(this.width&&this.height&&this.aspect_ratio&&this.aspect_ratio>0)};v.prototype.toAbsolute=function(x){var y=this.width.toAbsolute(x.x),z=this.height.toAbsolute(x.y),A=Math.min(y,z*this.aspect_ratio),B=Math.min(z,y/this.aspect_ratio);return new(c("Vector"))(A,B)};v.prototype.getDerivedAspectRatio=function(){return this.aspect_ratio};v.prototype.getDerivedWidth=function(){return this.width};v.prototype.getDerivedHeight=function(){return this.height};v.prototype.getScaledWithWidth=function(){return this};v.prototype.getNotScaledWithWidth=function(){return new u({height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()})};v.prototype.getScaledWithHeight=function(){return this};v.prototype.getNotScaledWithHeight=function(){return new t({width:this.getDerivedWidth(),aspect_ratio:this.getDerivedAspectRatio()})};function v(){n.apply(this,arguments)}p=babelHelpers.inherits(w,r({width:null,height:null,aspect_ratio:null}));q=p&&p.prototype;w.canonical=function(x,y){return new s({width:c("MediaEffectReactFrameEditorScalarSizeRecord").canonical(y.x,x.w(),x.w()/2+x.l),height:c("MediaEffectReactFrameEditorScalarSizeRecord").canonical(y.y,x.h(),x.h()/2+x.t),aspect_ratio:x.w()/x.h()})};w.prototype.isValid=function(){return Boolean(this.width&&this.height&&this.aspect_ratio&&this.aspect_ratio>0)};w.prototype.toAbsolute=function(x){var y=this.width.toAbsolute(x.x),z=this.height.toAbsolute(x.y),A=Math.max(y,z*this.aspect_ratio),B=Math.max(z,y/this.aspect_ratio);return new(c("Vector"))(A,B)};w.prototype.getDerivedAspectRatio=function(){return this.aspect_ratio};w.prototype.getDerivedWidth=function(){return this.width};w.prototype.getDerivedHeight=function(){return this.height};w.prototype.getScaledWithWidth=function(){return new t({width:this.getDerivedWidth(),aspect_ratio:this.getDerivedAspectRatio()})};w.prototype.getNotScaledWithWidth=function(){return this};w.prototype.getScaledWithHeight=function(){return new u({height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()})};w.prototype.getNotScaledWithHeight=function(){return this};function w(){p.apply(this,arguments)}f.exports={Stretch:s,ScaleWidth:t,ScaleHeight:u,Fit:v,Fill:w}}),null);
__d("MediaEffectEditorAsset",["fbt","MediaEffectEditorFunnelLogger","MediaEffectMetadataActionCreators","MediaEffectReactFrameEditorSize","SimpleXUIDialog"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(j,k){this.updateAsset(j,k)}i.prototype.getProps=function(){return{assetID:this.$MediaEffectEditorAsset1,assetData:this.$MediaEffectEditorAsset2}};i.prototype.updateAsset=function(j,k){if(j!==this.$MediaEffectEditorAsset1||k!==this.$MediaEffectEditorAsset2){this.$MediaEffectEditorAsset1=j;this.$MediaEffectEditorAsset2=k}};i.prototype.isScalingWithWidth=function(){if(!this.$MediaEffectEditorAsset2)return false;if(this.isTextAsset())return false;var j=this.$MediaEffectEditorAsset2.assetSize;if(!j)return true;return j instanceof c("MediaEffectReactFrameEditorSize").Fit||j instanceof c("MediaEffectReactFrameEditorSize").ScaleWidth};i.prototype.isScalingWithHeight=function(){if(!this.$MediaEffectEditorAsset2)return false;if(this.isTextAsset())return true;var j=this.$MediaEffectEditorAsset2.assetSize;if(!j)return true;return j instanceof c("MediaEffectReactFrameEditorSize").Fit||j instanceof c("MediaEffectReactFrameEditorSize").ScaleHeight};i.prototype.toggleScaleWithWidth=function(){if(!this.$MediaEffectEditorAsset2)return;var j=this.$MediaEffectEditorAsset2.assetSize;if(!j)return;var k=this.isScalingWithWidth()?j.getNotScaledWithWidth():j.getScaledWithWidth();if(k===j)return;c("MediaEffectMetadataActionCreators").updateAssetSize(this.$MediaEffectEditorAsset1,k)};i.prototype.toggleScaleWithHeight=function(){if(!this.$MediaEffectEditorAsset2)return;var j=this.$MediaEffectEditorAsset2.assetSize;if(!j)return;var k=this.isScalingWithHeight()?j.getNotScaledWithHeight():j.getScaledWithHeight();if(k===j)return;c("MediaEffectMetadataActionCreators").updateAssetSize(this.$MediaEffectEditorAsset1,k)};i.prototype.isTextAsset=function(){return this.$MediaEffectEditorAsset2&&this.$MediaEffectEditorAsset2.assetType()==="MediaEffectReactFrameEditorTextAssetRecord"};i.prototype.$MediaEffectEditorAsset3=function(){c("MediaEffectMetadataActionCreators").raiseAsset(this.$MediaEffectEditorAsset1)};i.prototype.$MediaEffectEditorAsset4=function(){c("MediaEffectMetadataActionCreators").raiseAsset(this.$MediaEffectEditorAsset1,true)};i.prototype.$MediaEffectEditorAsset5=function(){c("MediaEffectMetadataActionCreators").lowerAsset(this.$MediaEffectEditorAsset1)};i.prototype.$MediaEffectEditorAsset6=function(){c("MediaEffectMetadataActionCreators").lowerAsset(this.$MediaEffectEditorAsset1,true)};i.prototype.$MediaEffectEditorAsset7=function(j){j.target.files[0]&&c("MediaEffectMetadataActionCreators").replaceImage(this.$MediaEffectEditorAsset1,j.target.files[0])};i.prototype.$MediaEffectEditorAsset8=function(){c("MediaEffectMetadataActionCreators").duplicateAsset(this.$MediaEffectEditorAsset1)};i.prototype.$MediaEffectEditorAsset9=function(){if(!this.isTextAsset()){this.toggleScaleWithWidth();c("MediaEffectEditorFunnelLogger").logSetScaleWithWidth((!this.isScalingWithWidth()).toString())}};i.prototype.$MediaEffectEditorAsset10=function(){if(!this.isTextAsset()){this.toggleScaleWithHeight();c("MediaEffectEditorFunnelLogger").logSetScaleWithHeight((!this.isScalingWithHeight()).toString())}};i.prototype.$MediaEffectEditorAsset11=function(){c("SimpleXUIDialog").showConfirm(this.isTextAsset()?h._("Are you sure you want to delete this text?"):h._("Are you sure you want to delete this art?"),null,function(j){return j?c("MediaEffectMetadataActionCreators").deleteAsset(this.$MediaEffectEditorAsset1):null}.bind(this))};f.exports=i}),null);
__d("MediaEffectAssetValidationStore",["FluxMapStore","MediaEffectFrameEditorDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxMapStore"));i=h&&h.prototype;j.prototype.reduce=function(k,l){switch(l.type){case"asset/validate":return k.set(l.stickerFBID,l.result);default:return k}};function j(){h.apply(this,arguments)}f.exports=new j(c("MediaEffectFrameEditorDispatcher"))}),null);
__d("MediaEffectEditorSideMenu.react",["cx","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l,m,n;i=babelHelpers.inherits(o,c("React").PureComponent);j=i&&i.prototype;function o(){var s,t;for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];return t=(s=j.constructor).call.apply(s,[this].concat(v)),this.state={highlightedIndex:null},this.$MediaEffectEditorSideMenu1=function(x){var y=this.props.items[x];if(y&&r(y))this.$MediaEffectEditorSideMenu2(x);else this.$MediaEffectEditorSideMenu2(null)}.bind(this),this.$MediaEffectEditorSideMenu3=function(){this.$MediaEffectEditorSideMenu2(null)}.bind(this),t}o.prototype.$MediaEffectEditorSideMenu2=function(s){this.setState({highlightedIndex:s})};o.prototype.render=function(){var s=this.props;return c("React").createElement("div",{className:"_2qs3"},c("React").createElement("div",{className:"_2qs4"},s.title),c("React").createElement("ul",{className:"_2qs5",onMouseLeave:this.$MediaEffectEditorSideMenu3},s.items.map(function(t,u){switch(t.type){case"item":return c("React").createElement(p,{hidden:t.hidden,index:u,isDisabled:t.isDisabled,isFullSize:t.isFullSize,isHighlighted:u===this.state.highlightedIndex,isNoAction:t.isNoAction,key:u,label:t.label,onClick:t.onClick,onMouseEnter:this.$MediaEffectEditorSideMenu1});case"separator":return c("React").createElement(q,{key:u});default:return null}}.bind(this))))};o.defaultProps={items:[]};k=babelHelpers.inherits(p,c("React").PureComponent);l=k&&k.prototype;function p(){var s,t;for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];return t=(s=l.constructor).call.apply(s,[this].concat(v)),this.$MenuItem1=function(){this.props.onClick(this.props.index)}.bind(this),this.$MenuItem2=function(){this.props.onMouseEnter(this.props.index)}.bind(this),t}p.prototype.render=function(){__p&&__p();if(this.props.hidden)return null;var s=["_2qs6"];if(this.props.isHighlighted&&!this.props.isDisabled&&!this.props.isNoAction)s.push("_2qs8");if(this.props.isDisabled)s.push("_2qs9");if(this.props.isFullSize)s.push("_3kqu");var t=c("joinClasses").apply(null,s);return c("React").createElement("li",{className:t,onClick:this.$MenuItem1,onMouseEnter:this.$MenuItem2,role:"menuitem",style:{cursor:this.props.isDisabled||this.props.isNoAction?"default":"pointer"}},this.props.label)};m=babelHelpers.inherits(q,c("React").PureComponent);n=m&&m.prototype;q.prototype.render=function(){return c("React").createElement("li",{className:"_2qsa"})};function q(){m.apply(this,arguments)}function r(s){return s.type==="item"&&!s.isDisabled&&!s.isNoAction}f.exports=o}),null);
__d("MediaEffectEditorSideMenuContainer.react",["cx","fbt","DOMQuery","FBToggleSwitch.react","FileInput.react","FluxContainer","LeftRight.react","MediaEffectAssetValidationStore","MediaEffectEditorAsset","MediaEffectEditorFunnelLogger","MediaEffectEditorSideMenu.react","MediaEffectFlowType","MediaEffectMetadataActionCreators","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorDataStore","MediaEffectReactFrameEditorImageAssetRecord","MediaEffectReactFrameEditorTextAssetRecord","React","ReactDOM","SimpleXUIDialog","emptyFunction"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$MediaEffectEditorSideMenuContainer1=null,this.$MediaEffectEditorSideMenuContainer2=null,this.$MediaEffectEditorSideMenuContainer3=null,this.$MediaEffectEditorSideMenuContainer4=null,this.$MediaEffectEditorSideMenuContainer5=null,this.$MediaEffectEditorSideMenuContainer6=[],this.$MediaEffectEditorSideMenuContainer7=[],this.$MediaEffectEditorSideMenuContainer8=[],this.$MediaEffectEditorSideMenuContainer9=function(){var r=this.state.currentAsset;if(!r)return;var s=r.getProps(),t=s.assetID;c("MediaEffectMetadataActionCreators").raiseAsset(t)}.bind(this),this.$MediaEffectEditorSideMenuContainer10=function(){var r=this.state.currentAsset;if(!r)return;var s=r.getProps(),t=s.assetID;c("MediaEffectMetadataActionCreators").raiseAsset(t,true)}.bind(this),this.$MediaEffectEditorSideMenuContainer11=function(){var r=this.state.currentAsset;if(!r)return;var s=r.getProps(),t=s.assetID;c("MediaEffectMetadataActionCreators").lowerAsset(t)}.bind(this),this.$MediaEffectEditorSideMenuContainer12=function(){var r=this.state.currentAsset;if(!r)return;var s=r.getProps(),t=s.assetID;c("MediaEffectMetadataActionCreators").lowerAsset(t,true)}.bind(this),this.$MediaEffectEditorSideMenuContainer13=function(r){var s=this.state.currentAsset;if(!s)return;var t=s.getProps(),u=t.assetID;r.target.files[0]&&c("MediaEffectMetadataActionCreators").replaceImage(u,r.target.files[0])}.bind(this),this.$MediaEffectEditorSideMenuContainer14=function(){var r=this.state.currentAsset;if(!r)return;var s=r.getProps(),t=s.assetID;c("MediaEffectMetadataActionCreators").duplicateAsset(t)}.bind(this),this.$MediaEffectEditorSideMenuContainer15=function(){var r=this.state.currentAsset;if(!r)return;if(!r.isTextAsset()){r.toggleScaleWithWidth();c("MediaEffectEditorFunnelLogger").logSetScaleWithWidth((!r.isScalingWithWidth()).toString())}}.bind(this),this.$MediaEffectEditorSideMenuContainer16=function(){var r=this.state.currentAsset;if(!r)return;if(!r.isTextAsset()){r.toggleScaleWithHeight();c("MediaEffectEditorFunnelLogger").logSetScaleWithHeight((!r.isScalingWithHeight()).toString())}}.bind(this),this.$MediaEffectEditorSideMenuContainer17=function(){var r=this.state.currentAsset;if(!r)return;var s=r.getProps(),t=s.assetID;c("SimpleXUIDialog").showConfirm(r.isTextAsset()?i._("Are you sure you want to delete this text?"):i._("Are you sure you want to delete this art?"),null,function(u){return u?c("MediaEffectMetadataActionCreators").deleteAsset(t):null})}.bind(this),this.$MediaEffectEditorSideMenuContainer18=function(){var r=this.state.currentAsset;if(!r)return;var s=r.getProps(),t=s.assetData;if(!(t instanceof c("MediaEffectReactFrameEditorTextAssetRecord")))return;c("MediaEffectMetadataActionCreators").setContentMustBeUpdated(t.localAssetID,!t.contentMustBeUpdated)}.bind(this),n}l.calculateState=function(m){__p&&__p();var n=c("MediaEffectReactFrameEditorCanvasDataStore").getState();if(n.selectedAssets.isEmpty())return{currentAsset:null};var o=c("MediaEffectReactFrameEditorDataStore").getState(),p=o.assets.withMutations(function(s){s.forEach(function(t,u){if(t instanceof c("MediaEffectReactFrameEditorImageAssetRecord")){var v=null;if(t.stickerFBID)v=c("MediaEffectAssetValidationStore").get(t.stickerFBID);var w=t.set("validationResult",v);s.set(u,w)}})}),q=n.selectedAssets.first(),r=p.get(q);if(m&&m.currentAsset&&m.currentAsset.getProps().assetID===q&&m.currentAsset.getProps().assetData===r)return m;return{currentAsset:new(c("MediaEffectEditorAsset"))(q,r)}};l.getStores=function(){return[c("MediaEffectReactFrameEditorDataStore"),c("MediaEffectReactFrameEditorCanvasDataStore"),c("MediaEffectAssetValidationStore")]};l.prototype.render=function(){__p&&__p();var m=this.state.currentAsset;if(!m)return c("React").createElement(c("MediaEffectEditorSideMenu.react"),{items:[],title:i._("No item selected")});var n=m.isTextAsset(),o=[{type:"item",label:i._("Bring forward"),onClick:this.$MediaEffectEditorSideMenuContainer9},{type:"item",label:i._("Bring to front"),onClick:this.$MediaEffectEditorSideMenuContainer10},{type:"item",label:i._("Send backward"),onClick:this.$MediaEffectEditorSideMenuContainer11},{type:"item",label:i._("Send to back"),onClick:this.$MediaEffectEditorSideMenuContainer12},{type:"separator"},{type:"item",isFullSize:true,hidden:n,label:!n&&c("React").createElement(c("FileInput.react"),{accept:"image/x-png, image/jpeg, image/png",containerClassName:"_40-0 _40-1",multiple:false,onChange:this.$MediaEffectEditorSideMenuContainer13},c("React").createElement("a",{style:{color:"inherit",textDecoration:"none"}},i._("Replace Art"))),onClick:c("emptyFunction")},{type:"item",label:i._("Duplicate"),onClick:this.$MediaEffectEditorSideMenuContainer14},{type:"item",label:i._("Delete"),onClick:this.$MediaEffectEditorSideMenuContainer17},{type:"separator"},{type:"item",label:c("React").createElement("div",{className:"_11o1"},c("React").createElement(c("LeftRight.react"),null,i._("Shrink with width"),c("React").createElement(c("FBToggleSwitch.react"),{animate:true,checked:m.isScalingWithWidth(),disabled:n,ref:function(r){return r&&this.$MediaEffectEditorSideMenuContainer6.push(c("DOMQuery").find(c("ReactDOM").findDOMNode(r),"input"))}.bind(this)})),c("React").createElement("div",{className:"_11o2"})),onClick:this.$MediaEffectEditorSideMenuContainer15},{type:"item",label:c("React").createElement("div",{className:"_11o1"},c("React").createElement(c("LeftRight.react"),null,i._("Shrink with height"),c("React").createElement(c("FBToggleSwitch.react"),{animate:true,checked:m.isScalingWithHeight(),disabled:n,ref:function(r){return r&&this.$MediaEffectEditorSideMenuContainer7.push(c("DOMQuery").find(c("ReactDOM").findDOMNode(r),"input"))}.bind(this)})),c("React").createElement("div",{className:"_11o2"})),onClick:this.$MediaEffectEditorSideMenuContainer16}],p=m.getProps(),q=p.assetData;if(this.props.flowType===c("MediaEffectFlowType").TEMPLATE&&n)o.push({type:"item",label:c("React").createElement("div",{className:"_11o1"},c("React").createElement(c("LeftRight.react"),null,i._("Require user to update text"),c("React").createElement(c("FBToggleSwitch.react"),{animate:true,checked:q.contentMustBeUpdated,ref:function(r){return r&&this.$MediaEffectEditorSideMenuContainer8.push(c("DOMQuery").find(c("ReactDOM").findDOMNode(r),"input"))}.bind(this)})),c("React").createElement("div",{className:"_11o2"})),onClick:this.$MediaEffectEditorSideMenuContainer18});return c("React").createElement(c("MediaEffectEditorSideMenu.react"),{items:o,title:i._("Actions")})};f.exports=c("FluxContainer").create(l,{withProps:true})}),null);
__d("MediaEffectFrameEditorBirthdayCelebrationTemplateSelector.react",["ix","cx","Image.react","MediaEffectFrameEditorTemplateGrid.react","React","fbglyph"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector1=function(){this.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector2("Birthdays")}.bind(this);this.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector3=function(){this.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector2("Celebrations")}.bind(this);this.state={selectedCategory:"Birthdays"}}l.prototype.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector2=function(m){this.setState({selectedCategory:m})};l.prototype.render=function(){var m=this.state.selectedCategory==="Birthdays"?this.props.birthdayTemplates:this.props.celebrationTemplates;return c("React").createElement("div",null,c("React").createElement("div",{className:"_3-94"},c("React").createElement("a",{className:"_2w6x _3-fi _hto _htp"+(this.state.selectedCategory==="Birthdays"?" _hts":"")+" _3-fj",href:"#",onClick:this.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector1},c("React").createElement(c("Image.react"),{className:"_3-8x _3-94",src:this.state.selectedCategory==="Birthdays"?h("114499"):h("122508")}),c("React").createElement("div",null,"Birthdays")),c("React").createElement("a",{className:"_2w6x _3-fi _hto _htt"+(this.state.selectedCategory==="Celebrations"?" _hts":"")+" _3-fj",href:"#",onClick:this.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector3},c("React").createElement(c("Image.react"),{className:"_3-8x _3-94",src:this.state.selectedCategory==="Celebrations"?h("114650"):h("122659")}),c("React").createElement("div",null,"Celebrations"))),c("React").createElement(c("MediaEffectFrameEditorTemplateGrid.react"),{activeTemplate:this.props.activeTemplate,templates:m}))};f.exports=l}),null);
__d("MediaEffectFrameEditorDataRecord",["immutable","MediaEffectReactFrameEditorImageAssetRecord"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").Record,k=c("immutable").List,l=c("immutable").Map;h=babelHelpers.inherits(m,j({assets:l(),assetOrder:k(),frameFBID:null,filterID:null,templateFBID:null,containsJPEG:false}));i=h&&h.prototype;m.prototype.withNewAsset=function(n,o){return this.withMutations(function(p){p.set("assets",this.assets.set(n,o)).set("assetOrder",this.assetOrder.push(n))}.bind(this))};m.prototype.withDeletedAsset=function(n){var o=this.assetOrder,p=this.assets,q=o.indexOf(n),r=o.splice(q,1),s=p.remove(n);return this.withMutations(function(t){t.set("assets",s).set("assetOrder",r)})};m.prototype.replaceAsset=function(n,o){return this.set("assets",this.assets.set(n,o))};m.prototype.withAssetMutation=function(n,o){var p=this.assets,q=p.get(n);if(!q)return this;return this.set("assets",p.set(n,q.withMutations(o)))};m.prototype.withTextAssetMutation=function(n,o){var p=this.assets,q=p.get(n);if(!q)return this;if(q instanceof c("MediaEffectReactFrameEditorImageAssetRecord")){if(q.assocTextAsset)q=q.set("assocTextAsset",q.assocTextAsset.withMutations(o))}else q=q.withMutations(o);return this.set("assets",p.set(n,q))};m.prototype.withRaisedAsset=function(n,o){return this.$MediaEffectFrameEditorDataRecord1(n,o,1)};m.prototype.withLoweredAsset=function(n,o){return this.$MediaEffectFrameEditorDataRecord1(n,o,-1)};m.prototype.$MediaEffectFrameEditorDataRecord1=function(n,o,p){__p&&__p();var q=this.assetOrder,r=this.assets,s=r.get(n),t=q.indexOf(n);if(t===(p>0?q.size-1:0))return this;var u=o?p>0?q.size:0:t+p;for(;u<q.size&&u>0;u+=p){var v=r.get(q.get(u));if(s.assetType()===v.assetType())break}var w=q.splice(t,1).splice(u,0,n);return this.set("assetOrder",w)};function m(){h.apply(this,arguments)}f.exports=m}),null);
__d("MediaEffectFrameEditorMultiCategoryTemplateSelector.react",["cx","fbt","MediaEffectFrameEditorTemplateGrid.react","MediaEffectMetadataActionCreators","React","SUIBusinessTheme","SUISelector.react","SUISelectorOption.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$MediaEffectFrameEditorMultiCategoryTemplateSelector2=function(n){if(n===this.state.selectedCategory)return;this.setState({selectedCategory:n});var o=this.$MediaEffectFrameEditorMultiCategoryTemplateSelector1(n);c("MediaEffectMetadataActionCreators").applyTemplate(o?o.first():null)}.bind(this);this.state={selectedCategory:null}}l.prototype.$MediaEffectFrameEditorMultiCategoryTemplateSelector1=function(m){if(!m)return null;return this.props.categories.get(m)};l.prototype.$MediaEffectFrameEditorMultiCategoryTemplateSelector3=function(){return c("React").createElement(c("SUISelector.react"),{canSelectMultiple:false,onChange:this.$MediaEffectFrameEditorMultiCategoryTemplateSelector2,theme:c("SUIBusinessTheme"),value:this.state.selectedCategory,width:184},c("React").createElement(c("SUISelectorOption.react"),{value:null},i._("None")),this.props.categories.keySeq().map(function(m){return c("React").createElement(c("SUISelectorOption.react"),{key:m,value:m},m)}))};l.prototype.$MediaEffectFrameEditorMultiCategoryTemplateSelector4=function(){var m=this.$MediaEffectFrameEditorMultiCategoryTemplateSelector1(this.state.selectedCategory);if(!m)return null;return c("React").createElement(c("MediaEffectFrameEditorTemplateGrid.react"),{activeTemplate:this.props.activeTemplate,showNoTemplate:false,templates:m})};l.prototype.render=function(){return c("React").createElement("div",null,c("React").createElement("div",{className:"_3-96"},this.$MediaEffectFrameEditorMultiCategoryTemplateSelector3()),this.$MediaEffectFrameEditorMultiCategoryTemplateSelector4())};f.exports=l}),null);
__d("WebGLShaderCode",["regeneratorRuntime","immutable","Set"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("immutable").List,i=c("immutable").Set;j.prototype.getDirectDeps=function(){return i()};j.prototype.generateAllCodeFragments=c("regeneratorRuntime").mark(function k(){__p&&__p();var l,m,n,o,p,q,r,s,t,u,v,w;return c("regeneratorRuntime").wrap(function x(y){__p&&__p();while(1)switch(y.prev=y.next){case 0:l=new(c("Set"))();m=this.getCodeFragment();l.add(m);n=this.getDirectDeps(),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 4:if(!o){y.next=10;break}if(!(p>=n.length)){y.next=7;break}return y.abrupt("break",35);case 7:q=n[p++];y.next=14;break;case 10:p=n.next();if(!p.done){y.next=13;break}return y.abrupt("break",35);case 13:q=p.value;case 14:r=q;s=r.generateAllCodeFragments(),t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 16:if(!t){y.next=22;break}if(!(u>=s.length)){y.next=19;break}return y.abrupt("break",33);case 19:v=s[u++];y.next=26;break;case 22:u=s.next();if(!u.done){y.next=25;break}return y.abrupt("break",33);case 25:v=u.value;case 26:w=v;if(l.has(w)){y.next=31;break}y.next=30;return w;case 30:l.add(w);case 31:y.next=16;break;case 33:y.next=4;break;case 35:y.next=37;return m;case 37:case"end":return y.stop()}},k,this)});j.prototype.getAllCodeFragments=function(){return h(this.generateAllCodeFragments())};j.prototype.getCodeFragment=function(){return""};function j(){}f.exports=j}),null);
__d("WebGLShaderLibraryCode",["WebGLShaderCode"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("WebGLShaderCode"));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MediaEffectColorComponentShaderCode",["WebGLShaderLibraryCode"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGLShaderLibraryCode"));i=h&&h.prototype;function j(k){i.constructor.call(this);this.$MediaEffectColorComponentShaderCode1=k||4}j.prototype.getCodeFragment=function(){return"\n    precision mediump float;\n\n    #define MAX_NUM_COMPONENTS "+this.$MediaEffectColorComponentShaderCode1+"\n    // These is not just MAX_NUM_COMPONENTS so we don't have to keep changing\n    // the program all the time. That might be unnecessary though.\n    uniform int u_num_components;\n\n    struct Component\n    {\n      vec3 hsl;\n      vec3 hslwidth;\n    };\n\n    uniform Component u_source[MAX_NUM_COMPONENTS];\n\n    float component_scores[MAX_NUM_COMPONENTS];\n\n    float discreteComponentScore(Component component, vec3 hsl) {\n      float normhuediff = (\n        mod(hsl.x - component.hsl.x + 0.5, 1.0) - 0.5\n      ) / component.hslwidth.x;\n      vec2 normsldiff = (\n        (hsl.yz - component.hsl.yz) / component.hslwidth.yz\n      );\n      vec3 normscore = vec3(\n        (1.0 - abs(normhuediff)) / component.hslwidth.x,\n        (vec2(1.0, 1.0) - abs(normsldiff)) / component.hslwidth.yz\n      );\n      if (!(normscore.x > 0.0 && normscore.x < 1000000.0)) {\n        return -10.0;\n      }\n      if (!(normscore.y > 0.0 && normscore.y < 1000000.0)) {\n        return -10.0;\n      }\n      if (!(normscore.z > 0.0 && normscore.z < 1000000.0)) {\n        return -10.0;\n      }\n      return normscore.x * normscore.y * normscore.z;\n    }\n\n    float lightnessCentrality(float lightness) {\n      return 1.0 - abs(2.0 * lightness - 1.0);\n    }\n\n    float avg(float x, float y) {\n      return (x + y) / 2.0;\n    }\n\n    float getNaturalSaturation(vec3 hsl) {\n      return hsl.y * lightnessCentrality(hsl.z);\n    }\n\n    float getSaturationSignificance(vec3 hsl1, vec3 hsl2) {\n      float saturationSignificance = clamp(\n        avg(\n          lightnessCentrality(hsl1.z),\n          lightnessCentrality(hsl2.z)\n        ),\n        0.01, 1.0\n      );\n      return saturationSignificance;\n    }\n\n    float getHueSignificance(vec3 hsl1, vec3 hsl2) {\n      float sat1 = getNaturalSaturation(hsl1);\n      float sat2 = getNaturalSaturation(hsl2);\n      float saturation = avg(sat1, sat2);\n      float hueSignificance = clamp(\n        saturation,\n        0.01, 1.0\n      );\n      return hueSignificance;\n    }\n\n    float componentScore(Component component, vec3 hsl) {\n      float saturationSignificance = getSaturationSignificance(\n        component.hsl, hsl\n      );\n      float hueSignificance = getHueSignificance(component.hsl, hsl);\n      vec3 width = component.hslwidth + vec3(0.01);\n      width /= vec3(hueSignificance, saturationSignificance, 1.0);\n      float normhuediff = (\n        mod(hsl.x - component.hsl.x + 0.5, 1.0) - 0.5\n      ) / width.x;\n      float normsatdiff = (\n        getNaturalSaturation(hsl) - getNaturalSaturation(component.hsl)\n      ) / width.y;\n      float normlightdiff = (\n        (hsl.z - component.hsl.z) / width.z\n      );\n      vec3 score = max(vec3(\n        (1.0 - abs(normhuediff)),\n        (1.0 - abs(normsatdiff)),\n        (1.0 - abs(normlightdiff))\n      ), vec3(0.0));\n      vec3 normscore = vec3(\n        score.x,\n        score.y,\n        score.z\n      );\n\n      return normscore.x * normscore.y * normscore.z;\n    }\n\n    void computeComponentScores(vec3 hsl) {\n      for (int index = 0; index < MAX_NUM_COMPONENTS; index++) {\n        float score = 0.0;\n        if (index < u_num_components) {\n          score = componentScore(u_source[index], hsl);\n        }\n        component_scores[index] = score;\n      }\n    }\n    "};f.exports=j}),null);
__d("MediaEffectImageIOShaderCode",["WebGLShaderLibraryCode"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("WebGLShaderLibraryCode"));i=h&&h.prototype;j.prototype.getCodeFragment=function(){return"\n    precision mediump float;\n\n    // our texture\n    uniform sampler2D u_image;\n    uniform int u_alpha_premultiplied;\n\n    // the texCoords passed in from the vertex shader.\n    varying vec2 v_texCoord;\n\n    vec4 premultiplyAlpha(vec4 src) {\n      if (u_alpha_premultiplied == 0) {\n        return src;\n      }\n      return vec4(src.rgb * src.a, src.a);\n    }\n\n    vec4 demultiplyAlpha(vec4 src) {\n      if (u_alpha_premultiplied == 0 || src.a == 0.0) {\n        return src;\n      }\n      return vec4(src.rgb / src.a, src.a);\n    }\n\n    vec4 getInputColor() {\n      return demultiplyAlpha(texture2D(u_image, v_texCoord));\n    }\n\n    void setOutputColor(vec4 value) {\n      gl_FragColor = premultiplyAlpha(value);\n    }\n    "};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("WebGLShaderMainCode",["WebGLShaderCode"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("WebGLShaderCode"));i=h&&h.prototype;j.prototype.toString=function(){return this.getAllCodeFragments().join("\n\n")};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("WebGLFragmentShaderCode",["WebGLShaderMainCode"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("WebGLShaderMainCode"));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("WebGLShaderColorTransformCode",["WebGLShaderLibraryCode"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("WebGLShaderLibraryCode"));i=h&&h.prototype;j.prototype.getCodeFragment=function(){return"\n    precision mediump float;\n\n    float e = 1e-10;\n\n    vec3 hue2rgb(float h) {\n      return clamp(\n        vec3(\n          abs(h*6.0 - 3.0) - 1.0,\n          2.0 - abs(h*6.0 - 2.0),\n          2.0 - abs(h*6.0 - 4.0)\n        ),\n        0.0,\n        1.0\n      );\n    }\n\n    vec3 hsl2rgb(vec3 hsl) {\n      vec3 rgb = hue2rgb(hsl.x);\n      float c = (1.0 - abs(2.0*hsl.z - 1.0)) * hsl.y;\n      return (rgb - 0.5)*c + hsl.z;\n    }\n\n    vec3 rgb2hsl(vec3 rgb){\n      vec3 hsl = vec3(0.0);\n      float minrgb = min(rgb.r, min(rgb.g, rgb.b));\n      float maxrgb = max(rgb.r, max(rgb.g, rgb.b));\n      hsl.z = (maxrgb + minrgb) / 2.0;\n      if (maxrgb > minrgb) {\n        float rgbrange = maxrgb - minrgb;\n        hsl.y = (\n          hsl.z < .05 ?\n          rgbrange / (maxrgb + minrgb) :\n          rgbrange / (2.0 - (maxrgb + minrgb))\n        );\n        if (rgb.r == maxrgb) {\n          hsl.x = (rgb.g - rgb.b) / rgbrange / 6.0;\n        } else if (rgb.g == maxrgb) {\n          hsl.x = (2.0 + (rgb.b - rgb.r) / rgbrange) / 6.0;\n        } else {\n          hsl.x = (4.0 + (rgb.r - rgb.g) / rgbrange) / 6.0;\n        }\n\n        hsl.x = mod(hsl.x, 1.0);\n      }\n      return hsl;\n    }\n    "};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("WebGLShaderEaseThroughCode",["WebGLShaderLibraryCode"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("WebGLShaderLibraryCode"));i=h&&h.prototype;j.prototype.getCodeFragment=function(){return"\n    precision mediump float;\n\n    // A clamped linear interpolation through (0, 0) and (x0, y0)\n    float easeThroughZero(float x0, float y0, float x) {\n      return clamp(x * y0 / x0, 0.0, 1.0);\n    }\n\n    // A clamped linear interpolation through (1, 1) and (x0, y0)\n    float easeThroughOne(float x0, float y0, float x) {\n      return clamp(\n        x * (y0 - 1.0) / (x0 - 1.0) + (x0 - y0) / (x0 - 1.0),\n        0.0, 1.0\n      );\n    }\n\n    // A clamped linear interpolation through (x0, y0) of gradient 1\n    float easeThroughCorner(float x0, float y0, float x) {\n      return clamp(\n        x + (y0 - x0),\n        0.0, 1.0\n      );\n    }\n\n    // A hyperbolic interpolation through (0, 0), (x0, y0) and (1, 1)\n    // Doesn't behave too stably when x0 or y0 is close to 0 or 1\n    float easeThroughRawHyperbola(float x0, float y0, float x) {\n      float a = x0 / y0 * (y0 - 1.0) / (x0 - 1.0) ;\n      return x / (a * (1.0 - x) + x);\n    }\n\n    // The above hyperbolic interpolation patched for individual degenerative\n    // values of x0 and y0.\n    float easeThroughHyperbola(float x0, float y0, float x) {\n      if (x0 == 1.0 || (y0 == 1.0 && x0 != 0.0)) {\n        return easeThroughZero(x0, y0, x);\n      }\n      if (x0 == 0.0 || y0 == 0.0) {\n        return easeThroughOne(x0, y0, x);\n      }\n      return easeThroughRawHyperbola(x0, y0, x);\n    }\n\n    // A hybrid blend of the above, preferring:\n    //  linear through (1, 1) when (x0, y0) close to (0, 0)\n    //  linear through (0, 0) when (x0, y0) close to (1, 1)\n    //  linear of gradient 1 when (x0, y0) close to (0, 1) or (1, 0)\n    //  hyperbolic interpolation when (x0, y0) fairly central\n    float easeThrough(float x0, float y0, float x) {\n      float zeroWeight = x0 * y0;\n      zeroWeight *= zeroWeight;\n      float oneWeight = (1.0 - x0) * (1.0 - y0);\n      oneWeight *= oneWeight;\n      float cornerWeight = y0 * (1.0 - x0) + x0 * (1.0 - y0);\n      cornerWeight *= cornerWeight;\n      float hyperbolaWeight = 16.0 * x0 * y0 * (1.0 - x0) * (1.0 - y0);\n      return (\n        zeroWeight * easeThroughZero(x0, y0, x) +\n        oneWeight * easeThroughOne(x0, y0, x) +\n        cornerWeight * easeThroughCorner(x0, y0, x) +\n        hyperbolaWeight * easeThroughHyperbola(x0, y0, x)\n      ) / (zeroWeight + oneWeight + cornerWeight + hyperbolaWeight);\n    }\n    "};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MediaEffectColorTransformFragmentShaderCode",["immutable","MediaEffectColorComponentShaderCode","MediaEffectImageIOShaderCode","WebGLFragmentShaderCode","WebGLShaderColorTransformCode","WebGLShaderEaseThroughCode"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").Set;h=babelHelpers.inherits(k,c("WebGLFragmentShaderCode"));i=h&&h.prototype;k.prototype.getDirectDeps=function(){return j.of(new(c("WebGLShaderColorTransformCode"))(),new(c("MediaEffectColorComponentShaderCode"))(),new(c("MediaEffectImageIOShaderCode"))(),new(c("WebGLShaderEaseThroughCode"))())};k.prototype.getCodeFragment=function(){return"\n    precision mediump float;\n\n    #define UNMAPPED_WEIGHT 0.5\n\n    float epsilon = 1e-10;\n\n    uniform Component u_dest[MAX_NUM_COMPONENTS];\n\n    float bounceWrap(float x) {\n      return 1.0 - abs(abs(x) - 1.0);\n    }\n\n    float componentWeight(float score) {\n      if (score > 0.9999) {\n        return 10.0;\n      }\n      return -log(1.0 - score);\n    }\n\n    vec3 componentTransform(Component source, Component dest, vec3 point) {\n      vec3 wrapped = vec3(\n        mod(point.x + dest.hsl.x - source.hsl.x, 1.0),\n        easeThrough(source.hsl.y, dest.hsl.y, point.y),\n        easeThrough(source.hsl.z, dest.hsl.z, point.z)\n      );\n      return wrapped;\n    }\n\n    vec3 colorTransform(vec3 rgb) {\n      vec3 numerator = rgb * UNMAPPED_WEIGHT;\n      vec3 hsl = rgb2hsl(rgb);\n      computeComponentScores(hsl);\n      float denominator = UNMAPPED_WEIGHT;\n      for (int index = 0; index < MAX_NUM_COMPONENTS; index++) {\n        if (component_scores[index] <= 0.0) {\n          continue;\n        }\n        Component component = u_source[index];\n        float weight = componentWeight(component_scores[index]);\n        denominator += weight;\n        vec3 transformed = componentTransform(\n          u_source[index], u_dest[index], hsl\n        );\n        numerator += weight * hsl2rgb(transformed);\n      }\n      return numerator / denominator;\n    }\n\n    void main() {\n      vec4 src = getInputColor();\n      setOutputColor(src);\n      if (src.a == 0.0) {\n       return;\n      }\n      vec3 newrgb = colorTransform(src.rgb);\n      setOutputColor(vec4(newrgb, src.a));\n    }\n    "};function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("MediaEffectHighlightFragmentShaderCode",["immutable","MediaEffectColorComponentShaderCode","MediaEffectImageIOShaderCode","WebGLFragmentShaderCode","WebGLShaderColorTransformCode"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").Set;h=babelHelpers.inherits(k,c("WebGLFragmentShaderCode"));i=h&&h.prototype;k.prototype.getDirectDeps=function(){return j.of(new(c("WebGLShaderColorTransformCode"))(),new(c("MediaEffectColorComponentShaderCode"))(),new(c("MediaEffectImageIOShaderCode"))())};k.prototype.getCodeFragment=function(){return"\n    precision mediump float;\n\n    uniform int u_highlight_component;\n\n    void main() {\n      vec4 src = getInputColor();\n      setOutputColor(src);\n      if (src.a == 0.0) {\n        return;\n      }\n      vec3 rgb = src.rgb;\n      vec3 hsl = rgb2hsl(rgb);\n      computeComponentScores(hsl);\n      for(int index = 0; index < MAX_NUM_COMPONENTS; index++) {\n        if (index == u_highlight_component - 1) {\n          setOutputColor(vec4(\n            rgb,\n            src.a * clamp(componentScore(u_source[index], hsl), 0.0, 1.0))\n          );\n          return;\n        }\n      }\n    }\n    "};function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("WebGLVertexShaderCode",["WebGLShaderMainCode"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("WebGLShaderMainCode"));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MediaEffectVertexShaderCode",["WebGLVertexShaderCode"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("WebGLVertexShaderCode"));i=h&&h.prototype;j.prototype.getCodeFragment=function(){return"\n    attribute vec2 a_position;\n    attribute vec2 a_texCoord;\n\n    uniform vec2 u_resolution;\n\n    varying vec2 v_texCoord;\n\n    void main() {\n       // convert the rectangle from pixels to 0.0 to 1.0\n       vec2 zeroToOne = a_position / u_resolution;\n\n       // convert from 0->1 to 0->2\n       vec2 zeroToTwo = zeroToOne * 2.0;\n\n       // convert from 0->2 to -1->+1 (clipspace)\n       vec2 clipSpace = zeroToTwo - 1.0;\n\n       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n\n       // pass the texCoord to the fragment shader\n       // The GPU will interpolate this value between points.\n       v_texCoord = a_texCoord;\n    }\n    "};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MediaEffectImageTransmogrifier",["invariant","Promise","regeneratorRuntime","EventListener","MediaEffectColorTransformFragmentShaderCode","MediaEffectHighlightFragmentShaderCode","MediaEffectVertexShaderCode","getErrorNameFromWebGLErrorCode"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l;function m(z){var A=new Image();A.crossOrigin="anonymous";A.src=z;var B=new(c("Promise"))(function(C,D){A.onload=function(){return C(A)}});return B}function n(z){__p&&__p();if(!b.WebGLRenderingContext)throw new Error("WebGLRenderingContext not available.");var A=["webgl","experimental-webgl","webkit-3d","moz-webgl"],B=null,C=null,D=c("EventListener").listen(z,"webglcontextcreationerror",function(F){return C=F.statusMessage});for(var E=0;E<A.length;E++){try{B=z.getContext(A[E],{premultipliedAlpha:true})}catch(F){}if(B)break}D.remove();if(!B){if(!C)C="Unknown error.";throw new Error("Failed to acquire rendering context: "+C)}return B}function o(z,A,B){__p&&__p();z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B?1:0);var C=z.createTexture();if(!C)throw new Error("Failed to create texture: "+c("getErrorNameFromWebGLErrorCode")(z.getError()));z.bindTexture(z.TEXTURE_2D,C);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.CLAMP_TO_EDGE);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.CLAMP_TO_EDGE);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.NEAREST);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.NEAREST);z.texImage2D(z.TEXTURE_2D,0,z.RGBA,z.RGBA,z.UNSIGNED_BYTE,A)}function p(z,A,B,C,D){var E=A,F=A+C,G=B,H=B+D;z.bufferData(z.ARRAY_BUFFER,new Float32Array([E,G,F,G,E,H,E,H,F,G,F,H]),z.STATIC_DRAW)}function q(z){var A=z.createShader(z.VERTEX_SHADER);if(!A)throw new Error("Failed to create vertex shader: "+c("getErrorNameFromWebGLErrorCode")(z.getError()));z.shaderSource(A,new(c("MediaEffectVertexShaderCode"))().toString());z.compileShader(A);if(!z.getShaderParameter(A,z.COMPILE_STATUS))throw new Error("Failed to intialize vertex shader: "+c("getErrorNameFromWebGLErrorCode")(z.getError()));return A}function r(z,A,B,C){__p&&__p();var D=q(z),E=z.createProgram();if(!E)throw new Error("Failed to create shader program: "+c("getErrorNameFromWebGLErrorCode")(z.getError()));z.attachShader(E,D);z.attachShader(E,C);z.linkProgram(E);if(!z.getProgramParameter(E,z.LINK_STATUS))throw new Error("Failed to link shader program: "+c("getErrorNameFromWebGLErrorCode")(z.getError()));var F=z.getAttribLocation(E,"a_position"),G=z.getAttribLocation(E,"a_texCoord"),H=z.createBuffer();z.bindBuffer(z.ARRAY_BUFFER,H);p(z,0,0,A,B);var I=z.createBuffer();z.bindBuffer(z.ARRAY_BUFFER,I);z.bufferData(z.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),z.STATIC_DRAW);z.clearColor(0,0,0,0);z.clear(z.COLOR_BUFFER_BIT);z.useProgram(E);z.enableVertexAttribArray(F);z.bindBuffer(z.ARRAY_BUFFER,H);var J=2,K=z.FLOAT,L=false,M=0,N=0;z.vertexAttribPointer(F,J,K,L,M,N);z.enableVertexAttribArray(G);z.bindBuffer(z.ARRAY_BUFFER,I);z.vertexAttribPointer(G,J,K,L,M,N);return E}function s(z,A,B,C,D,E){__p&&__p();var F=z.getUniformLocation(A,"u_resolution");z.uniform2f(F,z.canvas.width,z.canvas.height);z.viewport(0,0,z.canvas.width,z.canvas.height);var G=z.getUniformLocation(A,"u_alpha_premultiplied");z.uniform1i(G,B?1:0);var H=z.getUniformLocation(A,"u_num_components");z.uniform1i(H,E);var I=z.getUniformLocation(A,"u_highlight_component");z.uniform1i(I,D);var J=void 0;for(J=0;J<E;J++){var K=z.getUniformLocation(A,"u_source["+J+"].hsl"),L=z.getUniformLocation(A,"u_source["+J+"].hslwidth"),M=C.components.get(J);z.uniform3f(K,M.hue,M.saturation,M.lightness);z.uniform3f(L,M.hueVariation,M.saturationVariation,M.lightnessVariation)}}function t(z,A,B,C,D){var E=Math.min(C.components.size,D.components.size);s(z,A,B,C,0,E);var F=void 0;for(F=0;F<E;F++){var G=z.getUniformLocation(A,"u_dest["+F+"].hsl"),H=z.getUniformLocation(A,"u_dest["+F+"].hslwidth"),I=D.components.get(F);z.uniform3f(G,I.hue,I.saturation,I.lightness);z.uniform3f(H,I.hueVariation,I.saturationVariation,I.lightnessVariation)}}function u(z,A,B,C,D){var E=C.components.size;s(z,A,B,C,D,E)}function v(z){z.drawArrays(z.TRIANGLES,0,6)}function w(z,A,B,C,D,E,F){this.imageURI=z;this.alphaPremultiplied=A;this.sourceColorPalette=B;this.image=C;this.canvas=D;this.glContext=E;this.shaderProgram=F}w.prototype.execute=function z(){return c("regeneratorRuntime").async(function A(B){while(1)switch(B.prev=B.next){case 0:if(!this.$Transmogrifier1)this.$Transmogrifier1=this.$Transmogrifier2();return B.abrupt("return",this.$Transmogrifier1);case 2:case"end":return B.stop()}},null,this)};w.prototype.$Transmogrifier2=function z(){__p&&__p();var A,B;return c("regeneratorRuntime").async(function C(D){__p&&__p();while(1)switch(D.prev=D.next){case 0:if(!(!this.image||this.image.src!==this.imageURI)){D.next=4;break}D.next=3;return c("regeneratorRuntime").awrap(m(this.imageURI));case 3:this.image=D.sent;case 4:this.width=this.image.width;this.height=this.image.height;if(!this.canvas)this.canvas=document.createElement("canvas");this.canvas.width=this.width;this.canvas.height=this.height;if(!this.glContext)this.glContext=n(this.canvas);A=this.glContext;o(A,this.image,this.alphaPremultiplied);if(!this.shaderProgram)this.shaderProgram=r(A,this.width,this.height,this.getFragmentShader(A));B=this.shaderProgram;this.configureTransmogrification(A,B);v(A,B);return D.abrupt("return",this);case 17:case"end":return D.stop()}},null,this)};w.prototype.toBlob=function z(){__p&&__p();var A,B=this;return c("regeneratorRuntime").async(function C(D){__p&&__p();while(1)switch(D.prev=D.next){case 0:if(this.blob){D.next=3;break}D.next=3;return c("regeneratorRuntime").awrap(function E(){__p&&__p();var F,G;return c("regeneratorRuntime").async(function H(I){__p&&__p();while(1)switch(I.prev=I.next){case 0:I.next=2;return c("regeneratorRuntime").awrap(B.execute());case 2:B.canvas||h(0);F=B.canvas;G=new(c("Promise"))(function(J,K){F.toBlob(J)});I.next=7;return c("regeneratorRuntime").awrap(G);case 7:B.blob=I.sent;case 8:case"end":return I.stop()}},null,B)}());case 3:return D.abrupt("return",this.blob);case 4:case"end":return D.stop()}},null,this)};w.prototype.getFragmentShader=function(z){var A=z.createShader(z.FRAGMENT_SHADER);if(!A)throw new Error("Failed to create fragment shader: "+c("getErrorNameFromWebGLErrorCode")(z.getError()));var B=this.getShaderSource();z.shaderSource(A,B);z.compileShader(A);if(!z.getShaderParameter(A,z.COMPILE_STATUS))throw new Error("Failed to intialize fragment shader: "+c("getErrorNameFromWebGLErrorCode")(z.getError()));return A};w.prototype.configureTransmogrification=function(z,A){};w.prototype.getShaderSource=function(){return""};i=babelHelpers.inherits(x,w);j=i&&i.prototype;function x(z,A,B,C,D,E,F,G){j.constructor.call(this,z,A,B,D,E,F,G);this.$ColorTransform1=C}x.prototype.getShaderSource=function(){return new(c("MediaEffectColorTransformFragmentShaderCode"))().toString()};x.prototype.configureTransmogrification=function(z,A){t(z,A,this.alphaPremultiplied,this.sourceColorPalette,this.$ColorTransform1)};k=babelHelpers.inherits(y,w);l=k&&k.prototype;function y(z,A,B,C,D,E,F,G){l.constructor.call(this,z,A,B,D,E,F,G);this.$HighlightTransform1=C}y.prototype.getShaderSource=function(){return new(c("MediaEffectHighlightFragmentShaderCode"))().toString()};y.prototype.configureTransmogrification=function(z,A){u(z,A,this.alphaPremultiplied,this.sourceColorPalette,this.$HighlightTransform1)};f.exports={HighlightTransform:y,ColorTransform:x,Transmogrifier:w}}),null);
__d("MediaEffectFrameEditorColorMappedImage.react",["regeneratorRuntime","EventListener","MediaEffectImageTransmogrifier","React","SubscriptionsHandler"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;function j(k){__p&&__p();i.constructor.call(this,k);this.$MediaEffectFrameEditorColorMappedImage7=function(l){this.$MediaEffectFrameEditorColorMappedImage2=l;if(l){this.$MediaEffectFrameEditorColorMappedImage4.addSubscriptions(c("EventListener").listen(l,"webglcontextlost",this.$MediaEffectFrameEditorColorMappedImage8),c("EventListener").listen(l,"webglcontextrestored",this.$MediaEffectFrameEditorColorMappedImage9));this.$MediaEffectFrameEditorColorMappedImage10()}else this.$MediaEffectFrameEditorColorMappedImage4.release()}.bind(this);this.$MediaEffectFrameEditorColorMappedImage8=function(){this.$MediaEffectFrameEditorColorMappedImage3=null;this.$MediaEffectFrameEditorColorMappedImage5=null}.bind(this);this.$MediaEffectFrameEditorColorMappedImage9=function(){this.$MediaEffectFrameEditorColorMappedImage10()}.bind(this);this.$MediaEffectFrameEditorColorMappedImage4=new(c("SubscriptionsHandler"))()}j.prototype.$MediaEffectFrameEditorColorMappedImage10=function k(){__p&&__p();return c("regeneratorRuntime").async(function l(m){__p&&__p();while(1)switch(m.prev=m.next){case 0:if(this.$MediaEffectFrameEditorColorMappedImage2){m.next=2;break}return m.abrupt("return");case 2:if(this.props.imageURI){m.next=4;break}return m.abrupt("return");case 4:if(this.props.highlightComponent)this.$MediaEffectFrameEditorColorMappedImage6=new(c("MediaEffectImageTransmogrifier").HighlightTransform)(this.props.imageURI,true,this.props.sourcePalette,this.props.highlightComponent,this.$MediaEffectFrameEditorColorMappedImage1,this.$MediaEffectFrameEditorColorMappedImage2,this.$MediaEffectFrameEditorColorMappedImage3,this.$MediaEffectFrameEditorColorMappedImage5);else if(this.props.transformPalette)this.$MediaEffectFrameEditorColorMappedImage6=new(c("MediaEffectImageTransmogrifier").ColorTransform)(this.props.imageURI,true,this.props.sourcePalette,this.props.transformPalette,this.$MediaEffectFrameEditorColorMappedImage1,this.$MediaEffectFrameEditorColorMappedImage2,this.$MediaEffectFrameEditorColorMappedImage3,this.$MediaEffectFrameEditorColorMappedImage5);else this.$MediaEffectFrameEditorColorMappedImage6=null;if(this.$MediaEffectFrameEditorColorMappedImage6)this.$MediaEffectFrameEditorColorMappedImage6.execute().then(function(n){if(n&&n===this.$MediaEffectFrameEditorColorMappedImage6){this.$MediaEffectFrameEditorColorMappedImage3=n.glContext;this.$MediaEffectFrameEditorColorMappedImage1=n.image;this.$MediaEffectFrameEditorColorMappedImage5=n.shaderProgram}}.bind(this))["catch"](function(n){});case 6:case"end":return m.stop()}},null,this)};j.prototype.render=function(){this.$MediaEffectFrameEditorColorMappedImage10();return c("React").createElement("canvas",{ref:this.$MediaEffectFrameEditorColorMappedImage7,style:{width:this.props.size.x,height:this.props.size.y}})};f.exports=j}),null);
__d("MediaEffectFrameEditorPixelCanvas.react",["cx","regeneratorRuntime","Image.react","MediaEffectFrameEditorColorMappedImage.react","MediaEffectFrameRenderer","React","ReactDOM","ResponsiveBlock.react","Vector"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;function k(l){__p&&__p();j.constructor.call(this,l);this.$MediaEffectFrameEditorPixelCanvas4=false;this.$MediaEffectFrameEditorPixelCanvas6=function(event){__p&&__p();var m=this.state,n=m.imageURI,o=m.size,p=this.$MediaEffectFrameEditorPixelCanvas2;if(event.button!==0||!n||!o||!p)return;if(this.props.onSamplingStart&&!event.shiftKey)this.props.onSamplingStart();var q=document.createElement("canvas");q.width=o.x*window.devicePixelRatio;q.height=o.y*window.devicePixelRatio;var r=new Image(),s=q.getContext("2d");if(!s)throw new Error("Cannot get rendering context");this.$MediaEffectFrameEditorPixelCanvas1=s;this.$MediaEffectFrameEditorPixelCanvas4=true;var t=p.getBoundingClientRect(),u=(event.clientX-t.left)*window.devicePixelRatio,v=(event.clientY-t.top)*window.devicePixelRatio;r.onload=function(){s.drawImage(r,0,0);var w=s.getImageData(u,v,1,1),x=w.data;if(this.props.onAddSample)this.props.onAddSample([x[0],x[1],x[2],x[3]])}.bind(this);r.src=n}.bind(this);this.$MediaEffectFrameEditorPixelCanvas7=function(event){var m=this.$MediaEffectFrameEditorPixelCanvas2,n=this.$MediaEffectFrameEditorPixelCanvas1,o=this.$MediaEffectFrameEditorPixelCanvas4,p=this.props.onAddSample;if(o&&n&&m&&p){var q=m.getBoundingClientRect(),r=(event.clientX-q.left)*window.devicePixelRatio,s=(event.clientY-q.top)*window.devicePixelRatio,t=n.getImageData(r,s,1,1),u=t.data;p([u[0],u[1],u[2],u[3]])}}.bind(this);this.$MediaEffectFrameEditorPixelCanvas8=function(event){if(!this.$MediaEffectFrameEditorPixelCanvas4||event.button!==0)return;this.$MediaEffectFrameEditorPixelCanvas4=false;this.$MediaEffectFrameEditorPixelCanvas1=null}.bind(this);this.$MediaEffectFrameEditorPixelCanvas15=function(m,n){this.setState({size:new(c("Vector"))(m,n)})}.bind(this);this.$MediaEffectFrameEditorPixelCanvas11=function(m){if(m){var n=c("ReactDOM").findDOMNode(m);this.$MediaEffectFrameEditorPixelCanvas2=n instanceof HTMLImageElement?n:null}else this.$MediaEffectFrameEditorPixelCanvas2=null}.bind(this);this.state={imageURI:null,size:null}}k.prototype.componentDidMount=function(){this.$MediaEffectFrameEditorPixelCanvas3=true};k.prototype.componentWillUnmount=function(){this.$MediaEffectFrameEditorPixelCanvas3=false};k.prototype.setState=function(l){if(this.$MediaEffectFrameEditorPixelCanvas3)j.setState.call(this,l)};k.prototype.$MediaEffectFrameEditorPixelCanvas5=function(event){event.preventDefault()};k.prototype.$MediaEffectFrameEditorPixelCanvas9=function l(){__p&&__p();var m;return c("regeneratorRuntime").async(function n(o){__p&&__p();while(1)switch(o.prev=o.next){case 0:if(this.state.size){o.next=2;break}return o.abrupt("return");case 2:o.next=4;return c("regeneratorRuntime").awrap(c("MediaEffectFrameRenderer")(this.props.assets,this.props.assetOrder,this.state.size));case 4:m=o.sent;this.setState({imageURI:m});case 6:case"end":return o.stop()}},null,this)};k.prototype.$MediaEffectFrameEditorPixelCanvas10=function(){if(!this.state.imageURI||!this.state.size)return null;var l=!!this.props.onAddSample&&!!this.props.onSamplingStart;return c("React").createElement(c("Image.react"),{onDragStart:this.$MediaEffectFrameEditorPixelCanvas5,onMouseDown:l?this.$MediaEffectFrameEditorPixelCanvas6:null,onMouseMove:l?this.$MediaEffectFrameEditorPixelCanvas7:null,onMouseOut:l?this.$MediaEffectFrameEditorPixelCanvas8:null,onMouseUp:l?this.$MediaEffectFrameEditorPixelCanvas8:null,ref:this.$MediaEffectFrameEditorPixelCanvas11,src:this.state.imageURI,style:{width:this.state.size.x,height:this.state.size.y}})};k.prototype.$MediaEffectFrameEditorPixelCanvas12=function(){if(!this.state.imageURI||!this.state.size)return null;return c("React").createElement(c("MediaEffectFrameEditorColorMappedImage.react"),{highlightComponent:this.props.highlightComponent,imageURI:this.state.imageURI,size:this.state.size,sourcePalette:this.props.sourcePalette,transformPalette:this.props.transformPalette})};k.prototype.$MediaEffectFrameEditorPixelCanvas13=function(){return this.$MediaEffectFrameEditorPixelCanvas10()};k.prototype.$MediaEffectFrameEditorPixelCanvas14=function(){if(this.props.transformPalette||this.props.highlightComponent)return this.$MediaEffectFrameEditorPixelCanvas12();else return this.$MediaEffectFrameEditorPixelCanvas13()};k.prototype.render=function(){this.$MediaEffectFrameEditorPixelCanvas9()["catch"](function(l){});return c("React").createElement(c("ResponsiveBlock.react"),{className:"_3g0j",onResize:this.$MediaEffectFrameEditorPixelCanvas15},c("React").createElement("div",{className:"_3g0k"},c("React").createElement("div",{className:"_24s9"},this.$MediaEffectFrameEditorPixelCanvas14())))};f.exports=k}),null);
__d("MediaEffectFrameEditorPixelCanvasContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectFrameEditorPixelCanvas.react","MediaEffectTemplateDataStore","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("MediaEffectTemplateDataStore")]};j.calculateState=function(k,l){var m=c("MediaEffectTemplateDataStore").getFrameData(l.localTemplateID);return{assets:m.assets,assetOrder:m.assetOrder}};j.prototype.componentWillMount=function(){c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};j.prototype.render=function(){var k=babelHelpers["extends"]({},this.props,this.state);return c("React").createElement(c("MediaEffectFrameEditorPixelCanvas.react"),k)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j,{withProps:true})}),null);
__d("AssetHorizontalAlignmentType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LEFT:"left",RIGHT:"right",CENTER:"center"})}),null);
__d("MediaEffectFrameEditorCardTab.react",["React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement("div",null,this.props.children)};function j(){h.apply(this,arguments)}j.defaultProps={activeHeader:null};f.exports=j}),null);
__d("MediaEffectFrameEditorTabbedCard.react",["cx","Grid.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l,m=c("Grid.react").GridItem;i=babelHelpers.inherits(n,c("React").PureComponent);j=i&&i.prototype;function n(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.$TabHeader1=function(){this.props.onItemClick(this.props.index)}.bind(this),q}n.prototype.render=function(){return c("React").createElement("a",{href:"#",onClick:this.$TabHeader1},c("React").createElement("div",{className:"_zn2"+(this.props.active?" _zn4":"")},this.props.active?this.props.activeContent||this.props.content:this.props.content))};k=babelHelpers.inherits(o,c("React").PureComponent);l=k&&k.prototype;function o(p){l.constructor.call(this,p);this.$MediaEffectFrameEditorTabbedCard1=function(q){this.setState({activeTabIndex:q})}.bind(this);this.state={activeTabIndex:null}}o.prototype.render=function(){var p=this.props.children,q=c("React").Children.map(p.filter(function(s){return!!s}),function(s,t){return c("React").createElement(m,null,c("React").createElement(n,{active:t===this.state.activeTabIndex,activeContent:s.props.activeHeader,content:s.props.header,index:t,onItemClick:this.$MediaEffectFrameEditorTabbedCard1}))}.bind(this)),r=c("React").Children.map(p.filter(function(s){return!!s}),function(s,t){return c("React").createElement("div",{className:(t===this.state.activeTabIndex?"_zn4":"")+(t!==this.state.activeTabIndex?" _zn8":"")},s)}.bind(this));return c("React").createElement("div",{className:"_zn9",onMouseDown:this.props.onMouseDown},c("React").createElement(c("Grid.react"),{cols:q.length,style:{margin:"auto"}},q),r)};f.exports=o}),null);
__d("MediaEffectFrameEditorTextPropertiesDialog.react",["cx","ix","AssetHorizontalAlignmentType","Grid.react","Image.react","MediaEffectEditorFunnelLogger","MediaEffectFrameEditorCardTab.react","MediaEffectFrameEditorTabbedCard.react","MediaEffectMetadataActionCreators","React","XUIContextualDialog.react","color-picker","immutable"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l,m,n,o,p=c("Grid.react").GridItem,q=c("immutable").Set,r=i("86665"),s=i("86667"),t=i("86669"),u=i("86666"),v=i("86668"),w=i("86670"),x=i("86671"),y=i("86672"),z=[c("AssetHorizontalAlignmentType").LEFT,c("AssetHorizontalAlignmentType").CENTER,c("AssetHorizontalAlignmentType").RIGHT];j=babelHelpers.inherits(A,c("React").PureComponent);k=j&&j.prototype;function A(){var D,E;for(var F=arguments.length,G=Array(F),H=0;H<F;H++)G[H]=arguments[H];return E=(D=k.constructor).call.apply(D,[this].concat(G)),this.$AlignmentItem1=function(){this.props.onChange(this.props.value)}.bind(this),E}A.prototype.render=function(){return c("React").createElement("a",{href:"#",onClick:this.$AlignmentItem1},this.props.children)};l=babelHelpers.inherits(B,c("React").PureComponent);m=l&&l.prototype;function B(){var D,E;for(var F=arguments.length,G=Array(F),H=0;H<F;H++)G[H]=arguments[H];return E=(D=m.constructor).call.apply(D,[this].concat(G)),this.$FontMenuItem1=function(){this.props.onChange(this.props.font)}.bind(this),E}B.prototype.render=function(){return c("React").createElement("div",{onClick:this.$FontMenuItem1,role:"menuitem",tabIndex:"0"},c("React").createElement("div",{className:"_1jhm"},c("React").createElement("div",{className:"_1jhn"},this.props.isSelected?"\u2713":null),c("React").createElement("span",{style:{fontFamily:this.props.font.getFontFamily()}},this.props.font.getName())))};n=babelHelpers.inherits(C,c("React").PureComponent);o=n&&n.prototype;function C(D){__p&&__p();o.constructor.call(this,D);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog4=function(E){c("MediaEffectMetadataActionCreators").updateTextFonts(q([this.props.localAssetID]),E)}.bind(this);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog3=function(E){var F=this.props.assetData.font.getID()===E.getID();return c("React").createElement(p,{key:E.getID()},c("React").createElement(B,{font:E,isSelected:F,onChange:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog4}))}.bind(this);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog7=function(E){c("MediaEffectMetadataActionCreators").updateTextAlignments(q([this.props.localAssetID]),E)}.bind(this);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog10=function(E){c("MediaEffectMetadataActionCreators").updateTextColors(q([this.props.localAssetID]),E);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog1=E}.bind(this);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog9=function(){if(this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog1){c("MediaEffectEditorFunnelLogger").logChangeTextColor(this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog1);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog1=null}}.bind(this);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog11=function(){return this.props.context}.bind(this);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog1=null}C.prototype.$MediaEffectReactFrameEditorTextAssetPropertiesDialog2=function(){return c("React").createElement(c("MediaEffectFrameEditorCardTab.react"),{activeHeader:c("React").createElement("div",{className:"_1jhq"},c("React").createElement(c("Image.react"),{className:"_1jhr",src:y})),header:c("React").createElement("div",{className:"_1jhq"},c("React").createElement(c("Image.react"),{className:"_1jhr",src:x})),key:"fonts"},c("React").createElement(c("Grid.react"),{alignh:"left",alignv:"middle",cols:1,width:"100%"},this.props.fonts.map(this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog3)))};C.prototype.$MediaEffectReactFrameEditorTextAssetPropertiesDialog5=function(){if(!this.props.assetData.isDynamicText())return null;return c("React").createElement(c("MediaEffectFrameEditorCardTab.react"),{activeHeader:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog6(this.props.assetData.textHorizontalAlignment,true),header:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog6(this.props.assetData.textHorizontalAlignment,false),key:"alignment"},c("React").createElement(c("Grid.react"),{alignh:"center",alignv:"middle",cols:z.length,style:{margin:"auto"}},z.map(function(D){return c("React").createElement(p,{key:D},c("React").createElement(A,{onChange:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog7,value:D},this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog6(D,D===this.props.assetData.textHorizontalAlignment)))}.bind(this))))};C.prototype.$MediaEffectReactFrameEditorTextAssetPropertiesDialog6=function(D,E){return c("React").createElement("div",{className:"_1jhq"},c("React").createElement(c("Image.react"),{className:"_1jhr",src:{center:E?u:r,left:E?v:s,right:E?w:t}[D]}))};C.prototype.$MediaEffectReactFrameEditorTextAssetPropertiesDialog8=function(){return c("React").createElement(c("MediaEffectFrameEditorCardTab.react"),{header:c("React").createElement("div",{className:"_1jhq"},c("React").createElement("div",{className:"_1jhs"},c("React").createElement("div",{className:"_1jht",style:{backgroundColor:this.props.assetData.color}})))},c("React").createElement("div",{className:"_1jhu",onMouseLeave:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog9,onMouseUp:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog9},c("React").createElement(c("color-picker"),{className:"_1jhv",color:this.props.assetData.color,onChange:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog10})))};C.prototype.$MediaEffectReactFrameEditorTextAssetPropertiesDialog12=function(D){D.preventDefault()};C.prototype.render=function(){return c("React").createElement("div",{className:"_1jhw"},c("React").createElement(c("XUIContextualDialog.react"),{alignment:"center",autoFocus:false,contextRef:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog11,key:"contextualDialog",position:"below",shown:this.props.shown,width:c("XUIContextualDialog.react").WIDTH.NORMAL},c("React").createElement(c("MediaEffectFrameEditorTabbedCard.react"),{onMouseDown:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog12},this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog2(),this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog5(),this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog8())))};f.exports=C}),null);
__d("MediaEffectFrameEditorTextPropertiesDialogContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectFrameEditorTextPropertiesDialog.react","MediaEffectReactFrameEditorCanvasDataStore","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("MediaEffectReactFrameEditorCanvasDataStore")]};j.calculateState=function(k,l){return{fonts:c("MediaEffectReactFrameEditorCanvasDataStore").getFonts()}};j.prototype.componentWillMount=function(){c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};j.prototype.render=function(){var k=babelHelpers["extends"]({},this.props,this.state);return c("React").createElement(c("MediaEffectFrameEditorTextPropertiesDialog.react"),k)};function j(){h.apply(this,arguments)}j.defaultProps={};f.exports=c("FluxContainer").create(j,{withProps:true})}),null);
__d("MediaEffectFramePreviewTypes",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({PORTRAIT:"",LANDSCAPE:"",PROFILE:""});f.exports=h}),null);
__d("MediaEffectFramePreviewConfigs",["fbt","MediaEffectFramePreviewTypes"],(function a(b,c,d,e,f,g,h){"use strict";var i,j=288,k=512,l=104,m=(i={},i[c("MediaEffectFramePreviewTypes").PORTRAIT]={label:h._("Portrait"),size:{previewHeight:k,previewWidth:j}},i[c("MediaEffectFramePreviewTypes").PROFILE]={label:h._("Profile"),size:{previewHeight:l,previewWidth:l}},i[c("MediaEffectFramePreviewTypes").LANDSCAPE]={label:h._("Landscape"),size:{previewHeight:j,previewWidth:k}},i);f.exports=m}),null);
__d("MediaEffectFramePhonePreview.react",["cx","Image.react","MediaEffectFramePreviewConfigs","MediaEffectFramePreviewTypes","MediaEffectReactFrameEditorPreviewCanvas.react","React","Vector"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=361,l=643,m=811,n=400,o=m/l,p=n/k,q=n/k,r=m/l;i=babelHelpers.inherits(s,c("React").PureComponent);j=i&&i.prototype;s.prototype.$MediaEffectFramePhonePreview1=function(){var t=this.props,u=t.previewWidth,v=t.previewHeight;if(u===v)return c("MediaEffectFramePreviewTypes").PROFILE;else if(u>v)return c("MediaEffectFramePreviewTypes").LANDSCAPE;else return c("MediaEffectFramePreviewTypes").PORTRAIT};s.prototype.render=function(){__p&&__p();var t=this.props,u=t.previewWidth,v=t.previewHeight;if(u===v){u=c("MediaEffectFramePreviewConfigs")[c("MediaEffectFramePreviewTypes").PORTRAIT].size.previewWidth;v=c("MediaEffectFramePreviewConfigs")[c("MediaEffectFramePreviewTypes").PORTRAIT].size.previewHeight}var w=v>u,x=w?q:o,y=w?r:p,z=this.props.previewImage;if(!z)switch(this.$MediaEffectFramePhonePreview1()){case c("MediaEffectFramePreviewTypes").PORTRAIT:z="/images/media_effect/frame_preview/phone_portrait.png";break;case c("MediaEffectFramePreviewTypes").LANDSCAPE:z="/images/media_effect/frame_preview/phone_landscape.png";break;case c("MediaEffectFramePreviewTypes").PROFILE:z="/images/media_effect/frame_preview/phone_profile.png";break}return c("React").createElement("div",{className:"_3076",style:{height:v*y,width:u*x}},c("React").createElement("div",{className:(w?"_5znd":"")+(!w?" _5znl":"")},c("React").createElement("div",{className:this.$MediaEffectFramePhonePreview1()===c("MediaEffectFramePreviewTypes").PROFILE?"_60qj":""},c("React").createElement(c("MediaEffectReactFrameEditorPreviewCanvas.react"),{assetOrder:this.props.assetOrder,assets:this.props.assets,backgroundColor:this.props.backgroundColor,backgroundImage:this.props.backgroundImage,previewSize:new(c("Vector"))(this.props.previewWidth,this.props.previewHeight),videoSourceID:this.props.videoSourceID}))),c("React").createElement(c("Image.react"),{className:"_43y6",height:v*y,src:z,width:u*x}))};function s(){i.apply(this,arguments)}f.exports=s}),null);
__d("MediaEffectFramePhonePreviewContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectFramePhonePreview.react","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorDataStore","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.calculateState=function(){var k=c("MediaEffectReactFrameEditorDataStore").getState(),l=c("MediaEffectReactFrameEditorCanvasDataStore").getState();return{assets:k.assets,assetOrder:k.assetOrder,backgroundColor:l.backgroundColor,backgroundImage:l.backgroundImage}};j.getStores=function(){return[c("MediaEffectReactFrameEditorDataStore"),c("MediaEffectReactFrameEditorCanvasDataStore")]};j.prototype.componentWillMount=function(){c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};j.prototype.render=function(){return c("React").createElement(c("MediaEffectFramePhonePreview.react"),{assetOrder:this.state.assetOrder,assets:this.state.assets,backgroundColor:this.state.backgroundColor,backgroundImage:this.state.backgroundImage,previewHeight:this.props.previewHeight,previewImage:this.props.previewImage,previewWidth:this.props.previewWidth,videoSourceID:this.props.videoSourceID})};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j,{withProps:true})}),null);
__d("MediaEffectFrameRenderer",["Promise","regeneratorRuntime","MediaEffectReactFrameEditorImageAssetRecord","Vector","mediaEffectGKCheck"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=800,i=.625;function j(q){var r=new Image();r.crossOrigin="anonymous";r.src=q;var s=new(c("Promise"))(function(t,u){r.onload=function(){return t(r)}});return s}function k(q,r,s,t){__p&&__p();var u,v,w,x;return c("regeneratorRuntime").async(function y(z){__p&&__p();while(1)switch(z.prev=z.next){case 0:z.next=2;return c("regeneratorRuntime").awrap(j(t.getURI()));case 2:u=z.sent;v=t.assetSize;if(v){z.next=6;break}throw new Error("Asset size not set",t);case 6:if(!v.isValid())v=v.set("aspect_ratio",u.width/u.height);if(v.isValid()){z.next=9;break}throw new Error("Asset size not valid",t);case 9:w=v.toAbsolute(s);x=t.position.toAbsolute(s,w);r.drawImage(u,x.getLeft(),x.getTop(),x.getWidth(),x.getHeight());case 12:case"end":return z.stop()}},null,this)}function l(q,r,s,t){__p&&__p();var u,v,w,x,y,z;return c("regeneratorRuntime").async(function A(B){__p&&__p();while(1)switch(B.prev=B.next){case 0:u=t.assetSize;if(u){B.next=3;break}throw new Error("Asset size not set",t);case 3:if(u.isValid()){B.next=5;break}throw new Error("Asset size not valid",t);case 5:v=u.toAbsolute(s);w=t.position.toAbsolute(s,v);x=w.getHeight()+"px";y=t.font.getFontFamily();r.font=x+" "+y;r.fillStyle=t.color;r.textAlign=t.textHorizontalAlignment;z=s.x/2;B.t0=t.textHorizontalAlignment;B.next=B.t0==="left"?16:B.t0==="center"?18:B.t0==="right"?20:22;break;case 16:z=w.getLeft();return B.abrupt("break",22);case 18:z=w.getCenter().x;return B.abrupt("break",22);case 20:z=w.getRight();return B.abrupt("break",22);case 22:r.fillText(t.content,z,w.getBottom(),w.getWidth());case 23:case"end":return B.stop()}},null,this)}function m(q,r,s,t){__p&&__p();return c("regeneratorRuntime").async(function u(v){__p&&__p();while(1)switch(v.prev=v.next){case 0:if(!(t instanceof c("MediaEffectReactFrameEditorImageAssetRecord"))){v.next=5;break}v.next=3;return c("regeneratorRuntime").awrap(k(q,r,s,t));case 3:v.next=7;break;case 5:v.next=7;return c("regeneratorRuntime").awrap(l(q,r,s,t));case 7:case"end":return v.stop()}},null,this)}function n(q,r,s){__p&&__p();var t,u,v;return c("regeneratorRuntime").async(function w(x){__p&&__p();while(1)switch(x.prev=x.next){case 0:t=r.map(function(y){return q.get(y)});u=document.createElement("canvas");u.width=s.x;u.height=s.y;v=u.getContext("2d",{premultipliedAlpha:true});if(v){x.next=7;break}throw new Error("Cannot get rendering context");case 7:x.next=9;return c("regeneratorRuntime").awrap(c("Promise").all(t.map(function(y){return m(u,v,s,y)}).toArray()));case 9:return x.abrupt("return",u);case 10:case"end":return x.stop()}},null,this)}function o(q,r,s){__p&&__p();var t,u,v,w,x,y,z,A,B,C,D,E,F,G;return c("regeneratorRuntime").async(function H(I){__p&&__p();while(1)switch(I.prev=I.next){case 0:if(!(s.x===0||s.y===0)){I.next=2;break}return I.abrupt("return",0);case 2:t=Math.min(s.y,h);u=t*s.x/s.y;v=t;I.next=7;return c("regeneratorRuntime").awrap(n(q,r,new(c("Vector"))(u,v)));case 7:w=I.sent;x=w.getContext("2d");if(x){I.next=11;break}throw new Error("Cannot get rendering context");case 11:y=0;z=0;A=v;B=u;if(c("mediaEffectGKCheck")("media_effect_coverage_test_v2")){B=Math.floor(u*i);y=Math.floor((u-B)/2);A=Math.floor(v*i);z=Math.floor((v-A)/2)}C=B*A;D=x.getImageData(y,z,B,A);E=D.data;F=0;for(G=3;G<E.length;G+=4)F+=E[G];return I.abrupt("return",F/(255*C));case 22:case"end":return I.stop()}},null,this)}function p(q,r,s){var t;return c("regeneratorRuntime").async(function u(v){while(1)switch(v.prev=v.next){case 0:v.next=2;return c("regeneratorRuntime").awrap(n(q,r,s.mul(window.devicePixelRatio)));case 2:t=v.sent;return v.abrupt("return",t.toDataURL());case 4:case"end":return v.stop()}},null,this)}p.percentageCovered=o;f.exports=p}),null);
__d("MediaEffectWarnings.react",["cx","List.react","React","XUICard.react","XUICardSection.react","XUINotice.react","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.message,n=l.items,o=l.use,p=l.className,q=l.onDismiss,r=n&&n.length>0?c("React").createElement(c("List.react"),{className:"_45qz"},n.map(function(s,t){return c("React").createElement("li",{key:t},s.trim())})):null;return c("React").createElement(c("XUICard.react"),{className:c("joinClasses")(p,"_2ex6 _3-8x _190n")},c("React").createElement(c("XUICardSection.react"),{background:"transparent",className:"_190n",style:{borderTop:"none"}},c("React").createElement(c("XUINotice.react"),{onDismiss:q,use:o||"warn"},m,r)))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MediaEffectRejectedReviewResult.react",["cx","fbt","MediaEffectWarnings.react","React","Link.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;l.prototype.render=function(){var m=this.props.reasons;if(!m||m.length===0)return null;m=m.map(function(q){return typeof q==="string"?q.trim():q}).filter(Boolean);var n=c("React").createElement(c("Link.react"),{href:"/legal/camera_effects_platform_terms",target:"_blank"},i._("terms")),o=c("React").createElement(c("Link.react"),{href:"/legal/camera_effects_platform_policies",target:"_blank"},i._("policies.")),p=this.props.isTrailingReview?i._("Your effect distribution stopped because it doesn't meet the Camera Effects Platform {terms} and {policies}",[i.param("terms",n),i.param("policies",o)]):i._("Your effect wasn't approved because it doesn't meet the Camera Effects Platform {terms} and {policies}",[i.param("terms",n),i.param("policies",o)]);return c("React").createElement(c("MediaEffectWarnings.react"),{className:"_21ks",items:m,message:p})};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("MediaEffectFullscreenFrameEditor.react",["cx","ix","Image.react","MediaEffectFullscreenFrameEditorControls.react","MediaEffectFullscreenFrameEditorPreviewPanelContainer.react","MediaEffectMetadataActionCreators","MediaEffectQEUtils","MediaEffectReactFrameEditorCanvasContainer.react","MediaEffectRejectedReviewResult.react","React","Vector"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;l.prototype.$MediaEffectFullscreenFrameEditor1=function(m){var n=m.files;if(n)for(var o=0;o<n.length;o++){var p=n.item(o);p&&c("MediaEffectMetadataActionCreators").addImage(p)}m.value=""};l.prototype.$MediaEffectFullscreenFrameEditor2=function(){navigator.getUserMedia&&navigator.getUserMedia({video:true},function(m){return c("MediaEffectMetadataActionCreators").startCamera(window.URL.createObjectURL(m))},function(m){return false})};l.prototype.$MediaEffectFullscreenFrameEditor3=function(){var m=this.props.rejectReasons;if(m&&m.length!==0)return c("React").createElement(c("MediaEffectRejectedReviewResult.react"),{reasons:m});return null};l.prototype.render=function(){return c("React").createElement("div",{className:"_1skh"},c("React").createElement("div",null,c("React").createElement(c("MediaEffectFullscreenFrameEditorControls.react"),{assetNum:this.props.assetNum,cameraEnabled:this.props.cameraEnabled,cameraPaused:this.props.cameraPaused,canvasBgColor:this.props.canvasBgColor,context:this.props.context,filterID:this.props.filterID,filtersData:this.props.filtersData,flowType:this.props.flowType,fontColor:this.props.fontColor,frameData:this.props.frameData,isFrameValid:this.props.isFrameValid,isValidating:this.props.isValidating,loading:this.props.loading,selectedTextIDs:this.props.selectedTextIDs}),this.$MediaEffectFullscreenFrameEditor3()),c("React").createElement("div",{className:"_2yvx"},c("React").createElement(c("MediaEffectReactFrameEditorCanvasContainer.react"),{bootstrapData:this.props.frameData,enableEditorFreeText:this.props.context.enableEditorFreeText,enableFontSettingsDialog:this.props.context.enableFontSettingsDialog,includesPhoneFrame:c("MediaEffectQEUtils").shouldDefaultToPortrait(this.props.flowType),showTitle:false})),c("React").createElement("div",{className:"_1skk"},c("React").createElement(c("MediaEffectFullscreenFrameEditorPreviewPanelContainer.react"),{previewScale:.3,previewSize:new(c("Vector"))(400,225)})),c("React").createElement("div",{className:"_zn8"},c("React").createElement(c("Image.react"),{src:i("86663")}),c("React").createElement(c("Image.react"),{src:i("86664")})))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("MediaEffectFullscreenFrameEditorContainer.react",["FluxContainer","MediaEffectFrameCreateDialogDataStore","MediaEffectFullscreenFrameEditor.react","MediaEffectMetadataStore","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorDataStore","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=function j(m){return m?m.assetType()==="MediaEffectReactFrameEditorTextAssetRecord":false},k=function k(m){return m?m.assetType()==="MediaEffectReactFrameEditorImageAssetRecord":false};h=babelHelpers.inherits(l,c("React").PureComponent);i=h&&h.prototype;l.getStores=function(){return[c("MediaEffectFrameCreateDialogDataStore"),c("MediaEffectMetadataStore"),c("MediaEffectReactFrameEditorCanvasDataStore"),c("MediaEffectReactFrameEditorDataStore")]};l.calculateState=function(m,n){var o=c("MediaEffectReactFrameEditorDataStore").getState(),p=c("MediaEffectReactFrameEditorCanvasDataStore").getState(),q=c("MediaEffectFrameCreateDialogDataStore").getState(),r=q.flowType,s=p.selectedAssets.filter(function(u){return j(o.assets.get(u))}),t=o.assets.some(function(u){return k(u)&&!u.stickerFBID});return{canvasBgColor:p.backgroundColor,filterID:o.filterID,flowType:r,fontColor:s.size>0?o.assets.get(s.first()).color:"#ffffff",loading:t,selectedTextIDs:s,cameraEnabled:p.cameraSource!=null,cameraPaused:p.cameraPaused,isFrameValid:c("MediaEffectReactFrameEditorDataStore").isValidForSubmit(),isValidating:c("MediaEffectFrameCreateDialogDataStore").isValidating(),rejectReasons:c("MediaEffectMetadataStore").getState().get("rejectReasons"),assetNum:o.assets.size}};l.prototype.render=function(){var m=babelHelpers["extends"]({},this.props,this.state);return c("React").createElement(c("MediaEffectFullscreenFrameEditor.react"),m)};function l(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(l,{withProps:true})}),null);
__d("MediaEffectFullscreenFrameEditorControls.react",["cx","fbt","ix","FileInput.react","FrameEditorSupportedGeneratedText","Image.react","MediaEffectEditorSideMenuContainer.react","MediaEffectFlowType","MediaEffectFrameEditorTemplatePanelContainer.react","MediaEffectMetadataActionCreators","MediaEffectUserContext","PopoverMenu.react","React","ReactXUIMenu","XUIError.react","XUIContextualDialog.react","XUIContextualDialogTitle.react","XUIContextualDialogBody.react","mediaEffectGKCheck"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("ReactXUIMenu").Item;k=babelHelpers.inherits(n,c("React").PureComponent);l=k&&k.prototype;function n(o){l.constructor.call(this,o);this.$MediaEffectFullscreenFrameEditorControls3=function(p){var q=p.target;if(q instanceof HTMLInputElement)this.$MediaEffectFullscreenFrameEditorControls4(q)}.bind(this);this.state={uploadArtTooltipShown:false}}n.prototype.$MediaEffectFullscreenFrameEditorControls1=function(){return c("React").createElement(c("ReactXUIMenu"),{onItemClick:this.$MediaEffectFullscreenFrameEditorControls2},this.props.context.enableEditorFreeText?c("React").createElement(m,{key:"freetext",value:null},"Free text"):null,Object.keys(c("FrameEditorSupportedGeneratedText")).map(function(o){return c("React").createElement(m,{key:o,value:o},c("FrameEditorSupportedGeneratedText")[o])}))};n.prototype.$MediaEffectFullscreenFrameEditorControls2=function(o,p){c("MediaEffectMetadataActionCreators").addText(p.item.getValue())};n.prototype.$MediaEffectFullscreenFrameEditorControls4=function(o){var p=o.files;if(p)for(var q=0;q<p.length;q++){var r=p.item(q);r&&c("MediaEffectMetadataActionCreators").addImage(r)}o.value=""};n.prototype.$MediaEffectFullscreenFrameEditorControls5=function(){navigator.getUserMedia&&navigator.getUserMedia({video:true},function(o){return c("MediaEffectMetadataActionCreators").startCamera(window.URL.createObjectURL(o))},function(o){return false})};n.prototype.$MediaEffectFullscreenFrameEditorControls6=function(){if(this.props.isValidating&&this.props.assetNum===0)if(this.props.context.enableEditorFreeText)return i._("Please insert some text or an art asset to continue");else return i._("Please insert an art asset to continue");return null};n.prototype.$MediaEffectFullscreenFrameEditorControls7=function(){var o=i._("Enter text here").toString();c("MediaEffectMetadataActionCreators").addText(o,null,null)};n.prototype.$MediaEffectFullscreenFrameEditorControls8=function(){var o=c("React").createElement(c("XUIContextualDialog.react"),{contextRef:function(){return this.uploadArtButton}.bind(this),hideOnBlur:true,hoverShowDelay:1e3,hoverContextRef:function(){return this.uploadArtButton}.bind(this),position:"right",shown:this.state.uploadArtTooltipShown,width:c("XUIContextualDialog.react").WIDTH.NORMAL},c("React").createElement(c("XUIContextualDialogTitle.react"),null,i._("Upload Art")),c("React").createElement(c("XUIContextualDialogBody.react"),null,i._("Upload PNGs with a transparent background. You can upload multiple PNGs at a time.")));return c("React").createElement(c("FileInput.react"),{accept:"image/x-png, image/jpeg, image/png",multiple:true,onChange:this.$MediaEffectFullscreenFrameEditorControls3,onMouseEnter:function(){this.setState({uploadArtTooltipShown:true})}.bind(this),onMouseLeave:function(){this.setState({uploadArtTooltipShown:false})}.bind(this)},c("React").createElement("a",{className:"_2w6x _3-fi _3-fj",href:"#"},c("React").createElement(c("Image.react"),{className:"_3-8x",height:"44",src:j("86673"),width:"44"}),c("React").createElement("div",{ref:function(p){this.uploadArtButton=p}.bind(this)}),o,c("React").createElement("div",null,i._("Upload Art"))))};n.prototype.$MediaEffectFullscreenFrameEditorControls9=function(){return c("React").createElement("a",{className:"_2w6x _3-fi _3-fj",href:"#",onClick:this.$MediaEffectFullscreenFrameEditorControls7},c("React").createElement(c("Image.react"),{className:"_3-8x",height:"44",src:j("86675"),width:"44"}),c("React").createElement("div",null,i._("Insert Text")))};n.prototype.$MediaEffectFullscreenFrameEditorControls10=function(){return c("React").createElement(c("PopoverMenu.react"),{alignv:"middle",menu:this.$MediaEffectFullscreenFrameEditorControls1()},c("React").createElement("a",{className:"_2w6x _3-fi _3-fj",href:"#"},c("React").createElement(c("Image.react"),{className:"_3-8x",height:"44",src:j("86675"),width:"44"}),c("React").createElement("div",null,"Text")))};n.prototype.$MediaEffectFullscreenFrameEditorControls11=function(){return c("MediaEffectUserContext").includesFBOnly?this.$MediaEffectFullscreenFrameEditorControls10():this.$MediaEffectFullscreenFrameEditorControls9()};n.prototype.render=function(){var o=c("mediaEffectGKCheck")("media_effect_template")&&this.props.flowType!==c("MediaEffectFlowType").EVENT&&this.props.flowType!==c("MediaEffectFlowType").TEMPLATE,p=this.$MediaEffectFullscreenFrameEditorControls6();return c("React").createElement("div",{className:"_2j1s"},c("React").createElement(c("XUIError.react"),{xuiError:p},c("React").createElement("div",{className:!!p?"_3gvu":""},c("React").createElement("div",{className:"_1pbz _3-96"},this.$MediaEffectFullscreenFrameEditorControls8(),this.props.context.enableEditorFreeText||c("MediaEffectUserContext").includesFBOnly?this.$MediaEffectFullscreenFrameEditorControls11():null),o?c("React").createElement(c("MediaEffectFrameEditorTemplatePanelContainer.react"),null):null)),c("React").createElement(c("MediaEffectEditorSideMenuContainer.react"),{flowType:this.props.flowType}))};f.exports=n}),null);
__d("MediaEffectFullscreenFrameEditorPreviewPanel.react",["ix","cx","fbt","Image.react","MediaEffectQEUtils","MediaEffectReactFrameEditorPreviewContainer.react","React","Vector","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogTitle.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").PureComponent);l=k&&k.prototype;function m(n){l.constructor.call(this,n);this.state={showPreviewFormatTooltip:false}}m.prototype.render=function(){var n=this.props.portraitCanvasWidth/this.props.popoverPortraitCanvasWidth,o=c("React").createElement("div",{className:"_3-8z"},c("React").createElement(c("MediaEffectReactFrameEditorPreviewContainer.react"),{previewScale:n,previewSize:new(c("Vector"))(this.props.popoverPortraitCanvasWidth,this.props.popoverPortraitCanvasHeight)})),p=c("React").createElement("div",{className:"_3-8z"},c("React").createElement(c("MediaEffectReactFrameEditorPreviewContainer.react"),{previewScale:n,previewSize:new(c("Vector"))(this.props.popoverPortraitCanvasWidth,this.props.popoverPortraitCanvasWidth)})),q=c("React").createElement("div",{className:"_3-8z"},c("React").createElement(c("MediaEffectReactFrameEditorPreviewContainer.react"),{previewScale:n,previewSize:new(c("Vector"))(this.props.popoverPortraitCanvasHeight,this.props.popoverPortraitCanvasWidth)})),r=c("React").createElement(c("Image.react"),{src:h("126340")}),s=c("React").createElement(c("XUIContextualDialog.react"),{contextRef:function(){return this.previewFormatsTitle}.bind(this),hideOnBlur:true,hoverContextRef:function(){return this.previewFormatsTitle}.bind(this),hoverShowDelay:1e3,position:"left",shown:this.state.showPreviewFormatTooltip,width:c("XUIContextualDialog.react").WIDTH.NORMAL},c("React").createElement(c("XUIContextualDialogTitle.react"),null,j._("Preview Formats")),c("React").createElement(c("XUIContextualDialogBody.react"),null,j._("Your art will automatically be positioned to work on different photo and video orientations.")));return c("React").createElement("div",null,c("React").createElement("div",{onMouseEnter:function(){this.setState({showPreviewFormatTooltip:true})}.bind(this),onMouseLeave:function(){this.setState({showPreviewFormatTooltip:false})}.bind(this)},c("React").createElement("span",{className:"_202m"},j._("Preview Formats")),r),c("React").createElement("div",{ref:function(t){this.previewFormatsTitle=t}.bind(this)}),s,this.props.previewConfig.showPortrait&&o,this.props.previewConfig.showProfile&&p,this.props.previewConfig.showLandscape&&q)};f.exports=m}),null);
__d("MediaEffectFullscreenFrameEditorPreviewPanelContainer.react",["FluxContainer","MediaEffectFlowType","MediaEffectFrameCreateDialogDataStore","MediaEffectFrameEditorDispatcher","MediaEffectFullscreenFrameEditorPreviewPanel.react","MediaEffectFullscreenFrameEditorSizingUtils","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorDataStore","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("MediaEffectReactFrameEditorDataStore"),c("MediaEffectReactFrameEditorCanvasDataStore"),c("MediaEffectFrameCreateDialogDataStore")]};j.calculateState=function(k){var l=c("MediaEffectReactFrameEditorDataStore").getState(),m=c("MediaEffectReactFrameEditorCanvasDataStore").getState(),n=c("MediaEffectFrameCreateDialogDataStore").getState(),o=n.screenWidth,p=n.dialogHeight,q=c("MediaEffectFullscreenFrameEditorSizingUtils").getPortraitPreviewHeight(o,p),r=9/16*q,s=c("MediaEffectFullscreenFrameEditorSizingUtils").getPortraitFullPreviewHeight(o,p),t=9/16*s,u=c("MediaEffectFrameCreateDialogDataStore").getState().flowType;return{assets:l.assets,assetOrder:l.assetOrder,backgroundColor:m.backgroundColor,backgroundImage:m.backgroundImage,cameraEnabled:m.cameraSource!=null,portraitCanvasWidth:r,portraitCanvasHeight:q,popoverPortraitCanvasWidth:t,popoverPortraitCanvasHeight:s,previewConfig:{showLandscape:u!==c("MediaEffectFlowType").LIVE_TEMPLATE,showProfile:u!==c("MediaEffectFlowType").LIVE_TEMPLATE,showPortrait:true}}};j.prototype.componentWillMount=function(){c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};j.prototype.render=function(){var k=babelHelpers["extends"]({},this.props,this.state);return c("React").createElement(c("MediaEffectFullscreenFrameEditorPreviewPanel.react"),k)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j,{withProps:true})}),null);
__d("MediaEffectColorPaletteComponentRecord",["immutable","colr-convert"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").Record;function k(q){return("00"+q.toString(16)).substr(-2)}function l(q,r){var s=q||0,t=r||r===0?r:1;return t+n()*(s-t)}function m(q,r){var s=q||0,t=r||r===0?r:1,u=2*Math.random()-1,v=(u*u*u+1)/2;return s+v*(t-s)}function n(q,r){var s=q||0,t=r||r===0?r:1,u=Math.random(),v=u*u;return s+v*(t-s)}function o(q,r){var s=q||0,t=r||r===0?r:1;return s+Math.random()*(t-s)}h=babelHelpers.inherits(p,j({hue:.5,saturation:1,lightness:.5,hueVariation:.05,saturationVariation:.3,lightnessVariation:.3}));i=h&&h.prototype;p.random=function(){return new p({hue:o(),saturation:l(),lightness:m(),hueVariation:n(.05,.4),saturationVariation:o(.2,1),lightnessVariation:o(.2,1)})};p.prototype.toRGB=function(){var q=c("colr-convert").hsl.rgb([this.hue*360,this.saturation*100,this.lightness*100]).map(Math.floor);return"#"+q.map(k).join("")};p.prototype.toString=function(){return[this.hue.toFixed(3)+"+"+this.hueVariation.toFixed(3),this.saturation.toFixed(3)+"+"+this.saturationVariation.toFixed(3),this.lightness.toFixed(3)+"+"+this.lightnessVariation.toFixed(3)].join(":")};function p(){h.apply(this,arguments)}f.exports=p}),null);
__d("MediaEffectColorPaletteRecord",["immutable","MediaEffectColorPaletteComponentRecord"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").List,k=c("immutable").Record;h=babelHelpers.inherits(l,k({components:j()}));i=h&&h.prototype;l.random=function(){return new l({components:j.of(c("MediaEffectColorPaletteComponentRecord").random(),c("MediaEffectColorPaletteComponentRecord").random(),c("MediaEffectColorPaletteComponentRecord").random(),c("MediaEffectColorPaletteComponentRecord").random())})};l.prototype.getMainColor=function(){if(this.components.size===0)return null;return this.components.get(0).toRGB()};l.prototype.toString=function(){return this.components.map(function(m){return m.toString()}).join(",")};function l(){h.apply(this,arguments)}f.exports=l}),null);
__d("MediaEffectReactFrameEditorScalarAssetPositionRecord",["immutable"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").Record;h=babelHelpers.inherits(k,j({anchor_origin:"asset_start",anchor_asset_size_percentage:50,anchor_pixel_offset:0,asset_origin:"canvas_start",asset_canvas_size_percentage:50,asset_pixel_offset:0}));i=h&&h.prototype;k.canonical=function(l,m,n){__p&&__p();var o=n-l/2;if(Math.abs(o)<.01)return new k();if(o>0){var p=l-(n+m/2);return new k({anchor_origin:"asset_end",anchor_asset_size_percentage:0,asset_origin:"canvas_end",asset_canvas_size_percentage:100*p/l})}else{var q=n-m/2;return new k({anchor_origin:"asset_start",anchor_asset_size_percentage:0,asset_origin:"canvas_start",asset_canvas_size_percentage:100*q/l})}};k.prototype.isBackendCompatible=function(){if(this.anchor_pixel_offset||this.asset_pixel_offset||this.anchor_origin==="asset_start"&&this.asset_origin==="canvas_end"||this.anchor_origin==="asset_end"&&this.asset_origin==="canvas_start")return false;return this.anchor_asset_size_percentage===50&&this.asset_canvas_size_percentage===50||this.anchor_asset_size_percentage===0};k.prototype.getStart=function(l,m){var n=this.$MediaEffectReactFrameEditorScalarAssetPositionRecord1(l),o=this.$MediaEffectReactFrameEditorScalarAssetPositionRecord2(m);return n-o};k.prototype.$MediaEffectReactFrameEditorScalarAssetPositionRecord1=function(l){var m=l*this.asset_canvas_size_percentage/100+this.asset_pixel_offset;if(this.asset_origin==="canvas_start")return m;else return l-m};k.prototype.$MediaEffectReactFrameEditorScalarAssetPositionRecord2=function(l){var m=l*this.anchor_asset_size_percentage/100+this.anchor_pixel_offset;if(this.anchor_origin==="asset_start")return m;else return l-m};function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("MediaEffectReactFrameEditorAssetPositionRecord",["immutable","MediaEffectReactFrameEditorScalarAssetPositionRecord","Rect"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").Record;h=babelHelpers.inherits(k,j({x:new(c("MediaEffectReactFrameEditorScalarAssetPositionRecord"))(),y:new(c("MediaEffectReactFrameEditorScalarAssetPositionRecord"))()}));i=h&&h.prototype;k.fromCenter=function(l,m){return new k({x:new(c("MediaEffectReactFrameEditorScalarAssetPositionRecord"))({anchor_origin:"asset_start",anchor_asset_size_percentage:50,anchor_pixel_offset:0,asset_origin:"canvas_start",asset_canvas_size_percentage:l,asset_pixel_offset:0}),y:new(c("MediaEffectReactFrameEditorScalarAssetPositionRecord"))({anchor_origin:"asset_start",anchor_asset_size_percentage:50,anchor_pixel_offset:0,asset_origin:"canvas_start",asset_canvas_size_percentage:m,asset_pixel_offset:0})})};k.canonical=function(l,m){return new k({x:c("MediaEffectReactFrameEditorScalarAssetPositionRecord").canonical(m.x,l.w(),l.w()/2+l.l),y:c("MediaEffectReactFrameEditorScalarAssetPositionRecord").canonical(m.y,l.h(),l.h()/2+l.t)})};k.prototype.isBackendCompatible=function(){return this.x.isBackendCompatible()&&this.y.isBackendCompatible()};k.prototype.toAbsolute=function(l,m){var n=this.x.getStart(l.x,m.x),o=this.y.getStart(l.y,m.y);return new(c("Rect"))(o,n+m.x,o+m.y,n)};function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("MediaEffectReactFrameDeserializer",["invariant","immutable","MediaEffectColorPaletteComponentRecord","MediaEffectColorPaletteRecord","MediaEffectReactFrameEditorAssetPositionRecord","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorImageAssetRecord","MediaEffectReactFrameEditorScalarAssetPositionRecord","MediaEffectReactFrameEditorScalarSizeRecord","MediaEffectReactFrameEditorSize","MediaEffectReactFrameEditorTemplateRecord","MediaEffectReactFrameEditorTextAssetRecord"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("immutable").Map,j=c("immutable").List;function k(v){return!v||v==="0"?null:v}function l(v){var w=v.split("+"),x=parseFloat(w[0]),y=parseFloat(w[1]);x>=0&&x<=1||h(0);y>=0&&y<=1||h(0);return{value:x,variation:y}}function m(v){var w=v.split(":").map(l);w.length===3||h(0);return new(c("MediaEffectColorPaletteComponentRecord"))({hue:w[0].value,saturation:w[1].value,lightness:w[2].value,hueVariation:w[0].variation,saturationVariation:w[1].variation,lightnessVariation:w[2].variation})}function n(v){if(!v)return new(c("MediaEffectColorPaletteRecord"))({components:j()});return new(c("MediaEffectColorPaletteRecord"))({components:j(v.split(",").map(m))})}function o(v,w){var x=v;return new(c("MediaEffectReactFrameEditorAssetPositionRecord"))({x:new(c("MediaEffectReactFrameEditorScalarAssetPositionRecord"))({anchor_asset_size_percentage:x.horizontal_alignment==="center"?50:0,anchor_origin:x.horizontal_alignment==="right"?"asset_end":"asset_start",asset_origin:x.horizontal_alignment==="right"?"canvas_end":"canvas_start",asset_canvas_size_percentage:x.horizontal_alignment==="center"?50:x.horizontal_margin}),y:new(c("MediaEffectReactFrameEditorScalarAssetPositionRecord"))({anchor_asset_size_percentage:x.vertical_alignment==="center"?50:0,anchor_origin:x.vertical_alignment==="bottom"?"asset_end":"asset_start",asset_origin:x.vertical_alignment==="bottom"?"canvas_end":"canvas_start",asset_canvas_size_percentage:x.vertical_alignment==="center"?50:x.vertical_margin})})}function p(v,w,x){var y=w.size_dimension==="width",z=v.size_dimension==="height";if(!y&&!z)return new(c("MediaEffectReactFrameEditorSize").Fill)({width:new(c("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:v.size}),height:new(c("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:w.size}),aspect_ratio:v.size/w.size});if(y&&z)return new(c("MediaEffectReactFrameEditorSize").Fit)({width:new(c("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:w.size}),height:new(c("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:v.size}),aspect_ratio:w.size/v.size});if(y)return new(c("MediaEffectReactFrameEditorSize").ScaleWidth)({width:new(c("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:w.size})});return new(c("MediaEffectReactFrameEditorSize").ScaleHeight)({height:new(c("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:v.size})})}function q(v,w,x){return new(c("MediaEffectReactFrameEditorSize").Stretch)({width:new(c("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:w.textbox_width}),height:new(c("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:w.size})})}function r(v){var w=k(v.source_template_asset_id);return new(c("MediaEffectReactFrameEditorImageAssetRecord"))({assetFBID:k(v.asset_id),dynamic_sticker_pack_id:k(v.dynamic_sticker_pack_id),dynamic_sticker_type:v.dynamic_sticker_type,stickerFBID:v.sticker_id,sourceTemplateAssetFBID:w,hostedImageURI:v.sticker_url,position:o(v.landscape_position,v.portrait_position),assetSize:p(v.landscape_position,v.portrait_position,c("MediaEffectReactFrameEditorCanvasDataStore").getState().canvasSize),readOnly:!!w,assocTextAsset:v.assoc_text_asset&&s(v.assoc_text_asset)})}function s(v){var w=v.font_name||v.custom_font_id;!!w||h(0);return new(c("MediaEffectReactFrameEditorTextAssetRecord"))({assetFBID:k(v.asset_id),content:v.content,font:c("MediaEffectReactFrameEditorCanvasDataStore").getFont(w),color:"#"+v.color,sourceTemplateAssetFBID:k(v.source_template_asset_id),textHorizontalAlignment:v.portrait_position.text_horizontal_alignment,position:o(v.landscape_position,v.portrait_position),assetSize:q(v.landscape_position,v.portrait_position,c("MediaEffectReactFrameEditorCanvasDataStore").getState().canvasSize),contentMustBeUpdated:v.content_must_be_updated})}function t(v){__p&&__p();var w=i(),x=j().withMutations(function(y){__p&&__p();w=w.withMutations(function(z){__p&&__p();v.stickers.forEach(function(A,B){var C=r(A);C=C.set("localAssetID",B+1);if(C.assocTextAsset)C=C.set("assocTextAsset",C.assocTextAsset.set("localAssetID",B+1));y.push(C.localAssetID);z.set(C.localAssetID,C)});v.text.forEach(function(A,B){var C=s(A);C=C.set("localAssetID",v.stickers.length+B+1);y.push(C.localAssetID);z.set(C.localAssetID,C)})})});return{assets:w,assetOrder:x,frameFBID:v.fbid,filterID:v.filter_id,templateFBID:k(v.source_template_id),colorPalette:n(v.color_palette)}}function u(v){return new(c("MediaEffectReactFrameEditorTemplateRecord"))({templateFBID:v.id,previewURL:v.uri,sourceTemplateFBID:v.source_id,variants:j(v.variant_ids),colorPalette:n(v.color_palette)})}f.exports={deserializeData:t,deserializeColorPalette:n,deserializeTemplate:u}}),null);
__d("MediaEffectReactFrameEditorAsset.react",["ix","cx","fbt","DOMQuery","FBDragHandle.react","FBToggleSwitch.react","FileInput.react","InputLabel.react","MediaEffectEditorAsset","MediaEffectEditorFunnelLogger","MediaEffectFlowType","MediaEffectMetadataActionCreators","MediaEffectReactFrameEditorCanvasImageAsset.react","MediaEffectReactFrameEditorImageAsset.react","MediaEffectReactFrameEditorImageAssetRecord","MediaEffectReactFrameEditorTextAsset.react","MediaEffectReactFrameEditorTextAssetRecord","MountedContextMenu.react","PopoverMenu.react","React","ReactDOM","ReactXUIMenu","MenuSeparator.react","SimpleXUIDialog","XUIPopoverButton.react","XUIError.react","SUIButton.react","SUIGlyphIcon.react","SUIMediaEffectTheme","fbglyph","emptyFunction","immutable","nullthrows"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("ReactXUIMenu").Item,n=c("ReactXUIMenu").ItemNoAction,o=c("immutable").Map;function p(r){return{top:r.t,left:r.l,width:r.w(),height:r.h(),position:"absolute"}}k=babelHelpers.inherits(q,c("React").PureComponent);l=k&&k.prototype;function q(r){__p&&__p();l.constructor.call(this,r);this.$MediaEffectReactFrameEditorAsset1=[];this.$MediaEffectReactFrameEditorAsset2=[];this.$MediaEffectReactFrameEditorAsset3=[];this.$MediaEffectReactFrameEditorAsset4=null;this.$MediaEffectReactFrameEditorAsset5=null;this.$MediaEffectReactFrameEditorAsset6=null;this.$MediaEffectReactFrameEditorAsset7=function(){if(!this.props.readOnly&&this.props.enableEditorFreeText)c("MediaEffectMetadataActionCreators").editText(this.props.localAssetID)}.bind(this);this.$MediaEffectReactFrameEditorAsset8=function(){return this.props.initialPositionMap}.bind(this);this.$MediaEffectReactFrameEditorAsset9=function(){var s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return(s=this.props).onDrag.apply(s,[this.props.localAssetID].concat(u))}.bind(this);this.$MediaEffectReactFrameEditorAsset10=function(){c("MediaEffectMetadataActionCreators").raiseAsset(this.props.localAssetID)}.bind(this);this.$MediaEffectReactFrameEditorAsset11=function(){var s=this.props,t=s.assetData,u=s.localAssetID;c("MediaEffectMetadataActionCreators").removeBackground(u,t.stickerFBID);this.setState({hasProcessed:true});c("MediaEffectEditorFunnelLogger").logApplyAutoBackgroundRemoval(this.props.assetData.stickerFBID)}.bind(this);this.$MediaEffectReactFrameEditorAsset12=function(){c("MediaEffectMetadataActionCreators").raiseAsset(this.props.localAssetID,true)}.bind(this);this.$MediaEffectReactFrameEditorAsset13=function(){c("MediaEffectMetadataActionCreators").lowerAsset(this.props.localAssetID)}.bind(this);this.$MediaEffectReactFrameEditorAsset14=function(){c("MediaEffectMetadataActionCreators").lowerAsset(this.props.localAssetID,true)}.bind(this);this.$MediaEffectReactFrameEditorAsset15=function(s){s.target.files[0]&&c("MediaEffectMetadataActionCreators").replaceImage(this.props.localAssetID,s.target.files[0])}.bind(this);this.$MediaEffectReactFrameEditorAsset16=function(){c("MediaEffectMetadataActionCreators").duplicateAsset(this.props.localAssetID)}.bind(this);this.$MediaEffectReactFrameEditorAsset17=function(){var s=c("nullthrows")(this.$MediaEffectReactFrameEditorAsset6);if(!s.isTextAsset()){s.toggleScaleWithWidth();c("MediaEffectEditorFunnelLogger").logSetScaleWithWidth((!s.isScalingWithWidth()).toString())}}.bind(this);this.$MediaEffectReactFrameEditorAsset18=function(){var s=c("nullthrows")(this.$MediaEffectReactFrameEditorAsset6);if(!s.isTextAsset()){s.toggleScaleWithHeight();c("MediaEffectEditorFunnelLogger").logSetScaleWithHeight((!s.isScalingWithHeight()).toString())}}.bind(this);this.$MediaEffectReactFrameEditorAsset19=function(){var s=c("nullthrows")(this.$MediaEffectReactFrameEditorAsset6);c("SimpleXUIDialog").showConfirm(s.isTextAsset()?j._("Are you sure you want to delete this text?"):j._("Are you sure you want to delete this art?"),null,function(t){return t?c("MediaEffectMetadataActionCreators").deleteAsset(this.props.localAssetID):null}.bind(this))}.bind(this);this.$MediaEffectReactFrameEditorAsset20=function(event){__p&&__p();if(this.props.readOnly)return;if(event.button===0)if(!this.props.selected){if(!event.shiftKey)c("MediaEffectMetadataActionCreators").deselectAll();c("MediaEffectMetadataActionCreators").selectAsset(this.props.localAssetID)}else if(event.shiftKey)c("MediaEffectMetadataActionCreators").deselectAsset(this.props.localAssetID)}.bind(this);this.$MediaEffectReactFrameEditorAsset21=function(){var s=this.props.assetData;if(!(s instanceof c("MediaEffectReactFrameEditorTextAssetRecord")))return;c("MediaEffectMetadataActionCreators").setContentMustBeUpdated(s.localAssetID,!s.contentMustBeUpdated)}.bind(this);this.$MediaEffectReactFrameEditorAsset22=function(){this.setState({isInPreview:true});c("MediaEffectEditorFunnelLogger").logPreviewAutoBackgroundRemoval(this.props.assetData.stickerFBID)}.bind(this);this.$MediaEffectReactFrameEditorAsset23=function(){this.setState({isInPreview:false})}.bind(this);this.$MediaEffectReactFrameEditorAsset6=new(c("MediaEffectEditorAsset"))(r.localAssetID,r.assetData);this.state={isInPreview:false,hasProcessed:false}}q.prototype.componentWillReceiveProps=function(r){var s=c("nullthrows")(this.$MediaEffectReactFrameEditorAsset6);s.updateAsset(r.localAssetID,r.assetData)};q.prototype.componentDidUpdate=function(){var r=c("nullthrows")(this.$MediaEffectReactFrameEditorAsset6);this.$MediaEffectReactFrameEditorAsset1.forEach(function(s){return s.checked=r.isScalingWithWidth()});this.$MediaEffectReactFrameEditorAsset2.forEach(function(s){return s.checked=r.isScalingWithHeight()});this.$MediaEffectReactFrameEditorAsset3.forEach(function(s){return s.checked=this.props.assetData.contentMustBeUpdated}.bind(this))};q.prototype.$MediaEffectReactFrameEditorAsset24=function(r){if(r.button===0){r.stopPropagation();r.preventDefault()}};q.prototype.$MediaEffectReactFrameEditorAsset25=function(r,s){var t=r||this.props.assetData.assetSize,u=s||this.props.assetData.position;if(!t||!t.isValid())return null;var v=t.toAbsolute(this.props.canvasSize),w=u.toAbsolute(this.props.canvasSize,v);return w};q.prototype.$MediaEffectReactFrameEditorAsset26=function(r){return this.props.assetData instanceof c("MediaEffectReactFrameEditorImageAssetRecord")?this.$MediaEffectReactFrameEditorAsset27(this.props.assetData,r):this.$MediaEffectReactFrameEditorAsset28(this.props.assetData,r)};q.prototype.$MediaEffectReactFrameEditorAsset27=function(r,s){if(r.assocTextAsset&&(this.props.selected||this.props.editedTextID===this.props.localAssetID))return this.$MediaEffectReactFrameEditorAsset28(r.assocTextAsset,s);return this.props.isInCanvas?c("React").createElement(c("MediaEffectReactFrameEditorCanvasImageAsset.react"),{imageRecord:r,isInPreview:this.state.isInPreview,key:this.props.localAssetID,localAssetID:this.props.localAssetID}):c("React").createElement(c("MediaEffectReactFrameEditorImageAsset.react"),{imageRecord:r,isInPreview:this.state.isInPreview,key:this.props.localAssetID,localAssetID:this.props.localAssetID})};q.prototype.$MediaEffectReactFrameEditorAsset29=function(){var r=this.props.assetData;if(r instanceof c("MediaEffectReactFrameEditorImageAssetRecord")){var s=r.validationResult;if(s&&!s.success)return s.reason}if(r instanceof c("MediaEffectReactFrameEditorTextAssetRecord")&&this.props.flowType!==c("MediaEffectFlowType").TEMPLATE)return this.props.isValidating&&r.contentMustBeUpdated?j._("Please change this text to continue"):null;return null};q.prototype.$MediaEffectReactFrameEditorAsset28=function(r,s){return c("React").createElement(c("MediaEffectReactFrameEditorTextAsset.react"),{assetData:r,canvasSize:this.props.canvasSize,editing:this.props.editedTextID===this.props.localAssetID,enableFontSettingsDialog:this.props.enableFontSettingsDialog,key:this.props.localAssetID,localAssetID:this.props.localAssetID,position:s,readOnly:this.props.readOnly,textboxHeight:s&&s.h()})};q.prototype.$MediaEffectReactFrameEditorAsset30=function(r,s){if(this.props.readOnly)return;var t=c("ReactDOM").findDOMNode(r);if(!(t instanceof HTMLElement))return;var u=c("React").createElement(c("MountedContextMenu.react"),{menu:s,mountedTriggerElem:t}),v=t.children[0];c("ReactDOM").render(u,v)};q.prototype.$MediaEffectReactFrameEditorAsset31=function(){var r=c("nullthrows")(this.$MediaEffectReactFrameEditorAsset6),s=r.isTextAsset(),t=this.props.flowType===c("MediaEffectFlowType").TEMPLATE;return c("React").createElement(c("ReactXUIMenu"),null,c("React").createElement(m,{onclick:this.$MediaEffectReactFrameEditorAsset10},j._("Bring forward")),c("React").createElement(m,{onclick:this.$MediaEffectReactFrameEditorAsset12},j._("Bring to front")),c("React").createElement(m,{onclick:this.$MediaEffectReactFrameEditorAsset13},j._("Send backward")),c("React").createElement(m,{onclick:this.$MediaEffectReactFrameEditorAsset14},j._("Send to back")),c("React").createElement(c("MenuSeparator.react"),null),!s&&c("React").createElement(m,{renderas:"label"},c("React").createElement(c("FileInput.react"),{accept:"image/x-png, image/jpeg, image/png",multiple:false,onChange:this.$MediaEffectReactFrameEditorAsset15},c("React").createElement("a",{style:{color:"inherit",textDecoration:"none"}},j._("Replace Art")))),c("React").createElement(m,{onclick:this.$MediaEffectReactFrameEditorAsset16},j._("Duplicate")),c("React").createElement(m,{onclick:this.$MediaEffectReactFrameEditorAsset19},j._("Delete")),c("React").createElement(c("MenuSeparator.react"),null),c("React").createElement(n,{onclick:this.$MediaEffectReactFrameEditorAsset17},c("React").createElement(c("InputLabel.react"),{label:j._("Shrink with width")},c("React").createElement(c("FBToggleSwitch.react"),{animate:true,checked:r.isScalingWithWidth(),disabled:s,ref:function(u){return u&&this.$MediaEffectReactFrameEditorAsset1.push(c("DOMQuery").find(c("ReactDOM").findDOMNode(u),"input"))}.bind(this)}))),c("React").createElement(n,{onclick:this.$MediaEffectReactFrameEditorAsset18},c("React").createElement(c("InputLabel.react"),{label:j._("Shrink with height")},c("React").createElement(c("FBToggleSwitch.react"),{animate:true,checked:r.isScalingWithHeight(),disabled:s,ref:function(u){return u&&this.$MediaEffectReactFrameEditorAsset2.push(c("DOMQuery").find(c("ReactDOM").findDOMNode(u),"input"))}.bind(this)}))),t?this.$MediaEffectReactFrameEditorAsset32(s):null)};q.prototype.$MediaEffectReactFrameEditorAsset32=function(r){var s=this.props.assetData;if(!r)return null;return c("React").createElement(n,{onclick:this.$MediaEffectReactFrameEditorAsset21},c("React").createElement(c("InputLabel.react"),{label:j._("Require user to update text")},c("React").createElement(c("FBToggleSwitch.react"),{animate:true,checked:s.contentMustBeUpdated,ref:function(t){return t&&this.$MediaEffectReactFrameEditorAsset3.push(c("DOMQuery").find(c("ReactDOM").findDOMNode(t),"input"))}.bind(this)})))};q.prototype.$MediaEffectReactFrameEditorAsset33=function(){var r=this.props.assetData;if(r instanceof c("MediaEffectReactFrameEditorImageAssetRecord"))return!!r.processedImageURI;return false};q.prototype.$MediaEffectReactFrameEditorAsset34=function(){if(!this.$MediaEffectReactFrameEditorAsset33()||this.state.hasProcessed)return false;return true};q.prototype.render=function(){__p&&__p();var r=this.$MediaEffectReactFrameEditorAsset25(),s=r?p(r):{display:"none"};if(r){if(!this.$MediaEffectReactFrameEditorAsset4)this.$MediaEffectReactFrameEditorAsset4=this.$MediaEffectReactFrameEditorAsset31();if(!this.$MediaEffectReactFrameEditorAsset5)this.$MediaEffectReactFrameEditorAsset5=this.$MediaEffectReactFrameEditorAsset31()}var t=c("React").createElement("div",{style:s},this.$MediaEffectReactFrameEditorAsset26(r)),u=this.$MediaEffectReactFrameEditorAsset29();if(!this.props.readOnly&&this.props.editedTextID!==this.props.localAssetID)return c("React").createElement("div",{onDoubleClick:this.$MediaEffectReactFrameEditorAsset7,onMouseDown:this.$MediaEffectReactFrameEditorAsset20},c("React").createElement(c("FBDragHandle.react"),{horizontal:true,initialData:this.$MediaEffectReactFrameEditorAsset8,key:this.props.localAssetID,onChange:this.$MediaEffectReactFrameEditorAsset9,onEnd:this.props.onDrop,stopOnLeave:false,vertical:true},t,c("React").createElement(c("XUIError.react"),{xuiError:u},c("React").createElement("div",{className:"_sdt",ref:function(v){return v&&this.$MediaEffectReactFrameEditorAsset5&&this.$MediaEffectReactFrameEditorAsset30(v,this.$MediaEffectReactFrameEditorAsset5)}.bind(this),style:s},c("React").createElement("div",null),c("React").createElement("div",{className:"_1ytk"},c("React").createElement("div",{className:"_1ytl"}),this.$MediaEffectReactFrameEditorAsset4?c("React").createElement("div",null,c("React").createElement(c("PopoverMenu.react"),{alignh:"center",alignv:"top",className:"_1ytm",menu:this.$MediaEffectReactFrameEditorAsset4,onMouseDown:this.$MediaEffectReactFrameEditorAsset24},c("React").createElement(c("XUIPopoverButton.react"),null)),this.$MediaEffectReactFrameEditorAsset34()?c("React").createElement("div",{className:"_d2q"},c("React").createElement(c("SUIButton.react"),{className:"_d2q",icon:c("React").createElement(c("SUIGlyphIcon.react"),{srcDefault:h("115218")}),label:j._("Make the background transparent"),labelIsHidden:true,onClick:this.$MediaEffectReactFrameEditorAsset11,onMouseLeave:this.$MediaEffectReactFrameEditorAsset23,onMouseOver:this.$MediaEffectReactFrameEditorAsset22,theme:c("SUIMediaEffectTheme"),tooltip:j._("Make the background transparent"),tooltipDelay:200,use:"special"})):null):null)))));else return c("React").createElement(c("XUIError.react"),{xuiError:u},t)};q.defaultProps={onDrag:c("emptyFunction"),onDrop:c("emptyFunction"),initialPositionMap:o(),isValidating:false,readOnly:false,selected:false,editedTextID:null,enableFontSettingsDialog:false,enableEditorFreeText:false,flowType:null,isInCanvas:false};f.exports=q}),null);
__d("MediaEffectReactFrameEditorCamera.react",["React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement("div",{style:{position:"absolute",overflow:"hidden",left:"50%",top:"50%",marginLeft:-(this.props.width/2),marginTop:-(this.props.height/2)}},c("React").createElement("video",{autoPlay:true,ref:"video",style:{width:this.props.width,height:this.props.height,objectFit:"cover"},src:this.props.videoSrc}))};j.prototype.componentDidUpdate=function(k){if(k.cameraPaused&&!this.props.cameraPaused)this.refs.video.play();else if(!k.cameraPaused&&this.props.cameraPaused)this.refs.video.pause()};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MediaEffectReactFrameEditorCameraContainer.react",["FluxContainer","MediaEffectReactFrameEditorCamera.react","MediaEffectReactFrameEditorCanvasDataStore","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.getStores=function(){return[c("MediaEffectReactFrameEditorCanvasDataStore")]};j.calculateState=function(k,l){var m=c("MediaEffectReactFrameEditorCanvasDataStore").getState();return{cameraPaused:m.cameraPaused,videoSrc:m.cameraSource}};j.prototype.render=function(){var k=babelHelpers["extends"]({},this.props,this.state);return c("React").createElement(c("MediaEffectReactFrameEditorCamera.react"),k)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j,{withProps:true})}),null);
__d("MediaEffectCanvasEducation.react",["cx","fbt","React"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;l.prototype.render=function(){return c("React").createElement("div",{className:"_3fsi"},c("React").createElement("div",{className:"_vzg"},c("React").createElement("div",{className:"_3fsj"},i._("Drag and Drop PNGs")),c("React").createElement("div",{className:"_3fso"},i._("or use the Upload Art button"))))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("AssetVerticalAlignmentType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({TOP:"top",BOTTOM:"bottom",CENTER:"center"})}),null);
__d("MediaEffectReactFrameEditorGridlines.react",["cx","fbt","AssetHorizontalAlignmentType","AssetVerticalAlignmentType","MediaEffectFrameEditorConstants","React","nullthrows"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MediaEffectFrameEditorConstants").EDITOR_BUFFER_SIZE;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=this.props.asset.get("assetSize").toAbsolute(this.props.canvasSize),o=this.props.asset.get("position").toAbsolute(this.props.canvasSize,n),p=this.$MediaEffectReactFrameEditorGridlines1(this.props.asset,this.props.canvasSize);return this.props.type==="vertical"?this.$MediaEffectReactFrameEditorGridlines2(o,n,p):this.$MediaEffectReactFrameEditorGridlines3(o,n,p)};m.prototype.$MediaEffectReactFrameEditorGridlines2=function(n,o,p){__p&&__p();var q={},r={};q.left=-5+l+n.l+o.x/2+"px";q.height=Math.max(p.vMargin-2,0)+"px";if(q.height==="0px")q.borderBottom="0px";if(p.vMargin<40){if(p.assetVAlign===c("AssetVerticalAlignmentType").TOP)r.top="-20px";else r.bottom="-20px";r.left="-3px"}else{r.right="10px";r.top=p.vMargin/2-8+"px"}if(p.assetVAlign===c("AssetVerticalAlignmentType").CENTER)return c("React").createElement("div",null,this.$MediaEffectReactFrameEditorGridlines4(babelHelpers["extends"]({},q,{top:l}),r,"Centered"),this.$MediaEffectReactFrameEditorGridlines4(babelHelpers["extends"]({},q,{bottom:l}),r,"Centered"));if(p.assetVAlign===c("AssetVerticalAlignmentType").TOP)q.top=l;else q.bottom=l;return this.$MediaEffectReactFrameEditorGridlines4(q,r,p.relativeVMargin.toFixed(0)+"%")};m.prototype.$MediaEffectReactFrameEditorGridlines4=function(n,o,p){return c("React").createElement("div",{style:n,className:"_4ro5"},c("React").createElement("div",{className:"_4ro6"}),c("React").createElement("div",{className:"_4ro7"}),c("React").createElement("div",{style:o,className:"_4ro8"},p==="Centered"?i._("Centered"):p))};m.prototype.$MediaEffectReactFrameEditorGridlines3=function(n,o,p){__p&&__p();var q={},r={};q.top=-5+l+n.t+o.y/2+"px";q.width=Math.max(p.hMargin-2,0)+"px";if(q.width==="0px")q.borderRight="0px";if(p.hMargin<40){if(p.assetHAlign===c("AssetHorizontalAlignmentType").LEFT)r.left="-23px";else r.right="-23px";r.top="-3px"}else{r.top="-15px";r.left=p.hMargin/3+"px"}if(p.assetHAlign===c("AssetHorizontalAlignmentType").CENTER)return c("React").createElement("div",null,this.$MediaEffectReactFrameEditorGridlines5(babelHelpers["extends"]({},q,{left:l}),r,"Centered"),this.$MediaEffectReactFrameEditorGridlines5(babelHelpers["extends"]({},q,{right:l}),r,"Centered"));if(p.assetHAlign===c("AssetHorizontalAlignmentType").LEFT)q.left=l;else q.right=l;return this.$MediaEffectReactFrameEditorGridlines5(q,r,p.relativeHMargin.toFixed(0)+"%")};m.prototype.$MediaEffectReactFrameEditorGridlines5=function(n,o,p){return c("React").createElement("div",{style:n,className:"_4ro9"},c("React").createElement("div",{className:"_4roa"}),c("React").createElement("div",{className:"_4rob"}),c("React").createElement("div",{style:o,className:"_4ro8"},p==="Centered"?i._("Centered"):p))};m.prototype.$MediaEffectReactFrameEditorGridlines1=function(n,o){var p=c("nullthrows")(n.assetSize).toAbsolute(o),q=n.position,r=q.toAbsolute(o,p);return{assetHAlign:q.x.asset_origin==="canvas_start"?q.x.anchor_asset_size_percentage===50?c("AssetHorizontalAlignmentType").CENTER:c("AssetHorizontalAlignmentType").LEFT:c("AssetHorizontalAlignmentType").RIGHT,assetVAlign:q.y.asset_origin==="canvas_start"?q.y.anchor_asset_size_percentage===50?c("AssetVerticalAlignmentType").CENTER:c("AssetVerticalAlignmentType").TOP:c("AssetVerticalAlignmentType").BOTTOM,hMargin:q.x.asset_origin==="canvas_start"?r.l:o.x-r.r,vMargin:q.y.asset_origin==="canvas_start"?r.t:o.y-r.b,relativeHMargin:q.x.asset_canvas_size_percentage,relativeVMargin:q.y.asset_canvas_size_percentage}};function m(){j.apply(this,arguments)}f.exports=m}),null);
__d("MediaEffectReactFrameEditorCanvas.react",["cx","fbt","Image.react","immutable","LayerAutoFocusReact","LayerFadeOnHide","LayerHideOnBlur","LayerHideOnEscape","MediaEffectCanvasEducation.react","MediaEffectFrameEditorConstants","MediaEffectFrameRenderer","MediaEffectMetadataActionCreators","MediaEffectReactFrameEditorAsset.react","MediaEffectReactFrameEditorAssetPositionRecord","MediaEffectReactFrameEditorCameraContainer.react","MediaEffectReactFrameEditorGridlines.react","MediaEffectReactFrameEditorSelectionBoxContainer.react","MountedContextMenu.react","React","ReactDOM","ReactXUIMenu","nullthrows","Rect","SimpleXUIDialog","throttle","Vector","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react","XUIError.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("immutable").Map,m=c("MediaEffectFrameEditorConstants").EDITOR_BUFFER_SIZE,n=c("ReactXUIMenu").Item,o=10,p=l({Delete:"DELETE",Backspace:"DELETE",Escape:"UNSELECT",ArrowLeft:"NUDGELEFT",ArrowRight:"NUDGERIGHT",ArrowUp:"NUDGEUP",ArrowDown:"NUDGEDOWN"}),q=l({"?":"SHOWKEY_BINDINGS"});function r(t){return c("React").createElement("div",{style:{margin:"0 auto 8px auto",width:t.width+2*m}},c("React").createElement(c("XUIText.react"),{className:"_38wf _1e6t"},i._("Canvas")))}j=babelHelpers.inherits(s,c("React").PureComponent);k=j&&j.prototype;function s(){__p&&__p();var t;for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];(t=k.constructor).call.apply(t,[this].concat(v));this.state={canvasErrorMessage:null,showKeyBindings:false};this.$MediaEffectReactFrameEditorCanvas26=c("throttle")(function(x){c("MediaEffectFrameRenderer").percentageCovered(x.assets,x.assetOrder,new(c("Vector"))(x.canvasWidth,x.canvasHeight)).then(function(y){this.props.updateCoverage(y);if(y>.5)this.setState({canvasErrorMessage:i._("Your frame covers large canvas space, please consider freeing more space.")});else this.setState({canvasErrorMessage:null})}.bind(this)).done()}.bind(this),1e3);this.$MediaEffectReactFrameEditorCanvas30=function(x){setTimeout(!x&&this.$MediaEffectReactFrameEditorCanvas28(),0)}.bind(this);this.$MediaEffectReactFrameEditorCanvas33=function(){c("MediaEffectMetadataActionCreators").addText(null,this.$MediaEffectReactFrameEditorCanvas6,this.$MediaEffectReactFrameEditorCanvas7)}.bind(this);this.$MediaEffectReactFrameEditorCanvas16=function(event){__p&&__p();if(event.button===0&&this.$MediaEffectReactFrameEditorCanvas17&&(event.target===this.$MediaEffectReactFrameEditorCanvas1||event.target===this.$MediaEffectReactFrameEditorCanvas17))c("MediaEffectMetadataActionCreators").deselectAll();else if(this.props.editedTextID)return;else if(event.button===2&&event.target===this.$MediaEffectReactFrameEditorCanvas1){var x=c("ReactDOM").findDOMNode(this.$MediaEffectReactFrameEditorCanvas1).getBoundingClientRect(),y=event.clientX-x.left,z=event.clientY-x.top;this.$MediaEffectReactFrameEditorCanvas6=y/this.props.canvasWidth*100;this.$MediaEffectReactFrameEditorCanvas7=z/this.props.canvasHeight*100}this.$MediaEffectReactFrameEditorCanvas29();event.preventDefault()}.bind(this);this.$MediaEffectReactFrameEditorCanvas29=function(){if(this.$MediaEffectReactFrameEditorCanvas17)this.$MediaEffectReactFrameEditorCanvas17.focus()}.bind(this);this.$MediaEffectReactFrameEditorCanvas13=function(event){var x=p.get(event.key);this.$MediaEffectReactFrameEditorCanvas34(x,event)}.bind(this);this.$MediaEffectReactFrameEditorCanvas14=function(event){var x=q.get(event.key);this.$MediaEffectReactFrameEditorCanvas34(x,event)}.bind(this);this.$MediaEffectReactFrameEditorCanvas10=function(x,y,z,A,B,C){return this.$MediaEffectReactFrameEditorCanvas36(x,null,null,y,z,A,B,C)}.bind(this);this.$MediaEffectReactFrameEditorCanvas12=function(x){x.preventDefault();if(!x.dataTransfer||this.props.readOnly)return;var y=x.dataTransfer.files;if(y)for(var z=0;z<y.length;z++){var A=y.item(z);A&&c("MediaEffectMetadataActionCreators").addImage(A)}}.bind(this);this.$MediaEffectReactFrameEditorCanvas5=l({DELETE:function(event){return this.$MediaEffectReactFrameEditorCanvas18(event)}.bind(this),UNSELECT:function(event){return this.$MediaEffectReactFrameEditorCanvas19(event)}.bind(this),NUDGELEFT:function(event){return this.$MediaEffectReactFrameEditorCanvas20(event)}.bind(this),NUDGERIGHT:function(event){return this.$MediaEffectReactFrameEditorCanvas21(event)}.bind(this),NUDGEUP:function(event){return this.$MediaEffectReactFrameEditorCanvas22(event)}.bind(this),NUDGEDOWN:function(event){return this.$MediaEffectReactFrameEditorCanvas23(event)}.bind(this),SHOWKEY_BINDINGS:function(event){return this.$MediaEffectReactFrameEditorCanvas24(event)}.bind(this)});this.$MediaEffectReactFrameEditorCanvas8=this.$MediaEffectReactFrameEditorCanvas8.bind(this);this.$MediaEffectReactFrameEditorCanvas9=this.$MediaEffectReactFrameEditorCanvas9.bind(this);this.$MediaEffectReactFrameEditorCanvas2=this.$MediaEffectReactFrameEditorCanvas25();this.$MediaEffectReactFrameEditorCanvas4=false}s.prototype.componentWillReceiveProps=function(t){if(!this.props.assets.equals(t.assets)&&t.assets.every(function(u){return!!u.assetSize}))this.$MediaEffectReactFrameEditorCanvas26(t)};s.prototype.$MediaEffectReactFrameEditorCanvas9=function(t){this.$MediaEffectReactFrameEditorCanvas27(t.target)};s.prototype.$MediaEffectReactFrameEditorCanvas28=function(){this.setState({showKeyBindings:false});this.$MediaEffectReactFrameEditorCanvas29()};s.prototype.$MediaEffectReactFrameEditorCanvas31=function(){if(!this.state.showKeyBindings)return null;return c("React").createElement(c("XUIDialog.react"),{autohide:5e3,behaviors:{LayerFadeOnHide:c("LayerFadeOnHide"),LayerAutoFocusReact:c("LayerAutoFocusReact"),LayerHideOnBlur:c("LayerHideOnBlur"),LayerHideOnEscape:c("LayerHideOnEscape")},onToggle:this.$MediaEffectReactFrameEditorCanvas30,shown:this.state.showKeyBindings,titleID:"frame-editor-key-bindings",width:445},c("React").createElement(c("XUIDialogTitle.react"),null,c("React").createElement("span",null,"Keyboard Shortcut Help")),c("React").createElement(c("XUIDialogBody.react"),null,c("React").createElement("ul",null,c("React").createElement("li",null,c("React").createElement("span",{className:"_5hbk"},"\u2190"),",",c("React").createElement("span",{className:"_5hbk"},"\u2192"),",",c("React").createElement("span",{className:"_5hbk"},"\u2191"),",",c("React").createElement("span",{className:"_5hbk"},"\u2193"),"\u2014 move selected items"),c("React").createElement("li",null,c("React").createElement("span",{className:"_5hbk"},"Ctrl"),"+",c("React").createElement("span",{className:"_5hbk"},"\u2190"),",",c("React").createElement("span",{className:"_5hbk"},"\u2192"),",",c("React").createElement("span",{className:"_5hbk"},"\u2191"),",",c("React").createElement("span",{className:"_5hbk"},"\u2193"),"\u2014 move selected items by 10%"),c("React").createElement("li",null,c("React").createElement("span",{className:"_5hbk"},"Delete"),",",c("React").createElement("span",{className:"_5hbk"},"Backspace"),"\u2014 delete selected items"),c("React").createElement("li",null,c("React").createElement("span",{className:"_5hbk"},"Escape"),"\u2014 unselect all"))))};s.prototype.$MediaEffectReactFrameEditorCanvas27=function(t){var u=t.files;if(u)for(var v=0;v<u.length;v++){var w=u.item(v);w&&c("MediaEffectMetadataActionCreators").addImage(w,this.$MediaEffectReactFrameEditorCanvas6,this.$MediaEffectReactFrameEditorCanvas7)}t.value=""};s.prototype.$MediaEffectReactFrameEditorCanvas32=function(t,u){var v=c("ReactDOM").findDOMNode(t);if(!(v instanceof HTMLElement))return;var w=c("React").createElement(c("MountedContextMenu.react"),{menu:u,mountedTriggerElem:v}),x=v.children[0];c("ReactDOM").render(w,x)};s.prototype.$MediaEffectReactFrameEditorCanvas25=function(){return c("React").createElement(c("ReactXUIMenu"),null,c("React").createElement(n,{onclick:this.$MediaEffectReactFrameEditorCanvas8},i._("Add new art here")),this.props.enableEditorFreeText?c("React").createElement(n,{onclick:this.$MediaEffectReactFrameEditorCanvas33},i._("Insert Text")):null)};s.prototype.$MediaEffectReactFrameEditorCanvas8=function(){var t=new MouseEvent("click");c("nullthrows")(this.$MediaEffectReactFrameEditorCanvas3).dispatchEvent(t)};s.prototype.$MediaEffectReactFrameEditorCanvas11=function(event){event.preventDefault()};s.prototype.$MediaEffectReactFrameEditorCanvas34=function(t,event){if(t&&!this.props.editedTextID){var u=this.$MediaEffectReactFrameEditorCanvas5.get(t);if(u){u(event);event.preventDefault()}}};s.prototype.$MediaEffectReactFrameEditorCanvas15=function(event){var t=p.get(event.key);if(t)switch(t){case"NUDGELEFT":case"NUDGERIGHT":case"NUDGEUP":case"NUDGEDOWN":c("MediaEffectMetadataActionCreators").setIsDragging(false);break;default:break}};s.prototype.$MediaEffectReactFrameEditorCanvas19=function(event){c("MediaEffectMetadataActionCreators").deselectAll()};s.prototype.$MediaEffectReactFrameEditorCanvas18=function(event){__p&&__p();if(this.props.selectedAssets.size===0)return;var t=this.props.selectedAssets,u=t.count(function(x){return this.props.assets.get(x).assetType()==="MediaEffectReactFrameEditorTextAssetRecord"}.bind(this)),v=t.count(function(x){return this.props.assets.get(x).assetType()==="MediaEffectReactFrameEditorImageAssetRecord"}.bind(this)),w=null;if(v===0)w=u>1?i._("Are you sure you want to delete these text items?"):i._("Are you sure you want to delete this text item?");else if(u===0)w=v>1?i._("Are you sure you want to delete these art assets?"):i._("Are you sure you want to delete this art asset?");else w=i._("Are you sure you want to delete these assets?");this.$MediaEffectReactFrameEditorCanvas4=true;c("SimpleXUIDialog").showConfirm(w,null,function(x){if(x)t.forEach(function(y){c("MediaEffectMetadataActionCreators").deleteAsset(y)});this.$MediaEffectReactFrameEditorCanvas4=false;this.$MediaEffectReactFrameEditorCanvas29()}.bind(this),null)};s.prototype.$MediaEffectReactFrameEditorCanvas22=function(event){this.$MediaEffectReactFrameEditorCanvas35(new(c("Vector"))(0,-1),event)};s.prototype.$MediaEffectReactFrameEditorCanvas23=function(event){this.$MediaEffectReactFrameEditorCanvas35(new(c("Vector"))(0,1),event)};s.prototype.$MediaEffectReactFrameEditorCanvas20=function(event){this.$MediaEffectReactFrameEditorCanvas35(new(c("Vector"))(-1,0),event)};s.prototype.$MediaEffectReactFrameEditorCanvas21=function(event){this.$MediaEffectReactFrameEditorCanvas35(new(c("Vector"))(1,0),event)};s.prototype.$MediaEffectReactFrameEditorCanvas35=function(t,event){var u=event.ctrlKey?10:1,v=t.mul(u).mul(this.props.canvasWidth/100,this.props.canvasHeight/100);this.$MediaEffectReactFrameEditorCanvas36(null,true,u!==1,v.x,v.y,null,null,this.$MediaEffectReactFrameEditorCanvas37())};s.prototype.$MediaEffectReactFrameEditorCanvas24=function(event){this.setState({showKeyBindings:true})};s.prototype.$MediaEffectReactFrameEditorCanvas36=function(t,u,v,w,x,y,z,A){__p&&__p();var B=l().withMutations(function(G){A.forEach(function(H,I){if(I===t||this.props.selectedAssets.has(I))G.set(I,H)}.bind(this))}.bind(this)),C=c("Rect").minimumBoundingBox(B.toArray());if(!u){var D=this.$MediaEffectReactFrameEditorCanvas38(w,x,C);w=D[0];x=D[1]}else if(!v){var E=this.$MediaEffectReactFrameEditorCanvas39(w,x,C);w=E[0];x=E[1]}var F=this.$MediaEffectReactFrameEditorCanvas40(w,x,B);w=F[0];x=F[1];A.forEach(function(G,H){if(H!==t&&!this.props.selectedAssets.has(H))return;var I=G.add(w,x),J=c("MediaEffectReactFrameEditorAssetPositionRecord").canonical(I,this.$MediaEffectReactFrameEditorCanvas41());["x","y"].map(function(K){return J=J.set(K,J[K].set("asset_canvas_size_percentage",Math.round(J[K].asset_canvas_size_percentage)))});c("MediaEffectMetadataActionCreators").updateAssetPosition(H,J)}.bind(this));c("MediaEffectMetadataActionCreators").setIsDragging(true)};s.prototype.$MediaEffectReactFrameEditorCanvas42=function(){c("MediaEffectMetadataActionCreators").setIsDragging(false)};s.prototype.$MediaEffectReactFrameEditorCanvas38=function(t,u,v){var w=v.getCenter(),x=v.add(t,u),y=this.$MediaEffectReactFrameEditorCanvas41().div(2),z=x.getCenter(),A=z.sub(y);if(Math.abs(A.x)<o)t=y.x-w.x;if(Math.abs(A.y)<o)u=y.y-w.y;return[t,u]};s.prototype.$MediaEffectReactFrameEditorCanvas39=function(t,u,v){__p&&__p();var w=v.getCenter(),x=v.add(t,u),y=this.$MediaEffectReactFrameEditorCanvas41().div(2),z=x.getCenter(),A=w.sub(y),B=z.sub(y);if(B.x*A.x<0)t=-A.x;if(B.y*A.y<0)u=-A.y;if(A.x===0){var C=100*v.l/this.props.canvasWidth;t=this.props.canvasWidth/100*Math.sign(t)*(1+C-Math.ceil(C))}if(A.y===0){var D=100*v.t/this.props.canvasHeight;u=this.props.canvasHeight/100*Math.sign(u)*(1+D-Math.ceil(D))}return[t,u]};s.prototype.$MediaEffectReactFrameEditorCanvas40=function(t,u,v){__p&&__p();v.forEach(function(w,x){var y=w.add(t,u);if(y.l>this.props.canvasWidth)t-=y.l-this.props.canvasWidth;if(y.t>this.props.canvasHeight)u-=y.t-this.props.canvasHeight;if(y.l+y.w()<0)t-=y.l+y.w();if(y.t+y.h()<0)u-=y.t+y.h()}.bind(this));return[t,u]};s.prototype.$MediaEffectReactFrameEditorCanvas37=function(){return this.props.assets.map(function(t){return t.assetSize&&t.position.toAbsolute(this.$MediaEffectReactFrameEditorCanvas41(),t.assetSize.toAbsolute(this.$MediaEffectReactFrameEditorCanvas41()))}.bind(this))};s.prototype.$MediaEffectReactFrameEditorCanvas43=function(){return l().withMutations(function(t){this.props.selectedAssets.forEach(function(u){if(this.props.assets.has(u)){var v=this.props.assets.get(u);if(v.assetSize&&v.position)t.set(u,v.position.toAbsolute(this.$MediaEffectReactFrameEditorCanvas41(),v.assetSize.toAbsolute(this.$MediaEffectReactFrameEditorCanvas41())))}}.bind(this))}.bind(this))};s.prototype.$MediaEffectReactFrameEditorCanvas41=function(){return new(c("Vector"))(this.props.canvasWidth,this.props.canvasHeight)};s.prototype.render=function(){__p&&__p();var t=this.props.assets.count()===0?c("React").createElement(c("MediaEffectCanvasEducation.react"),null):null,u=this.props.includesPhoneFrame,v=this.props.canvasHeight/c("MediaEffectFrameEditorConstants").PHONE_SCREEN_TO_FRAME_HEIGHT_RATIO,w=this.props.canvasWidth/c("MediaEffectFrameEditorConstants").PHONE_SCREEN_TO_FRAME_WIDTH_RATIO,x=u?(v-this.props.canvasHeight)/2:m,y=u?(w-this.props.canvasWidth)/2:m;return c("React").createElement("div",null,this.$MediaEffectReactFrameEditorCanvas31(),this.props.showTitle?c("React").createElement(r,{width:this.props.canvasWidth}):null,c("React").createElement("div",{className:"_384m"+(u?" _3fqm":""),onDragOver:this.$MediaEffectReactFrameEditorCanvas11,onDrop:this.$MediaEffectReactFrameEditorCanvas12,onKeyDown:this.$MediaEffectReactFrameEditorCanvas13,onKeyPress:this.$MediaEffectReactFrameEditorCanvas14,onKeyUp:this.$MediaEffectReactFrameEditorCanvas15,onMouseDown:this.$MediaEffectReactFrameEditorCanvas16,ref:function(z){if(z)this.$MediaEffectReactFrameEditorCanvas17=z}.bind(this),style:{width:this.props.canvasWidth+2*y,height:this.props.canvasHeight+2*x},tabIndex:0},u?c("React").createElement(c("Image.react"),{className:"_3fqn",src:"/images/media_effect/frame_preview/phone_portrait.png",style:{width:Math.floor(this.props.canvasWidth/c("MediaEffectFrameEditorConstants").PHONE_SCREEN_TO_FRAME_WIDTH_RATIO),height:Math.floor(this.props.canvasHeight/c("MediaEffectFrameEditorConstants").PHONE_SCREEN_TO_FRAME_HEIGHT_RATIO)}}):null,c("React").createElement("div",{className:"_ymq _2z_m"+(u?" _3fqo":""),style:{backgroundColor:this.props.backgroundColor,width:this.props.canvasWidth,height:this.props.canvasHeight,left:y-1,top:x-1}},this.props.cameraEnabled?c("React").createElement(c("MediaEffectReactFrameEditorCameraContainer.react"),{height:this.props.canvasHeight,width:this.props.canvasWidth}):null,c("React").createElement(c("XUIError.react"),{xuiError:this.state.canvasErrorMessage},c("React").createElement("div",{className:"_384n",ref:function(z){if(z&&!this.props.readOnly){this.$MediaEffectReactFrameEditorCanvas1=z;this.$MediaEffectReactFrameEditorCanvas32(z,this.$MediaEffectReactFrameEditorCanvas2)}}.bind(this),style:{backgroundImage:this.props.backgroundImage?"url('"+this.props.backgroundImage.uri+"')":null,backgroundSize:this.props.backgroundImage?"cover":null,backgroundPosition:this.props.backgroundImage?"center":null,width:this.props.canvasWidth,height:this.props.canvasHeight}},c("React").createElement("div",null),t,this.props.assetOrder.map(function(z){var A=this.props.assets.get(z);return c("React").createElement(c("MediaEffectReactFrameEditorAsset.react"),{assetData:A,canvasSize:this.$MediaEffectReactFrameEditorCanvas41(),editedTextID:this.props.editedTextID,enableEditorFreeText:this.props.enableEditorFreeText,enableFontSettingsDialog:this.props.enableFontSettingsDialog,flowType:this.props.flowType,focusCanvas:this.$MediaEffectReactFrameEditorCanvas29,initialPositionMap:this.$MediaEffectReactFrameEditorCanvas37(),isInCanvas:true,isValidating:this.props.isValidating,key:z,localAssetID:z,onDrag:this.$MediaEffectReactFrameEditorCanvas10,onDrop:this.$MediaEffectReactFrameEditorCanvas42,readOnly:this.props.readOnly||A.readOnly,selected:this.props.selectedAssets.has(z)})}.bind(this))))),c("React").createElement(c("MediaEffectReactFrameEditorSelectionBoxContainer.react"),{canvasHeight:this.props.canvasHeight,canvasWidth:this.props.canvasWidth,includesPhoneFrame:this.props.includesPhoneFrame,selectedAssets:this.props.selectedAssets}),c("React").createElement("div",{className:(!u?"_34j2":"")+(u?" _3fqp":"")+" _34j3",style:{top:x-1,width:y-1,height:this.props.canvasHeight+2}}),c("React").createElement("div",{className:(!u?"_34j2":"")+(u?" _3fqp":"")+" _34j4",style:{top:x-1,width:y-1,height:this.props.canvasHeight+2}}),c("React").createElement("div",{className:(!u?"_34j2":"")+(u?" _3fqp":"")+" _34j6",style:{width:this.props.canvasWidth+2*y,height:x-1}}),c("React").createElement("div",{className:(!u?"_34j2":"")+(u?" _3fqp":"")+" _34j7",style:{width:this.props.canvasWidth+2*y,height:x-1}}),this.props.isDragging?this.props.selectedAssets.map(function(z){var A=this.props.assets.get(z);return c("React").createElement("div",{key:z},c("React").createElement(c("MediaEffectReactFrameEditorGridlines.react"),{asset:A,canvasSize:this.$MediaEffectReactFrameEditorCanvas41(),type:"vertical"}),c("React").createElement(c("MediaEffectReactFrameEditorGridlines.react"),{asset:A,canvasSize:this.$MediaEffectReactFrameEditorCanvas41(),type:"horizontal"}))}.bind(this)):null),c("React").createElement("input",{accept:"image/x-png, image/jpeg, image/png",multiple:true,onChange:this.$MediaEffectReactFrameEditorCanvas9,ref:function(z){this.$MediaEffectReactFrameEditorCanvas3=z}.bind(this),style:{display:"none"},type:"file"}))};f.exports=s}),null);
__d("MediaEffectImageSnappingUtils",["immutable","Map","MediaEffectReactFrameEditorAssetPositionRecord","MediaEffectReactFrameEditorScalarAssetPositionRecord","MediaEffectReactFrameEditorScalarSizeRecord","MediaEffectReactFrameEditorSize","Set","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=.1,i=200,j=c("keyMirror")({TOP:null,LEFT:null,BOTTOM:null,RIGHT:null}),k=j.TOP,l=j.LEFT,m=j.RIGHT,n=j.BOTTOM;function o(w){return c("immutable").Map().withMutations(function(x){return x.set(c("immutable").Set([k,l]),{position:new(c("MediaEffectReactFrameEditorAssetPositionRecord"))({x:q(),y:q()})}).set(c("immutable").Set([k,m]),{position:new(c("MediaEffectReactFrameEditorAssetPositionRecord"))({x:r(),y:q()})}).set(c("immutable").Set([l,n]),{position:new(c("MediaEffectReactFrameEditorAssetPositionRecord"))({x:q(),y:r()})}).set(c("immutable").Set([m,n]),{position:new(c("MediaEffectReactFrameEditorAssetPositionRecord"))({x:r(),y:r()})}).set(c("immutable").Set([l,m,k]),{position:new(c("MediaEffectReactFrameEditorAssetPositionRecord"))({x:s(),y:q()}),size:t(w)}).set(c("immutable").Set([k]),{position:new(c("MediaEffectReactFrameEditorAssetPositionRecord"))({x:s(),y:q()}),size:t(w)}).set(c("immutable").Set([l,m,n]),{position:new(c("MediaEffectReactFrameEditorAssetPositionRecord"))({x:s(),y:r()}),size:t(w)}).set(c("immutable").Set([n]),{position:new(c("MediaEffectReactFrameEditorAssetPositionRecord"))({x:s(),y:r()}),size:t(w)})})}var p=new(c("Map"))();function q(){return new(c("MediaEffectReactFrameEditorScalarAssetPositionRecord"))({anchor_origin:"asset_start",anchor_asset_size_percentage:0,anchor_pixel_offset:0,asset_origin:"canvas_start",asset_canvas_size_percentage:0,asset_pixel_offset:0})}function r(){return new(c("MediaEffectReactFrameEditorScalarAssetPositionRecord"))({anchor_origin:"asset_end",anchor_asset_size_percentage:0,anchor_pixel_offset:0,asset_origin:"canvas_end",asset_canvas_size_percentage:0,asset_pixel_offset:0})}function s(){return new(c("MediaEffectReactFrameEditorScalarAssetPositionRecord"))({anchor_origin:"asset_start",anchor_asset_size_percentage:50,anchor_pixel_offset:0,asset_origin:"canvas_start",asset_canvas_size_percentage:50,asset_pixel_offset:0})}function t(w){return new(c("MediaEffectReactFrameEditorSize").ScaleWidth)({width:new(c("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:100}),aspect_ratio:w}).getScaledWithHeight()}function u(w,x){__p&&__p();if(p.get(w)!==undefined)return p.get(w);var y=document.createElement("canvas"),z=x.width,A=x.height;if(z===0||A===0)return null;var B=Math.min(z,200);A=B*A/z;z=B;y.width=z;y.height=A;var C=y.getContext("2d");C.drawImage(x,0,0,z,A);var D=new(c("Map"))();Object.keys(j).forEach(function(M){return D.set(M,0)});var E=new(c("Set"))(),F=Math.ceil(z/i),G=Math.floor(z/F),H=G*255*h;for(var I=0;I<z;I+=F){if(!E.has(k)){D.set(k,D.get(k)+C.getImageData(I,0,1,1).data[3]);if(Number(D.get(k))>H)E.add(k)}if(!E.has(n)){D.set(n,D.get(n)+C.getImageData(I,A-1,1,1).data[3]);if(Number(D.get(n))>H)E.add(n)}}F=Math.ceil(A/i);G=Math.floor(A/F);var J=G*255*h;for(var K=0;K<A;K+=F){if(!E.has(l)){D.set(l,D.get(l)+C.getImageData(0,K,1,1).data[3]);if(Number(D.get(l))>J)E.add(l)}if(!E.has(m)){D.set(m,D.get(m)+C.getImageData(z-1,K,1,1).data[3]);if(Number(D.get(m))>J)E.add(m)}}C.clearRect(0,0,z,A);C.restore();var L=o(z/A).get(c("immutable").Set(E));p.set(w,L);return L}function v(){p.clear()}f.exports={ImageEdges:j,getSnappingSpecs:u,init:v}}),null);
__d("MediaEffectReactFrameEditorCanvasContainer.react",["FluxContainer","MediaEffectAssetValidationStore","MediaEffectFrameCreateDialogDataStore","MediaEffectFrameEditorConstants","MediaEffectFrameEditorDispatcher","MediaEffectImageSnappingUtils","MediaEffectReactFrameEditorCanvas.react","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorDataStore","MediaEffectReactFrameEditorImageAssetRecord","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("MediaEffectFrameEditorConstants").EDITOR_BUFFER_SIZE;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;k.getStores=function(){return[c("MediaEffectReactFrameEditorDataStore"),c("MediaEffectReactFrameEditorCanvasDataStore"),c("MediaEffectFrameCreateDialogDataStore"),c("MediaEffectAssetValidationStore")]};k.calculateState=function(l,m){__p&&__p();var n=c("MediaEffectReactFrameEditorDataStore").getState(),o=c("MediaEffectReactFrameEditorCanvasDataStore").getState(),p=c("MediaEffectFrameCreateDialogDataStore").getState(),q=n.assets.withMutations(function(t){t.forEach(function(u,v){if(u instanceof c("MediaEffectReactFrameEditorImageAssetRecord")){var w=null;if(u.stickerFBID)w=c("MediaEffectAssetValidationStore").get(u.stickerFBID);var x=u.set("validationResult",w);t.set(v,x)}})}),r=m.width?m.width-2*j:o.canvasWidth,s=m.height?m.height-2*j:o.canvasHeight;return{assets:q,assetOrder:n.assetOrder,backgroundColor:o.backgroundColor,backgroundImage:o.backgroundImage,cameraEnabled:!!o.cameraSource,canvasHeight:s,canvasWidth:r,editedTextID:o.editedTextID,selectedAssets:o.selectedAssets,isDragging:o.isDragging,flowType:p.flowType,isValidating:c("MediaEffectFrameCreateDialogDataStore").isValidating()}};k.prototype.componentWillMount=function(){c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores());c("MediaEffectImageSnappingUtils").init()};k.prototype.$MediaEffectFrameEditorCanvasContainer1=function(l){c("MediaEffectFrameEditorDispatcher").dispatch({type:"coverage/update",canvasCoverage:l})};k.prototype.render=function(){var l=babelHelpers["extends"]({},this.props,this.state);return c("React").createElement(c("MediaEffectReactFrameEditorCanvas.react"),babelHelpers["extends"]({},l,{updateCoverage:this.$MediaEffectFrameEditorCanvasContainer1}))};function k(){h.apply(this,arguments)}k.defaultProps={readOnly:false,enableFontSettingsDialog:false,enableEditorFreeText:false,showTitle:false,includesPhoneFrame:false};f.exports=c("FluxContainer").create(k,{withProps:true})}),null);
__d("MediaEffectFrameEditorFont",["immutable"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l=c("immutable").Map,m=c("immutable").Record;h=babelHelpers.inherits(n,m({id:null,name:null,source:null}));i=h&&h.prototype;n.prototype.getName=function(){return this.name};n.prototype.getFontFamily=function(){return"'"+this.id+"'"};n.prototype.getID=function(){return this.id};n.prototype.getSystemFontName=function(){return null};n.prototype.getCustomFontID=function(){return this.id};n.prototype.getSource=function(){return this.source};function n(){h.apply(this,arguments)}j=babelHelpers.inherits(o,m({fontFamily:null,name:null}));k=j&&j.prototype;o.prototype.getName=function(){return this.name||this.fontFamily};o.prototype.getFontFamily=function(){return this.fontFamily};o.prototype.getID=function(){return this.fontFamily};o.prototype.getSystemFontName=function(){return this.fontFamily};o.prototype.getCustomFontID=function(){return null};o.prototype.getSource=function(){return null};function o(){j.apply(this,arguments)}f.exports.CustomFontRecord=n;f.exports.SystemFontRecord=o}),null);
__d("XMediaEffectAsyncFontController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/async_fonts/",{font_ids:{type:"FBIDSet"}})}),null);
__d("MediaEffectReactFrameEditorCanvasDataStore",["AsyncRequest","FluxReduceStore","immutable","MediaEffectFrameEditorConstants","MediaEffectFrameEditorDispatcher","MediaEffectFrameEditorFont","MediaEffectFullscreenFrameEditorSizingUtils","MediaEffectMetadataActionCreators","MediaEffectQEUtils","MediaEffectReactFrameDeserializer","MediaEffectReactFrameEditorDataStore","XMediaEffectAsyncFontController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l=c("immutable").Map,m=c("immutable").List,n=c("immutable").OrderedMap,o=c("immutable").Record,p=c("immutable").Set,q=400,r=400,s=2400;h=babelHelpers.inherits(t,o({selectedAssets:p(),editedTextID:null,isDragging:false,unsavedChanges:false,fullImageSize:s,cameraSource:null,cameraPaused:false,canvasWidth:q,canvasHeight:r,backgroundColor:"#ffffff",backgroundImage:null,fonts:l(),templates:l(),templateCategories:n(),canvasCoverage:0}));i=h&&h.prototype;t.prototype.getTemplate=function(v){if(!v)return null;return this.templates.get(v)};t.prototype.getTemplateVariants=function(v){var w=this.getTemplate(v);if(!w)return null;var x=w.sourceTemplateFBID?this.getTemplate(w.sourceTemplateFBID):w;if(!x)return null;var y=x.variants.splice(0,0,x.templateFBID),z=y.map(function(A){return this.getTemplate(A)}.bind(this));return m(z.toArray().filter(Boolean))};function t(){h.apply(this,arguments)}j=babelHelpers.inherits(u,c("FluxReduceStore"));k=j&&j.prototype;u.prototype.getInitialState=function(){return new t()};u.prototype.reduce=function(v,w){__p&&__p();switch(w.type){case"select/assetOnly":v=v.set("selectedAssets",p([w.localAssetID])).set("editedTextID",null);break;case"select/asset":v=v.set("selectedAssets",v.selectedAssets.add(w.localAssetID)).set("editedTextID",null);break;case"delete/asset":v=v.set("unsavedChanges",true).set("selectedAssets",v.selectedAssets.remove(w.localAssetID)).set("editedTextID",null);break;case"duplicate/asset":v=v.set("selectedAssets",p([c("MediaEffectReactFrameEditorDataStore").getState().assets.map(function(B){return B.localAssetID}).max()]));break;case"deselect/asset":v=v.set("selectedAssets",v.selectedAssets.remove(w.localAssetID)).set("editedTextID",null);break;case"deselect/all":v=v.set("selectedAssets",v.selectedAssets.clear()).set("editedTextID",null);break;case"edit/text":var x=w.localAssetID;v=v.set("editedTextID",x);if(x&&c("MediaEffectReactFrameEditorDataStore").getState().assets.get(x).get("assocTextAsset"))v=v.set("selectedAssets",v.selectedAssets.remove(x));break;case"select/all":v=v.set("selectedAssets",p.fromKeys(c("MediaEffectReactFrameEditorDataStore").getState().assets));v.set("editedTextID",null);break;case"init/frameData":v=v.set("selectedAssets",p()).set("canvasCoverage",0).set("isDragging",false).set("unsavedChanges",false);break;case"add/fontData":if(w.data)v=v.set("fonts",this.$MediaEffectReactFrameEditorCanvasDataStore1(v.fonts,w.data));break;case"add/templateData":v=this.$MediaEffectReactFrameEditorCanvasDataStore2(v,w.data,w.variants);break;case"set/isDragging":v=v.set("isDragging",w.isDragging);break;case"coverage/update":v=v.set("canvasCoverage",w.canvasCoverage);break;case"save":v=v.set("unsavedChanges",false);break;case"add/image":case"add/text":case"update/assetPosition":case"update/assetSize":case"update/asset/raise":case"update/asset/lower":case"update/textContent":case"update/textFonts":v=v.set("unsavedChanges",true);break;case"set/cameraSource":v=v.set("cameraSource",w.cameraSource);break;case"pause/camera":v=v.set("cameraPaused",true);break;case"resume/camera":v=v.set("cameraPaused",false);break;case"update/backgroundColor":v=v.set("backgroundColor",w.color);break;case"update/backgroundImage":v=v.set("backgroundImage",w.image);break;case"set/screenDimensions":var y=c("MediaEffectFullscreenFrameEditorSizingUtils").getCanvasSize(w.screenWidth,w.dialogHeight),z=c("MediaEffectQEUtils").shouldDefaultToPortrait(w.flowType),A=y;if(z){y*=c("MediaEffectFrameEditorConstants").PHONE_SCREEN_TO_FRAME_HEIGHT_RATIO;A=y*c("MediaEffectFrameEditorConstants").PORTRAIT_CANVAS_RATIO}v=v.set("canvasWidth",A).set("canvasHeight",y);break;case"apply/template":v=this.$MediaEffectReactFrameEditorCanvasDataStore3(v,w.templateFBID,w.frameData);break;case"bootstrap/fontData":this.$MediaEffectReactFrameEditorCanvasDataStore4();break}return v};u.prototype.$MediaEffectReactFrameEditorCanvasDataStore4=function(){var v=c("XMediaEffectAsyncFontController").getURIBuilder().getURI();new(c("AsyncRequest"))(v).setHandler(function(w){return c("MediaEffectMetadataActionCreators").addFontData(w.getPayload())}).send()};u.prototype.$MediaEffectReactFrameEditorCanvasDataStore3=function(v,w,x){return v.setIn(["templates",w,"frameData"],x)};u.prototype.$MediaEffectReactFrameEditorCanvasDataStore1=function(v,w){var x=[],y=v.withMutations(function(z){w.forEach(function(A){var B=new(c("MediaEffectFrameEditorFont").CustomFontRecord)({id:A.id,name:A.name,source:A.uri}),C=z.get(B.getID());if(!C||C.id!==B.id||C.name!==B.name||C.source!==B.source){x.push(A);z.set(B.getID(),B)}})});this.$MediaEffectReactFrameEditorCanvasDataStore5(x);return y};u.prototype.$MediaEffectReactFrameEditorCanvasDataStore2=function(v,w,x){return v.withMutations(function(y){Object.keys(w).forEach(function(z){var A=w[z];this.$MediaEffectReactFrameEditorCanvasDataStore6(y,A);var B=A.map(function(C){return C.id});y.setIn(["templateCategories",z],m(B))}.bind(this));this.$MediaEffectReactFrameEditorCanvasDataStore6(y,x)}.bind(this))};u.prototype.$MediaEffectReactFrameEditorCanvasDataStore6=function(v,w){w.forEach(function(x){if(!v.templates.has(x.id)){var y=c("MediaEffectReactFrameDeserializer").deserializeTemplate(x);v.setIn(["templates",x.id],y)}})};u.prototype.$MediaEffectReactFrameEditorCanvasDataStore5=function(v){__p&&__p();var w=document.getElementById("custom_frame_fonts"),x=w||document.createElement("style");if(!w)x.setAttribute("id","custom_frame_fonts");var y=p(v.map(function(C){return"@font-face { font-family: '"+C.id+"'; src: url('"+C.uri+"') format('opentype');}"}));for(var z=0;z<x.childNodes.length;++z){var A=x.childNodes.item(z);if(A instanceof Text)y["delete"](A.data)}y.forEach(function(C){return x.appendChild(document.createTextNode(C))});if(!w){var B=document.head||document.getElementsByTagName("head")[0];B&&B.appendChild(x)}};u.prototype.hasUnsavedChanges=function(){return this.getState().unsavedChanges};u.prototype.getFont=function(v){var w=this.getState().fonts,x=w.get(v);return x||w.first()};u.prototype.getFonts=function(){return this.getState().fonts.toArray().sort(function(v,w){return v.getName().toLowerCase().localeCompare(w.getName().toLowerCase())})};u.prototype.getInitialImageScale=function(){var v=this.getState().fullImageSize;return 100/v};function u(){j.apply(this,arguments)}f.exports=new u(c("MediaEffectFrameEditorDispatcher"))}),null);
__d("MediaEffectReactFrameEditorCanvasImageAsset.react",["MediaEffectEditorFunnelLogger","MediaEffectImageSnappingUtils","MediaEffectMetadataActionCreators","MediaEffectReactFrameEditorImageAsset.react","React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;function j(){__p&&__p();var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.$MediaEffectReactFrameEditorCanvasImageAsset1=function(p){var q=c("ReactDOM").findDOMNode(p);if(q instanceof HTMLImageElement){var r=c("MediaEffectImageSnappingUtils").getSnappingSpecs(this.props.localAssetID,q);if(r){var s=r.size?"banner":"corner";c("MediaEffectEditorFunnelLogger").logAutoSnapping(s);c("MediaEffectMetadataActionCreators").setAutoSnapping(this.props.localAssetID,s,r)}}}.bind(this),l}j.prototype.render=function(){return c("React").createElement(c("MediaEffectReactFrameEditorImageAsset.react"),babelHelpers["extends"]({},this.props,{adjustPosition:this.$MediaEffectReactFrameEditorCanvasImageAsset1}))};f.exports=j}),null);
__d("MediaEffectValidationTypes",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({ASSET_NUMBER_LIMIT:"",CANVAS_COVERAGE_LIMIT:""});f.exports=h}),null);
__d("MediaEffectReactFrameEditorDataStore",["fbt","FluxReduceStore","MediaEffectFrameCreateDialogDataStore","MediaEffectFrameEditorDataRecord","MediaEffectFrameEditorDispatcher","MediaEffectMetadataActionCreators","MediaEffectReactFrameDeserializer","MediaEffectReactFrameEditorAssetPositionRecord","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorImageAssetRecord","MediaEffectReactFrameEditorScalarSizeRecord","MediaEffectReactFrameEditorSize","MediaEffectReactFrameEditorTextAssetRecord","MediaEffectTemplateDataStore","MediaEffectValidationTypes","Vector","setImmediate"],(function a(b,c,d,e,f,aa,g){"use strict";__p&&__p();var h,i,j=1,k="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";function l(){return j++}h=babelHelpers.inherits(m,c("FluxReduceStore"));i=h&&h.prototype;m.prototype.getInitialState=function(){return new(c("MediaEffectFrameEditorDataRecord"))()};m.prototype.$MediaEffectReactFrameEditorDataStore1=function(n){var o=this.getInitialState();if(n){var p=c("MediaEffectReactFrameDeserializer").deserializeData(n);o=o.set("assets",p.assets).set("assetOrder",p.assetOrder).set("frameFBID",p.frameFBID).set("filterID",p.filterID).set("templateFBID",p.templateFBID)}var q=o.assets.size>0?Math.max.apply(Math,o.assets.map(function(r){return r.localAssetID}).toArray()):0;j=q+1;return o};m.prototype.reduce=function(n,o){__p&&__p();var p,q;switch(o.type){case"init/frameData":n=this.$MediaEffectReactFrameEditorDataStore1(o.data);break;case"save":if(o.effectID)n=n.set("frameFBID",o.effectID);break;case"add/image":if(n.assets.size>15)c("setImmediate")(function(){return c("MediaEffectMetadataActionCreators").addValidation(c("MediaEffectValidationTypes").ASSET_NUMBER_LIMIT)});else(function(){var Y=l(),Z=new(c("MediaEffectReactFrameEditorImageAssetRecord"))({localAssetID:Y,file:o.imageFile,localImageURI:URL.createObjectURL(o.imageFile),position:o.position?o.position:new(c("MediaEffectReactFrameEditorAssetPositionRecord"))(),assetSize:null});n=n.withNewAsset(Y,Z);Z.upload()["catch"](function($){});c("setImmediate")(function(){c("MediaEffectMetadataActionCreators").deselectAll();c("MediaEffectMetadataActionCreators").selectAsset(Y)})})();break;case"replace/image":var r=n.assets.get(o.localAssetID)||new(c("MediaEffectReactFrameEditorImageAssetRecord"))(),s=new(c("MediaEffectReactFrameEditorImageAssetRecord"))({localAssetID:o.localAssetID,file:o.imageFile,localImageURI:URL.createObjectURL(o.imageFile),position:r.position,assetSize:r.assetSize});n=n.replaceAsset(o.localAssetID,s);s.upload()["catch"](function(Y){});break;case"update/image":var t=n.assets.get(o.localAssetID);if(t){var u=t.set("processedImageURI",o.imageURI);n=n.replaceAsset(o.localAssetID,u)}break;case"replace/startRemovingBackground":var v=n.assets.get(o.localAssetID);if(v){var w=v.set("stickerFBID",null);n=n.replaceAsset(o.localAssetID,w)}break;case"replace/imageBackground":var x=n.assets.get(o.localAssetID);if(x){var y=x.set("localImageURI",o.imageURI).set("stickerFBID",o.imageID).set("processApplied",true);n=n.replaceAsset(o.localAssetID,y)}break;case"update/textImage":var z=o.localAssetID,A=o.localImageURI,B=o.file,C=o.textContent,D=o.assetSize,E=n.assets.get(z);if(!E)break;var F=E.assocTextAsset;if(!F||A===E.localImageURI&&C===F.content)break;var G=c("MediaEffectReactFrameEditorCanvasDataStore").getState(),H=G.canvasWidth,I=G.canvasHeight,J=new(c("MediaEffectReactFrameEditorSize").Fit)({width:new(c("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:D.x/H*100}),height:new(c("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:D.y/I*100}),aspect_ratio:D.y?D.x/D.y:1});n=n.withAssetMutation(z,function(K){return K.set("localImageURI",A).set("file",B).set("assetSize",J)});n=n.withTextAssetMutation(o.localAssetID,function(K){return K.set("content",C).set("dirty",true)});break;case"add/text":var K=o.content?this.newTextAsset(o.content,o.position):this.newTextImageAsset(o.position);if(K instanceof c("MediaEffectReactFrameEditorImageAssetRecord"))window.setTimeout(function(){c("MediaEffectMetadataActionCreators").deselectAll();window.setTimeout(function(){c("MediaEffectMetadataActionCreators").editText(K.localAssetID)})},0);n=n.withNewAsset(K.localAssetID,K);break;case"duplicate/asset":var L=l(),M=this.$MediaEffectReactFrameEditorDataStore2(L,n.assets.get(o.localAssetID));if(M)n=n.withNewAsset(L,M);break;case"update/assetPosition":var N=o.position;n=n.withAssetMutation(o.localAssetID,function(K){K=K.set("position",N);if(K instanceof c("MediaEffectReactFrameEditorImageAssetRecord"))K=K.set("autoSnappedType",null);return K});break;case"update/assetSize":var O=o.size;n=n.withAssetMutation(o.localAssetID,function(K){K=K.set("assetSize",O);if(K instanceof c("MediaEffectReactFrameEditorImageAssetRecord"))K=K.set("autoSnappedType",null);return K});break;case"update/autoSnapping":(function(){var Y=o.autoSnappedType,Z=o.specs,$=Z.size,N=Z.position;n=n.withAssetMutation(o.localAssetID,function(K){return K.set("assetSize",$?$:K.assetSize).set("position",N?N:K.position).set("autoSnappedType",Y)})})();break;case"update/assetNativeSize":n=this.$MediaEffectReactFrameEditorDataStore3(n,o.localAssetID,o.size);break;case"update/stickerFBID":var P=o.stickerFBID,Q=o.localTemplateID?o.localTemplateID:null;if(!c("MediaEffectFrameCreateDialogDataStore").isTemplateFlow()||Q===c("MediaEffectTemplateDataStore").getState().currentTemplateVariationID){n=n.withAssetMutation(o.localAssetID,function(K){return K.set("stickerFBID",P)});n=n.withTextAssetMutation(o.localAssetID,function(K){return K.set("dirty",false)})}break;case"update/asset/raise":var R=o.toTop;n=n.withRaisedAsset(o.localAssetID,R);break;case"update/asset/lower":var S=o.toBottom;n=n.withLoweredAsset(o.localAssetID,S);break;case"delete/asset":n=n.withDeletedAsset(o.localAssetID);break;case"update/textContent":var T=o.content;n=n.withTextAssetMutation(o.localAssetID,function(K){return K.set("content",T).set("contentMustBeUpdated",false)});break;case"update/textFonts":var U=o.font;o.localTextIDs.forEach(function(Y){return n=n.withTextAssetMutation(Y,function(Z){return Z.set("font",U)})});break;case"update/textColors":var V=o.color;o.localTextIDs.forEach(function(Y){return n=n.withTextAssetMutation(Y,function(Z){return Z.set("color",V)})});break;case"update/textAlignments":var W=o.textAlignment;o.localTextIDs.forEach(function(Y){return n=n.withTextAssetMutation(Y,function(Z){return Z.set("textHorizontalAlignment",W)})});break;case"update/frameFilterID":n=n.set("filterID",o.filterID);break;case"apply/template":n=this.$MediaEffectReactFrameEditorDataStore4(n,o.templateFBID,o.frameData);break;case"clear/template":n=this.$MediaEffectReactFrameEditorDataStore5(n);break;case"update/asset/contentMustBeUpdated":var X=o.contentMustBeUpdated;n=n.withAssetMutation(o.localAssetID,function(K){return K.set("contentMustBeUpdated",X)});break;case"change/step":if(c("MediaEffectFrameCreateDialogDataStore").isTemplateFlow())n=c("MediaEffectTemplateDataStore").getFrameData(null);break;case"set/currentTemplateVariation":n=c("MediaEffectTemplateDataStore").getFrameData(o.localTemplateID);break}return n};m.prototype.$MediaEffectReactFrameEditorDataStore5=function(n){n.assets.forEach(function(o){if(o.sourceTemplateAssetFBID)n=n.withDeletedAsset(o.localAssetID)});return n.set("templateFBID",null)};m.prototype.$MediaEffectReactFrameEditorDataStore4=function(n,o,p){n=this.$MediaEffectReactFrameEditorDataStore5(n);n=n.set("templateFBID",p.frameFBID).set("filterID",p.filterID);p.assetOrder.forEach(function(q){var r=l(),s=p.assets.get(q),t=s.set("localAssetID",r).set("sourceTemplateAssetFBID",s.assetFBID).set("assetFBID",null).set("readOnly",s instanceof c("MediaEffectReactFrameEditorImageAssetRecord"));n=n.withNewAsset(r,t)});return n};m.prototype.$MediaEffectReactFrameEditorDataStore2=function(n,o){if(o.assetType()!=="MediaEffectReactFrameEditorImageAssetRecord")return this.$MediaEffectReactFrameEditorDataStore6(n,o);var p=o.assocTextAsset;if(!o.stickerFBID&&!p)return null;else if(p)return this.$MediaEffectReactFrameEditorDataStore7(n,o,p);return this.$MediaEffectReactFrameEditorDataStore8(n,o)};m.prototype.$MediaEffectReactFrameEditorDataStore8=function(n,o){return new(c("MediaEffectReactFrameEditorImageAssetRecord"))({assetSize:o.assetSize,file:o.file,hostedImageURI:o.hostedImageURI,localImageURI:o.localImageURI,nativeSize:o.nativeSize,stickerFBID:o.stickerFBID,assetFBID:null,localAssetID:n,position:new(c("MediaEffectReactFrameEditorAssetPositionRecord"))()})};m.prototype.$MediaEffectReactFrameEditorDataStore6=function(n,o){return new(c("MediaEffectReactFrameEditorTextAssetRecord"))({assetSize:o.assetSize,color:o.color,content:o.content,font:o.font,textHorizontalAlignment:o.textHorizontalAlignment,assetFBID:null,localAssetID:n,position:new(c("MediaEffectReactFrameEditorAssetPositionRecord"))()})};m.prototype.$MediaEffectReactFrameEditorDataStore7=function(n,o,p){var q=new(c("MediaEffectReactFrameEditorTextAssetRecord"))({localAssetID:n,font:p.font,fontName:p.fontName,content:p.content,color:p.color,textHorizontalAlignment:p.textHorizontalAlignment});return new(c("MediaEffectReactFrameEditorImageAssetRecord"))({localAssetID:n,localImageURI:k,position:new(c("MediaEffectReactFrameEditorAssetPositionRecord"))(),assocTextAsset:q,assetSize:o.assetSize})};m.prototype.getEffectID=function(){return this.getState().frameFBID};m.prototype.areAllImageAssetsUploaded=function(){var n=this.getState().assets;return n.every(function(o){var p=o instanceof c("MediaEffectReactFrameEditorTextAssetRecord");return p||!!o.stickerFBID||!!o.assocTextAsset})};m.prototype.hasAssets=function(){var n=this.getState().assets;return n.size>0};m.prototype.isValidForSubmit=function(){var n=this.getState().assets,o=c("MediaEffectFrameCreateDialogDataStore").isTemplateFlow();return n.size>0&&n.every(function(p){var q=p instanceof c("MediaEffectReactFrameEditorTextAssetRecord");return q&&(o||!p.contentMustBeUpdated)||!q&&(!!p.stickerFBID||!!p.assocTextAsset)})};m.prototype.newTextAsset=function(n,o){var p=l();return new(c("MediaEffectReactFrameEditorTextAssetRecord"))({localAssetID:p,position:o||new(c("MediaEffectReactFrameEditorAssetPositionRecord"))(),font:c("MediaEffectReactFrameEditorCanvasDataStore").getState().fonts.first(),fontName:c("MediaEffectReactFrameEditorCanvasDataStore").getState().fonts.first().getName(),content:n,assetSize:new(c("MediaEffectReactFrameEditorSize").Stretch)({height:new(c("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:10}),width:new(c("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:100})}),color:"#ffffff",textHorizontalAlignment:"center"})};m.prototype.newTextImageAsset=function(n){var o=g._("Enter text here").toString(),p=l(),q=new(c("MediaEffectReactFrameEditorTextAssetRecord"))({localAssetID:p,font:c("MediaEffectReactFrameEditorCanvasDataStore").getState().fonts.first(),fontName:c("MediaEffectReactFrameEditorCanvasDataStore").getState().fonts.first().getName(),content:o,color:"#ffffff",textHorizontalAlignment:"center"}),r=c("MediaEffectReactFrameEditorCanvasDataStore").getState(),s=r.canvasHeight,t=r.canvasWidth;return new(c("MediaEffectReactFrameEditorImageAssetRecord"))({localAssetID:p,localImageURI:k,position:n||new(c("MediaEffectReactFrameEditorAssetPositionRecord"))(),assocTextAsset:q,assetSize:new(c("MediaEffectReactFrameEditorSize").Fit)({height:new(c("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:10}),width:new(c("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:100}),aspect_ratio:100*t/10*s})})};m.prototype.$MediaEffectReactFrameEditorDataStore3=function(n,o,p){__p&&__p();var q;n=n.withAssetMutation(o,function(w){return w.set("nativeSize",p)});var r=n.assets.get(o).assetSize,s=!!n.assets.get(o).assocTextAsset;if(p.y){var t=p.x/p.y;if(!r){var u=s?100/c("MediaEffectReactFrameEditorCanvasDataStore").getState().canvasHeight:c("MediaEffectReactFrameEditorCanvasDataStore").getInitialImageScale();r=new(c("MediaEffectReactFrameEditorSize").Fit)({width:new(c("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:p.x*u}),height:new(c("MediaEffectReactFrameEditorScalarSizeRecord"))({canvas_size_percentage:p.y*u}),aspect_ratio:t})}else r=r.set("aspect_ratio",t)}n=n.withAssetMutation(o,function(w){return w.set("assetSize",r)});var v=n.assets.get(o).position;if(r&&r.isValid()&&v&&!v.isBackendCompatible())(function(){var w=c("MediaEffectReactFrameEditorCanvasDataStore").getState(),x=w.canvasWidth,y=w.canvasHeight,z=new(c("Vector"))(x,y),A=c("MediaEffectReactFrameEditorAssetPositionRecord").canonical(v.toAbsolute(z,r.toAbsolute(z)),z);n=n.withAssetMutation(o,function(B){return B.set("position",A)})})();return n};function m(){h.apply(this,arguments)}f.exports=new m(c("MediaEffectFrameEditorDispatcher"))}),null);
__d("MediaEffectReactFrameEditorImageAsset.react",["cx","Image.react","MediaEffectMetadataActionCreators","React","ReactDOM","Vector","XUISpinner.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;function k(){__p&&__p();var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$MediaEffectReactFrameEditorImageAsset4=function(){this.$MediaEffectReactFrameEditorImageAsset2=true;if(this.$MediaEffectReactFrameEditorImageAsset1){this.$MediaEffectReactFrameEditorImageAsset5();if(this.$MediaEffectReactFrameEditorImageAsset6())this.props.adjustPosition&&this.props.adjustPosition(this.$MediaEffectReactFrameEditorImageAsset1)}}.bind(this),m}k.prototype.$MediaEffectReactFrameEditorImageAsset5=function(){if(this.$MediaEffectReactFrameEditorImageAsset3)return;this.$MediaEffectReactFrameEditorImageAsset3=true;var l=c("ReactDOM").findDOMNode(this.$MediaEffectReactFrameEditorImageAsset1);c("MediaEffectMetadataActionCreators").updateAssetNativeSize(this.props.localAssetID,new(c("Vector"))(l.width,l.height))};k.prototype.$MediaEffectReactFrameEditorImageAsset6=function(){if(this.props.imageRecord.assocTextAsset)return false;if(this.props.imageRecord.stickerFBID)return false;return true};k.prototype.render=function(){return c("React").createElement("div",null,c("React").createElement(c("Image.react"),{className:"_55jn _4u2a",onLoad:this.$MediaEffectReactFrameEditorImageAsset4,ref:function(l){this.$MediaEffectReactFrameEditorImageAsset1=l;this.$MediaEffectReactFrameEditorImageAsset1&&this.$MediaEffectReactFrameEditorImageAsset2&&this.$MediaEffectReactFrameEditorImageAsset5()}.bind(this),src:this.props.isInPreview&&this.props.imageRecord.processedImageURI?this.props.imageRecord.processedImageURI:this.props.imageRecord.getURI()}))};f.exports=k}),null);
__d("MediaEffectArtValidationType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MEDIA_EFFECT_ART_VALID:"media_effect_art_valid",MEDIA_EFFECT_ART_IS_EVENT_COVER_PHOTO:"media_effect_art_is_event_cover_photo",MEDIA_EFFECT_ART_IS_PHOTO:"media_effect_art_is_photo"})}),null);
__d("XGetUploadedImageForFrameEditorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/media_effect/swipeable_frame/image/upload_poll/",{job_id:{type:"String",required:true}})}),null);
__d("XUploadImageForFrameEditorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/media_effect/swipeable_frame/image/upload/",{})}),null);
__d("XUploadImageWithConversionForFrameEditorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/media_effect/swipeable_frame/image/upload_convert/",{})}),null);
__d("MediaEffectReactFrameEditorImageAssetRecord",["regeneratorRuntime","Promise","AsyncRequest","AsyncRequestUtil","AsyncResponse","AsyncUploadRequest","immutable","MediaEffectArtValidationType","MediaEffectFrameCreateDialogDataStore","MediaEffectImageTransmogrifier","MediaEffectMetadataActionCreators","MediaEffectReactFrameEditorDataStore","MediaEffectTemplateDataStore","XGetUploadedImageForFrameEditorController","XUploadImageForFrameEditorController","XUploadImageWithConversionForFrameEditorController","retry"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").Record;b.URL=b.URL||b.webkitURL;h=babelHelpers.inherits(k,j({localAssetID:null,file:null,localImageURI:null,hostedImageURI:null,processedImageURI:null,processApplied:false,assetSize:null,nativeSize:null,position:null,stickerFBID:null,assetFBID:null,readOnly:false,sourceTemplateAssetFBID:null,validationResult:null,autoSnappedType:null,assocTextAsset:null}));i=h&&h.prototype;k.prototype.getURI=function(){if(this.localImageURI)return this.localImageURI;if(this.hostedImageURI)return this.hostedImageURI;throw new Error("ImageAssetRecord has no URI")};k.prototype.assetType=function(){return"MediaEffectReactFrameEditorImageAssetRecord"};k.prototype.reColored=function l(m,n){__p&&__p();var o,p,q;return c("regeneratorRuntime").async(function r(s){__p&&__p();while(1)switch(s.prev=s.next){case 0:o=new(c("MediaEffectImageTransmogrifier").ColorTransform)(this.getURI(),false,m,n);s.next=3;return c("regeneratorRuntime").awrap(o.toBlob());case 3:p=s.sent;q=URL.createObjectURL(p);return s.abrupt("return",this.withMutations(function(t){t.set("file",p);t.set("localImageURI",q);t.set("hostedImageURI",null);t.set("stickerFBID",null);t.set("sourceTemplateAssetFBID",t.assetFBID);t.set("assetFBID",null);t.set("validationResult",null)}));case 6:case"end":return s.stop()}},null,this)};k.prototype.upload=function l(){return c("regeneratorRuntime").async(function m(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return c("regeneratorRuntime").awrap(this.$MediaEffectReactFrameEditorImageAssetRecord1()["catch"](function(o){this.$MediaEffectReactFrameEditorImageAssetRecord2()}.bind(this)));case 2:case"end":return n.stop()}},null,this)};k.prototype.$MediaEffectReactFrameEditorImageAssetRecord2=function l(){var m;return c("regeneratorRuntime").async(function n(o){while(1)switch(o.prev=o.next){case 0:m=c("MediaEffectTemplateDataStore").getState().currentTemplateVariationID;o.next=3;return c("regeneratorRuntime").awrap(this.$MediaEffectReactFrameEditorImageAssetRecord3(m));case 3:case"end":return o.stop()}},null,this)};k.prototype.$MediaEffectReactFrameEditorImageAssetRecord1=function l(){var m;return c("regeneratorRuntime").async(function n(o){while(1)switch(o.prev=o.next){case 0:m=c("MediaEffectTemplateDataStore").getState().currentTemplateVariationID;o.next=3;return c("regeneratorRuntime").awrap(this.$MediaEffectReactFrameEditorImageAssetRecord4(m));case 3:case"end":return o.stop()}},null,this)};k.prototype.$MediaEffectReactFrameEditorImageAssetRecord5=function l(m,n){__p&&__p();return c("regeneratorRuntime").async(function o(p){__p&&__p();while(1)switch(p.prev=p.next){case 0:return p.abrupt("return",new(c("Promise"))(function(q,r){var s=new(c("AsyncUploadRequest"))(m).setFiles({flist:[n]}).setData({flow_source_id:c("MediaEffectFrameCreateDialogDataStore").getState().sourceID,flow_type:c("MediaEffectFrameCreateDialogDataStore").getState().flowType}).setAllowCrossOrigin(false);s.subscribe("success",function(t,u){return q(u.getResponse().getPayload())});s.subscribe("failure",function(t,u){return r(u.getResponse())});s.send()}));case 1:case"end":return p.stop()}},null,this)};k.prototype.$MediaEffectReactFrameEditorImageAssetRecord3=function l(m){__p&&__p();var n,o;return c("regeneratorRuntime").async(function p(q){while(1)switch(q.prev=q.next){case 0:n=c("XUploadImageForFrameEditorController").getURIBuilder().getURI();q.next=3;return c("regeneratorRuntime").awrap(c("retry").onError(c("AsyncResponse")).untilValueMatches(function(o){return!!o.id}).limit(3).call(this.$MediaEffectReactFrameEditorImageAssetRecord5.bind(this,n,this.file)));case 3:o=q.sent;c("MediaEffectMetadataActionCreators").updateStickerFBID(this.localAssetID,o.id.toString(),m);case 5:case"end":return q.stop()}},null,this)};k.prototype.$MediaEffectReactFrameEditorImageAssetRecord4=function l(m){__p&&__p();var n;return c("regeneratorRuntime").async(function o(p){while(1)switch(p.prev=p.next){case 0:p.next=2;return c("regeneratorRuntime").awrap(this.$MediaEffectReactFrameEditorImageAssetRecord6());case 2:n=p.sent;p.next=5;return c("regeneratorRuntime").awrap(this.$MediaEffectReactFrameEditorImageAssetRecord7(n,m));case 5:case"end":return p.stop()}},null,this)};k.prototype.$MediaEffectReactFrameEditorImageAssetRecord6=function l(){__p&&__p();var m,n;return c("regeneratorRuntime").async(function o(p){while(1)switch(p.prev=p.next){case 0:m=c("XUploadImageWithConversionForFrameEditorController").getURIBuilder().getURI();p.next=3;return c("regeneratorRuntime").awrap(c("retry").onError(c("AsyncResponse")).untilValueMatches(function(n){return!!n.job_id}).limit(3).call(this.$MediaEffectReactFrameEditorImageAssetRecord5.bind(this,m,this.file)));case 3:n=p.sent;return p.abrupt("return",n.job_id.toString());case 5:case"end":return p.stop()}},null,this)};k.prototype.$MediaEffectReactFrameEditorImageAssetRecord7=function l(m,n){__p&&__p();var o;return c("regeneratorRuntime").async(function p(q){__p&&__p();while(1)switch(q.prev=q.next){case 0:q.next=2;return c("regeneratorRuntime").awrap(c("retry").withBackoff(1.5).withMaxInterval(1e4).onError(c("AsyncResponse")).limit(15).untilValueMatches(function(o){return o&&o.id}).call(this.$MediaEffectReactFrameEditorImageAssetRecord8.bind(this,m,n)));case 2:o=q.sent;c("MediaEffectMetadataActionCreators").updateValidationResult(o.id.toString(),{success:o.validationResult,validateType:o.validationReasons.length?o.validationReasons[0].validateType:c("MediaEffectArtValidationType").MEDIA_EFFECT_ART_VALID,reason:o.validationReasons.length?o.validationReasons[0].reason:""},n);c("MediaEffectMetadataActionCreators").updateStickerFBID(this.localAssetID,o.id.toString(),n);c("MediaEffectMetadataActionCreators").processBackground(this.localAssetID,o.id.toString());case 6:case"end":return q.stop()}},null,this)};k.prototype.$MediaEffectReactFrameEditorImageAssetRecord8=function l(m,n){__p&&__p();var o,p,q;return c("regeneratorRuntime").async(function r(s){while(1)switch(s.prev=s.next){case 0:o=c("XGetUploadedImageForFrameEditorController").getURIBuilder().setString("job_id",m).getURI();p=new(c("AsyncRequest"))(o).setAllowCrossOrigin(false);s.next=4;return c("regeneratorRuntime").awrap(c("AsyncRequestUtil").send(p));case 4:q=s.sent;return s.abrupt("return",q.getPayload());case 6:case"end":return s.stop()}},null,this)};k.prototype.getInstanceFromStore=function(){return c("MediaEffectReactFrameEditorDataStore").getState().assets.get(this.localAssetID)};function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("MediaEffectReactFrameEditorPreview.react",["cx","LayerHideOnBlur","MediaEffectFramePhonePreviewContainer.react","MediaEffectFramePreviewConfigs","MediaEffectFramePreviewTypes","MediaEffectReactFrameEditorCameraContainer.react","MediaEffectReactFrameEditorPreviewCanvas.react","React","Vector","XUIContextualDialog.react","XUIContextualDialogBody.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;function k(l){__p&&__p();j.constructor.call(this,l);this.$MediaEffectReactFrameEditorPreview4=function(){return this.setState({showFullPreview:true})}.bind(this);this.$MediaEffectReactFrameEditorPreview3=function(){return this.setState({showFullPreview:false})}.bind(this);this.$MediaEffectReactFrameEditorPreview6=function(){return this.thumbnailRoot}.bind(this);this.$MediaEffectReactFrameEditorPreview7=function(m){if(m!==this.state.showFullPreview)this.setState({showFullPreview:m})}.bind(this);this.state={showFullPreview:false}}k.prototype.$MediaEffectReactFrameEditorPreview1=function(){var l=this.props.previewSize,m=l.x,n=l.y;if(m===n)return c("MediaEffectFramePreviewTypes").PROFILE;else if(m>n)return c("MediaEffectFramePreviewTypes").LANDSCAPE;else return c("MediaEffectFramePreviewTypes").PORTRAIT};k.prototype.$MediaEffectReactFrameEditorPreview2=function(l){var m=this.props.previewSize.x*l,n=this.props.previewSize.y*l;return c("React").createElement("div",{className:"_5gzu",onMouseOut:this.$MediaEffectReactFrameEditorPreview3,onMouseOver:this.$MediaEffectReactFrameEditorPreview4,style:{backgroundColor:this.props.backgroundColor,width:m,height:n}},this.props.cameraEnabled?c("React").createElement(c("MediaEffectReactFrameEditorCameraContainer.react"),{height:n,width:m}):null,c("React").createElement(c("MediaEffectReactFrameEditorPreviewCanvas.react"),{assetOrder:this.props.assetOrder,assets:this.props.assets,backgroundColor:this.props.cameraEnabled?"transparent":this.props.backgroundColor,backgroundImage:this.props.backgroundImage,disableBackgroundImage:this.props.cameraEnabled,previewSize:new(c("Vector"))(m,n)}))};k.prototype.$MediaEffectReactFrameEditorPreview5=function(){var l=c("MediaEffectFramePreviewConfigs")[this.$MediaEffectReactFrameEditorPreview1()].label;return c("React").createElement(c("XUIContextualDialog.react"),{autoFocus:false,behaviors:{LayerHideOnBlur:c("LayerHideOnBlur")},contextRef:this.$MediaEffectReactFrameEditorPreview6,focusContextOnHide:false,key:"contextualDialog",label:l,onToggle:this.$MediaEffectReactFrameEditorPreview7,position:"left",shown:this.state.showFullPreview},c("React").createElement(c("XUIContextualDialogBody.react"),null,c("React").createElement(c("MediaEffectFramePhonePreviewContainer.react"),c("MediaEffectFramePreviewConfigs")[this.$MediaEffectReactFrameEditorPreview1()].size),c("React").createElement("div",{className:"_4qx4"},l)))};k.prototype.render=function(){return c("React").createElement("div",null,c("React").createElement("div",{ref:function(l){return this.thumbnailRoot=l}.bind(this)},this.$MediaEffectReactFrameEditorPreview2(this.props.previewScale)),this.$MediaEffectReactFrameEditorPreview5())};f.exports=k}),null);
__d("MediaEffectReactFrameEditorPreviewCanvas.react",["cx","fbt","CenteredContainer.react","MediaEffectReactFrameEditorAsset.react","React","VideoComponentWithLoopingPlayback.react","VideoDataContainer.react","VideoPlayer.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;l.prototype.$MediaEffectReactFrameEditorPreviewCanvas1=function(){__p&&__p();var m=this.props,n=m.assets,o=m.previewSize;if(n.size!==0)return null;var p=void 0;if(o.x>o.y)p=i._("LANDSCAPE");else if(o.x===o.y)p=i._("PROFILE");else p=i._("PORTRAIT");return c("React").createElement("div",{className:"_29ep"},c("React").createElement(c("XUIText.react"),{size:"meta1"},p))};l.prototype.render=function(){var m=this.props,n=m.backgroundColor,o=m.backgroundImage,p=m.disableBackgroundImage,q=m.previewSize;return c("React").createElement("div",{className:"_5mqu",style:{backgroundColor:n,backgroundImage:p?"none":o&&o.sprited===false?"url('"+o.uri+"')":null,backgroundPosition:o?"center":null,backgroundSize:o?"cover":q.x>q.y?q.x/10:q.y/10,height:q.y,width:q.x}},c("React").createElement(c("CenteredContainer.react"),{className:"_207i",fullHeight:true,horizontal:true,vertical:true},this.$MediaEffectReactFrameEditorPreviewCanvas1()),this.props.videoSourceID?c("React").createElement(c("VideoDataContainer.react"),{videoID:this.props.videoSourceID},c("React").createElement(c("VideoPlayer.react"),{autoplay:true,height:q.y,startMuted:true,videoData:c("VideoDataContainer.react").VIDEO_DATA_PLACEHOLDER,width:q.x},c("React").createElement(c("VideoComponentWithLoopingPlayback.react"),{infiniteLooping:true}))):null,this.props.assetOrder.map(function(r){return c("React").createElement(c("MediaEffectReactFrameEditorAsset.react"),{assetData:this.props.assets.get(r),canvasSize:q,key:r,localAssetID:r,readOnly:true})}.bind(this)))};function l(){j.apply(this,arguments)}l.defaultProps={disableBackgroundImage:false};f.exports=l}),null);
__d("MediaEffectReactFrameEditorPreviewCanvasContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorDataStore","MediaEffectReactFrameEditorPreviewCanvas.react","React","Vector"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("MediaEffectReactFrameEditorDataStore"),c("MediaEffectReactFrameEditorCanvasDataStore")]};j.calculateState=function(k,l){var m=c("MediaEffectReactFrameEditorDataStore").getState(),n=c("MediaEffectReactFrameEditorCanvasDataStore").getState();return{assets:m.assets,assetOrder:m.assetOrder,backgroundColor:n.backgroundColor,backgroundImage:n.backgroundImage,cameraEnabled:n.cameraSource!=null,previewSize:new(c("Vector"))(l.previewWidth,l.previewHeight)}};j.prototype.componentWillMount=function(){c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};j.prototype.render=function(){return c("React").createElement(c("MediaEffectReactFrameEditorPreviewCanvas.react"),this.state)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j,{withProps:true})}),null);
__d("MediaEffectReactFrameEditorPreviewContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorDataStore","MediaEffectReactFrameEditorPreview.react","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("MediaEffectReactFrameEditorDataStore"),c("MediaEffectReactFrameEditorCanvasDataStore")]};j.prototype.componentWillMount=function(){c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};j.calculateState=function(k){var l=c("MediaEffectReactFrameEditorDataStore").getState(),m=c("MediaEffectReactFrameEditorCanvasDataStore").getState();return{assets:l.assets,assetOrder:l.assetOrder,backgroundColor:m.backgroundColor,backgroundImage:m.backgroundImage,cameraEnabled:m.cameraSource!=null}};j.prototype.render=function(){var k=babelHelpers["extends"]({},this.props,this.state);return c("React").createElement(c("MediaEffectReactFrameEditorPreview.react"),k)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j,{withProps:true})}),null);
__d("MediaEffectReactFrameEditorSelectionBox.react",["cx","FBDragHandle.react","immutable","MediaEffectFrameEditorConstants","MediaEffectMetadataActionCreators","MediaEffectReactFrameEditorAssetPositionRecord","React","Rect"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("immutable").Map,l=c("MediaEffectFrameEditorConstants").EDITOR_BUFFER_SIZE;function m(q,r,s,t){var u=(q*s+r*t)/(s*s+t*t);return[s*u,t*u]}function n(event){return event&&(event.metaKey||event.ctrlKey)}function o(q,r){var s=(r.r+r.l)/2,t=(r.t+r.b)/2;q.t=Math.min(q.t,t-1);q.r=Math.max(q.r,s+1);q.b=Math.max(q.b,t+1);q.l=Math.min(q.l,s-1)}i=babelHelpers.inherits(p,c("React").PureComponent);j=i&&i.prototype;function p(){__p&&__p();var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=j.constructor).call.apply(q,[this].concat(t)),this.$MediaEffectReactFrameEditorSelectionBox3=function(v,w,x,y,z,event){__p&&__p();var A=z.boundingRect;if(this.props.fixedAspectRatio){var B=m(v,w,A.w(),A.h());v=B[0];w=B[1]}var C=A.add(0,0);C.l+=v;C.t+=w;C.l=Math.min(C.r-1,C.l);C.t=Math.min(C.b-1,C.t);if(n(event)){C.r-=v;C.b-=w;o(C,A)}this.$MediaEffectReactFrameEditorSelectionBox7(A,C,z.assetRects)}.bind(this),this.$MediaEffectReactFrameEditorSelectionBox4=function(v,w,x,y,z,event){__p&&__p();var A=z.boundingRect;if(this.props.fixedAspectRatio){var B=m(v,w,-A.w(),A.h());v=B[0];w=B[1]}var C=A.add(0,0);C.r+=v;C.t+=w;C.r=Math.max(C.l+1,C.r);C.t=Math.min(C.b-1,C.t);if(n(event)){C.l-=v;C.b-=w;o(C,A)}this.$MediaEffectReactFrameEditorSelectionBox7(A,C,z.assetRects)}.bind(this),this.$MediaEffectReactFrameEditorSelectionBox5=function(v,w,x,y,z,event){__p&&__p();var A=z.boundingRect;if(this.props.fixedAspectRatio){var B=m(v,w,A.w(),-A.h());v=B[0];w=B[1]}var C=A.add(0,0);C.l+=v;C.b+=w;C.l=Math.min(C.r-1,C.l);C.b=Math.max(C.t+1,C.b);if(n(event)){C.r-=v;C.t-=w;o(C,A)}this.$MediaEffectReactFrameEditorSelectionBox7(A,C,z.assetRects)}.bind(this),this.$MediaEffectReactFrameEditorSelectionBox6=function(v,w,x,y,z,event){__p&&__p();var A=z.boundingRect;if(this.props.fixedAspectRatio){var B=m(v,w,-A.w(),-A.h());v=B[0];w=B[1]}var C=A.add(0,0);C.r+=v;C.b+=w;C.r=Math.max(C.l+1,C.r);C.b=Math.max(C.t+1,C.b);if(n(event)){C.l-=v;C.t-=w;o(C,A)}this.$MediaEffectReactFrameEditorSelectionBox7(A,C,z.assetRects)}.bind(this),r}p.prototype.render=function(){if(this.props.assets.size===0)return null;var q=this.$MediaEffectReactFrameEditorSelectionBox1(),r=c("Rect").minimumBoundingBox(q.toArray());if(r.x===0||r.y===0)return null;var s={assetRects:q,boundingRect:r},t=function t(){return s},u=this.props.canvasHeight/c("MediaEffectFrameEditorConstants").PHONE_SCREEN_TO_FRAME_HEIGHT_RATIO,v=this.props.canvasWidth/c("MediaEffectFrameEditorConstants").PHONE_SCREEN_TO_FRAME_WIDTH_RATIO,w=this.props.includesPhoneFrame?(u-this.props.canvasHeight)/2:l,x=this.props.includesPhoneFrame?(v-this.props.canvasWidth)/2:l;return c("React").createElement("div",{className:"_2z_m",style:{top:w-1,left:x-1},onMouseDown:this.$MediaEffectReactFrameEditorSelectionBox2},c("React").createElement("div",{className:"_2z_n",style:{top:r.t,left:r.l,width:r.w(),height:r.h()}},c("React").createElement(c("FBDragHandle.react"),{cursor:"nwse-resize",horizontal:true,initialData:t,onChange:this.$MediaEffectReactFrameEditorSelectionBox3,stopOnLeave:false,vertical:true},c("React").createElement("div",{className:"_2z_o"})),c("React").createElement(c("FBDragHandle.react"),{cursor:"nesw-resize",horizontal:true,initialData:t,onChange:this.$MediaEffectReactFrameEditorSelectionBox4,stopOnLeave:false,vertical:true},c("React").createElement("div",{className:"_2z_p"})),c("React").createElement(c("FBDragHandle.react"),{cursor:"nesw-resize",horizontal:true,initialData:t,onChange:this.$MediaEffectReactFrameEditorSelectionBox5,stopOnLeave:false,vertical:true},c("React").createElement("div",{className:"_2z_t"})),c("React").createElement(c("FBDragHandle.react"),{cursor:"nwse-resize",horizontal:true,initialData:t,onChange:this.$MediaEffectReactFrameEditorSelectionBox6,stopOnLeave:false,vertical:true},c("React").createElement("div",{className:"_2z_u"}))))};p.prototype.$MediaEffectReactFrameEditorSelectionBox2=function(event){event.stopPropagation()};p.prototype.$MediaEffectReactFrameEditorSelectionBox1=function(){var q=this.props.assets,r=k();r=r.withMutations(function(s){q.forEach(function(t){t&&t.assetSize&&s.set(t.localAssetID,t.position.toAbsolute(this.props.canvasSize,t.assetSize.toAbsolute(this.props.canvasSize)))}.bind(this))}.bind(this));return r};p.prototype.$MediaEffectReactFrameEditorSelectionBox7=function(q,r,s){__p&&__p();var t=function t(v){return r.r*(v-q.l)/q.w()+r.l*(q.r-v)/q.w()},u=function u(v){return r.b*(v-q.t)/q.h()+r.t*(q.b-v)/q.h()};s.forEach(function(v,w){__p&&__p();var x=this.props.assets.get(w);if(!x)return;var y=new(c("Rect"))(u(v.t),t(v.r),u(v.b),t(v.l)),z=x.assetSize;if(z){if(z.width&&z.width.pixels!==0)z=z.set("width",z.width.set("pixels",y.w()));else if(z.width)z=z.set("width",z.width.set("canvas_size_percentage",y.w()*100/this.props.canvasSize.x));if(z.height&&z.height.pixels!==0)z=z.set("height",z.height.set("pixels",y.h()));else if(z.height)z=z.set("height",z.height.set("canvas_size_percentage",y.h()*100/this.props.canvasSize.y))}c("MediaEffectMetadataActionCreators").updateAssetSize(w,z);var A=c("MediaEffectReactFrameEditorAssetPositionRecord").canonical(y,this.props.canvasSize);c("MediaEffectMetadataActionCreators").updateAssetPosition(w,A)}.bind(this))};f.exports=p}),null);
__d("MediaEffectReactFrameEditorSelectionBoxContainer.react",["FluxContainer","immutable","MediaEffectFrameEditorDispatcher","MediaEffectReactFrameEditorDataStore","MediaEffectReactFrameEditorSelectionBox.react","React","Vector"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").Map;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;k.getStores=function(){return[c("MediaEffectReactFrameEditorDataStore")]};k.calculateState=function(l,m){var n=c("MediaEffectReactFrameEditorDataStore").getState().get("assets"),o=j(m.selectedAssets.map(function(q){return[q,n.get(q)]})),p=o.some(function(q){return q&&q.assetSize&&q.assetSize.aspect_ratio!==null});return{assets:o,canvasSize:new(c("Vector"))(m.canvasWidth,m.canvasHeight),fixedAspectRatio:p}};k.prototype.componentWillMount=function(){c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};k.prototype.render=function(){var l=babelHelpers["extends"]({},this.props,this.state);return c("React").createElement(c("MediaEffectReactFrameEditorSelectionBox.react"),l)};function k(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(k,{withProps:true})}),null);
__d("XMediaEffectAsyncTemplateLoadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/template/load/",{template_id:{type:"FBID"}})}),null);
__d("MediaEffectReactFrameEditorTemplateRecord",["regeneratorRuntime","AsyncRequest","immutable","MediaEffectReactFrameDeserializer","XMediaEffectAsyncTemplateLoadController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").List,k=c("immutable").Record;h=babelHelpers.inherits(l,k({templateFBID:null,previewURL:null,frameData:null,sourceTemplateFBID:null,variants:j(),colorPalette:null}));i=h&&h.prototype;l.prototype.getColor=function(){if(!this.colorPalette)return null;return this.colorPalette.getMainColor()};l.prototype.genFrameData=function m(){__p&&__p();var n,o,p;return c("regeneratorRuntime").async(function q(r){__p&&__p();while(1)switch(r.prev=r.next){case 0:if(!this.frameData){r.next=2;break}return r.abrupt("return",this.frameData);case 2:n=c("XMediaEffectAsyncTemplateLoadController").getURIBuilder().getURI();r.next=5;return c("regeneratorRuntime").awrap(new(c("AsyncRequest"))().setURI(n).setData({template_id:this.templateFBID}).exec());case 5:o=r.sent;p=o.payload.frameData;return r.abrupt("return",c("MediaEffectReactFrameDeserializer").deserializeData(p));case 8:case"end":return r.stop()}},null,this)};function l(){h.apply(this,arguments)}f.exports=l}),null);
__d("MediaEffectReactFrameEditorTextAsset.react",["cx","CanvasToBlobImpl","DOMQuery","MediaEffectFrameEditorTextPropertiesDialogContainer.react","MediaEffectMetadataActionCreators","MediaEffectReactFrameEditorAssetPositionRecord","React","ReactDOM","Rect","Vector","debounce","html2canvas-v0.5","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=.5,l=.1;i=babelHelpers.inherits(m,c("React").PureComponent);j=i&&i.prototype;function m(n,o){__p&&__p();j.constructor.call(this,n,o);this.$MediaEffectReactFrameEditorTextAsset6=function(p){if(this.props.readOnly)return;if(!this.props.editing)return;this.$MediaEffectReactFrameEditorTextAsset3=p.target.textContent;this.$MediaEffectReactFrameEditorTextAsset7()}.bind(this);this.$MediaEffectReactFrameEditorTextAsset9=function(p){if(this.props.readOnly)return;if(!this.props.editing)return;var q=p.nativeEvent.srcElement;if(!this.$MediaEffectReactFrameEditorTextAsset8(q.clientWidth))p.preventDefault()}.bind(this);this.$MediaEffectReactFrameEditorTextAsset10=function(p){if(this.props.readOnly)return;if(!this.props.editing)return;if(p.key==="Enter"||p.key==="Escape"){this.doneEditing();p.preventDefault()}}.bind(this);this.$MediaEffectReactFrameEditorTextAsset11=function(p){if(this.props.readOnly)return;if(!this.props.editing)return;this.doneEditing()}.bind(this);this.$MediaEffectReactFrameEditorTextAsset7=c("debounce")(function(){return this.updateAssetImage(false)}.bind(this),500);this.$MediaEffectReactFrameEditorTextAsset2=null;this.$MediaEffectReactFrameEditorTextAsset1=null;this.$MediaEffectReactFrameEditorTextAsset5=function(){};this.$MediaEffectReactFrameEditorTextAsset3=n.assetData.content;this.$MediaEffectReactFrameEditorTextAsset4=0;this.state={contextReady:false}}m.prototype.$MediaEffectReactFrameEditorTextAsset8=function(n){var o=this.props.position||new(c("Rect"))(0,0,0,0),p=o.l,q=this.props.canvasSize.x,r=this.props.textboxHeight||60,s=r*k,t=p+n+s<q;if(t)return true;var u=o.sub(s,0);if(u.l>0){c("MediaEffectMetadataActionCreators").updateAssetPosition(this.props.localAssetID,c("MediaEffectReactFrameEditorAssetPositionRecord").canonical(u,new(c("Vector"))(this.props.canvasSize.x,this.props.canvasSize.y)));return true}else return false};m.prototype.$MediaEffectReactFrameEditorTextAsset12=function(){return this.props.assetData.isDynamicText()};m.prototype.$MediaEffectReactFrameEditorTextAsset13=function(){this.$MediaEffectReactFrameEditorTextAsset4=window.getSelection().anchorOffset||0};m.prototype.$MediaEffectReactFrameEditorTextAsset14=function(){__p&&__p();if(!this.isElementRendered())return;var n=c("DOMQuery").find(this.$MediaEffectReactFrameEditorTextAsset1,"div.text-node");if(n.childNodes.length===0)return;var o=document.createRange(),p=window.getSelection(),q=Math.min(n.childNodes[0].length,this.$MediaEffectReactFrameEditorTextAsset4);o.setStart(n.childNodes[0],q);o.collapse(true);p.removeAllRanges();p.addRange(o)};m.prototype.doneEditing=function(){this.$MediaEffectReactFrameEditorTextAsset5();setTimeout(function(){c("MediaEffectMetadataActionCreators").editText(null);setTimeout(function(){return c("MediaEffectMetadataActionCreators").deselectAll()},0)},0)};m.prototype.updateAssetImage=function(n){__p&&__p();var o,p=this;if(this.props.readOnly)return;var q=this.$MediaEffectReactFrameEditorTextAsset3;if(!this.$MediaEffectReactFrameEditorTextAsset12()&&this.$MediaEffectReactFrameEditorTextAsset1&&this.isElementRendered()&&q){var o=function(){__p&&__p();var r=new(c("Rect"))(p.$MediaEffectReactFrameEditorTextAsset1);if(!r.getWidth()||!r.getHeight())return{v:void 0};var s=new(c("Vector"))(r.getWidth(),r.getHeight());p.$MediaEffectReactFrameEditorTextAsset13();c("html2canvas-v0.5")(p.$MediaEffectReactFrameEditorTextAsset1,{onrendered:function(t){var u=t.toDataURL("image/png");this.$MediaEffectReactFrameEditorTextAsset14();this.$MediaEffectReactFrameEditorTextAsset5=function(){this.$MediaEffectReactFrameEditorTextAsset5=function(){};c("MediaEffectMetadataActionCreators").updateTextImage(this.props.assetData.localAssetID,q,u,c("CanvasToBlobImpl").getBlob(u,"image/png"),s)}.bind(this);if(n)this.$MediaEffectReactFrameEditorTextAsset5()}.bind(p),background:undefined,useCORS:true})}();if(typeof o==="object")return o.v}};m.prototype.componentWillUnmount=function(){if(this.props.readOnly)return;if(this.$MediaEffectReactFrameEditorTextAsset12()&&this.props.assetData.content!==this.$MediaEffectReactFrameEditorTextAsset3){c("MediaEffectMetadataActionCreators").updateTextContent(this.props.localAssetID,this.$MediaEffectReactFrameEditorTextAsset3);return}if(this.$MediaEffectReactFrameEditorTextAsset3)this.$MediaEffectReactFrameEditorTextAsset5()};m.prototype.componentDidUpdate=function(n,o){if(this.props.readOnly)return;if(this.isElementRendered())this.$MediaEffectReactFrameEditorTextAsset2=this.$MediaEffectReactFrameEditorTextAsset2||setTimeout(function(){this.updateAssetImage(true)}.bind(this),200);if(this.props!==n)this.$MediaEffectReactFrameEditorTextAsset7()};m.prototype.componentDidMount=function(){if(this.props.editing){var n=c("DOMQuery").find(this.$MediaEffectReactFrameEditorTextAsset1,"div.text-node");if(n.childNodes.length===0)return;this.$MediaEffectReactFrameEditorTextAsset4=n.childNodes[0].length;this.$MediaEffectReactFrameEditorTextAsset14()}};m.prototype.isElementRendered=function(){return!!c("ReactDOM").findDOMNode(this.$MediaEffectReactFrameEditorTextAsset1)};m.prototype.render=function(){var n=this.props.textboxHeight||60,o=n*k,p=n*(1-k)/2,q=o*l,r=this.props.assetData&&this.props.assetData.font?this.props.assetData.font.getFontFamily():"",s=this.$MediaEffectReactFrameEditorTextAsset12()?"_3lz7":"_1kg8",t=!this.props.readOnly&&this.props.editing;if(t)s=c("joinClasses")("_1r26",s);var u=this.$MediaEffectReactFrameEditorTextAsset12()?{padding:p+"px "+q+"px"}:{padding:p+"px "+q+"px",textAlign:"justify"};return c("React").createElement("div",{className:s,contentEditable:t,onBlur:this.$MediaEffectReactFrameEditorTextAsset11,onInput:this.$MediaEffectReactFrameEditorTextAsset6,onKeyDown:this.$MediaEffectReactFrameEditorTextAsset10,onKeyPress:this.$MediaEffectReactFrameEditorTextAsset9,ref:function(v){this.$MediaEffectReactFrameEditorTextAsset1=v;this.setState({contextReady:true})}.bind(this),style:{color:this.props.assetData.color,fontFamily:r,fontSize:o,textAlign:this.props.assetData.textHorizontalAlignment,lineHeight:o+"px"}},c("React").createElement("div",{className:"text-node",style:u},this.props.assetData.content),this.state.contextReady&&this.$MediaEffectReactFrameEditorTextAsset1&&!this.props.readOnly&&this.props.editing&&this.props.enableFontSettingsDialog?c("React").createElement(c("MediaEffectFrameEditorTextPropertiesDialogContainer.react"),{assetData:this.props.assetData,context:this.$MediaEffectReactFrameEditorTextAsset1,localAssetID:this.props.localAssetID,shown:true}):null)};f.exports=m}),null);
__d("MediaEffectReactFrameEditorTextAssetRecord",["regeneratorRuntime","immutable","MediaEffectReactFrameEditorDataStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").Record,k=/^\%.*\%$/;h=babelHelpers.inherits(l,j({assetSize:null,color:null,content:null,font:null,localAssetID:null,position:null,textHorizontalAlignment:null,readOnly:false,sourceTemplateAssetFBID:null,contentMustBeUpdated:false,assetFBID:null,dirty:false}));i=h&&h.prototype;l.prototype.assetType=function(){return"MediaEffectReactFrameEditorTextAssetRecord"};l.prototype.getParentImageAsset=function(){var m=c("MediaEffectReactFrameEditorDataStore").getState().assets.get(this.localAssetID);return m===this?null:m};l.prototype.isDynamicText=function(){return k.test(this.content)};l.prototype.reColored=function m(n,o){return c("regeneratorRuntime").async(function p(q){while(1)switch(q.prev=q.next){case 0:return q.abrupt("return",this);case 1:case"end":return q.stop()}},null,this)};function l(){h.apply(this,arguments)}f.exports=l}),null);
__d("MediaEffectReactFrameSerializer",["regeneratorRuntime","Promise","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorImageAssetRecord","MediaEffectReactFrameEditorSize","MediaEffectReactFrameEditorTextAssetRecord","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(p){var q=p.position;return{horizontal_alignment:q.x.anchor_asset_size_percentage!==0?"center":q.x.asset_origin==="canvas_start"?"left":"right",horizontal_margin:q.x.asset_canvas_size_percentage,vertical_alignment:q.y.anchor_asset_size_percentage!==0?"center":q.y.asset_origin==="canvas_start"?"top":"bottom",vertical_margin:q.y.asset_canvas_size_percentage}}function i(p,q){var r=c("nullthrows")(p.assetSize),s=h(p);if(r instanceof c("MediaEffectReactFrameEditorSize").Fill||r instanceof c("MediaEffectReactFrameEditorSize").ScaleWidth)return babelHelpers["extends"]({},s,{size:r.width.canvas_size_percentage,size_dimension:"width"});else if(r instanceof c("MediaEffectReactFrameEditorSize").Fit||r instanceof c("MediaEffectReactFrameEditorSize").ScaleHeight)return babelHelpers["extends"]({},s,{size:r.height.canvas_size_percentage,size_dimension:"height"});else throw new Error("Unserializable frame.")}function j(p,q){var r=c("nullthrows")(p.assetSize),s=h(p);if(r instanceof c("MediaEffectReactFrameEditorSize").Fit||r instanceof c("MediaEffectReactFrameEditorSize").ScaleWidth)return babelHelpers["extends"]({},s,{size:r.width.canvas_size_percentage,size_dimension:"width"});else if(r instanceof c("MediaEffectReactFrameEditorSize").Fill||r instanceof c("MediaEffectReactFrameEditorSize").ScaleHeight)return babelHelpers["extends"]({},s,{size:r.height.canvas_size_percentage,size_dimension:"height"});else throw new Error("Unserializable frame.")}function k(p){var q=p.getParentImageAsset();if(q){var r=h(q);return babelHelpers["extends"]({},r,{size:0,textbox_width:0,text_horizontal_alignment:p.textHorizontalAlignment,size_dimension:"height"})}var s=p.assetSize,t=h(p);if(!s||!(s instanceof c("MediaEffectReactFrameEditorSize").Stretch))throw new Error("Unserializable frame.");return babelHelpers["extends"]({},t,{size:s.height?s.height.canvas_size_percentage:0,textbox_width:s.width?s.width.canvas_size_percentage:0,text_horizontal_alignment:p.textHorizontalAlignment,size_dimension:"height"})}function l(p,q){var r=c("MediaEffectReactFrameEditorCanvasDataStore").getState().canvasSize;return{landscape_position:i(p,r),portrait_position:j(p,r),rotation:0,source_template_asset_id:p.sourceTemplateAssetFBID,z_index:q}}function m(p,q){var r=k(p);return{portrait_position:r,landscape_position:r,asset_id:p.assetFBID||-p.localAssetID,content:p.content,font_name:p.font.getSystemFontName(),font_size:r.size,custom_font_id:p.font.getCustomFontID(),color:p.color.substr(1),text_horizontal_alignment:p.textHorizontalAlignment,rotation:0,content_must_be_updated:p.contentMustBeUpdated,source_template_asset_id:p.sourceTemplateAssetFBID,z_index:q}}function n(p,q){__p&&__p();var r;return c("regeneratorRuntime").async(function s(t){__p&&__p();while(1)switch(t.prev=t.next){case 0:if(!(p.assocTextAsset&&p.assocTextAsset.dirty)){t.next=3;break}t.next=3;return c("regeneratorRuntime").awrap(p.upload());case 3:r=p.getInstanceFromStore();return t.abrupt("return",babelHelpers["extends"]({},l(r,q),{sticker_id:r.stickerFBID,is_face_sticker:false,dynamic_sticker_pack_id:null,dynamic_sticker_type:null,asset_id:r.assetFBID||-r.localAssetID,assoc_text_asset:r.assocTextAsset&&m(r.assocTextAsset,q)}));case 5:case"end":return t.stop()}},null,this)}function o(p){__p&&__p();var q,r,s,t,u,v,w,x;return c("regeneratorRuntime").async(function y(z){__p&&__p();while(1)switch(z.prev=z.next){case 0:q={};r=[];s={};t=p.assetOrder;u=p.assets;v=t.map(function(A,B){var C=u.get(A);return C instanceof c("MediaEffectReactFrameEditorTextAssetRecord")?m(C,B):null}).toArray();v.forEach(function(A){if(A){r.push(A);s[A.asset_id]=A}});w=[];t.forEach(function(A,B){var C=u.get(A);if(C instanceof c("MediaEffectReactFrameEditorImageAssetRecord"))w.push(n(C,B))});z.next=11;return c("regeneratorRuntime").awrap(c("Promise").all(w));case 11:x=z.sent;x.forEach(function(A){q[A.asset_id]=A});return z.abrupt("return",{stickers:x,sticker_edges:q,text:r,text_edges:s,fbid:p.frameFBID,filter_id:p.filterID});case 14:case"end":return z.stop()}},null,this)}f.exports={genSerializeFrame:o}}),null);
__d("MediaEffectMetadataValidationUtils",["MediaEffectPlaceDescriptionRecord"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={validateName:function i(j){return!!j&&j.trim()!==""},validateOwnerID:function i(j){return!!j&&j.trim()!==""},validateTemplateCategoryID:function i(j){return!!j&&j.trim()!==""},validateLocationPageID:function i(j){return!!j&&j.toString().trim()!==""},validateLocation:function i(j){return!!j&&(h.validateLocationPageID(j.key)||j.latitude!==null&&j.longitude!==null)},validateTimeRange:function i(j,k){if(j&&k&&j.getTime()>=k.getTime())return false;return true}};f.exports=h}),null);
__d("PlaceSearchSuppressionVersion",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ADS_TARGETING:"ads_targeting_suppression",CAMERA_LOCATION_FRAMES:"camera_location_frames_suppression",GRAPH_API:"graph_api_suppression",MAIN_TYPEAHEAD:"main_typeahead_suppression",QUERIED_CHECKIN:"queried_checkin_suppression",QUERYLESS_CHECKIN:"queryless_checkin_suppression",SET_SEARCH:"set_search_suppression",SUGGESTIFIER:"suggestifier_suppression",HEALTH_BLOOD_DONATION_HOSPITALS:"health_blood_donation_hospitals_suppression",PROD_SUPPRESSION:"prod_suppression"})}),null);
__d("MediaEffectLocationTargetingPageTypeahead.react",["cx","fbt","CameraEffectsPOITypeaheadSearchGK","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","MediaEffectEditorFunnelLogger","MediaEffectMetadataValidationUtils","MediaEffectPlaceDescriptionRecord","PlaceSearchConstants","PlaceSearchSuppressionVersion","React","ReactComposerLocationSearchSource","SearchableEntry","XUISpinner.react","XUITextInput.react","XUITypeahead.react","idx","mediaEffectGKCheck"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(m){__p&&__p();k.constructor.call(this,m);this.$MediaEffectLocationTargetingPageTypeahead5=function(n,o){var p=n.getUniqueID();c("MediaEffectEditorFunnelLogger").logChangeLocation();this.setState({query:n.getTitle()},function(){return this.props.onLocationSelected(p)}.bind(this))}.bind(this);this.$MediaEffectLocationTargetingPageTypeahead6=function(event){this.setState({query:event.target.value})}.bind(this);this.$MediaEffectLocationTargetingPageTypeahead7=function(){this.props.onLocationSelected(null);this.setState({query:""})}.bind(this);this.state=this.$MediaEffectLocationTargetingPageTypeahead1()}l.prototype.componentWillReceiveProps=function(m){__p&&__p();var n,o={};if(this.props.selectedOwner.id!==m.selectedOwner.id){var p=this.$MediaEffectLocationTargetingPageTypeahead2(this.props.selectedOwner),q=this.$MediaEffectLocationTargetingPageTypeahead2(m.selectedOwner);if(p!==q){o.searchSource=this.$MediaEffectLocationTargetingPageTypeahead3(m.selectedOwner);if(this.props.location&&!q)m.onLocationSelected(null)}}if(this.props.isLoading&&!m.isLoading&&!((n=m.location)!=null?n.name:n))o.query="";this.setState(o)};l.prototype.$MediaEffectLocationTargetingPageTypeahead2=function(m){m.isFirstParty||c("mediaEffectGKCheck")("media_effect_allow_country_location_targeting")};l.prototype.$MediaEffectLocationTargetingPageTypeahead3=function(m){var n={event_name:c("PlaceSearchConstants").SOURCE_CAMERA_MEDIA_EFFECT_UPLOAD,event_specific_data:{context:"places_typeahead:"+c("PlaceSearchConstants").SOURCE_CAMERA_MEDIA_EFFECT_UPLOAD,source:c("PlaceSearchConstants").SOURCE_CAMERA_MEDIA_EFFECT_UPLOAD,ref:"MediaEffectMetadataLocation.react"}};return c("ReactComposerLocationSearchSource")({},{hide_geo:false,allow_poi:c("CameraEffectsPOITypeaheadSearchGK").gkResult,allow_country:this.$MediaEffectLocationTargetingPageTypeahead2(m),suppression_version:c("PlaceSearchSuppressionVersion").CAMERA_LOCATION_FRAMES},n)};l.prototype.$MediaEffectLocationTargetingPageTypeahead1=function(){var m;return{query:((m=this.props.location)!=null?m.name:m)||"",searchSource:this.$MediaEffectLocationTargetingPageTypeahead3(this.props.selectedOwner)}};l.prototype.$MediaEffectLocationTargetingPageTypeahead4=function(){var m,n=this.props,o=n.isValidating,p=n.location;if(o&&this.props.isLoading)return i._("Loading location data");var q=c("MediaEffectMetadataValidationUtils").validateLocationPageID((m=p)!=null?m.key:m);if(o&&!q)return i._("Please select a location");return null};l.prototype.render=function(){if(this.state.isLoading||this.props.location&&this.props.location.key&&!this.props.location.name)return c("React").createElement(c("FBOverlayContainer.react"),{className:"_3_kx"},c("React").createElement(c("FBOverlayBase.react"),null,c("React").createElement(c("XUITextInput.react"),{className:"_3_kx",defaultValue:this.state.query,disabled:true,height:"tall",xuiError:this.$MediaEffectLocationTargetingPageTypeahead4()})),c("React").createElement(c("FBOverlayElement.react"),{horizontal:"right"},c("React").createElement(c("XUISpinner.react"),{className:"_61s8",size:"large"})));var m=this.props.location&&this.props.location.key&&this.props.location.name?new(c("SearchableEntry"))({uniqueID:this.props.location.key,title:this.props.location.name,type:this.props.location.type}):null;return c("React").createElement(c("XUITypeahead.react"),{className:"_3_kx",clearable:true,disabled:this.props.disabled,highlightOnSelect:true,onChange:this.$MediaEffectLocationTargetingPageTypeahead6,onClear:this.$MediaEffectLocationTargetingPageTypeahead7,onSelectAttempt:this.$MediaEffectLocationTargetingPageTypeahead5,placeholder:i._("Choose a location"),queryString:this.state.query,searchSource:this.state.searchSource,selectedEntry:m,showEntriesOnFocus:true,tallInput:true,viewStyle:"rich",xuiError:this.$MediaEffectLocationTargetingPageTypeahead4()})};f.exports=l}),null);
__d("MediaEffectLocationTargetingGeoCoordinateTypeahead.react",["cx","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","GeoCoordinates","MediaEffectLocationStrings","React","XUICloseButton.react","XUITextInput.react"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement(c("FBOverlayContainer.react"),{className:"_3_kx"},c("React").createElement(c("FBOverlayBase.react"),null,c("React").createElement(c("XUITextInput.react"),{className:"_3_kx",disabled:true,height:"tall",value:c("MediaEffectLocationStrings").geoLocation(this.props.location.latitude,this.props.location.longitude).toString()})),c("React").createElement(c("FBOverlayElement.react"),{horizontal:"right"},c("React").createElement(c("XUICloseButton.react"),{className:"_61te"+(this.props.disabled?" hidden_elem":""),onClick:this.props.onClear,size:"medium",type:"button"})))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MediaEffectLocationTargetingTypeahead.react",["GeoCoordinates","MediaEffectLocationTargetingGeoCoordinateTypeahead.react","MediaEffectLocationTargetingPageTypeahead.react","MediaEffectPlaceDescriptionRecord","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.$MediaEffectLocationTargetingTypeahead1=function(){return this.props.onLocationSelected(null)}.bind(this),l}j.prototype.render=function(){if(this.props.location&&this.props.location.latitude&&this.props.location.longitude&&!this.props.location.key)return c("React").createElement(c("MediaEffectLocationTargetingGeoCoordinateTypeahead.react"),{disabled:this.props.disabled,location:new(c("GeoCoordinates"))(this.props.location.latitude,this.props.location.longitude),onClear:this.$MediaEffectLocationTargetingTypeahead1});return c("React").createElement(c("MediaEffectLocationTargetingPageTypeahead.react"),{disabled:this.props.disabled,isLoading:this.props.isLoading,isValidating:this.props.isValidating,location:this.props.location,onLocationSelected:this.props.onLocationSelected,selectedOwner:this.props.selectedOwner})};f.exports=j}),null);
__d("MediaEffectExceptionReason",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({RENDER:"render",RESIZE_FAIL:"resize_fail",DIRECT_SUPPORT_CASE_CREATION_FAIL:"direct_support_case_creation_fail",OPEN_DETAIL_DIALOG_FAIL:"open_detail_dialog_fail",LOCATION_TARGET_TYPE_SELECTION_FAIL:"location_target_type_selection_fail",TYPEAHEAD_LOCATION_SELECTION_FAIL:"typeahead_location_selection_fail",MAP_LOCATION_SELECTION_FAIL:"map_location_selection_fail",RADIUS_SELECTION_FAIL:"radius_selection_fail",MANNUAL_GEO_SELECTION_FAIL:"manual_geo_selection_fail",NOTIFICATION_FAIL:"notification_fail",RTCS_GET_FAIL:"rtcs_get_fail",RTCS_GET_UNIQUE_FAIL:"rtcs_get_unique_fail",SCREENCAST_UPLOAD_FAIL:"screencast_upload_fail",ARFX_VALIDATE_FAIL:"arfx_validate_fail",MASK_CREATION_FAIL:"mask_creation_fail",PROJECT_PROCESS_FAIL:"project_process_fail",THUMBNAIL_FAIL:"thumbnail_fail"})}),null);
__d("MediaEffectExceptionSource",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({DIALOG_LOCATION_SECTION:"dialog_location_section",SAVE_DRAFT:"save_draft",UPLOAD_FORM:"upload_form"})}),null);
__d("MediaEffectExceptionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MediaEffectExceptionsLoggerConfig",this.$MediaEffectExceptionsTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MediaEffectExceptionsLoggerConfig",this.$MediaEffectExceptionsTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$MediaEffectExceptionsTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MediaEffectExceptionsTypedLogger1=babelHelpers["extends"]({},this.$MediaEffectExceptionsTypedLogger1,j);return this};h.prototype.setEffectID=function(j){this.$MediaEffectExceptionsTypedLogger1.effect_id=j;return this};h.prototype.setExceptionMessage=function(j){this.$MediaEffectExceptionsTypedLogger1.exception_message=j;return this};h.prototype.setExceptionReason=function(j){this.$MediaEffectExceptionsTypedLogger1.exception_reason=j;return this};h.prototype.setExceptionSource=function(j){this.$MediaEffectExceptionsTypedLogger1.exception_source=j;return this};h.prototype.setExceptionTrace=function(j){this.$MediaEffectExceptionsTypedLogger1.exception_trace=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setOwnerID=function(j){this.$MediaEffectExceptionsTypedLogger1.owner_id=j;return this};h.prototype.setVC=function(j){this.$MediaEffectExceptionsTypedLogger1.vc=j;return this};var i={effect_id:true,exception_message:true,exception_reason:true,exception_source:true,exception_trace:true,owner_id:true,vc:true};f.exports=h}),null);
__d("MediaEffectLocationRadiusSlider.react",["cx","fbt","FBSimpleSlider.react","React","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=.05,m=100;j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MediaEffectLocationRadiusSlider1=function(t){this.props.onChange(Math.max(l,Math.min(m,Math.pow(10,t))))}.bind(this),p}n.prototype.render=function(){var o=c("joinClasses")("_13tx",this.props.className);return c("React").createElement("div",{className:o},c("React").createElement("span",{className:"_13ty"},i._("Adjust Radius:")),c("React").createElement("span",{className:"_13uk"},c("React").createElement(c("FBSimpleSlider.react"),{max:Math.log10(m),min:Math.log10(l),onChange:this.$MediaEffectLocationRadiusSlider1,value:Math.log10(this.props.radius)})))};f.exports=n}),null);
__d("MediaEffectLocationTargetingEnabledSelector.react",["fbt","React","XUIRadioList.react","XUIText.react"],(function a(b,c,d,e,f,g,h){"use strict";var i,j,k=c("XUIRadioList.react").Item;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){return c("React").createElement(c("XUIRadioList.react"),{disabled:this.props.disabled,onValueChange:this.props.onTypeSelected,selectedValue:this.props.locationTargetType},c("React").createElement(k,{disabled:this.props.disabled,value:"everyone"},c("React").createElement(c("XUIText.react"),{display:"block"},h._("People in any location"))),c("React").createElement(k,{disabled:this.props.disabled,value:"targeted"},c("React").createElement(c("XUIText.react"),{display:"block",key:"title"},h._("People in a specific location"))))};function l(){i.apply(this,arguments)}f.exports=l}),null);
__d("MediaEffectPageFetcherQuery.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h=function(){var i=[{kind:"LocalArgument",name:"id",type:"ID!",defaultValue:null}],j=[{kind:"Variable",name:"id",variableName:"id",type:"ID!"}],k={kind:"LinkedField",alias:null,name:"polygons",storageKey:null,args:null,concreteType:"Polygon",plural:true,selections:[{kind:"LinkedField",alias:null,name:"points",storageKey:null,args:null,concreteType:"Location",plural:true,selections:[{kind:"ScalarField",alias:"lat",name:"latitude",args:null,storageKey:null},{kind:"ScalarField",alias:"lng",name:"longitude",args:null,storageKey:null}]}]},l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Request",operationKind:"query",name:"MediaEffectPageFetcherQuery",id:"1749336131764185",text:null,metadata:{},fragment:{kind:"Fragment",name:"MediaEffectPageFetcherQuery",type:"Query",metadata:null,argumentDefinitions:i,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:j,concreteType:null,plural:false,selections:[{kind:"InlineFragment",type:"Page",selections:[{kind:"LinkedField",alias:null,name:"geo_polygon",storageKey:null,args:null,concreteType:"MultiPolygon",plural:false,selections:[k]}]}]}]},operation:{kind:"Operation",name:"MediaEffectPageFetcherQuery",argumentDefinitions:i,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:j,concreteType:null,plural:false,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l,{kind:"InlineFragment",type:"Page",selections:[{kind:"LinkedField",alias:null,name:"geo_polygon",storageKey:null,args:null,concreteType:"MultiPolygon",plural:false,selections:[k,l]}]}]}]}}}();f.exports=h}),null);
__d("MediaEffectPageFetcher",["Promise","GraphAPI","RelayFBEnvironment","RelayModern","idx","MediaEffectPageFetcherQuery.graphql"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("RelayModern").fetchQuery,i=c("RelayModern").graphql,j=function j(){return c("MediaEffectPageFetcherQuery.graphql")},k={fetchLocation:function l(m){return c("Promise").all([c("GraphAPI")("2.5").object("page",m).get({fields:"name, location, place_type"}),h(c("RelayFBEnvironment"),j,{id:m})]).then(function(n){var o,p,q=n[0],r=(o=n[1])!=null?(o=o.node)!=null?(o=o.geo_polygon)!=null?o.polygons:o:o:o;if(((p=q)!=null?p.location:p)&&r)q.location.geo_polygon=r.map(function(s){var t;return(t=s)!=null?t.points:t});return q})}};f.exports=k}),null);
__d("MediaEffectMetadataLocationV2.react",["cx","fbt","GeoCoordinates","InputLabel.react","Log","MediaEffectCard.react","MediaEffectExceptionReason","MediaEffectExceptionSource","MediaEffectExceptionsTypedLogger","MediaEffectLocationRadiusSlider.react","MediaEffectLocationTargetingEnabledSelector.react","MediaEffectLocationTargetingMap.react","MediaEffectLocationTargetingTypeahead.react","MediaEffectPageFetcher","MediaEffectPlaceDescriptionRecord","React","XUICheckboxInput.react","idx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=.4;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(n){__p&&__p();k.constructor.call(this,n);this.$MediaEffectMetadataLocationV24=function(o){this.$MediaEffectMetadataLocationV23(c("MediaEffectExceptionReason").LOCATION_TARGET_TYPE_SELECTION_FAIL,function(){if(o==="everyone")this.props.onLocationSelected(null);this.props.onLocationTargetTypeSelected(o)}.bind(this))}.bind(this);this.$MediaEffectMetadataLocationV25=function(o){this.$MediaEffectMetadataLocationV23(c("MediaEffectExceptionReason").TYPEAHEAD_LOCATION_SELECTION_FAIL,function(){this.props.onLocationSelected(o?new(c("MediaEffectPlaceDescriptionRecord"))({key:o}):null)}.bind(this))}.bind(this);this.$MediaEffectMetadataLocationV26=function(o){this.$MediaEffectMetadataLocationV23(c("MediaEffectExceptionReason").MAP_LOCATION_SELECTION_FAIL,function(){this.props.onLocationSelected(new(c("MediaEffectPlaceDescriptionRecord"))({latitude:o.latitude,longitude:o.longitude,radius:l,manual_geo:true}))}.bind(this))}.bind(this);this.$MediaEffectMetadataLocationV27=function(o){this.$MediaEffectMetadataLocationV23(c("MediaEffectExceptionReason").RADIUS_SELECTION_FAIL,function(){if(this.props.location)this.props.onLocationSelected(this.props.location.merge({radius:o,manual_geo:true}))}.bind(this))}.bind(this);this.$MediaEffectMetadataLocationV28=function(o){this.$MediaEffectMetadataLocationV23(c("MediaEffectExceptionReason").MANNUAL_GEO_SELECTION_FAIL,function(){if(this.props.location)this.props.onLocationSelected(this.props.location.merge({manual_geo:o}))}.bind(this))}.bind(this);this.$MediaEffectMetadataLocationV29=function(){if(this.props.location)this.props.onLocationSelected(this.props.location.merge({constrain_eligibility:!this.props.location.constrain_eligibility}))}.bind(this);this.state={isLoading:false}}m.prototype.componentDidMount=function(){this.$MediaEffectMetadataLocationV21()};m.prototype.componentWillReceiveProps=function(n){var o,p;if(this.state.isLoading&&(((o=n.location)!=null?o.name:o)||!((p=n.location)!=null?p.name:p)))this.setState({isLoading:false})};m.prototype.componentDidUpdate=function(n,o){this.$MediaEffectMetadataLocationV21()};m.prototype.$MediaEffectMetadataLocationV21=function(){if(this.props.location&&this.props.location.key&&!(this.props.location.name&&this.props.location.latitude&&this.props.location.longitude)&&!this.state.isLoading)this.$MediaEffectMetadataLocationV22(this.props.location.key)};m.prototype.$MediaEffectMetadataLocationV22=function(n){this.setState({isLoading:true},function(){c("MediaEffectPageFetcher").fetchLocation(n).done(function(o){this.props.onLocationSelected(new(c("MediaEffectPlaceDescriptionRecord"))({name:o.name,key:o.id,latitude:o.location.latitude,longitude:o.location.longitude,polygons:o.location.geo_polygon,radius:l,manual_geo:false}))}.bind(this),function(){c("Log").info("Failed to fetch Page %s",n);this.props.onLocationSelected(null)}.bind(this))}.bind(this))};m.prototype.$MediaEffectMetadataLocationV23=function(n,o){try{if(o!==undefined)o()}catch(p){new(c("MediaEffectExceptionsTypedLogger"))().setExceptionReason(n).setExceptionSource(c("MediaEffectExceptionSource").DIALOG_LOCATION_SECTION).setExceptionTrace(p.stack.split("\n")).setExceptionMessage(p.name+": "+p.message)}};m.prototype.render=function(){var n,o=this.props.location,p=i._("Choose whether your effect can be discovered anywhere or only at a specific location.");return c("React").createElement("div",null,c("React").createElement(c("MediaEffectCard.react"),{className:"_64q4",title:i._("Location"),tooltip:p},c("React").createElement(c("MediaEffectLocationTargetingEnabledSelector.react"),{disabled:!!this.props.disabled,locationTargetType:this.props.locationTargetType,onTypeSelected:this.$MediaEffectMetadataLocationV24})),this.props.locationTargetType==="targeted"?c("React").createElement("div",null,c("React").createElement(c("MediaEffectLocationTargetingTypeahead.react"),{disabled:this.props.disabled,isLoading:this.state.isLoading,isValidating:this.props.isValidating,location:this.props.location,onLocationSelected:this.$MediaEffectMetadataLocationV25,selectedOwner:this.props.selectedOwner}),!this.props.disabled&&o&&o.latitude&&o.longitude&&(o.manual_geo||!o.polygons)?c("React").createElement(c("MediaEffectLocationRadiusSlider.react"),{className:"_4szz _4sz-",onChange:this.$MediaEffectMetadataLocationV27,radius:o.radius||l}):null,c("React").createElement(c("MediaEffectLocationTargetingMap.react"),{className:"_4szz _4sz_",disabled:this.props.disabled,isLoading:this.state.isLoading,location:this.props.location,onLocationSelected:this.$MediaEffectMetadataLocationV26,onManualLocationToggled:this.$MediaEffectMetadataLocationV28}),c("React").createElement(c("InputLabel.react"),{className:"_t2f",label:i._("This effect can only be used by people at this location.")},c("React").createElement(c("XUICheckboxInput.react"),{checked:(n=this.props.location)!=null?n.constrain_eligibility:n,disabled:this.props.disabled,onClick:this.$MediaEffectMetadataLocationV29}))):null)};f.exports=m}),null);
__d("XMediaEffectValidationController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/media_effect/datasource/validation/",{name:{type:"String"},description:{type:"String"}})}),null);
__d("MediaEffectMaskDescriptionInput.react",["cx","fbt","AsyncRequest","MediaEffectCard.react","MediaEffectFrameEditorDispatcher","MediaEffectMaskUploadDataStore","MediaEffectMetadataActionCreators","React","SUITextArea.react","XMediaEffectValidationController","XUIError.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(m){k.constructor.call(this,m);if(m.description)this.$MediaEffectMaskDescriptionInput1(m.description)}l.prototype.componentWillReceiveProps=function(m){if(m.description)this.$MediaEffectMaskDescriptionInput1(m.description)};l.prototype.validateDescription=function(m){var n=c("MediaEffectMaskUploadDataStore").getState().hasFrameDescriptionError;if(n)return i._("Invalid description");if(this.props.isValidating&&(!m||m.length<=0))return i._("Please provide a description of your effect to continue");return null};l.prototype.$MediaEffectMaskDescriptionInput1=function(m){if(!m)return;var n=c("XMediaEffectValidationController").getURIBuilder().getURI();new(c("AsyncRequest"))(n).setData({description:m}).setMethod("POST").setReadOnly(true).setAllowCrossPageTransition(true).setHandler(this.$MediaEffectMaskDescriptionInput2).send()};l.prototype.$MediaEffectMaskDescriptionInput2=function(m){var n=!m.payload.valid;c("MediaEffectMetadataActionCreators").updateDescriptionValidation(n)};l.prototype.getErrorMessage=function(){return this.validateDescription(this.props.description)};l.prototype.updateDescriptionText=function(m){c("MediaEffectFrameEditorDispatcher").dispatch({type:"effectDescription/change",payload:{text:m}})};l.prototype.render=function(){var m=this.props.description;return c("React").createElement(c("MediaEffectCard.react"),{className:"_3vkg",title:i._("Effect Description")},c("React").createElement(c("XUIText.react"),{display:"block"},i._("Describe what your effect does and all the ways people can interact with it.")),c("React").createElement(c("XUIError.react"),{xuiError:this.getErrorMessage()},c("React").createElement(c("SUITextArea.react"),{maxLength:2e3,onChange:this.updateDescriptionText,placeholder:i._("Example: Open your mouth to shoot a fireball. (Max 2000 characters)"),rows:4,value:m})))};f.exports=l}),null);
__d("MediaEffectMaskLegalAgreement.react",["cx","fbt","InputLabel_DEPRECATED.react","MediaEffectCard.react","MediaEffectFrameEditorDispatcher","React","XUICheckboxInput.react","XUIError.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;l.prototype.onCheckboxChanged=function(event){c("MediaEffectFrameEditorDispatcher").dispatch({type:"legalAgreement/userIsAgreed",payload:{userIsAgreed:event.target.checked}})};l.prototype.getErrorMessage=function(){var m=this.props,n=m.isValidating,o=m.userIsAgreed;if(!n||o)return null;return i._("Please accept the agreement to continue")};l.prototype.render=function(){var m=this.props.effectUploadLegalText,n=this.getErrorMessage();return c("React").createElement(c("MediaEffectCard.react"),{className:"_3vkg",title:i._("Legal Agreement")},c("React").createElement(c("XUIError.react"),{xuiError:n},c("React").createElement(c("InputLabel_DEPRECATED.react"),null,c("React").createElement(c("XUICheckboxInput.react"),{checked:this.props.userIsAgreed,onChange:this.onCheckboxChanged}),c("React").createElement(c("XUIText.react"),null,m))))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("MediaEffectMaskMegaphone.react",["cx","BUIAdoptionCloseButton.react","Image.react","React","SUIBusinessTheme","SUIText.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.render=function(){var l=c("React").createElement(c("BUIAdoptionCloseButton.react"),{className_DEPRECATED:"_eyf",onClick:this.props.onClose,shade:"dark"}),m=c("React").createElement(c("SUIText.react"),{className:"_2pim",display:"block",size:"medium_DEPRECATED",theme:c("SUIBusinessTheme"),weight:"bold"},this.props.title),n=this.props.imageSrc?c("React").createElement("div",{className:"_eyg"+(this.props.imageAlign==="center"?" _eyi":""),style:{backgroundColor:this.props.imageBackgroundColor}},c("React").createElement(c("Image.react"),{className:"_eyj",src:this.props.imageSrc})):null,o=c("React").createElement("div",{className:"_eyl"+(this.props.containerAlign==="center"?" _eym":"")},n,c("React").createElement("div",{className:"_eyn"},m,this.props.children),c("React").createElement("div",{className:"_eyo"},this.props.button));return c("React").createElement("div",{className:"_eyp"},o,l)};function k(){i.apply(this,arguments)}k.defaultProps={containerAlign:"center",imageAlign:"center"};f.exports=k}),null);
__d("MediaEffectMaskVersionNotice.react",["cx","fbt","FluxContainer","Link.react","MediaEffectMaskUploadDataStore","MediaEffectWarnings.react","React","XDeveloperDocumentationController","XUIText.react","formatDate"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;l.getStores=function(){return[c("MediaEffectMaskUploadDataStore")]};l.calculateState=function(){return{isOutOfDate:c("MediaEffectMaskUploadDataStore").isVersionOutOfDate(),latestVersion:c("MediaEffectMaskUploadDataStore").getLatestARStudioVersion(),minVersion:c("MediaEffectMaskUploadDataStore").getMinARStudioVersion(),topVersion:c("MediaEffectMaskUploadDataStore").getArfxTopVersion(),willBeDiscontinued:c("MediaEffectMaskUploadDataStore").getVersionWillBeDiscontinued(),discontinuationDate:c("MediaEffectMaskUploadDataStore").getDiscontinuationDate()}};l.prototype.render=function(){var m=this.state,n=m.isOutOfDate,o=m.latestVersion,p=m.minVersion,q=m.topVersion,r=m.willBeDiscontinued,s=m.discontinuationDate;if(!r)return null;var t=c("XDeveloperDocumentationController").getURIBuilder().setString("path1","camera-effects").setString("path2","key-concepts").setString("path3","versioning").getURI().setSubdomain("developers");return n||!r||!s?c("React").createElement(c("MediaEffectWarnings.react"),{message:c("React").createElement(c("XUIText.react"),null,i._("This effect was created with AR Studio {arfx-version}. The minimum supported version is {ar-studio-min-version}. Please update AR Studio to the latest version {ar-studio-latest-version} before saving and resubmitting your effect.",[i.param("arfx-version"," "+q),i.param("ar-studio-min-version"," "+p),i.param("ar-studio-latest-version"," "+o+" ")]),c("React").createElement(c("Link.react"),{className:"_466q",href:t},i._("Learn more"))),use:n?"warn":"recommend"}):c("React").createElement(c("MediaEffectWarnings.react"),{message:c("React").createElement(c("XUIText.react"),null,i._("This effect was created with AR Studio {arfx-version}. This version of AR Studio will be discontinued on {arfx-discontinuation-date}. Please update AR Studio to the latest version {ar-studio-latest-version} and resubmit your effect to ensure it will still appear in the camera.",[i.param("arfx-version"," "+q),i.param("arfx-discontinuation-date"," "+c("formatDate")(new Date(s),"F jS, Y")),i.param("ar-studio-latest-version"," "+o+" ")]),c("React").createElement(c("Link.react"),{className:"_466q",href:t},i._("Learn more"))),use:n?"warn":"recommend"})};function l(){j.apply(this,arguments)}f.exports=c("FluxContainer").create(l)}),null);
__d("XMediaEffectARFXValidateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/effects/arfx/validate/",{})}),null);
__d("MediaEffectMaskArfxFileSelect.react",["fbt","AsyncUploadRequest","Image.react","MediaEffectFrameEditorDispatcher","MediaEffectMaskFileSelect.react","React","XMediaEffectARFXValidateController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;function k(){__p&&__p();var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={isCheckingVersion:false,isFileTypeValid:true,isVersionValid:true,canUploadVersion:"",version:""},this.updateArfxFile=function(event){var q=event.target.files;if(q.length===0)return;var r=q[0];this.setState({isFileTypeValid:this.isFileTypeValid(r)},function(){if(!this.state.isFileTypeValid)return;this.validateVersion(r)}.bind(this))}.bind(this),m}k.prototype.isFileTypeValid=function(l){return l?l.name.endsWith(this.props.arfxFileType):false};k.prototype.validateVersion=function(l){__p&&__p();var m=c("XMediaEffectARFXValidateController").getURIBuilder().getURI(),n=new(c("AsyncUploadRequest"))(m).setAllowCrossOrigin(false).setFiles({arfx:[l]}),o=this,p=[n.subscribe("success",function(q,r){var s=r.getResponse().payload;o.setState({isVersionValid:s.canUpload,isCheckingVersion:false,canUploadVersion:s.canUploadVersion,version:s.version},function(){if(!o.state.isVersionValid)return;c("MediaEffectFrameEditorDispatcher").dispatch({type:"arfxFile/selected",payload:{file:l,type:o.props.arfxFileType}})})}),n.subscribe("complete",function(q,r){while(p.length)p.pop().unsubscribe()})];o.setState({isCheckingVersion:true});n.send()};k.prototype.getErrorMessage=function(){var l=this.state,m=l.isFileTypeValid,n=l.isVersionValid,o=l.canUploadVersion,p=l.version;if(!m||this.props.isValidating&&(!this.props.arfxFile||this.props.missingFileForUpload))return h._("Please choose a file of type: {arfx file type}",[h.param("arfx file type",this.props.arfxFileType)]);if(!n)return h._("This ARFX file is created with AR Studio {current}. Only version {canUpload} and above can be uploaded. Please download and use new AR studio to update.",[h.param("current"," "+p),h.param("canUpload"," "+o+" ")]);return null};k.prototype.render=function(){var l=this.props,m=l.arfxFile,n=l.arfxFileType,o=l.disabled,p=this.state.isCheckingVersion;return c("React").createElement(c("MediaEffectMaskFileSelect.react"),{accept:".arfx",disabled:o,error:this.getErrorMessage(),expectFiles:1,files:m?[m]:[],multiple:true,name:"mask_files",onChange:this.updateArfxFile,preview:c("React").createElement(c("Image.react"),{height:36,src:p?"/images/tablet/spinner/spinner-large-bgLight.gif":"/images/media_effect/icon/arfx-icon.png",width:36}),text:h._("Upload {arfx file type} File",[h.param("arfx file type",n)])})};f.exports=k}),null);
__d("MediaEffectMaskArfxFileUpload.react",["cx","fbt","immutable","MediaEffectARStudioEffectArfxFileTypes","MediaEffectCard.react","MediaEffectMaskArfxFileSelect.react","React","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("immutable").Set;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(n){k.constructor.call(this,n)}m.prototype.render=function(){__p&&__p();var n=this.props,o=n.arfxFiles,p=n.disabled,q=n.isValidating,r=n.filesForUpload,s=n.popup,t=c("React").createElement(c("XUIText.react"),{display:"block"},i._("Upload the \u0040uncompressed.arfx, \u0040pvr.arfx and \u0040etc.arfx files created when exporting your project in {ar studio link}.",[i.param("ar studio link",c("React").createElement("a",{href:"https://developers.facebook.com/products/camera-effects/ar-studio/",target:"_blank"},i._("AR Studio")))]));if(s)t=c("React").createElement(c("XUIText.react"),{display:"block"},i._("This file format also requires the additional files created when the effect was exported."));var u=c("MediaEffectARStudioEffectArfxFileTypes");if(s)u=u.sort(function(v,w){return v.localeCompare(w)});return c("React").createElement(c("MediaEffectCard.react"),{className:"_3vkg",hideHeader:s,title:i._("ARFX Files"),tooltip:i._("Upload all three ARFX files exported from your AR Studio project: \u0040uncompressed.arfx, \u0040pvr.afx and \u0040etc.arfx")},t,u.map(function(v){return c("React").createElement(c("MediaEffectMaskArfxFileSelect.react"),{arfxFile:o.find(function(w){return w.name?w.name.endsWith(v):false}),arfxFileType:v,disabled:p,isValidating:q,key:v,missingFileForUpload:!r.isEmpty()&&!r.some(function(w){return w.name?w.name.endsWith(v):false})})}))};f.exports=m}),null);
__d("MediaEffectMultiFileUploadForm.react",["immutable","MediaEffectMaskArfxFileUpload.react","MediaEffectMaskProjectFileUpload.react","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").Set;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;function k(l){i.constructor.call(this,l)}k.prototype.render=function(){var l=this.props,m=l.arfxFilesForUpload,n=l.disabled,o=l.isValidating,p=l.maskFiles,q=l.projectFile;return c("React").createElement("div",null,c("React").createElement(c("MediaEffectMaskProjectFileUpload.react"),{disabled:n,isValidating:o,projectFile:q}),c("React").createElement(c("MediaEffectMaskArfxFileUpload.react"),{arfxFiles:p,disabled:n,filesForUpload:m,isValidating:o}))};f.exports=k}),null);
__d("MediaEffectSwitchableUploadForm.react",["immutable","MediaEffectMaskArfxFileUpload.react","MediaEffectMaskProjectFileUpload.react","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").Set;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;function k(l){i.constructor.call(this,l)}k.prototype.render=function(){var l=this.props,m=l.arfxFilesForUpload,n=l.disabled,o=l.isValidating,p=l.maskFiles,q=l.projectFile,r=null;if(q&&q.name&&!q.name.endsWith(".arexport"))r=c("React").createElement(c("MediaEffectMaskArfxFileUpload.react"),{arfxFiles:p,disabled:n,filesForUpload:m,isValidating:o,key:"mask_files",popup:true});return[c("React").createElement(c("MediaEffectMaskProjectFileUpload.react"),{disabled:n,isValidating:o,key:"project_file",projectFile:q}),r]};f.exports=k}),null);
__d("MediaEffectMaskFileUploadStep.react",["cx","fbt","ix","FluxContainer","immutable","MediaEffectFlowType","MediaEffectFrameCreateDialogDataStore","MediaEffectFrameCreationStepsConfig","MediaEffectFrameEditorDispatcher","MediaEffectHubARStudioDialog.react","MediaEffectMaskDescriptionInput.react","MediaEffectMaskLegalAgreement.react","MediaEffectMaskMegaphone.react","MediaEffectMaskScreencastUpload.react","MediaEffectMaskThumbnailUpload.react","MediaEffectMaskUploadDataStore","MediaEffectMaskVersionNotice.react","MediaEffectMetadataStore","MediaEffectMultiFileUploadForm.react","MediaEffectRejectedReviewResult.react","MediaEffectSwitchableUploadForm.react","React","SimpleNUXMessage","SimpleNUXMessageTypes","SUIBusinessTheme","SUICardDEPRECATED.react","SUIText.react","XUIButton.react","XUIText.react","mediaEffectGKCheck"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("immutable").Set;k=babelHelpers.inherits(n,c("React").PureComponent);l=k&&k.prototype;n.getStores=function(){return[c("MediaEffectFrameCreateDialogDataStore"),c("MediaEffectMaskUploadDataStore"),c("MediaEffectMetadataStore")]};n.calculateState=function(o){var p=c("MediaEffectMaskUploadDataStore").getState(),q=c("MediaEffectMetadataStore").getState(),r=c("MediaEffectFrameCreateDialogDataStore").getState(),s=c("MediaEffectFrameCreationStepsConfig").getStep(c("MediaEffectFlowType").MASK,r.get("validatingStep")),t=s!==c("MediaEffectFrameCreationStepsConfig").CreationSteps.NONE;return{arfxFilesForUpload:p.arfxFilesForUpload,cameraIconDimensions:p.get("effectThumbnailDimensions"),cameraIconFile:p.get("effectThumbnailFile"),cameraIconSrc:p.get("effectThumbnailSrc"),description:p.get("effectDescription"),isValidating:t,maskFiles:p.get("arfxFiles"),projectFile:p.get("projectFile"),rejectReasons:q.get("rejectReasons"),reviewMaterialID:p.get("reviewMaterialID"),screencastFile:p.get("screencastFile"),screencastSrc:p.get("screencastSrc"),showARStudioDialog:false,showDownloadBanner:!c("SimpleNUXMessage").hasUserSeenMessage(c("SimpleNUXMessageTypes").AR_STUDIO_DOWNLOAD_BANNER_NUX),userIsAgreed:p.get("userIsAgreed")}};function n(o,p){__p&&__p();l.constructor.call(this,o,p);this.state={arfxFilesForUpload:m(),cameraIconDimensions:null,cameraIconFile:null,cameraIconSrc:null,description:null,isValidating:false,maskFiles:m(),projectFile:null,rejectReasons:null,reviewMaterialID:null,screencastFile:null,screencastSrc:null,showARStudioDialog:false,showDownloadBanner:false,userIsAgreed:false};this.$MediaEffectMaskFileUploadStep1=function(){c("SimpleNUXMessage").markMessageSeenByUser(c("SimpleNUXMessageTypes").AR_STUDIO_DOWNLOAD_BANNER_NUX);this.setState({showDownloadBanner:false})}.bind(this);this.$MediaEffectMaskFileUploadStep2=function(){this.setState({showARStudioDialog:true})}.bind(this);this.$MediaEffectMaskFileUploadStep3=function(){this.setState({showARStudioDialog:false})}.bind(this);c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores([c("MediaEffectFrameCreateDialogDataStore"),c("MediaEffectMaskUploadDataStore"),c("MediaEffectMetadataStore")]);if(o.hasUsedARStudio&&!c("SimpleNUXMessage").hasUserSeenMessage(c("SimpleNUXMessageTypes").AR_STUDIO_DOWNLOAD_BANNER_NUX))c("SimpleNUXMessage").markMessageSeenByUser(c("SimpleNUXMessageTypes").AR_STUDIO_DOWNLOAD_BANNER_NUX)}n.prototype.$MediaEffectMaskFileUploadStep4=function(){return c("React").createElement("div",{className:"_3-95"},c("React").createElement(c("MediaEffectMaskVersionNotice.react"),null))};n.prototype.$MediaEffectMaskFileUploadStep5=function(o){c("MediaEffectFrameEditorDispatcher").dispatch({type:"uploadMethod/change",payload:{uploadMethod:o}})};n.prototype.render=function(){var o=this.props.effectUploadLegalText,p=this.state,q=p.arfxFilesForUpload,r=p.cameraIconDimensions,s=p.cameraIconFile,t=p.cameraIconSrc,u=p.description,v=p.isValidating,w=p.maskFiles,x=p.projectFile,y=p.rejectReasons,z=p.reviewMaterialID,A=p.screencastFile,B=p.screencastSrc,C=p.showARStudioDialog,D=p.showDownloadBanner,E=p.userIsAgreed,F=C?c("React").createElement(c("MediaEffectHubARStudioDialog.react"),{onClose:this.$MediaEffectMaskFileUploadStep3}):null,G=D?c("React").createElement(c("MediaEffectMaskMegaphone.react"),{button:c("React").createElement(c("XUIButton.react"),{label:"Download AR Studio",onClick:this.$MediaEffectMaskFileUploadStep2,size:"large",use:"confirm"}),imageAlign:"center",imageSrc:j("362460"),onClose:this.$MediaEffectMaskFileUploadStep1,title:i._("Download AR Studio to Get Started")},c("React").createElement(c("SUIText.react"),{color:"secondary",display:"block",theme:c("SUIBusinessTheme")},i._("This page is for uploading camera effects created in AR Studio, but it doesn't look like you have the app yet. Documentation for effect creators is available to help you get started. {ar studio link}.",[i.param("ar studio link",c("React").createElement("a",{href:"https://developers.facebook.com/products/camera-effects/ar-studio/",target:"_blank"},i._("Learn More")))]))):null,H=void 0;if(c("mediaEffectGKCheck")("media_effects_upload_form_arexport"))H=c("React").createElement(c("MediaEffectSwitchableUploadForm.react"),{arfxFilesForUpload:q,disabled:false,isValidating:v,maskFiles:w,onChangeUploadMethod:this.$MediaEffectMaskFileUploadStep5,projectFile:x});else H=c("React").createElement(c("MediaEffectMultiFileUploadForm.react"),{arfxFilesForUpload:q,disabled:false,isValidating:v,maskFiles:w,projectFile:x});return c("React").createElement("div",{className:"_2041 _190n",style:{padding:"32px 80px"}},F,G,c("React").createElement(c("XUIText.react"),{className:"_38wf _2pie",display:"block"},i._("Upload Effect")),y&&y.length>0?c("React").createElement(c("MediaEffectRejectedReviewResult.react"),{reasons:y}):null,this.$MediaEffectMaskFileUploadStep4(),c("React").createElement(c("SUICardDEPRECATED.react"),{className:"_2pin _3-98",theme:c("SUIBusinessTheme"),type:"padded"},c("React").createElement(c("MediaEffectMaskThumbnailUpload.react"),{cameraIconDimensions:r,cameraIconFile:s,cameraIconSrc:t,isValidating:v}),H,c("React").createElement(c("MediaEffectMaskLegalAgreement.react"),{effectUploadLegalText:o,isValidating:v,userIsAgreed:E})),c("React").createElement(c("XUIText.react"),{className:"_38wf _2pie",display:"block"},i._("Description for internal review")),c("React").createElement(c("SUICardDEPRECATED.react"),{className:"_2pin _3-98",theme:c("SUIBusinessTheme"),type:"padded"},c("React").createElement(c("MediaEffectMaskDescriptionInput.react"),{description:u,isValidating:v}),c("React").createElement(c("MediaEffectMaskScreencastUpload.react"),{isValidating:v,reviewMaterialID:z,screencastFile:A,screencastSrc:B})))};f.exports=c("FluxContainer").create(n)}),null);
__d("FXInspirationsCategoryName",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({TOP:"top",PRECAPTURE_TOP:"precapture_top",POSTCAPTURE_TOP:"postcapture_top",ALPHA_TOP:"alpha_top",MOST_RECENT:"most_recent",PRECAPTURE_MOST_RECENT:"precapture_most_recent",POSTCAPTURE_MOST_RECENT:"postcapture_most_recent",MASKS:"masks",STYLE:"style",PRECAPTURE_STYLE:"precapture_style",POSTCAPTURE_STYLE:"postcapture_style",FRAMES:"frames",PRECAPTURE_FRAMES:"precapture_frames",POSTCAPTURE_FRAMES:"postcapture_frames",FB_ONLY:"fb_only",PRECAPTURE_FB_ONLY:"precapture_fb_only",POSTCAPTURE_FB_ONLY:"postcapture_fb_only",SELF:"self",DOODLES:"doodles",ADJUSTMENT_MODES:"adjustment_modes",EDITING:"editing"})}),null);
__d("InspirationsCategoryNameFBOnly.react",["cx","FXInspirationsCategoryName","MediaEffectCard.react","MediaEffectMetadataActionCreators","React","XUICheckboxInput.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.$InspirationsCategoryNameFBOnly1=function(event){event.target.checked?c("MediaEffectMetadataActionCreators").addInspirationCategoryNames(event.target.value):c("MediaEffectMetadataActionCreators").removeInspirationCategoryNames(event.target.value)};k.prototype.$InspirationsCategoryNameFBOnly2=function(){return[c("FXInspirationsCategoryName").MASKS,c("FXInspirationsCategoryName").FRAMES,c("FXInspirationsCategoryName").STYLE]};k.prototype.render=function(){var l=this.$InspirationsCategoryNameFBOnly2(),m=[];l.forEach(function(n){m.push(c("React").createElement("div",{className:"_3-8w",key:n},c("React").createElement(c("XUICheckboxInput.react"),{defaultChecked:this.props.suggested_category_names&&this.props.suggested_category_names.includes(n),onChange:this.$InspirationsCategoryNameFBOnly1,value:n}),n))}.bind(this));return c("React").createElement(c("MediaEffectCard.react"),{title:"Category Type",tooltip:"If you would like to override effect category types. Please check the types listed as below."},m)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MediaEffectHubDispatcher",["ExplicitRegistrationReactDispatcher"],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationReactDispatcher"));i=h&&h.prototype;function j(k){"use strict";i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:true})}),null);
__d("XMediaEffectHubEffectActivationAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/effects/async/activation/",{activate:{type:"Bool",defaultValue:false},effect_ids:{type:"FBIDVector",required:true}})}),null);
__d("XMediaEffectHubEffectBoostedWeightAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/effects/async/boosted_weight/",{weight:{type:"String",required:true},effect_id:{type:"String",required:true}})}),null);
__d("MediaEffectMetadataDataLoader",["Promise","AsyncRequest","XMediaEffectHubEffectActivationAsyncController","XMediaEffectHubEffectBoostedWeightAsyncController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={changeActiveStatus:function i(j,k){return new(c("Promise"))(function(l,m){var n=c("XMediaEffectHubEffectActivationAsyncController").getURIBuilder().setBool("activate",j).setFBIDVector("effect_ids",k.toSeq().map(function(o){return o.id}).toArray()).getURI();new(c("AsyncRequest"))().setURI(n).setHandler(l).setErrorHandler(m).send()})},changeBoostedWeight:function i(j,k){return new(c("Promise"))(function(l,m){var n=c("XMediaEffectHubEffectBoostedWeightAsyncController").getURIBuilder().setString("weight",j).setString("effect_id",k.id).getURI();new(c("AsyncRequest"))().setURI(n).setHandler(l).setErrorHandler(m).send()})}};f.exports=h}),null);
__d("MediaEffectUploadManager",["Arbiter"],(function a(b,c,d,e,f,g){"use strict";var h="MediaEffectUploadManager/upload",i={subscribeToUploadDone:function j(k,l){return c("Arbiter").subscribe(h,k,l)},informUploadDone:function j(k,l){return c("Arbiter").inform(h,k,l)}};f.exports=i}),null);
__d("XMediaEffectAsyncEditController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/effects/activation/submit/",{media_effect_id:{type:"FBID"}})}),null);
__d("XProcessImageBackgroundController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/media_effect/swipeable_frame/image/process_background/",{image_id:{type:"FBID",required:true}})}),null);
__d("XRemoveImageBackgroundController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/media_effect/swipeable_frame/image/remove_background/",{image_id:{type:"FBID",required:true}})}),null);
__d("MediaEffectMetadataActionCreators",["cx","invariant","regeneratorRuntime","Animation","AsyncRequest","AsyncResponse","AsyncUploadRequest","immutable","MediaEffectFlowType","MediaEffectFrameEditorDispatcher","MediaEffectHubDispatcher","MediaEffectMetadataDataLoader","MediaEffectReactFrameEditorAssetPositionRecord","MediaEffectRequestBuilder","MediaEffectTemplateVariationRecord","MediaEffectUploadManager","SimpleXUIDialog","Style","XMediaEffectAsyncEditController","XProcessImageBackgroundController","XRemoveImageBackgroundController","nullthrows"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("immutable").Set,k="_1tp7",l={addImage:function m(n,o,p){var q={type:"add/image",imageFile:n,position:o&&p?new(c("MediaEffectReactFrameEditorAssetPositionRecord").fromCenter)(o,p):null};c("MediaEffectFrameEditorDispatcher").dispatch(q)},replaceImage:function m(n,o){c("MediaEffectFrameEditorDispatcher").dispatch({type:"replace/image",localAssetID:n,imageFile:o})},addTag:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"add/tag",data:n})},addText:function m(n,o,p){var q={type:"add/text",content:n,position:null};if(o&&p)q.position=new(c("MediaEffectReactFrameEditorAssetPositionRecord").fromCenter)(o,p);c("MediaEffectFrameEditorDispatcher").dispatch(q)},addWhitelistedUser:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"add/fbWhitelistedUser",data:n})},changeScheduleRange:function m(n,o,p){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/scheduleRange",startTime:n,endTime:o,timezone:p})},changeBackgroundColor:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/backgroundColor",color:n})},changeBackgroundImage:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/backgroundImage",image:n})},changeCategory:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/category",value:n})},changePageLiked:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/fbPageLiked",value:n})},changeCatalogGKs:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/fbCatalogGKs",value:n})},changeEligibilityGKs:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/fbEligibilityGKs",value:n})},changeManualRankWeight:function m(event){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/fbRankWeight",value:event.target.value})},changeLocales:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/locales",value:n})},changeLocationPage:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/locationPageID",value:n})},changeLocation:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/location",value:n})},changeLocationTarget:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/locationTarget",value:n})},changeName:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/name",value:n})},changeOwner:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/selectedOwnerID",value:n})},changeInstagramAttribution:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/selectedInstagramAttributionID",value:n})},setUseOwnerSelector:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/setUseOwnerSelector",value:n})},resetLocation:function m(){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/locationTarget",value:"everyone"})},updateNameValidation:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/nameValidation",isError:n})},updateDescriptionValidation:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/descriptionValidation",isInvalid:n})},changeProductVisibiilityPolicy:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/productVisibilityPolicy",value:n})},changeRankingStrategy:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/fbRankingStrategy",value:n})},changeTimingSchedule:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/timingSchedule",value:n})},changeWhitelistCheckEligibility:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/fbWhitelistCheckEligibility",value:n})},removeBackground:function m(n,o){c("MediaEffectFrameEditorDispatcher").dispatch({type:"replace/startRemovingBackground",localAssetID:n});var p=c("XRemoveImageBackgroundController").getURIBuilder().setFBID("image_id",o).getURI();new(c("AsyncRequest"))().setURI(p).setHandler(function(q){return q.payload.updated_id&&c("MediaEffectFrameEditorDispatcher").dispatch({type:"replace/imageBackground",localAssetID:n,imageID:q.payload.updated_id,imageURI:q.payload.updated_uri})}).send()},processBackground:function m(n,o){var p=c("XProcessImageBackgroundController").getURIBuilder().setFBID("image_id",o).getURI();new(c("AsyncRequest"))().setURI(p).setHandler(function(q){return q.payload.updated_uri&&c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/image",localAssetID:n,imageURI:q.payload.updated_uri})}).send()},updateTextImage:function m(n,o,p,q,r){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/textImage",localAssetID:n,textContent:o,localImageURI:p,file:q,assetSize:r})},checkOfflineOnly:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/offlineOnly",value:n})},changeAdsTargetingSpec:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/adsTargetingSpec",adsTargetingSpec:n})},checkSelfBirthday:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/selfBirthday",value:n})},removeWhitelistedUser:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"remove/fbWhitelistedUser",data:n})},removeTag:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"remove/tag",data:n})},updateAssetPosition:function m(n,o){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/assetPosition",localAssetID:n,position:o})},setAutoSnapping:function m(n,o,p){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/autoSnapping",localAssetID:n,autoSnappedType:o,specs:p})},setIsDragging:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"set/isDragging",isDragging:n})},setIsSaving:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"set/isSaving",isSaving:n})},updateAssetSize:function m(n,o){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/assetSize",localAssetID:n,size:o})},updateAssetNativeSize:function m(n,o){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/assetNativeSize",localAssetID:n,size:o})},updateStickerFBID:function m(n,o,p){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/stickerFBID",localAssetID:n,stickerFBID:o,localTemplateID:p})},updateTextContent:function m(n,o){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/textContent",localAssetID:n,content:o})},updateTextFonts:function m(n,o){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/textFonts",localTextIDs:n,font:o})},updateTextColors:function m(n,o){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/textColors",localTextIDs:n,color:o})},updateTextAlignments:function m(n,o){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/textAlignments",localTextIDs:n,textAlignment:o})},setFrameFilterID:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/frameFilterID",filterID:n})},setThumbnail:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/thumbnail",thumbnail:n})},save:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"save",effectID:n})},saveAsDraft:function m(){c("MediaEffectFrameEditorDispatcher").dispatch({type:"save/draft"})},selectAssetOnly:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"select/assetOnly",localAssetID:n})},selectAsset:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"select/asset",localAssetID:n})},deselectAsset:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"deselect/asset",localAssetID:n})},editText:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"edit/text",localAssetID:n})},selectAll:function m(){c("MediaEffectFrameEditorDispatcher").dispatch({type:"select/all"})},deselectAll:function m(){c("MediaEffectFrameEditorDispatcher").dispatch({type:"deselect/all"})},startCamera:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"set/cameraSource",cameraSource:n})},pauseCamera:function m(){c("MediaEffectFrameEditorDispatcher").dispatch({type:"pause/camera"})},resumeCamera:function m(){c("MediaEffectFrameEditorDispatcher").dispatch({type:"resume/camera"})},stopCamera:function m(){c("MediaEffectFrameEditorDispatcher").dispatch({type:"set/cameraSource",cameraSource:null})},selectInstruction:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"select/instruction",instructionID:n})},raiseAsset:function m(n){var o=arguments.length<=1||arguments[1]===undefined?false:arguments[1];c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/asset/raise",localAssetID:n,toTop:o})},lowerAsset:function m(n){var o=arguments.length<=1||arguments[1]===undefined?false:arguments[1];c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/asset/lower",localAssetID:n,toBottom:o})},deleteAsset:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"delete/asset",localAssetID:n})},duplicateAsset:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"duplicate/asset",localAssetID:n})},initEffectMetadata:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"init/effectMetadata",data:n})},addValidation:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"validation/add",validation:n})},removeValidation:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"validation/remove",validation:n})},initFrameData:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"init/frameData",data:n})},initMaskUploadData:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"init/maskUploadData",data:n})},changeStep:function m(n){if(n>=0)c("MediaEffectFrameEditorDispatcher").dispatch({type:"change/step",step:n})},validate:function m(n){if(n>=0){c("MediaEffectFrameEditorDispatcher").dispatch({type:"form/validate",step:n});l.scrollToFirstError()}},scrollToFirstError:function m(){window.setTimeout(function(){var n=document.getElementsByClassName(k);if(n.length>0){var o=n[0].offsetTop-40,p=c("Style").getScrollParent(n[0]);new(c("Animation"))(p).to("scrollTop",o).duration(750).go()}},750)},initDialog:function m(n,o,p,q){__p&&__p();c("MediaEffectFrameEditorDispatcher").dispatch({type:"init/dialog",creationReferrer:n,flowType:o,sourceID:q});switch(o){case c("MediaEffectFlowType").EVENT:if(q&&p){l.changeOwner(c("nullthrows")(q));var r=p.ownersData.find(function(s){return s.id===q});r||i(0);this.changeName(r.name)}break;default:break}},addFontData:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"add/fontData",data:n})},addTemplateData:function m(n,o){c("MediaEffectFrameEditorDispatcher").dispatch({type:"add/templateData",data:n,variants:o})},applyTemplate:function m(n){l._genApplyTemplate(n)["catch"](function(o){})},_genApplyTemplate:function m(n){__p&&__p();var o,p;return c("regeneratorRuntime").async(function q(r){__p&&__p();while(1)switch(r.prev=r.next){case 0:o=this;if(n){r.next=5;break}c("MediaEffectFrameEditorDispatcher").dispatch({type:"clear/template"});r.next=16;break;case 5:o.deselectAll();r.prev=6;r.next=9;return c("regeneratorRuntime").awrap(n.genFrameData());case 9:p=r.sent;c("MediaEffectFrameEditorDispatcher").dispatch({type:"apply/template",templateFBID:n.templateFBID,frameData:p});r.next=16;break;case 13:r.prev=13;r.t0=r["catch"](6);c("SimpleXUIDialog").showConfirm(r.t0.message,"Template loading failed. Retry?",function(s){if(s)o.applyTemplate(n)},null);case 16:case"end":return r.stop()}},null,this,[[6,13]])},changeEffectHasText:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/effectHasText",value:n})},changeProductionVerification:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/productionVerification",value:n})},setScreenDimensions:function m(n,o,p){c("MediaEffectFrameEditorDispatcher").dispatch({type:"set/screenDimensions",screenWidth:n,dialogHeight:o,flowType:p})},initEventDialogContext:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"init/eventDialog",dialogContext:n})},addInspirationCategoryNames:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"add/inspirationCategoryNames",value:n})},removeInspirationCategoryNames:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"remove/inspirationCategoryNames",value:n})},changeGatelogic:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/gatelogic",value:n})},changeIGCameraFormat:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/igCameraFormat",value:n})},changeHumanReadableDescription:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/humanReadableDescription",value:n})},setPlaceDescription:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"set/placeDescription",placeDescription:n})},selectTemplateCategoryID:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"select/templateCategoryID",value:n})},changeAttributedOwner:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"select/attributedOwnerID",value:n})},initEffectData:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"init/effectData",data:n})},setContentMustBeUpdated:function m(n,o){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/asset/contentMustBeUpdated",localAssetID:n,contentMustBeUpdated:o})},changeActiveStatus:function m(n,o,p,q){c("MediaEffectMetadataDataLoader").changeActiveStatus(n,o).then(function(r){var o=r.payload.effects;c("MediaEffectFrameEditorDispatcher").dispatch({type:"effect/edited",data:o[0]});c("MediaEffectHubDispatcher").dispatch({type:"effects_edited",payload:{effects:o}});p&&p()})["catch"](function(r){c("AsyncResponse").defaultErrorHandler(r);q&&q()}).done()},notifyEnterCreationFlowFromInlineNUX:function m(){c("MediaEffectFrameEditorDispatcher").dispatch({type:"inlineNUX/enterCreationFlow"})},updateValidationResult:function m(n,o){c("MediaEffectFrameEditorDispatcher").dispatch({type:"asset/validate",result:o,stickerFBID:n})},muteNotifications:function m(){var n=j.of.apply(j,arguments);c("MediaEffectFrameEditorDispatcher").dispatch({type:"notification/mute",notificationTypes:n})},unmuteNotifications:function m(){var n=j.of.apply(j,arguments);c("MediaEffectFrameEditorDispatcher").dispatch({type:"notification/unmute",notificationTypes:n})},highlightNotification:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"notification/highlight",location:n})},addSystemColorPalettes:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"add/systemColorPalettes",paletteData:n})},bootstrapFontData:function m(){c("MediaEffectFrameEditorDispatcher").dispatch({type:"bootstrap/fontData"})},createNewTemplateVariation:function m(n){var o=c("MediaEffectTemplateVariationRecord").fromSourceTemplate(n);o.then(function(p){c("MediaEffectFrameEditorDispatcher").dispatch({type:"new/templateVariation",templateVariation:p})})["catch"](function(p){})},setCurrentTemplateVariation:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"set/currentTemplateVariation",localTemplateID:n})},setTemplateSourceColorPalette:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"set/templateSourceColorPalette",palette:n})},setUserColorPalette:function m(n,o){c("MediaEffectFrameEditorDispatcher").dispatch({type:"set/userColorPalette",palette:n,index:o})},checkFBOnlyMediaRestriction:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/fbOnlyMediaRestriction",value:n})},changeConnectApp:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"change/connectAppID",appID:n})},updateEffectID:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/effectID",effectID:n})},updateMetadata:function m(n,o,p,q){var r=c("XMediaEffectAsyncEditController").getURIBuilder().setFBID("media_effect_id",n).getURI(),s=new(c("AsyncUploadRequest"))().setURI(r).setAllowCrossOrigin(false).setData(o).setFiles(p);s.subscribe("success",function(t,u){c("MediaEffectUploadManager").informUploadDone(u.getResponse().payload);q&&q()});s.subscribe("failure",function(t,u){c("AsyncResponse").defaultErrorHandler(u)});s.send()},updateMaskFilesWithMetadata:function m(n,o){c("MediaEffectRequestBuilder").forMask.forUpdate(n).setOnSuccessComplete(function(p){c("MediaEffectUploadManager").informUploadDone(p.payload);o&&o(true)}).setOnFailureComplete(function(p){c("AsyncResponse").defaultErrorHandler(p);o&&o(false)}).genSend()},updateIsAutoupgraded:function m(n){c("MediaEffectFrameEditorDispatcher").dispatch({type:"update/isAutoupgraded",payload:{isAutoupgraded:n}})}};f.exports=l}),null);
__d("MediaEffectMetadataAdsInterest.react",["MediaEffectCard.react","MediaEffectMetadataActionCreators","React","TargetingContainer.react","AdsCommonTargetingAgeEditor","AdsCommonTargetingGenderEditor","AdsCommonTargetingInterestsEditor"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){var k=void 0;if(this.props.adsTargetingSpec&&this.props.adsTargetingSpec!=="null")k=JSON.parse(this.props.adsTargetingSpec);var l=[{component:c("AdsCommonTargetingAgeEditor")},{component:c("AdsCommonTargetingGenderEditor")},{component:c("AdsCommonTargetingInterestsEditor")}],m={oneColumn:true,defaultWidth:300},n=function n(o){return c("MediaEffectMetadataActionCreators").changeAdsTargetingSpec(JSON.stringify(o))};return c("React").createElement(c("MediaEffectCard.react"),{title:"Ads Targeting"},c("React").createElement(c("TargetingContainer.react"),{config:l,defaultApiSpec:k,extraData:m,onTargetingSpecChange:n}))};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MediaEffectMetadataCategoryAndTags.react",["cx","fbt","MediaEffectCard.react","MediaEffectMetadataTagsTypeahead.react","React"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;l.prototype.render=function(){return c("React").createElement(c("MediaEffectCard.react"),{className:"_2x0s",title:i._("Keywords"),tooltip:i._("Add up to 10 keywords to help people find your effect. Keywords must follow the platform's terms and policies.")},c("React").createElement(c("MediaEffectMetadataTagsTypeahead.react"),this.props))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("MediaEffectConnectAppSelector.react",["cx","fbt","Image.react","MediaEffectCard.react","MediaEffectWebdriverIDs","React","XUISingleSelector.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("XUISingleSelector.react").Option,m="0";j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MediaEffectConnectAppSelector1=function(t){var u=t.value===m?null:t.value;this.props.onConnectAppChange(u)}.bind(this),p}n.prototype.render=function(){var o=this.props,p=o.appID,q=o.appsData,r=o.disabled,s=c("React").createElement(l,{value:m},i._("None")),t=q.map(function(w){return c("React").createElement(l,{icon:c("React").createElement(c("Image.react"),{className:"_5hh3",src:w.src}),key:w.id,value:w.id},w.name)}),u=i._("Select the app connected to this effect. This is used for attribution on Facebook."),v=p||m;return c("React").createElement(c("MediaEffectCard.react"),{className:"_1t24",title:i._("Connected App"),tooltip:u},c("React").createElement(c("XUISingleSelector.react"),{"data-testid":c("MediaEffectWebdriverIDs").LWE_EFFECT_APP_POPOVER_BUTTON,defaultValue:v,disabled:!!r,maxwidth:268,onChange:this.$MediaEffectConnectAppSelector1,size:"xlarge",value:v},s,t))};f.exports=n}),null);
__d("MediaEffectFBOnlyPermissionExplanationCard.react",["cx","DOMContainer.react","MediaEffectCard.react","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement(c("MediaEffectCard.react"),{className:c("joinClasses")("_3-8z _2pip",this.props.className),title:"[FB-Only]"},c("React").createElement(c("DOMContainer.react"),null,this.props.explanationLink))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MediaEffectMetadataThirdPartyThumbnailUploader.react",["cx","fbt","FileInput.react","Image.react","InlineBlock.react","LeftRight.react","MediaEffectCard.react","React","XUIButton.react","XUINotice.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(m){__p&&__p();k.constructor.call(this,m);this.onFileInputChange=function(event){__p&&__p();var n=event.target.files[0],o=n.size/1024/1024;if(o<1){var p=new FileReader();p.readAsDataURL(n);p.addEventListener("loadend",function(q){var r=q.target,s=r.result;this.setState({sizeError:false,uploadedFile:n,uploadedFileURI:s});this.props.onFileInputChange(n)}.bind(this))}else this.setState({sizeError:true,uploadedFile:null,uploadedFileURI:null})}.bind(this);this.state={sizeError:false,uploadedFile:null,uploadedFileURI:null}}l.prototype.render=function(){var m=this.props,n=m.thumbnailName,o=m.thumbnailURI;if(o!==null&&this.state.uploadedFile===null)return null;return c("React").createElement(c("MediaEffectCard.react"),{title:"Thumbnail",tooltip:i._("Upload thumbnail image for your effect")},c("React").createElement(c("LeftRight.react"),{direction:"left"},c("React").createElement(c("Image.react"),{className:"_3-91",height:144,src:this.state.uploadedFileURI,width:144}),c("React").createElement("div",null,c("React").createElement("div",{className:"_2phz"},i._("Upload a square thumbnail that will be displayed in squircle shape in the camera tray, must be less than 1MB.")),this.state.sizeError?c("React").createElement(c("XUINotice.react"),{use:"warn"},i._("Size is more than 1MB")):null,c("React").createElement("div",null,c("React").createElement("div",{className:"_2phz"},c("React").createElement(c("FileInput.react"),{accept:"image/*",name:"thumbnail_file",onChange:this.onFileInputChange},c("React").createElement(c("XUIButton.react"),{href:{url:"#"},label:i._("Upload Image")}))),c("React").createElement(c("InlineBlock.react"),{alignv:"middle"},n)))))};f.exports=l}),null);
__d("MediaEffectMetadataContainer.react",["cx","fbt","FluxContainer","FXEntMediaEffectSubmissionStatus","immutable","MediaEffectConnectAppSelector.react","MediaEffectFBOnlyPermissionExplanationCard.react","MediaEffectFlowType","MediaEffectFrameCreateDialogDataStore","MediaEffectFrameCreationStepsConfig","MediaEffectFrameEditorDispatcher","MediaEffectMetadataActionCreators","MediaEffectMetadataCategoryAndTags.react","MediaEffectMetadataFBOnly.react","MediaEffectMetadataLocation.react","MediaEffectMetadataLocationV2.react","MediaEffectMetadataNameContainer.react","MediaEffectMetadataSchedule.react","MediaEffectMetadataStore","MediaEffectMetadataThirdPartyThumbnailUploader.react","MediaEffectMetadataViewStore","MediaEffectPlaceDescriptionRecord","MediaEffectUserContext","MediaEffectWarnings.react","React","SUIBusinessTheme","SUICardDEPRECATED.react","XUICard.react","XUIText.react","mediaEffectGKCheck"],(function aa(ba,a,ca,da,b,ea,fa,c){"use strict";__p&&__p();var d,e,f=a("MediaEffectFrameCreationStepsConfig").CreationSteps,g=a("immutable").List,h="124024574287414",i="ig_facefilter.engcore";d=babelHelpers.inherits(j,a("React").PureComponent);e=d&&d.prototype;j.getStores=function(){return[a("MediaEffectFrameCreateDialogDataStore"),a("MediaEffectMetadataStore"),a("MediaEffectMetadataViewStore")]};j.calculateState=function(k,l){var m=a("MediaEffectMetadataStore").getState(),n=a("MediaEffectMetadataViewStore").getState(),o=m.get("thumbnail"),p=m.get("selectedOwnerID"),q=a("MediaEffectFrameCreationStepsConfig").getStep(l.flowType,a("MediaEffectFrameCreateDialogDataStore").getState().get("validatingStep")),r=q===f.TARGETING,s=m.get("attributedOwnerID")!==null?String(m.get("attributedOwnerID")):null,t=m.get("gatelogic")===null&&p===h?i:m.get("gatelogic");return{catalogGKs:m.get("fbCatalogGKs"),inspirationCategoryNames:m.get("inspirationCategoryNames"),effectHasText:m.get("effectHasText"),eligibilityGKs:m.get("fbEligibilityGKs"),endTime:m.get("endTime"),errors:n.get("errors"),fbExperimentID:m.get("fbExperimentID"),fbOnlyMediaRestriction:m.get("fbOnlyMediaRestriction"),gatelogic:t,humanReadableDescription:m.get("humanReadableDescription"),igCameraFormat:m.get("igCameraFormat"),instructions:n.get("instructions"),locales:m.get("locales"),location:m.get("location"),locationPageID:m.get("locationPageID"),offlineOnly:!!m.get("offlineOnly"),ownersData:n.get("ownersData"),pageLiked:m.get("fbPageLiked"),placeDescription:m.get("placeDescription"),potentialOwnersForAttribution:n.get("potentialOwnersForAttribution"),productVisibilityPolicy:m.get("productVisibilityPolicy"),productionVerification:m.get("productionVerification"),rankWeight:m.get("fbRankWeight"),rankingStrategy:n.get("fbRankingStrategy"),startTime:m.get("startTime"),selectedAttributedOwnerID:s,selectedCategoryID:m.get("selectedCategoryID"),selectedConnectAppID:m.get("connectAppID"),selectedInstagramAttribution:a("MediaEffectMetadataViewStore").getInstagramAttribution(m.get("selectedInstagramAttributionID")),selectedInstructionID:m.get("selectedInstructionID"),selectedOwner:a("MediaEffectMetadataViewStore").getOwner(p),selectedOwnerID:p,selectedTemplateCategoryID:m.get("selectedTemplateCategoryID"),selfBirthday:!!m.get("selfBirthday"),tags:m.get("tags"),templateCategories:n.get("templateCategories"),thumbnailName:o&&o.name,thumbnailURI:o?URL.createObjectURL(o):m.get("thumbnailURI"),timezone:m.get("timezone"),timingSchedule:m.get("timingSchedule"),whitelistCheckEligibility:m.get("fbWhitelistCheckEligibility"),whitelistedUsers:m.get("fbWhitelistedUsers"),isValidating:r,locationTarget:m.get("locationTarget"),adsTargetingSpec:m.get("adsTargetingSpec")}};function j(k,l){e.constructor.call(this,k,l)}j.prototype.componentWillMount=function(){a("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores([a("MediaEffectFrameCreateDialogDataStore"),a("MediaEffectMetadataStore"),a("MediaEffectMetadataViewStore")])};j.prototype.render=function(){var k=this.props.flowType,l=this.state,m=l.endTime,n=l.isValidating,o=l.ownersData,p=l.selectedConnectAppID,q=l.selectedCategoryID,r=l.selectedInstagramAttribution,s=l.selectedOwner,t=l.selectedOwnerID,u=l.startTime,v=l.tags,w=l.timezone,x=babelHelpers.objectWithoutProperties(l,["endTime","isValidating","ownersData","selectedConnectAppID","selectedCategoryID","selectedInstagramAttribution","selectedOwner","selectedOwnerID","startTime","tags","timezone"]),y=x.catalogGKs,z=x.inspirationCategoryNames,A=x.effectHasText,B=x.eligibilityGKs,C=x.fbExperimentID,D=x.fbOnlyMediaRestriction,E=x.gatelogic,F=x.humanReadableDescription,G=x.igCameraFormat,H=x.instructions,I=x.locales,J=x.offlineOnly,K=x.pageLiked,L=x.potentialOwnersForAttribution,M=x.productVisibilityPolicy,ga=x.productionVerification,N=x.rankingStrategy,O=x.rankWeight,P=x.selectedAttributedOwnerID,Q=x.selectedInstructionID,R=x.selectedTemplateCategoryID,S=x.selfBirthday,T=x.templateCategories,U=x.timingSchedule,V=x.thumbnailName,W=x.thumbnailURI,X=x.whitelistCheckEligibility,Y=x.whitelistedUsers,ha=x.adsTargetingSpec,Z=this.props.bootstrapData.metadataJSData.submissionStatus,ia=!!this.props.bootstrapData.metadataJSData.id,ja=Z===a("FXEntMediaEffectSubmissionStatus").DRAFT||Z===a("FXEntMediaEffectSubmissionStatus").DENIED||s&&s.isFirstParty,ka=this.state.errors.toArray().map(function($,ma){return a("React").createElement(a("MediaEffectWarnings.react"),{items:$.messageItems,key:ma+$.code,message:$.message||""})}),la=this.props.bootstrapData.appsData;return a("React").createElement("div",{className:"_2041 _190n"},ka,!ia||ja?a("React").createElement("div",null,a("React").createElement(a("XUIText.react"),{className:"_38wf",display:"block"},c._("Required details")),a("React").createElement(a("SUICardDEPRECATED.react"),{className:"_2pin _3-98",theme:a("SUIBusinessTheme"),type:"padded"},a("React").createElement(a("MediaEffectMetadataNameContainer.react"),{disabled:false,flowType:k,placeholder:c._("Create a name for your effect")}),this.props.canThirdPartyUpdateThumbnail?a("React").createElement(a("MediaEffectMetadataThirdPartyThumbnailUploader.react"),{onFileInputChange:a("MediaEffectMetadataActionCreators").setThumbnail,thumbnailName:V,thumbnailURI:W}):null)):null,a("React").createElement(a("XUIText.react"),{className:"_38wf _2pie",display:"block"},c._("Optional details")),a("React").createElement(a("SUICardDEPRECATED.react"),{className:"_2pin",theme:a("SUIBusinessTheme"),type:"padded"},k===a("MediaEffectFlowType").MASK?a("React").createElement("div",null,a("React").createElement(a("MediaEffectConnectAppSelector.react"),{appID:p,appsData:g(la),disabled:this.props.disabled,isValidating:n&&(!s||!s.isFirstParty),onConnectAppChange:a("MediaEffectMetadataActionCreators").changeConnectApp})):null,this.$MediaEffectMetadataContainer1(),a("React").createElement(a("MediaEffectMetadataSchedule.react"),{disabled:this.props.disabled,endTime:m,onDateRangeChange:a("MediaEffectMetadataActionCreators").changeScheduleRange,owner:s,startTime:u,timezone:w}),a("React").createElement("div",{className:"_204i"}),a("React").createElement(a("MediaEffectMetadataCategoryAndTags.react"),{disabled:this.props.disabled,onAddTag:a("MediaEffectMetadataActionCreators").addTag,onCategorySelected:a("MediaEffectMetadataActionCreators").changeCategory,onRemoveTag:a("MediaEffectMetadataActionCreators").removeTag,selectedCategoryID:q,tags:v})),a("MediaEffectUserContext").includesFBOnly?a("React").createElement(a("XUICard.react"),{className:"_3-8-"},a("React").createElement(a("MediaEffectMetadataFBOnly.react"),{catalogGKs:y,inspirationCategoryNames:z,effectHasText:A,eligibilityGKs:B,fbExperimentID:C,fbOnlyMediaRestriction:D,flowType:k,gatelogic:E,humanReadableDescription:F,igCameraFormat:G,instructions:H,isValidating:n,locales:I,offlineOnly:J,pageLiked:K,potentialOwnersForAttribution:L,productVisibilityPolicy:M,rankingStrategy:N,rankWeight:O,selectedAttributedOwnerID:P,selectedInstagramAttribution:r,selectedInstructionID:Q,selectedOwnerID:t,selectedTemplateCategoryID:R,selfBirthday:S,templateCategories:T,timingSchedule:U,thumbnailName:V,thumbnailURI:W,whitelistCheckEligibility:X,whitelistedUsers:Y,adsTargetingSpec:ha})):null,this.props.context.explainFBOnly?a("React").createElement(a("MediaEffectFBOnlyPermissionExplanationCard.react"),{explanationLink:this.props.context.explainFBOnly}):null)};j.prototype.$MediaEffectMetadataContainer1=function(){var k=this.props.flowType,l=this.state,m=l.isValidating,n=l.location,o=l.locationPageID,p=l.locationTarget,q=l.selectedOwner;if(!q||!this.props.context.allowLocationFrameCreation||!(k!==a("MediaEffectFlowType").MASK||q.isFirstParty||this.props.context.canThirdPartyMaskLocation))return null;return a("React").createElement("div",null,a("mediaEffectGKCheck")("cep_location_targeting_v2")?a("React").createElement(a("MediaEffectMetadataLocationV2.react"),{disabled:this.props.disabled,isValidating:m,location:n,locationTargetType:p,onLocationSelected:a("MediaEffectMetadataActionCreators").changeLocation,onLocationTargetTypeSelected:a("MediaEffectMetadataActionCreators").changeLocationTarget,selectedOwner:q}):a("React").createElement(a("MediaEffectMetadataLocation.react"),{disabled:this.props.disabled,isValidating:m,locationPageID:o,locationTarget:p,onLocationDescriptionLoaded:a("MediaEffectMetadataActionCreators").setPlaceDescription,onLocationPageSelected:a("MediaEffectMetadataActionCreators").changeLocationPage,onLocationTargetSelected:a("MediaEffectMetadataActionCreators").changeLocationTarget,selectedOwner:q}),a("React").createElement("div",{className:"_204i"}))};j.prototype.$MediaEffectMetadataContainer2=function(k){a("MediaEffectMetadataActionCreators").changeOwner(k);a("MediaEffectMetadataActionCreators").resetLocation()};b.exports=a("FluxContainer").create(j,{withProps:true})}),null);
__d("MediaEffectMetadataAttributeOwner.react",["cx","fbt","React","SearchableEntry","StaticSearchSource","SUIMediaEffectTheme","SUISearchableSelector.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l="NO_OWNER_FOR_ATTRIBUTION";j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(n){__p&&__p();k.constructor.call(this,n);this.$MediaEffectMetadataAttributeOwner1=function(q){this.props.onAttributedOwnerChanged(q.getUniqueID()===l?null:q.getUniqueID());this.setState({attributeOwner:q})}.bind(this);var o=new(c("SearchableEntry"))({uniqueID:l,title:"Default Attribution"}),p=n.potentialOwnersForAttribution.entrySeq().map(function(q){var r=q[0],s=q[1];return new(c("SearchableEntry"))({uniqueID:r,title:s})}).toArray();p.unshift(o);this.attributeOwnerSearchSource=new(c("StaticSearchSource"))(p);if(n.selectedAttributedOwner)this.state={attributeOwner:new(c("SearchableEntry"))({uniqueID:n.selectedAttributedOwner,title:n.potentialOwnersForAttribution.get(n.selectedAttributedOwner)})};else this.state={attributeOwner:o}}m.prototype.render=function(){return c("React").createElement(c("SUISearchableSelector.react"),{className:"_3_kx",emptySearchResultsContent:"No matching results.",onChange:this.$MediaEffectMetadataAttributeOwner1,placeholder:i._("Enter an owner or leave it blank"),searchSource:this.attributeOwnerSearchSource,theme:c("SUIMediaEffectTheme"),value:this.state.attributeOwner,width:"100%"})};f.exports=m}),null);
__d("MediaEffectMetadataFBOnlyRanking.react",["cx","MediaEffectCard.react","React","XUIRadioList.react","XUITextInput.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=c("XUIRadioList.react").Item,m=/^\+?(0|[1-9]\d*)$/;i=babelHelpers.inherits(n,c("React").Component);j=i&&i.prototype;n.prototype.render=function(){var o=this.props,p=o.onManualRankWeightChange,q=o.onRankingStrategyChange,r=o.rankingStrategy,s=o.rankWeight;return c("React").createElement(c("MediaEffectCard.react"),{title:"Select Ranking"},c("React").createElement(c("XUIRadioList.react"),{onValueChange:q,selectedValue:r},c("React").createElement(l,{value:"DEFAULT"},"Default"),c("React").createElement(l,{value:"BOOST"},"Boost"),c("React").createElement(l,{value:"MANUAL"},"Enter a manual rank")),r==="MANUAL"?c("React").createElement("div",{className:"_2piv"},c("React").createElement(c("XUITextInput.react"),{placeholder:"Enter an Integer",className:"_3_kx",height:"tall",onChange:p,value:s,xuiError:!s||m.test(s)?null:"Not an integer"})):null)};function n(){i.apply(this,arguments)}n.propTypes={onManualRankWeightChange:k.func.isRequired,onRankingStrategyChange:k.func.isRequired,rankingStrategy:k.string,rankWeight:k.string};f.exports=n}),null);
__d("MediaEffectMetadataFeatureGroupsCheckList.react",["Grid.react","InputLabel_DEPRECATED.react","InputLabelLabel_DEPRECATED.react","MediaEffectCard.react","React","Tooltip.react","XUICheckboxInput.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("Grid.react").GridItem;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;k.prototype.render=function(){return c("React").createElement(c("MediaEffectCard.react"),{title:"Effect Group",tooltip:"choose the feature group the effect belongs to"},c("React").createElement(c("Grid.react"),{cols:1},c("React").createElement(j,null,c("React").createElement(c("InputLabel_DEPRECATED.react"),null,c("React").createElement(c("XUICheckboxInput.react"),{checked:this.props.offlineOnly,onChange:function(event){this.props.onOfflineOnlyChange(event.target.checked)}.bind(this)}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),null,c("React").createElement(c("Tooltip.react"),{tooltip:"only available when camera is offline"},"Offline Only")))),c("React").createElement(j,null,c("React").createElement(c("InputLabel_DEPRECATED.react"),null,c("React").createElement(c("XUICheckboxInput.react"),{checked:this.props.selfBirthday,onChange:function(event){this.props.onselfBirthdayChange(event.target.checked)}.bind(this)}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),null,c("React").createElement(c("Tooltip.react"),{tooltip:"can see only when self birthday"},"Self Birthday Only"))))))};function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("MediaEffectGKSearchSource",["AbstractAsyncSearchSource","AbstractSearchSource","AsyncRequest","WebAsyncSearchSourceUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("AbstractSearchSource"));i=h&&h.prototype;function j(k){i.constructor.call(this);this.$MediaEffectGKSearchSource1=new(c("AbstractAsyncSearchSource"))(k,this.$MediaEffectGKSearchSource2,c("WebAsyncSearchSourceUtils").normalizeResponse)}j.prototype.bootstrapImpl=function(k){this.$MediaEffectGKSearchSource1.bootstrap(k)};j.prototype.searchImpl=function(k,l,m){this.$MediaEffectGKSearchSource1.search(k,l,m)};j.prototype.getBootstrappedEntries=function(k){return this.$MediaEffectGKSearchSource1.getBootstrappedEntries(k)};j.prototype.getAllEntriesMap=function(){return this.$MediaEffectGKSearchSource1.getAllEntriesMap()};j.prototype.setRequestData=function(k){this.$MediaEffectGKSearchSource1.setRequestData(k)};j.prototype.$MediaEffectGKSearchSource2=function(k,l,m,n){new(c("AsyncRequest"))().setData(babelHelpers["extends"]({},k,l.data)).setMethod("GET").setReadOnly(true).setAllowCrossPageTransition(true).setHandler(m).setErrorHandler(n).setAllowCrossOrigin(true).setURI(l.uri).send()};f.exports=j}),null);
__d("MediaEffectMetadataGKsTypeahead.react",["MediaEffectGKSearchSource","React","SearchableEntry","URI","XUITokenizer.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes,k=[",",";"," "],l=new(c("URI"))("/intern/perflab/ajax/select_gk/typeahead").setSubdomain("our");h=babelHelpers.inherits(m,c("React").Component);i=h&&h.prototype;m.prototype.componentDidUpdate=function(){if(this.state.resetQueryString)this.setState({resetQueryString:false})};function m(n){i.constructor.call(this,n);this.searchSource=new(c("MediaEffectGKSearchSource"))({queryRequests:[{uri:l}]});this.state={resetQueryString:false}}m.prototype.render=function(){return c("React").createElement(c("XUITokenizer.react"),{entries:this.$MediaEffectMetadataGKsTypeahead1(),onAddEntryAttempt:this.$MediaEffectMetadataGKsTypeahead2.bind(this),onEnterWithoutSelection:this.$MediaEffectMetadataGKsTypeahead3.bind(this),onRemoveEntryAttempt:this.$MediaEffectMetadataGKsTypeahead4.bind(this),placeholder:this.props.placeholder,queryString:this.state.resetQueryString?"":undefined,searchSource:this.searchSource,tokenizeQueryString:this.$MediaEffectMetadataGKsTypeahead5.bind(this),tokenizeQueryStringOnBlur:this.$MediaEffectMetadataGKsTypeahead3.bind(this)})};m.prototype.$MediaEffectMetadataGKsTypeahead1=function(){return this.props.GKs.map(function(n){return new(c("SearchableEntry"))({title:n,uniqueID:n})})};m.prototype.$MediaEffectMetadataGKsTypeahead2=function(n){this.$MediaEffectMetadataGKsTypeahead6();var o=n.getTitle();if(!o||!o.length)return;if(this.props.GKs.indexOf(o)!==-1)return;var p=this.props.GKs.slice();p[p.length]=o;this.props.onGKsChanged(p)};m.prototype.$MediaEffectMetadataGKsTypeahead4=function(n){this.$MediaEffectMetadataGKsTypeahead6();var o=n.getTitle(),p=this.props.GKs.indexOf(o);if(p===-1)return;var q=this.props.GKs.slice();q.splice(p,1);this.props.onGKsChanged(q)};m.prototype.$MediaEffectMetadataGKsTypeahead3=function(n){this.$MediaEffectMetadataGKsTypeahead6()};m.prototype.$MediaEffectMetadataGKsTypeahead5=function(n){return null};m.prototype.$MediaEffectMetadataGKsTypeahead6=function(){this.setState({resetQueryString:true})};m.propTypes={GKs:j.array,onGKsChanged:j.func.isRequired,placeholder:j.string};f.exports=m}),null);
__d("MediaEffectMetadataInstructions.react",["fbt","MediaEffectCard.react","React","XUISingleSelector.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("XUISingleSelector.react").Option,l=c("React").PropTypes,m="0",n=c("React").createElement(k,{key:m,value:m},h._("No Instructions"));i=babelHelpers.inherits(o,c("React").PureComponent);j=i&&i.prototype;o.prototype.render=function(){var p=this.props,q=p.instructions,r=p.onInstructionSelected,s=p.selectedInstructionID,t=q.entrySeq().map(function(u){var v=u[0],w=u[1];return c("React").createElement(k,{value:v,key:v},w)}).toArray();t.unshift(n);return c("React").createElement(c("MediaEffectCard.react"),{title:"Interactivity Instructions"},c("React").createElement(c("XUISingleSelector.react"),{onChange:function u(v){r(v.value===m?null:v.value)},size:"large",value:s||m},t))};function o(){i.apply(this,arguments)}o.propTypes={instructions:l.object.isRequired,onInstructionSelected:l.func.isRequired,selectedInstructionID:l.string};f.exports=o}),null);
__d("MediaEffectMetadataLocale.react",["fbt","AdsTargetingLanguageSelector.react","MediaEffectCard.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){return c("React").createElement(c("MediaEffectCard.react"),{title:h._("Languages"),tooltip:h._("Only select a language if the people you want to reach use a language that's uncommon in your set location.")},c("React").createElement(c("AdsTargetingLanguageSelector.react"),{disabled:this.props.disabled,selectedLanguages:this.props.locales,onDataUpdate:function(m,n){this.props.onLocaleChanged(n)}.bind(this)}))};function l(){i.apply(this,arguments)}l.propTypes={disabled:k.bool,locales:k.array,onLocaleChanged:k.func.isRequired};f.exports=l}),null);
__d("MediaEffectMetadataPageTypeahead.react",["cx","fbt","CurrentUser","React","SearchableEntry","WebAsyncSearchSource","XUITypeahead.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.searchSource=new(c("WebAsyncSearchSource"))({queryRequests:[{uri:"/ajax/typeahead/search.php",data:{filter:["page"],viewer:c("CurrentUser").getID()}}]});this.state={queryString:""}}m.prototype.render=function(){var n=this.props.pageLiked;return c("React").createElement(c("XUITypeahead.react"),{className:"_3_kx",clearable:true,onBlur:this.$MediaEffectMetadataPageTypeahead1.bind(this),onChange:function(o){return this.setState({queryString:o.target.value})}.bind(this),onClear:this.$MediaEffectMetadataPageTypeahead2.bind(this),onSelectAttempt:this.$MediaEffectMetadataPageTypeahead3.bind(this),placeholder:i._("Enter a page name or leave it in blank"),queryString:n?n.title:this.state.queryString,searchSource:this.searchSource,selectedEntry:n?new(c("SearchableEntry"))({title:n.title,uniqueID:n.uniqueID}):null})};m.prototype.$MediaEffectMetadataPageTypeahead3=function(n){this.props.onPageLikedChange({title:n.getTitle(),uniqueID:n.getUniqueID()})};m.prototype.$MediaEffectMetadataPageTypeahead1=function(){if(!this.props.pageLiked)this.setState({queryString:""})};m.prototype.$MediaEffectMetadataPageTypeahead2=function(){this.setState({queryString:""});this.props.onPageLikedChange(null)};m.propTypes={onPageLikedChange:l.func.isRequired,pageLiked:l.oneOfType([l.oneOf([null]),l.instanceOf(Object)])};f.exports=m}),null);
__d("MediaEffectMetadataPageLiked.react",["MediaEffectCard.react","MediaEffectMetadataPageTypeahead.react","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;k.prototype.render=function(){return c("React").createElement(c("MediaEffectCard.react"),{title:"Select a page"},c("React").createElement(c("MediaEffectMetadataPageTypeahead.react"),this.props))};function k(){h.apply(this,arguments)}k.propTypes={onPageLikedChange:j.func.isRequired,pageLiked:j.oneOfType([j.oneOf([null]),j.instanceOf(Object)])};f.exports=k}),null);
__d("FXProductVisibilityPolicyType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ALL_PRODUCTS:0,OWNING_PRODUCT_ONLY:1,SPECIFIC_PRODUCTS:2,ALL_EXCEPT_PRODUCTS:3,ANY_FACEBOOK_UNIVERSE:4})}),null);
__d("MediaEffectMetadataProductVisibility.react",["cx","FXMediaEffectProduct","FXProductVisibilityPolicyType","FXProductVisibilityPolicyTypeLabels","LeftRight.react","MediaEffectCard.react","React","XUICheckboxList.react","XUISingleSelector.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("XUISingleSelector.react").Option,l=c("React").PropTypes;i=babelHelpers.inherits(m,c("React").PureComponent);j=i&&i.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MediaEffectMetadataProductVisibility4=function(s){var t=this.props.productVisibilityPolicy.products.slice();t.push(s.value);this.$MediaEffectMetadataProductVisibility6(t)}.bind(this),this.$MediaEffectMetadataProductVisibility5=function(s){var t=this.props.productVisibilityPolicy.products.slice();t.splice(t.indexOf(s.value),1);this.$MediaEffectMetadataProductVisibility6(t)}.bind(this),o}m.prototype.$MediaEffectMetadataProductVisibility1=function(n){return n===c("FXProductVisibilityPolicyType").SPECIFIC_PRODUCTS||n===c("FXProductVisibilityPolicyType").ALL_EXCEPT_PRODUCTS};m.prototype.$MediaEffectMetadataProductVisibility2=function(){return this.props.productVisibilityPolicy.type};m.prototype.$MediaEffectMetadataProductVisibility3=function(){var n=this.props.productVisibilityPolicy.type;if(!this.$MediaEffectMetadataProductVisibility1(n))return c("React").createElement("div",null);var o=this.props.productVisibilityPolicy.products,p=Object.keys(c("FXMediaEffectProduct")).map(function(q){return{label:c("FXMediaEffectProduct")[q],value:c("FXMediaEffectProduct")[q],checked:o.indexOf(c("FXMediaEffectProduct")[q])!==-1}});return c("React").createElement("div",null,c("React").createElement("span",null,"You must select at least one product for this setting:"),c("React").createElement(c("XUICheckboxList.react"),{items:p,onAdd:this.$MediaEffectMetadataProductVisibility4,onRemove:this.$MediaEffectMetadataProductVisibility5}))};m.prototype.$MediaEffectMetadataProductVisibility6=function(n){var o={type:this.props.productVisibilityPolicy.type,products:n};this.props.onProductVisibilityPolicyChange(o)};m.prototype.$MediaEffectMetadataProductVisibility7=function(n){var o={type:n,products:[]};this.props.onProductVisibilityPolicyChange(o)};m.prototype.render=function(){var n=Object.keys(c("FXProductVisibilityPolicyType")).map(function(o){return c("React").createElement(k,{key:o,value:c("FXProductVisibilityPolicyType")[o]},c("FXProductVisibilityPolicyTypeLabels")[o])});return c("React").createElement(c("MediaEffectCard.react"),{title:"Products which may consume this effect",tooltip:"You may limit which products this effect may be consumed in. Allowing a product to use an effect does not necessarily mean it WILL show up in that product, since each product may have its own logic for determining which effects it wishes to show. Use this setting to describe restrictions due to licensing, marketing, etc."},c("React").createElement(c("LeftRight.react"),{direction:"left"},c("React").createElement(c("XUISingleSelector.react"),{className:"_2pik",maxwidth:0,onChange:function(o){this.$MediaEffectMetadataProductVisibility7(o.value)}.bind(this),size:"large",value:this.props.productVisibilityPolicy.type},n),this.$MediaEffectMetadataProductVisibility3()))};m.propTypes={productVisibilityPolicy:l.instanceOf(Object),onProductVisibilityPolicyChange:l.func.isRequired};f.exports=m}),null);
__d("MediaEffectMetadataTemplateCategories.react",["cx","fbt","MediaEffectMetadataValidationUtils","React","XUIError.react","XUISingleSelector.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("XUISingleSelector.react").Option,m="0";j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MediaEffectMetadataTemplateCategories1=function(event){this.props.onTemplateCategorySelected(event.value===m?null:event.value)}.bind(this),p}n.prototype.$MediaEffectMetadataTemplateCategories2=function(){var o=this.props,p=o.isValidating,q=o.selectedTemplateCategoryID,r=c("MediaEffectMetadataValidationUtils").validateTemplateCategoryID(q);if(p&&!r)return i._("Please select a template category");return null};n.prototype.render=function(){var o=this.props,p=o.selectedTemplateCategoryID,q=o.templateCategories,r=q.entrySeq().map(function(s){var t=s[0],u=s[1];return c("React").createElement(l,{key:t,value:t},u)}).toArray();if(!p)r.unshift(c("React").createElement(l,{key:m,value:m},i._("Select template category")));return c("React").createElement(c("XUIError.react"),{xuiError:this.$MediaEffectMetadataTemplateCategories2()},c("React").createElement("div",null,"Select the template category",c("React").createElement(c("XUISingleSelector.react"),{className:"_3-9a",onChange:this.$MediaEffectMetadataTemplateCategories1,size:"medium",value:p||m},r)))};f.exports=n}),null);
__d("MediaEffectMetadataThumbnailUploader.react",["cx","FileInput.react","Image.react","InlineBlock.react","LeftRight.react","MediaEffectCard.react","React","XUIButton.react","XUINotice.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.onFileInputChange=function(event){var m=event.target.files[0],n=m.size/1024/1024;if(n<1){this.props.onFileInputChange(m);this.setState({sizeError:false})}else this.setState({sizeError:true})}.bind(this);this.state={sizeError:false}}k.prototype.render=function(){var l=this.props,m=l.thumbnailName,n=l.thumbnailURI;return c("React").createElement(c("MediaEffectCard.react"),{title:"Thumbnail"},c("React").createElement(c("LeftRight.react"),{direction:"left"},c("React").createElement(c("Image.react"),{className:"_3-91",height:144,src:n,width:144}),c("React").createElement("div",null,c("React").createElement("div",{className:"_2phz"},"Upload a 144 x 144 thumbnail that will be displayed in the camera tray, must be less than 1MB."),this.state.sizeError?c("React").createElement(c("XUINotice.react"),{use:"warn"},"Size is more than 1MB"):null,c("React").createElement("div",null,c("React").createElement("div",{className:"_2phz"},c("React").createElement(c("FileInput.react"),{accept:"image/*",name:"thumbnail_file",onChange:this.onFileInputChange},c("React").createElement(c("XUIButton.react"),{href:{url:"#"},label:"Upload PNG"}))),c("React").createElement(c("InlineBlock.react"),{alignv:"middle"},m)))))};f.exports=k}),null);
__d("MediaEffectMetadataTiming.react",["fbt","AdsDayPartingTable.react","DayPartingGrid","DayPartingUtils","React","XUIRadioList.react","MediaEffectCard.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("XUIRadioList.react").Item,l=c("React").PropTypes,m=60*60;i=babelHelpers.inherits(n,c("React").Component);j=i&&i.prototype;n.prototype.render=function(){return c("React").createElement(c("MediaEffectCard.react"),{title:h._("Timing")},c("React").createElement(c("XUIRadioList.react"),{onValueChange:this.$MediaEffectMetadataTiming1.bind(this),selectedValue:this.$MediaEffectMetadataTiming2()},c("React").createElement(k,{value:"no_constrain"},h._("All the time")),c("React").createElement(k,{value:"specified"},h._("During set days and hours"))),this.$MediaEffectMetadataTiming3())};n.prototype.$MediaEffectMetadataTiming1=function(o){if(o==="specified")this.props.onScheduleChange([]);else this.props.onScheduleChange(null)};n.prototype.$MediaEffectMetadataTiming2=function(){if(!this.props.timingSchedule)return"no_constrain";return"specified"};n.prototype.$MediaEffectMetadataTiming3=function(){if(!this.props.timingSchedule)return null;return c("React").createElement(c("AdsDayPartingTable.react"),{grid:this.$MediaEffectMetadataTiming4(),reducedWidth:true,onGridChange:this.$MediaEffectMetadataTiming5.bind(this)})};n.prototype.$MediaEffectMetadataTiming4=function(){__p&&__p();var o=new(c("DayPartingGrid"))();if(!this.props.timingSchedule||this.props.timingSchedule.length===0)return o;var p=0,q=0;for(var r=0;r<c("DayPartingUtils").DAYS_IN_WEEK;r++)for(var s=0;s<c("DayPartingUtils").HOURS_IN_DAY;s++){var t=this.props.timingSchedule[p];if(!t)return o;o.hours[r][s]=t.start_time<=q&&q<t.end_time;if(q>=t.end_time)p++;q+=m}return o};n.prototype.$MediaEffectMetadataTiming5=function(o){__p&&__p();var p=null,q=[],r=0;for(var s=0;s<c("DayPartingUtils").DAYS_IN_WEEK;s++)for(var t=0;t<c("DayPartingUtils").HOURS_IN_DAY;t++){if(p===null){if(o.hours[s][t])p=r}else if(!o.hours[s][t]){q[q.length]={start_time:p,end_time:r-1};p=null}r+=m}if(p)q[q.length]={start_time:p,end_time:r-1};this.props.onScheduleChange(q)};function n(){i.apply(this,arguments)}n.propTypes={timingSchedule:l.oneOfType([l.oneOf([null]),l.instanceOf(Array)]),onScheduleChange:l.func.isRequired};f.exports=n}),null);
__d("MediaEffectMetadataUserTypeahead.react",["fbt","CurrentUser","React","SearchableEntry","WebAsyncSearchSource","XUITokenizer.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.componentDidUpdate=function(){if(this.state.resetQueryString)this.setState({resetQueryString:false})};function l(m){j.constructor.call(this,m);this.searchSource=new(c("WebAsyncSearchSource"))({queryRequests:[{uri:"/ajax/typeahead/search.php",data:{filter:["user"],viewer:c("CurrentUser").getID()}}]});this.state={resetQueryString:false}}l.prototype.render=function(){var m=this.props.whitelistedUsers;return c("React").createElement(c("XUITokenizer.react"),{entries:m.map(function(n){return new(c("SearchableEntry"))({title:n.name,uniqueID:n.uniqueID})}),onAddEntryAttempt:this.$MediaEffectMetadataUserTypeahead1.bind(this),onRemoveEntryAttempt:this.$MediaEffectMetadataUserTypeahead2.bind(this),placeholder:h._("Enter a user's name that you want to whitelist"),queryString:this.state.resetQueryString?"":undefined,searchSource:this.searchSource})};l.prototype.$MediaEffectMetadataUserTypeahead1=function(m){this.setState({resetQueryString:true});this.props.onAddEntry({name:m.getTitle(),uniqueID:m.getUniqueID()})};l.prototype.$MediaEffectMetadataUserTypeahead2=function(m){this.setState({resetQueryString:true});this.props.onRemoveEntry({name:m.getTitle(),uniqueID:m.getUniqueID()})};l.propTypes={onAddEntry:k.func.isRequired,onRemoveEntry:k.func.isRequired,whitelistedUsers:k.array};l.defaultProps={whitelistedUsers:[]};f.exports=l}),null);
__d("MediaEffectProfile",["immutable"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("immutable").Record,k=c("immutable").OrderedSet,l=c("immutable").Set,m=j({effectIDs:k(),id:"",isAdminedPage:false,isBusinessPage:false,isFirstParty:false,isProductionFirstParty:false,name:"",product:null,showAnalytics:false,src:null,policies:l(),type:"",uri:null});h=babelHelpers.inherits(n,m);i=h&&h.prototype;n.fromObject=function(o){"use strict";if(o==null)return new n({});return new n(babelHelpers["extends"]({},o,{effectIDs:new k(o.effectIDs),policies:new l(o.policies)}))};function n(){"use strict";h.apply(this,arguments)}f.exports=n}),null);
__d("MediaEffectOwner",["MediaEffectProfile"],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c("MediaEffectProfile"));i=h&&h.prototype;function j(){"use strict";h.apply(this,arguments)}f.exports=j}),null);
__d("MediaEffectMetadataFBOnly.react",["cx","FXMediaEffectProduct","InspirationsCategoryNameFBOnly.react","MediaEffectCard.react","MediaEffectFlowType","MediaEffectMetadataActionCreators","MediaEffectMetadataAdsInterest.react","MediaEffectMetadataAttributeOwner.react","MediaEffectMetadataFBOnlyRanking.react","MediaEffectMetadataFeatureGroupsCheckList.react","MediaEffectMetadataGKsTypeahead.react","MediaEffectMetadataInstructions.react","MediaEffectMetadataLocale.react","MediaEffectMetadataPageLiked.react","MediaEffectMetadataProductVisibility.react","MediaEffectMetadataTemplateCategories.react","MediaEffectMetadataThumbnailUploader.react","MediaEffectMetadataTiming.react","MediaEffectMetadataUserTypeahead.react","MediaEffectMetadataViewStore","MediaEffectOwner","React","Text.react","WebAsyncSearchSource","XUICheckboxInput.react","XUIText.react","XUITextInput.react","XUITypeahead.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=new(c("WebAsyncSearchSource"))({queryRequests:[{uri:"/intern/qe2_async/gk_typeahead_for_entuniverse/",data:{qe_unit_id_type:4}}]});i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.catalogGKs,o=m.inspirationCategoryNames,p=m.effectHasText,q=m.eligibilityGKs,r=m.fbExperimentID,s=m.fbOnlyMediaRestriction,t=m.gatelogic,u=m.humanReadableDescription,v=m.igCameraFormat,w=m.instructions,x=m.isValidating,y=m.locales,z=m.offlineOnly,A=m.pageLiked,B=m.potentialOwnersForAttribution,C=m.selfBirthday,D=m.productVisibilityPolicy,E=m.rankingStrategy,F=m.rankWeight,G=m.selectedAttributedOwnerID,H=m.selectedInstagramAttribution,I=m.selectedInstructionID,J=m.selectedOwnerID,K=m.selectedTemplateCategoryID,L=m.templateCategories,M=m.thumbnailName,N=m.thumbnailURI,O=m.timingSchedule,P=m.whitelistCheckEligibility,Q=m.whitelistedUsers,R=m.adsTargetingSpec,S=c("MediaEffectMetadataViewStore").isFirstPartyProduct(J,c("FXMediaEffectProduct").INSTAGRAM);return c("React").createElement("div",{className:"_2ex3"},c("React").createElement("div",{className:"_3lr9"},c("React").createElement(c("Text.react"),{className:"_3lra"},"FB-Only"),c("React").createElement(c("XUIText.react"),null,"Options below are only to be used by Facebook employees. Do not use these options for effects owned by your personal accounts.")),c("React").createElement(c("MediaEffectMetadataThumbnailUploader.react"),{onFileInputChange:c("MediaEffectMetadataActionCreators").setThumbnail,thumbnailName:M,thumbnailURI:N}),c("React").createElement(c("InspirationsCategoryNameFBOnly.react"),{suggested_category_names:o}),c("React").createElement(c("MediaEffectCard.react"),{title:"Human Readable Description",tooltip:"If your effect contains text, please input the same exact text here. If your effect does not contain text, please input a description which is understandable to any user. Your description here will be translated and read out to user on the client with the user's locale."},c("React").createElement(c("XUITextInput.react"),{className:"_3_kx",height:"tall",name:"humanReadableDescription",onChange:this.$MediaEffectMetadataFBOnly1,placeholder:"Add an understandable description here",value:u},u)),c("React").createElement(c("MediaEffectCard.react"),{title:"Effect Properties"},this.props.flowType===c("MediaEffectFlowType").TEMPLATE||K?c("React").createElement("div",{className:"_3-8w"},c("React").createElement(c("MediaEffectMetadataTemplateCategories.react"),{isValidating:x,onTemplateCategorySelected:c("MediaEffectMetadataActionCreators").selectTemplateCategoryID,selectedTemplateCategoryID:K,templateCategories:L})):null,c("React").createElement("div",{className:"_3-8w"},c("React").createElement(c("XUICheckboxInput.react"),{checked:p,name:"effectHasText",onChange:this.$MediaEffectMetadataFBOnly2}),"Effect contains literal text"),c("React").createElement("div",{className:"_3-8w"},c("React").createElement(c("XUICheckboxInput.react"),{checked:s,name:"fbOnlyMediaRestriction",onChange:this.$MediaEffectMetadataFBOnly3}),"Limit created media to FB Only visibility")),c("React").createElement(c("MediaEffectMetadataProductVisibility.react"),{onProductVisibilityPolicyChange:c("MediaEffectMetadataActionCreators").changeProductVisibiilityPolicy,productVisibilityPolicy:D}),S?null:c("React").createElement(c("MediaEffectCard.react"),{title:"Eligibility Gate Keepers Project"},c("React").createElement(c("MediaEffectMetadataGKsTypeahead.react"),{GKs:q,onGKsChanged:c("MediaEffectMetadataActionCreators").changeEligibilityGKs,placeholder:"Enter a project name or leave it blank"})),S?null:c("React").createElement(c("MediaEffectCard.react"),{title:"Catalog Gate Keepers Project"},c("React").createElement(c("MediaEffectMetadataGKsTypeahead.react"),{GKs:n,onGKsChanged:c("MediaEffectMetadataActionCreators").changeCatalogGKs,placeholder:"Enter a project name or leave it blank"})),S?c("React").createElement(c("MediaEffectCard.react"),{title:"Instagram Gatelogic"},c("React").createElement("span",null,c("React").createElement("input",{name:"gatelogic",type:"hidden",value:t}),c("React").createElement(c("XUITypeahead.react"),{inputClassName:"_3_kx",onChange:this.$MediaEffectMetadataFBOnly4,onSelectAttempt:this.$MediaEffectMetadataFBOnly5,placeholder:"category.my_gatelogic",queryString:t,searchSource:k,tallInput:true,viewStyle:"textonly"}))):null,S?c("React").createElement(c("MediaEffectCard.react"),{title:"Instagram Attribution"},H?c("React").createElement(c("XUIText.react"),null,H.name):c("React").createElement(c("XUIText.react"),null,"This effect is not attributed to an Instagram account.")):null,S?c("React").createElement(c("MediaEffectCard.react"),{title:"Instagram Camera Format"},c("React").createElement(c("XUITextInput.react"),{className:"_3_kx",height:"tall",name:"igCameraFormat",onChange:this.$MediaEffectMetadataFBOnly6,placeholder:"boomerang",value:v},v)):null,c("React").createElement(c("MediaEffectCard.react"),{title:"Attributed Owner"},c("React").createElement(c("MediaEffectMetadataAttributeOwner.react"),{onAttributedOwnerChanged:c("MediaEffectMetadataActionCreators").changeAttributedOwner,potentialOwnersForAttribution:B,selectedAttributedOwner:G})),c("React").createElement(c("MediaEffectCard.react"),{title:"Whitelisted Users"},c("React").createElement(c("MediaEffectMetadataUserTypeahead.react"),{onAddEntry:c("MediaEffectMetadataActionCreators").addWhitelistedUser,onRemoveEntry:c("MediaEffectMetadataActionCreators").removeWhitelistedUser,whitelistedUsers:Q}),c("React").createElement("div",{className:"_3-8w"},c("React").createElement(c("XUICheckboxInput.react"),{checked:P,name:"whitelistCheckEligibility",onChange:function T(U){c("MediaEffectMetadataActionCreators").changeWhitelistCheckEligibility(U.target.checked)},ref:"whitelistCheckEligibility"}),"Check eligibility for whitelisted users.")),c("React").createElement(c("MediaEffectMetadataLocale.react"),{locales:y,onLocaleChanged:c("MediaEffectMetadataActionCreators").changeLocales}),c("React").createElement(c("MediaEffectMetadataTiming.react"),{timingSchedule:O,onScheduleChange:c("MediaEffectMetadataActionCreators").changeTimingSchedule}),c("React").createElement(c("MediaEffectMetadataAdsInterest.react"),{adsTargetingSpec:R}),c("React").createElement(c("MediaEffectMetadataFBOnlyRanking.react"),{onManualRankWeightChange:c("MediaEffectMetadataActionCreators").changeManualRankWeight,onRankingStrategyChange:c("MediaEffectMetadataActionCreators").changeRankingStrategy,rankingStrategy:E||"DEFAULT",rankWeight:F}),c("React").createElement(c("MediaEffectMetadataInstructions.react"),{instructions:w,onInstructionSelected:c("MediaEffectMetadataActionCreators").selectInstruction,selectedInstructionID:I}),c("React").createElement(c("MediaEffectMetadataPageLiked.react"),{onPageLikedChange:c("MediaEffectMetadataActionCreators").changePageLiked,pageLiked:A}),c("React").createElement(c("MediaEffectMetadataFeatureGroupsCheckList.react"),{offlineOnly:z,selfBirthday:C,onOfflineOnlyChange:c("MediaEffectMetadataActionCreators").checkOfflineOnly,onselfBirthdayChange:c("MediaEffectMetadataActionCreators").checkSelfBirthday}),c("React").createElement(c("MediaEffectCard.react"),{title:"FB Camera Experiment"},r?c("React").createElement("p",null,"This effect is part of experiment ",r,"."):c("React").createElement("p",null,"This effect is not part of an active experiment.")))};l.prototype.$MediaEffectMetadataFBOnly5=function(m){c("MediaEffectMetadataActionCreators").changeGatelogic(m.getTitle())};l.prototype.$MediaEffectMetadataFBOnly2=function(event){c("MediaEffectMetadataActionCreators").changeEffectHasText(event.target.checked)};l.prototype.$MediaEffectMetadataFBOnly3=function(event){c("MediaEffectMetadataActionCreators").checkFBOnlyMediaRestriction(event.target.checked)};l.prototype.$MediaEffectMetadataFBOnly1=function(event){c("MediaEffectMetadataActionCreators").changeHumanReadableDescription(event.target.value)};l.prototype.$MediaEffectMetadataFBOnly4=function(event){c("MediaEffectMetadataActionCreators").changeGatelogic(event.target.value)};l.prototype.$MediaEffectMetadataFBOnly6=function(event){c("MediaEffectMetadataActionCreators").changeIGCameraFormat(event.target.value)};function l(){i.apply(this,arguments)}f.exports=l}),null);
__d("MediaEffectMetadataLocation.react",["cx","fbt","AdsTargetingAggregatedMap.react","AdsTargetingLocationMapRecord","CameraEffectsPOITypeaheadSearchGK","GeoCoordinates","GraphAPI","LeafletView","LocationConstants","Log","MediaEffectCard.react","MediaEffectEditorFunnelLogger","MediaEffectMetadataValidationUtils","MediaEffectPlaceDescriptionRecord","MediaEffectProfilePolicy","PlaceSearchConstants","PlaceSearchSuppressionVersion","React","ReactComposerLocationSearchSource","SearchableEntry","Tooltip.react","XUIGrayText.react","XUIRadioList.react","XUIText.react","XUITypeahead.react","XUITypeaheadView.react","mediaEffectGKCheck"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("XUIRadioList.react").Item,m=c("React").PropTypes,n={everyone:"everyone",targeted:"targeted"},o=200;j=babelHelpers.inherits(p,c("React").PureComponent);k=j&&j.prototype;function p(q){__p&&__p();k.constructor.call(this,q);this.$MediaEffectMetadataLocation3=function(r){__p&&__p();if(r===n.everyone){this.props.onLocationPageSelected(null);this.setState(this.$MediaEffectMetadataLocation1())}if(r===n.targeted){var s=this.props.selectedOwner;if(s&&this.$MediaEffectMetadataLocation4()){this.props.onLocationPageSelected(s.id);this.updateStateByLocationPageID(s.id)}}this.props.onLocationTargetSelected(r)}.bind(this);this.onSelectTypeahead=function(r,event){var s=r.getUniqueID();c("MediaEffectEditorFunnelLogger").logChangeLocation();this.props.onLocationPageSelected(s);this.updateStateByLocationPageID(s)}.bind(this);this.$MediaEffectMetadataLocation10=function(r){this.setState({view:r})}.bind(this);this.state=Object.assign({},this.$MediaEffectMetadataLocation1())}p.prototype.componentDidMount=function(){if(this.props.locationPageID)this.updateStateByLocationPageID(this.props.locationPageID)};p.prototype.componentWillReceiveProps=function(q){if(q.selectedOwner.id!==this.props.selectedOwner.id){this.setState(this.$MediaEffectMetadataLocation1());this.props.onLocationPageSelected(null)}};p.prototype.$MediaEffectMetadataLocation2=function(){var q={event_name:c("PlaceSearchConstants").SOURCE_CAMERA_MEDIA_EFFECT_UPLOAD,event_specific_data:{context:"places_typeahead:"+c("PlaceSearchConstants").SOURCE_CAMERA_MEDIA_EFFECT_UPLOAD,source:c("PlaceSearchConstants").SOURCE_CAMERA_MEDIA_EFFECT_UPLOAD,ref:"MediaEffectMetadataLocation.react"}};return c("ReactComposerLocationSearchSource")({},{hide_geo:false,allow_poi:c("CameraEffectsPOITypeaheadSearchGK").gkResult,allow_country:this.props.selectedOwner.isFirstParty||c("mediaEffectGKCheck")("media_effect_allow_country_location_targeting"),suppression_version:c("PlaceSearchSuppressionVersion").CAMERA_LOCATION_FRAMES},q)};p.prototype.$MediaEffectMetadataLocation1=function(){return{searchSource:this.$MediaEffectMetadataLocation2(),selectedPlace:null,selectedPlaceLocation:{},view:c("LeafletView").DEFAULT,query:""}};p.prototype.$MediaEffectMetadataLocation5=function(){var q=c("React").createElement(c("XUIText.react"),{display:"block",key:"title"},this.props.locationTargetTypeTargetedLabel),r=this.$MediaEffectMetadataLocation6()?c("React").createElement(c("Tooltip.react"),{tooltip:i._("This option is unavailable")},q):q;return c("React").createElement(c("XUIRadioList.react"),{disabled:this.props.disabled,onValueChange:this.$MediaEffectMetadataLocation3,selectedValue:this.props.locationTarget},c("React").createElement(l,{disabled:this.props.disabled,value:n.everyone},c("React").createElement(c("XUIText.react"),{display:"block"},this.props.locationTargetTypeEveryoneLabel)),c("React").createElement(l,{disabled:this.props.disabled||this.$MediaEffectMetadataLocation6(),value:n.targeted},r))};p.prototype.$MediaEffectMetadataLocation7=function(){var q=this.props,r=q.isValidating,s=q.locationPageID,t=c("MediaEffectMetadataValidationUtils").validateLocationPageID(s);if(r&&this.props.locationTarget===n.targeted&&!t)return i._("Please select a location");return null};p.prototype.$MediaEffectMetadataLocation8=function(){if(this.props.locationTarget===n.everyone)return null;if(this.$MediaEffectMetadataLocation4())return null;return c("React").createElement(c("XUITypeahead.react"),{className:"_3_kx",clearable:true,disabled:this.props.disabled,highlightOnSelect:true,initialEntry:null,onChange:function(event){this.setState({query:event.target.value})}.bind(this),onClear:function(){this.setState({query:"",selectedPlace:null})}.bind(this),onSelectAttempt:this.onSelectTypeahead,placeholder:i._("Choose a location"),presenter:{ViewRenderer:c("XUITypeaheadView.react"),useLayer:true},queryString:this.state.query,searchSource:this.state.searchSource,selectedEntry:this.state.selectedPlace,showEntriesOnFocus:true,tallInput:true,xuiError:this.$MediaEffectMetadataLocation7()})};p.prototype.$MediaEffectMetadataLocation9=function(){var q=this.state.selectedPlace,r=this.state.selectedPlaceLocation,s=this.props.locationTarget;if(q&&r&&s===n.targeted){var t,u={name:q.getTitle(),key:q.getUniqueID(),type:q.getType()==="city"?c("LocationConstants").CITY:c("LocationConstants").CUSTOM_LOCATION,latitude:r.latitude,longitude:r.longitude},v=c("AdsTargetingLocationMapRecord").fromGeoLocations((t={},t[c("LocationConstants").CUSTOM_LOCATIONS]=[u],t));if(v&&v.size>0)return c("React").createElement(c("AdsTargetingAggregatedMap.react"),{disableCollapseButton:true,height:o,locationRecords:v,onViewChange:this.$MediaEffectMetadataLocation10,view:this.state.view})}return null};p.prototype.updateStateByLocationPageID=function(q){c("GraphAPI")("2.5").object("page",q).get({fields:"name, location, place_type"}).done(function(r){var s=new(c("GeoCoordinates"))(r.location.latitude,r.location.longitude),t=new(c("LeafletView"))({center:s,zoom:5});this.setState({selectedPlace:new(c("SearchableEntry"))({uniqueID:r.id,title:r.name,type:r.place_type}),selectedPlaceLocation:r.location,query:r.name,view:t});this.props.onLocationDescriptionLoaded(new(c("MediaEffectPlaceDescriptionRecord"))({name:r.name,key:r.id,type:r.place_type==="city"?c("LocationConstants").CITY:c("LocationConstants").CUSTOM_LOCATION,latitude:r.location.latitude,longitude:r.location.longitude}))}.bind(this),function(){this.props.onLocationPageSelected(null);c("Log").info("Failed to fetch Page %s",q);this.setState(this.$MediaEffectMetadataLocation1())}.bind(this))};p.prototype.$MediaEffectMetadataLocation4=function(){var q=this.props.selectedOwner;if(!q)return false;return q.policies.includes(c("MediaEffectProfilePolicy").SELF_LOCATION_ONLY)};p.prototype.$MediaEffectMetadataLocation6=function(){var q=this.props.selectedOwner;if(!q)return false;return q.policies.includes(c("MediaEffectProfilePolicy").LOCATION_PROHIBITED)};p.prototype.render=function(){var q=i._("Choose whether your effect can be discovered anywhere or only at a specific location.");return c("React").createElement(c("MediaEffectCard.react"),{title:i._("Location"),tooltip:q},this.$MediaEffectMetadataLocation5(),this.$MediaEffectMetadataLocation8(),this.$MediaEffectMetadataLocation9())};p.propTypes={locationPageID:m.string,selectedOwner:m.object,onLocationPageSelected:m.func.isRequired};p.defaultProps={locationTargetTypeEveryoneLabel:i._("People in any location"),locationTargetTypeTargetedLabel:i._("People in a set location")};f.exports=p}),null);
__d("MediaEffectMetadataName.react",["cx","fbt","MediaEffectCard.react","MediaEffectEditorFunnelLogger","MediaEffectMetadataValidationUtils","MediaEffectWebdriverIDs","React","XUITextInput.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$MediaEffectMetadataName2=function(event){c("MediaEffectEditorFunnelLogger").logChangeName();this.props.onNameChange(event.target.value)}.bind(this);this.props.handleServerValidationResponse(m.nameData)}l.prototype.componentWillReceiveProps=function(m){this.props.handleServerValidationResponse(m.nameData)};l.prototype.$MediaEffectMetadataName1=function(){if(this.props.isValidating){var m=c("MediaEffectMetadataValidationUtils").validateName(this.props.nameData);if(!m)return i._("You must provide a name.")}if(this.props.isError)return i._("Invalid name");return null};l.prototype.render=function(){return c("React").createElement(c("MediaEffectCard.react"),{className:"_2x0s",title:i._("Name"),tooltip:i._("Choose a name for your effect.")},c("React").createElement(c("XUITextInput.react"),{className:"_3_kx","data-testid":c("MediaEffectWebdriverIDs").LWE_EFFECT_FRAME_NAME_INPUT,disabled:this.props.disabled,height:"tall",onChange:this.$MediaEffectMetadataName2,placeholder:this.props.placeholder,value:this.props.nameData,xuiError:this.$MediaEffectMetadataName1()},this.props.nameData))};f.exports=l}),null);
__d("MediaEffectMetadataNameContainer.react",["cx","AsyncRequest","FluxContainer","MediaEffectFrameCreateDialogDataStore","MediaEffectFrameCreationStepsConfig","MediaEffectMetadataActionCreators","MediaEffectMetadataName.react","MediaEffectMetadataStore","React","XMediaEffectValidationController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("MediaEffectFrameCreationStepsConfig").CreationSteps;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MediaEffectMetadataNameContainer1=function(r){if(r){var s=c("XMediaEffectValidationController").getURIBuilder().getURI();new(c("AsyncRequest"))(s).setData({name:r}).setMethod("GET").setReadOnly(true).setAllowCrossPageTransition(true).setHandler(this.$MediaEffectMetadataNameContainer2).send()}}.bind(this),n}l.getStores=function(){return[c("MediaEffectFrameCreateDialogDataStore"),c("MediaEffectMetadataStore")]};l.calculateState=function(m,n){var o=c("MediaEffectFrameCreationStepsConfig").getStep(n.flowType,c("MediaEffectFrameCreateDialogDataStore").getState().get("validatingStep")),p=c("MediaEffectMetadataStore").getState().hasFrameNameError;return{isError:p,isValidating:o===k.TARGETING,nameData:c("MediaEffectMetadataStore").getState().get("name")}};l.prototype.$MediaEffectMetadataNameContainer2=function(m){var n=!m.payload.valid;c("MediaEffectMetadataActionCreators").updateNameValidation(n)};l.prototype.render=function(){return c("React").createElement(c("MediaEffectMetadataName.react"),babelHelpers["extends"]({},this.props,{className:"_1wl8",handleServerValidationResponse:this.$MediaEffectMetadataNameContainer1,isError:this.state.isError,isValidating:this.state.isValidating,nameData:this.state.nameData,onNameChange:c("MediaEffectMetadataActionCreators").changeName}))};f.exports=c("FluxContainer").create(l,{withProps:true})}),null);
__d("OzConfig",["immutable","Reflux"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("immutable").Map,i=c("Reflux").createAction({sync:true}),j=c("Reflux").createAction({sync:true}),k=c("Reflux").createStore({init:function n(){this.data=h();this.listenTo(i,this._onSetConfig);this.listenTo(j,this._onUpdateConfig)},getInitialState:function n(){return this.data},_onSetConfig:function n(o){this.data=o;this.trigger(this.data)},_onUpdateConfig:function n(o){this.data=this.data.mergeDeep(o);this.trigger(this.data)}});function l(n){return k.data.get(n)}function m(n){return k.data.getIn(n)}f.exports={ConfigStore:k,getInStaticConfig:m,getStaticConfig:l,setConfig:i,updateConfig:j}}),null);
__d("OzActions",["Reflux"],(function a(b,c,d,e,f,g){__p&&__p();var h={};h.activateThread=c("Reflux").createAction();h.scrollThreadToTimestamp=c("Reflux").createAction();h.doneScrollingToTimestamp=c("Reflux").createAction();h.updateThreads=c("Reflux").createAction();h.maybeUpdateThreads=c("Reflux").createAction();h.clearReassignState=c("Reflux").createAction();h.deleteTask=c("Reflux").createAction();h.updateMerchants=c("Reflux").createAction();h.deleteMerchants=c("Reflux").createAction();h.updateWitIntents=c("Reflux").createAction();h.updateReps=c("Reflux").createAction();h.replaceReps=c("Reflux").createAction();h.replaceHumans=c("Reflux").createAction();h.updateRequirements=c("Reflux").createAction();h.showDialog=c("Reflux").createAction();h.hideDialog=c("Reflux").createAction();h.updateComposer=c("Reflux").createAction();h.addBubble=c("Reflux").createAction();h.addAutopilot=c("Reflux").createAction();h.isActive=c("Reflux").createAction();h.isInactive=c("Reflux").createAction();h.sendPulse=c("Reflux").createAction();h.updateQueueFilters=c("Reflux").createAction();h.intentCreator=c("Reflux").createActions(["toggle","select","clear"]);h.emailComposer=c("Reflux").createActions(["delete","add"]);h.emailComposer.update=c("Reflux").createAction({sync:true});h.inviteComposer=c("Reflux").createActions(["delete","add","create"]);h.inviteComposer.update=c("Reflux").createAction({sync:true});h.twilio=c("Reflux").createActions(["connect","endCall","hangUp","incoming","incomingAccept","incomingReject","mute","ready","setup","startCall","unmute","updateIncomingInfo","useIntent","updateRating","dialAgain"]);h.twilio.changeTo=c("Reflux").createAction({sync:true});h.twilio.sendDigits=c("Reflux").createAction({sync:true});h.sendMessageStart=c("Reflux").createAction();h.sendMessageFinish=c("Reflux").createAction();h.addHandledEvents=c("Reflux").createAction();h.updateServerOffset=c("Reflux").createAction();h.updateLoadingState=c("Reflux").createAction();h.updateCalendarEvents=c("Reflux").createAction();h.skywalkerMessage=c("Reflux").createAction();h.skywalkerStalled=c("Reflux").createAction();h.selectAIPick=c("Reflux").createAction();f.exports=h}),null);
__d("OzImmutablePureRenderMixin",["immutable"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("immutable").is;function i(l,m){__p&&__p();if(h(l,m))return true;if(typeof l!=="object"||l===null||typeof m!=="object"||m===null)return false;var n=Object.keys(l),o=Object.keys(m);if(n.length!==o.length)return false;for(var p=0;p<n.length;p++)if(!hasOwnProperty.call(m,n[p])||!h(l[n[p]],m[n[p]])){window._debugLogs;return false}return true}function j(l,m,n){return!i(l.props,m)||!i(l.state,n)}var k={shouldComponentUpdate:function l(m,n){return j(this,m,n)}};f.exports=k}),null);
__d("OzNotify",["cx","immutable","OzImmutablePureRenderMixin","React","ReactCSSTransitionGroup","Reflux","ShimButton.react","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("immutable").OrderedMap,j=c("immutable").Map,k={addNotif:c("Reflux").createAction({sync:true}),removeNotif:c("Reflux").createAction({sync:true})},l=c("Reflux").createStore({init:function s(){this.data=i();this.listenTo(k.addNotif,this._onAddNotif);this.listenTo(k.removeNotif,this._onRemoveNotif)},getInitialState:function s(){return this.data},_onAddNotif:function s(t){this.data=this.data.set(t.get("id"),t);this.trigger(this.data)},_onRemoveNotif:function s(p){this.data=this.data["delete"](p);this.trigger(this.data)}}),m=j({info:"_4nqo",warn:"_4nqp",error:"_4nqq"}),n=c("React").createClass({displayName:"OzNotify",mixins:[c("Reflux").connect(l,"notifs"),c("OzImmutablePureRenderMixin")],render:function s(){return c("React").createElement(c("ReactCSSTransitionGroup"),{component:"div",transitionName:"oz-fade-in-out",className:"_4nqr",transitionEnterTimeout:500,transitionLeaveTimeout:500},this.state.notifs.reverse().map(function(t,p){return c("React").createElement("div",{key:p,className:c("joinClasses")("_4nqs",m.get(t.get("level")))},t.get("msg"),c("React").createElement(c("ShimButton.react"),{className:"_ok9",inline:true,onClick:function u(){return k.removeNotif(p)}},"\xd7"))}).valueSeq())}}),o=7e3,p=0;function q(s){return function(t){p+=1;k.addNotif(j({id:p,level:s,msg:t}));(function(u){window.setTimeout(function(v){return k.removeNotif(u)},o)})(p)}}var r={Component:n,info:q("info"),warn:q("warn"),error:q("error")};f.exports=r}),null);
__d("OzAPI",["invariant","OzHelpers","OzNotify","Arbiter","ChannelConstants","ChannelManager","immutable","OzActions","OzAJAX","OzConfig","OzStores","promiseFinally","RTISubscriptionManager"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("immutable").List,j=c("immutable").Map,k=c("OzAJAX").ajax,l=c("OzAJAX").beacon,m=c("OzAJAX").buildURI,n=c("OzStores").ActiveThreadStore,o=c("OzStores").ThreadStore;c("ChannelManager").startChannelManager();function p(A){if(A.attachment&&!A.attachments)A.attachments=[A.attachment];var B=c("immutable").fromJS(A);return B}function q(A){return i(A.map(function(B){B=p(B);return[c("OzHelpers").msgID(B),B]})).fromEntrySeq().toMap()}function r(A){if(!A.messages)A.messages=(A["last-events"]||[]).map(function(C){C.sender=C.from;return C});A.messages=q(A.messages);var B=c("immutable").fromJS(A);return B}function s(A){return i(A.map(r))}function t(A){var B=s([A]);c("OzActions").updateThreads(B);c("OzActions").addHandledEvents(B.first().get("handled-events",i()));B.count()===1||h(0);return B.first()}function u(A){Number.isSafeInteger(A.offset)||h(0);Number.isSafeInteger(A.limit)||h(0);return k({type:"GET",url:m("threads",c("OzConfig").getStaticConfig("PAGE_ID")),params:A}).then(function(B){var C=B.threads,D=s(C);c("OzActions").updateThreads(D);return D})}function v(A){__p&&__p();var B=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],C=arguments.length<=2||arguments[2]===undefined?null:arguments[2];typeof A==="string"||h(0);typeof B==="object"||h(0);var D,E=false;if(B instanceof FormData)D=B;else{D=JSON.stringify(B);E=true}var F=function F(){var H=n.data.get("activeIntent"),I=n.data.get("threadID"),J=H&&I&&o.data.getIn([I,"intents"],i()).findLast(function(K){return K.get("id")===H},null,j()).get("state");return J==="open"&&H},G={type:"PUT",url:m("sync"),params:{t:A,"intent-id":C||F(),page:c("OzConfig").getStaticConfig("PAGE_ID")},body:D};if(E){G.headers=G.headers||{};G.headers["content-type"]="application/json"}c("OzHelpers").info("[sync] "+A,B);return k(G)}function w(A){return function(B){return v(A,{tid:B}).then(function(C){var D=r(C);c("OzActions").updateThreads(i([D]));return D})}}function x(A){var B=A["user-id"],C=A["owner-id"],D=A["last-owner-id"],E=c("OzConfig").getStaticConfig("uid");return o.data.get(B)||C===E||D===E}var y={metrics:j({}),bumpMetric:function A(B){y.metrics=y.metrics.updateIn(B,function(C){return(C||0)+1})},setMetric:function A(B,C){y.metrics=y.metrics.setIn(B,C)},_witIntentCSV:function A(){y.witIntents().done(function(B){var C="data:text/csv;charset=utf-8,";B.forEach(function(D){return C+='"'+D.get("name")+'","'+D.get("id")+'","'+D.get("doc")+'"\n'});window.open(window.encodeURI(C))})},grab:w("grab"),release:w("release"),ready:w("ready"),notready:w("notready"),ack:w("ack"),lockThread:w("lock-thread"),markRead:w("mark-read"),unlockThread:function A(B,C){return v("unlock-thread",{tid:B,"locked-at":C}).then(t)},assignTo:function A(B,C){return v("assign-to",{tid:B,id:C})},escalate:function A(B){return y.createTag(B,"escalated")},escalateTo:function A(B,C){return y.escalate(B).then(function(){return y.assignTo(B,C)})},typing:function A(B){return v("rep-typing",{tid:B})},notTyping:function A(B){return v("rep-not-typing",{tid:B})},createReminder:function A(B,C){return v("create-reminder",babelHelpers["extends"]({tid:B},C.toJS()))},createTask:function A(B,C){return v("create-task",{tid:B,task:C.toJS()})},completeTask:function A(B,C){return v("complete-task",{tid:B,task:C.toJS()}).then(t)},editTask:function A(B,C){return v("edit-task",{tid:B,task:C.toJS()}).then(t)},cancelTask:function A(B,C){var D=arguments.length<=2||arguments[2]===undefined?false:arguments[2];c("OzActions").deleteTask(B,C.get("id"));return v("cancel-task",{tid:B,task:C.toJS(),"cancel-future":D}).then(t)},openTask:function A(B,C){return v("open-task",{tid:B,task:C.toJS()}).then(t)},closeReminder:function A(B,C,D){return v("close-reminder",{tid:B,id:C,all:D}).then(t)},editReminder:function A(B,C){return v("edit-reminder",{tid:B,reminder:C.toJS()}).then(t)},snoozeReminder:function A(B,C){return v("snooze-reminder",{tid:B,id:C}).then(t)},deleteIntentRequirement:function A(B,C,D){return v("delete-intent-requirement",{tid:B,"intent-id":C,"requirement-id":D},C).then(t)},deleteThreadRequirement:function A(B,C){return v("delete-thread-requirement",{tid:B,"requirement-id":C}).then(t)},createIntentRequirement:function A(B,C,D){return v("create-intent-requirement",{tid:B,"intent-id":C,"requirement-name":D},C).then(t)},createThreadRequirement:function A(B,C){return v("create-thread-requirement",{tid:B,"requirement-name":C}).then(t)},createIntent:function A(B,C){return v("create-intent",babelHelpers["extends"]({tid:B},C.toJS())).then(t)},openIntent:function A(B,C){return v("open-intent",{tid:B,id:C},C).then(t)},triggerAIForIntent:function A(B,C){return v("trigger-ai-for-intent",{tid:B,id:C},C)},closeIntent:function A(B,C,D,E,F){var G={tid:B,id:C,"close-state":D,feedback:E,"send-survey":F};return v("close-intent",G,C).then(t)},blockIntent:function A(B,C){return v("block-intent",{tid:B,id:C},C).then(t)},unblockIntent:function A(B,C){return v("unblock-intent",{tid:B,id:C},C).then(t)},addPhoneNumber:function A(B,C){return v("add-phone-number",{tid:B,"intent-id":C},C)},editIntent:function A(B,C){return v("edit-intent",babelHelpers["extends"]({tid:B},C.toJS()),C.get("id")).then(t)},createTag:function A(B,C){return v("add-thread-tag",{tid:B,tag:C}).then(t)},deleteTag:function A(B,C){return v("remove-thread-tag",{tid:B,tag:C}).then(t)},view:w("create-subscription"),unview:function A(B){return v("delete-subscription",{tid:B})},updateMessage:function A(B,C){return v("update-message",{tid:B,message:C.toJS()}).then(t)},everstoreUpload:function A(B){var C=new FormData();B.forEach(function(D,E){return C.append(E,D)});return v("everstore-upload",C)},upload:function A(B){var C=new FormData();B.forEach(function(D,E){return C.append(E,D)});return v("upload",C).then(function(B){return c("immutable").fromJS(B)})},sendMessage:function A(B){var C=v("send",B).then(function(D){return t({"user-id":B.tid,"last-events":D})});c("promiseFinally")(C,function(D){return c("OzActions").sendMessageFinish(B.tid)});window.setTimeout(function(){return c("OzActions").sendMessageStart(B.tid)},200);return C},scheduleMessage:function A(B){return v("schedule-send",B)},suggest:function A(B){return v("suggest",B).then(t)},scheduleSuggest:function A(B){return v("schedule-suggest",B)},deleteScheduled:function A(B,C){return v("delete-scheduled",{tid:B,id:C}).then(t)},saveNote:function A(B,C){var D={tid:B,infos:{notes:C}};return v("update-infos",D).then(t)},saveMeta:function A(B,C){var D={tid:B,infos:{"metadata-json":C.toJS()}};return v("update-infos",D).then(t)},saveMuted:function A(B,C){var D={tid:B,infos:{muted:C}};return v("update-infos",D).then(t)},createMerchant:function A(B){return v("create-merchant",B.toJS()).then(function(C){var D=i([j(C)]);c("OzActions").updateMerchants(D);return D})},editMerchant:function A(B){return v("edit-merchant",B.toJS()).then(function(C){var D=i([j(C)]);c("OzActions").updateMerchants(D);return D})},deleteMerchant:function A(B){return v("delete-merchant",B.toJS()).then(function(C){if(C&&C.id){var D=i([C.id]);c("OzActions").deleteMerchants(D);return D}else c("OzHelpers").warn("[api] unexpected delete-merchant response",C)})},sendEmail:function A(B,C){var D=n.data.get("threadID");return v("send-email",babelHelpers["extends"]({tid:D},B.toJS()),C)},sendInvite:function A(B,C){var D=n.data.get("threadID");return v("send-calendar",babelHelpers["extends"]({tid:D},B.toJS()),C)},fetchCalendar:function A(B){return k({type:"GET",url:m("threads",c("OzConfig").getStaticConfig("PAGE_ID"),B,"calendar")}).then(function(C){c("OzActions").updateCalendarEvents({tid:B,calendarEvents:C});return C})},bookOpenTable:function A(B,C,D,E,F){return v("book-reservation",{tid:B,rid:D,ts:E,covers:F},C)},everstoreURI:function A(B){return v("everstore-uri",{handle:B})},witIntents:function A(){return k({type:"GET",url:m("wit-intents",c("OzConfig").getStaticConfig("PAGE_ID"))}).then(function(B){var C=c("immutable").fromJS(B);c("OzActions").updateWitIntents(C);return C})},merchants:function A(){return k({type:"GET",url:m("merchants")}).then(function(B){c("OzActions").updateMerchants(i(B).map(function(C){return j(C)}))})},repsSync:function A(){return k({type:"GET",url:m("reps-sync")})},requirements:function A(){return k({type:"GET",url:m("requirements")}).then(function(B){c("OzActions").updateRequirements(c("immutable").fromJS(B))})},AIModules:function A(){return k({type:"GET",url:m("ai-modules")}).then(function(B){return i(B)})},authorFeedback:function A(B){return k({type:"GET",url:m("author-feedback"),params:{author_id:B}}).then(function(C){return j(C.map(function(D){D=c("immutable").fromJS(D);return[c("OzHelpers").msgID(D),D]}))})},myThreads:function A(){var B=c("OzConfig").getStaticConfig("PAGE_ID");return k({type:"GET",params:{page:B},url:m("mythreads")}).then(function(C){var D=C.mythreads;c("OzActions").updateThreads(s(D))})},allThreads:function A(B,C,D,E){__p&&__p();var F={all:true,first_tags:B.toJS(),last_tags:C.toJS(),offset:D,limit:E};if(B.has("ready")){B=B["delete"]("ready");F.ready=true}else if(C.has("ready")){C=C["delete"]("ready");F.ready=false}return u(F)},thread:function A(B){return k({type:"GET",url:m("threads",c("OzConfig").getStaticConfig("PAGE_ID"),B)}).then(t)},handledEvents:function A(B){return k({type:"GET",params:{"intent-id":B},url:m("handled-events")}).then(function(C){c("OzActions").addHandledEvents(c("immutable").fromJS(C["handled-events"]))})},tasksForIntent:function A(B,C){var D=c("OzConfig").getStaticConfig("PAGE_ID");return k({type:"GET",params:{page:D},url:m("tasks",B)}).then(function(E){t({"user-id":C,tasks:E})})},history:function A(B,C,D){return k({type:"GET",params:{timestamp:C,limit:D},url:m("threads",c("OzConfig").getStaticConfig("PAGE_ID"),B,"history")}).then(function(E){var F=t({"user-id":B,messages:E});return F.get("messages")})},topIntents:function A(){return k({type:"GET",url:m("top-intents")}).then(function(B){return c("immutable").fromJS(B)})},intentsDashboard:function A(B){return k({type:"GET",params:B,url:m("dashboard","intent",c("OzConfig").getStaticConfig("PAGE_ID"))}).then(function(C){return c("immutable").fromJS(C)})},aiDashboard:function A(B){return k({type:"GET",params:B,url:m("dashboard","ai",c("OzConfig").getStaticConfig("PAGE_ID"))}).then(function(C){return c("immutable").fromJS(C)})},statsDashboard:function A(B){return k({type:"GET",params:B,url:m("dashboard","trainer",B["trainer-id"])}).then(function(C){return c("immutable").fromJS(C)})},teamStatsDashboard:function A(B){return k({type:"GET",params:B,url:m("dashboard","trainer-team-stats")}).then(function(C){return c("immutable").fromJS(C)})},humans:function A(){return k({type:"GET",url:m("humans")}).then(function(B){return c("OzActions").replaceHumans(c("immutable").fromJS(B))})},search:function A(B){return k({params:B,type:"GET",url:m("search")}).then(function(C){return c("immutable").fromJS(C).flatten(true)})},requestAutopilot:function A(B){window.postMessage(B,"*")},notifyExtension:function A(B){c("OzHelpers").debug("[oz-ext] notifying toto",B);window.postMessage(babelHelpers["extends"]({type:"notification"},{data:B}),"*")},recordActivity:function A(B,C){return v("activity",babelHelpers["extends"]({tid:B},{activity:C}))},sendPulse:function A(B,C){return k({type:"POST",url:m("pulse"),headers:{"content-type":"application/json"},params:{page:c("OzConfig").getStaticConfig("PAGE_ID"),duration:B},body:JSON.stringify(C)})},sendDisconnectPulse:function A(B,C){return l({url:m("pulse"),params:{page:c("OzConfig").getStaticConfig("PAGE_ID"),duration:B},body:JSON.stringify(C)})},threadFocus:function A(B,C){return v("thread-focus",{tid:B,intentID:C},C)},away:function A(B){return v("away",{away:B})},coachMode:function A(B){return v("coach-mode",{"coach-mode":B})},timestamp:function A(){var B=Date.now();return k({type:"POST",url:m("timestamp")}).then(function(C){var A=C.timestamp,D=Date.now();if(D-B>1e3)c("OzHelpers").warn("[oz-api] timestamp took over 1 second, not updating offset");else{var E=D-(A+(D-B)/2);c("OzActions").updateServerOffset({offsetMs:E})}})},init:function A(){return k({type:"GET",url:m("init")}).then(function(B){B["twilio-token"]&&c("OzActions").twilio.setup(B["twilio-token"]);c("OzConfig").updateConfig(c("immutable").fromJS(B))})},realTime:function A(B,C){__p&&__p();var D,E=6e4,F=function F(){var L=Date.now();clearInterval(D);D=setInterval(function(M){var N=Math.round((Date.now()-L)/1e3);c("OzActions").skywalkerStalled();c("OzHelpers").warn("[rti] no payload in "+N+"seconds")},E)},G={repsVersion:-1},H=function H(L,M){__p&&__p();var N=M.payload,B=M.topic;L==="sky"||L==="msg"||h(0);F();var O=L==="sky"?L+" "+B+" ->":L,P=N.type,Q=P||"";c("OzHelpers").debug("[rti] "+O+" "+Q,N);if(!N.data){c("OzHelpers").error("[sky] got sky event without data",N,B);return}var R=N.data["page-id"];if(R&&R!==c("OzConfig").getStaticConfig("PAGE_ID")){c("OzHelpers").debug("[sky] junk event on "+B,N);return}var S;y.bumpMetric(["realtime",P]);c("OzActions").skywalkerMessage({payload:N,timestamp:c("OzHelpers").serverNow()});switch(P){case"thread":S=N.data;t(S);break;case"thread-metrics":S=N.data;if(o.data.get(S["user-id"])){y.bumpMetric(["realtime","thread-metrics-update-thread"]);t(S)}break;case"maybe-thread":S=N.data;c("OzActions").maybeUpdateThreads(s([S]));break;case"delivered":case"seen":S=N.data;t({"user-id":S["user-id"],"last-seen":S["last-seen"]});break;case"presence":S=N.data;t({"user-id":S["user-id"],"last-presence":S["last-presence"]});break;case"carebear":(function(){var Z=N.data,P=Z.type,W=Z.tid,$={"user-id":W};$["ui-"+P]=true;t($)})();break;case"inactive":c("OzActions").isInactive();break;case"updated-merchant":c("OzActions").updateMerchants(i([j(N.data)]));break;case"deleted-merchant":c("OzActions").deleteMerchants(i([N.data.id]));break;case"phone-call":c("OzActions").twilio.updateIncomingInfo(c("immutable").fromJS(N.data));break;case"humans":c("OzActions").replaceHumans(c("immutable").fromJS(N.data));break;case"reps-sync":G=babelHelpers["extends"]({},G,{repsVersion:N.version});c("OzActions").replaceReps(c("immutable").fromJS(N.data));break;case"reps-diff":if(G.repsVersion!==N.version-1){c("OzHelpers").warn("[api] reps version out of sync",{"our-version":G.repsVersion,"next-version":N.version});G=babelHelpers["extends"]({},G,{repsVersion:-1});y.repsSync()}else{G.repsVersion=N.version;c("OzActions").updateReps(c("immutable").fromJS(N.data))}break;case"handled-events":c("OzActions").addHandledEvents(c("immutable").fromJS(N.data));break;case"config":c("OzConfig").updateConfig(c("immutable").fromJS(N.data));break;case"notify":var T=N.data,U=T.level,V=T.message;c("OzNotify")[U](V);break;case"updated-thread":var W=N.data["user-id"];if(x(N.data)){y.bumpMetric(["realtime","updated-thread-fetch-thread"]);c("OzHelpers").info("[api] fetching thread after update",W);y.thread(W)}break;case"ping":var X=N.data.timestamp,Y=c("OzHelpers").serverNow()-X;y.setMetric(["realtime","pingLatency"],Y);break;default:c("OzHelpers").debug("[sky] unk type",P,N)}},I=function I(){for(var L=arguments.length,M=Array(L),N=0;N<L;N++)M[N]=arguments[N];try{H.apply(undefined,M)}catch(O){try{c("OzHelpers").error.apply(c("OzHelpers"),["[sky] error handling message"].concat(M))}catch(P){}}},J=c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("msg"),function(L,M){I("msg",M.obj)}),K=z(function(){c("Arbiter").unsubscribe(J);c("RTISubscriptionManager").unsubscribeAll()});c("RTISubscriptionManager").subscribe(B,I.bind(this,"sky"),null,z(function(L){var M=L.data,N=L.error;if(N){K();C(N,M)}else{F();C(null,M,J)}}));return K}};function z(A){var B,C,D=this;return function(){if(!B){C=A.apply(D,arguments);B=true}return C}}f.exports=y}),null);
__d("ozMakeColor",["randomShuffle","immutable"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("immutable").Map,i=c("immutable").List,j=c("immutable").Range,k=function k(n,o){return"hsla("+n+", 85%, 30%, "+o+")"};function l(){var n=arguments.length<=0||arguments[0]===undefined?25:arguments[0],o=arguments.length<=1||arguments[1]===undefined?.9:arguments[1],p=i(c("randomShuffle")(j(10,360,n).toJS())),q=0,r=h();return function(s){if(r.has(s))return k(r.get(s),o);else{var t=p.get(q);r=r.set(s,t);q=(q+1)%p.count();return k(t)}}}function m(){var n=arguments.length<=0||arguments[0]===undefined?77:arguments[0];return function(o){return k(o*n%360,.9)}}f.exports={makeColorShuffle:l,makeColor:m}}),null);
__d("OzHelpers",["ozMakeColor","BanzaiScuba","DatePickerRestraints","ErrorUtils","getURLRanges","immutable","LogHistory","OzConfig","OzConstants","OzServerTime","OzImmutablePureRenderMixin","React","URI"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("ozMakeColor").makeColor,i=c("immutable").List,j=c("immutable").Map,k=c("immutable").Set,l=c("immutable").OrderedMap,m=c("OzConstants").AUTHOR_TYPES,n=c("OzConstants").REMINDERS,o=/^image\//,p={color:h(),blobURI:function B(C){return window.URL.createObjectURL(C)},blobFromDataURI:function B(C){var D=C.split(","),E=atob(D[1]),F=D[0].split(":")[1].split(";")[0],G=new ArrayBuffer(E.length),H=new Uint8Array(G);for(var I=0;I<E.length;I++)H[I]=E.charCodeAt(I);return new Blob([G],{type:F})},toLocaleDate:function B(C){return new Date(C).toLocaleDateString()},toLocaleTime:function B(C){return new Date(C).toLocaleTimeString()},hasCmdOrCtrl:function B(C){return C.getModifierState("Meta")||C.getModifierState("Control")},keysIn:function B(){var C=k(arguments);return function(D,E){return C.has(E)}},safeParse:function B(C){var D={};try{D=JSON.parse(C)}catch(E){p.info("invalid json",C)}return D},safeURI:function B(C){var D=null;try{D=c("URI").isValidURI(C)&&new(c("URI"))(C)||null}catch(E){p.info("invalid uri",C)}return D},pure:s,memoize:t,values:function B(C){return Object.keys(C).map(function(D){return C[D]})},nonempty:function B(C){return C&&!C.isEmpty()?C:null},uniqId:v,debug:x("debug",false),info:x("info",true),warn:x("warn",true),error:x("error",true),isImageType:function B(C){return o.test(C)},isStickerType:function B(C){return C==="image/sticker"},dateRestraints:w,moveCursorToInputEnd:function B(C){if(C.setSelectionRange){var D=C.value.length;C.setSelectionRange(D,D)}},toTitleCase:function B(C){var D=k(["a","an","the","at","by","for","in","of","on","to","up","and","as","but","or","nor"]),E=function E(G,H,C){return H===0||H+G.length===C.length},F=function F(G,H,C){return E(G,H,C)||!D.has(G)?G.charAt(0).toUpperCase()+G.substr(1):G};return C.toLowerCase().replace(/\w\S*/g,F)},scrollToBottom:function B(C){C.scrollTop=C.scrollHeight},threadID:function B(C){return C.get("user-id")},isNew:function B(C){return!p.intents(C).find(p.isClosedIntent)},hasOwner:function B(C){return C.getIn(["owner","id"])},hasAllTags:function B(C,D){return D.every(function(E){return p.hasTag(C,E)})},hasSomeTag:function B(C,D){return D.some(function(E){return p.hasTag(C,E)})},hasTag:function B(C,D){return C.get("tags")&&C.get("tags").contains(D)},isEscalated:function B(C){return p.hasTag(C,"escalated")},hasEngage:function B(C){return!!C.get("engagement-type")},photo:function B(C){return C.getIn(["user-vcard","photo"])||C.getIn(["user-vcard","picture"])},compareNums:function B(C,D){if(C&&D)return D-C;else if(C)return-1;else if(D)return 1;else return 0},compareBools:function B(C,D){if(C&&D)return 0;else if(C)return-1;else if(D)return 1},getIncomingThreads:function B(C){return C.filter(function(D){return D.get("ready")&&!p.hasOwner(D)}).sort(p.threadComparator)},threadComparator:function B(C,D){var E=p.compareBools(p.hasTag(C,"vip"),p.hasTag(D,"vip")),F=p.compareBools(p.hasTag(C,"urgent"),p.hasTag(D,"urgent")),G=p.compareNums(p.urgentReminders(C).getIn([0,"scheduled-time"]),p.urgentReminders(D).getIn([0,"scheduled-time"])),H=p.compareNums(C.get("last-event-at"),D.get("last-event-at"));return E||F||G||H},lastEvents:function B(C){return C.get("last-events",i()).sortBy(function(D){return D.get("timestamp")})},lastUserMessage:function B(C){return p.lastEvents(C).findLast(function(D){return p.authorType(D)===m.USER})},shortDesc:function B(){var C=arguments.length<=0||arguments[0]===undefined?j():arguments[0],D=C.getIn(["attachments",0,"mime_type"]),E=C.getIn(["attachments",0,"sticker_id"]);return C.get("text")||E&&"sent a sticker."||D&&(D.match(/video/i)&&"sent a video."||D.match(/audio/i)&&"sent an audio clip."||D.match(/image/i)&&"sent an image")},preferredName:function B(C){return C.getIn(["metadata-json","preferred-name"])||C.getIn(["user-vcard","first-name"])},userEmail:function B(C){return C.getIn(["metadata-json","email"])},intents:function B(C){return C.get("intents",i()).sortBy(function(D){return D.get("created-at")})},isOwner:function B(C,D){var E=C.getIn(["owner","id"]);return E&&D&&E==D},wasOwner:function B(C,D){var E=C.getIn(["last-owner","id"]);return E&&D&&E==D},isLocker:function B(C,D){return C.get("locked")&&C.get("locker-id")===D},nameOrId:function B(C){return C&&(C.get("name")||C.get("id"))||""},isSubscriber:function B(C,D){return!!C.get("subscriptions",i()).find(function(E){return E===D})},hasUnblockedIntents:function B(C){return C.get("intents",i()).some(function(D){return!p.isBlockedIntent(D)})},hasOpenIntents:function B(C){return C.get("intents",i()).some(function(D){return p.isOpenIntent(D)})},openIntents:function B(C){return p.intents(C).filter(p.isOpenIntent)},closedIntents:function B(C){return p.intents(C).filter(p.isClosedIntent)},intentById:function B(C,D){return p.intents(C).findLast(function(E){return E.get("id")===D})},isBlockedIntent:function B(C){return C.get("blocked")},intentName:function B(C){return C.get("name")||"Unknown intent"},intentAlias:function B(C){return C.get("alias")||C.get("name")||"Unknown intent"},isOpenIntent:function B(C){return C.get("state")==="open"},isClosedIntent:function B(C){return!p.isOpenIntent(C)},isDeleted:function B(C){return C.get("state")==="deleted"},getName:function B(C){return C.getIn(["user-vcard","name"],"Unknown user")},lastPresence:function B(C){return Math.max(C.get("last-seen")||0,C.get("last-presence")||0)},timeSpent:function B(C){if(C.get("ready")&&C.get("last-ready-at"))return p.serverNow()-C.get("last-ready-at")},locationLastSeen:function B(C){if(C.getIn(["location","last-seen"]))return new Date(C.getIn(["location","last-seen"]))},timezone:function B(C){return C.getIn(["location","timezone"])},durationStr:function B(C){__p&&__p();if(C==null){p.warn("[durationStr] strange duration "+C);return"[invalid duration]"}else if(C<-1e3){p.warn("[durationStr] strange duration "+C);return"-"+p.durationStr(-C)}else if(C<0){p.warn("[durationStr] strange duration "+C);return"< 0s"}else if(C===0)return"0s";else if(C<1e3)return"< 1s";else if(C<60*1e3)return Math.floor(C/1e3)+"s";else if(C<60*60*1e3)return Math.floor(C/(60*1e3))+"m";else if(C<24*60*60*1e3)return Math.floor(C/(60*60*1e3))+"h";else return Math.floor(C/(24*60*60*1e3))+"d"},serverNow:function B(){return c("OzServerTime").serverNow()},repName:function B(C,D){var E=D.get(C);return E&&E.get("name")||C||null},authorType:function B(C){var D=m.BOT,E=m.USER,F=m.TRAINER,G=C.get("sender")||C.get("from"),H=C.get("author-type");return H===D&&D||(H===F||G===c("OzConfig").getStaticConfig("PAGE_ID"))&&F||E},msgID:function B(){var C=arguments.length<=0||arguments[0]===undefined?j():arguments[0];return C.get("offline-threading-id")||C.get("mid")||p.warn("[msgID] had to resort to timestamp",C)&&null||C.get("timestamp")},isActivePulse:function B(C){var D=C&&C.get("pulse-data");if(!D)return false;return!D.get("away?")&&D.get("inactive-ms",Infinity)<3e4},EMPTY_BODY:c("immutable").fromJS([{"content-type":"text/plain; charset=UTF-8",body:{contents:""}}]),eventToEmail:function B(C){return{email:C.get("data"),intentId:C.get("intent-id"),id:C.get("id")}},reEmail:function B(C){var D=C.getIn(["data","subject"]),E=D.toUpperCase().startsWith("RE:")?D:"Re: "+D;return C.setIn(["data","subject"],E).setIn(["data","body"],this.EMPTY_BODY)},switchRecip:function B(C){var D=C.get("data"),E=D.get("from"),F=D.get("to");return C.setIn(["data","from"],F).setIn(["data","to"],i([E]))},eventToInvite:function B(C){return{invite:C.get("data"),id:C.get("id"),intentId:C.get("intent-id"),disabled:true}},urgentReminders:function B(C){return C.get("reminders",i()).sortBy(function(D){return D.get("scheduled-time")}).filter(p.isUrgentReminder)},paidReminders:function B(C){return p.urgentReminders(C).filter(p.isPaidReminder)},isUrgentReminder:function B(C){var D=C.get("state");return D==="active"||D==="active-snoozed"},isPaidReminder:function B(C){return!!C.getIn(["body","suggestion"])},isSnoozedReminder:function B(C){var D=C.get("state");return D==="snoozed"||D==="active-snoozed"},isUrgentTask:function B(C){var D=C.get("state");return D==="dispatched"&&C.get("deadline")<p.serverNow()},isPaidTask:function B(C){return!!C.getIn(["data","suggestion"])},isCompletedTask:function B(C){return C.get("state")==="completed"},isCanceledTask:function B(C){return C.get("state")==="canceled"},isWaitingTask:function B(C){return C.get("state")==="waiting"},isClosedTask:function B(C){return p.isCompletedTask(C)||p.isCanceledTask(C)},isOpenTask:function B(C){return!p.isClosedTask(C)},isUnread:function B(C){return C.get("read-state")==="unread"},soonestDueTask:function B(C){return C.filterNot(p.isClosedTask).minBy(function(D){return D.get("start-at")})},nextTaskForIntent:function B(C){var D=arguments.length<=1||arguments[1]===undefined?i():arguments[1];return p.soonestDueTask(D.filter(function(E){return E.get("intent-id")===C.get("id")}))},nextTaskForThread:function B(C){return p.soonestDueTask(C.get("tasks",i()))},unreadTs:function B(C){return c("OzConfig").ConfigStore.data.getIn(["GK","responsivenessV2"])?C.get("unread-timestamp"):(p.lastUserMessage(C)||j()).get("timestamp")},hasPaid:function B(C){return!!p.paidReminders(C).size},hasReminder:function B(C){return!!p.urgentReminders(C).size},minAge:function B(C){var B=+C.getIn(["user-vcard","age-range","min"]);return Number.isSafeInteger(B)?B:0},shimURI:function B(C){return new(c("URI"))("https://l.facebook.com/l.php").setQueryData({u:C,h:c("OzConfig").getStaticConfig("shimhash")}).toString()},uiSuggestion:function B(C){var D=C.has("amount")?"$"+(C.get("amount")/100).toFixed(2):"";return{id:C.get("item-id")||"-1",name:C.get("name"),desc:C.get("description"),thumb_url:C.get("thumb-url"),merchant_name:C.get("merchant-name")||"",total_cost:C.get("amount")?j({amount:C.get("amount")}):null,display_total_cost:D,target_url:p.shimURI(C.get("target-url")),payment_id:C.get("payment-id"),expiration_time:C.get("expiration-time")}},parsePhoneNumber:function B(C){__p&&__p();if(!C)return"";if(C.length==12&&C[0]=="+")C=C.substr(1);if(C.length==11&&C[0]=="1")C=C.substr(1);switch(C.length){case 10:return"("+C.substr(0,3)+") "+C.substr(3,3)+"-"+C.substr(6,4);case 7:return C.substr(0,3)+"-"+C.substr(3,4);default:return C}},validateURL:function B(C){return!!C&&typeof C==="string"&&c("getURLRanges")(C).length&&c("URI").isValidURI(C)},normalizeMerchant:function B(C){__p&&__p();return C.updateIn(["website"],function(D){if(!D)return D;var E=c("getURLRanges")(D);if(!E||E.length===0)return D;return E[0].entity.url}).updateIn(["page-id"],function(D){if(Number.isFinite(D)||typeof D==="string")return parseInt(D,10);return null})},validateMerchant:function B(C){__p&&__p();var D=k(["name-dba","country"]),E=k(["address","website","page-id"]),F={},G=C.get("website","");if(G&&!this.validateURL(G))F.website="Website is an invalid URL";var H=C.get("page-id",null);if(H!=null&&!Number.isFinite(H))F["page-id"]="FB Page must be a number";D.map(function(J){if(!C.get(J))F[J]="This field is required"});if(k(C.filter(function(C){return C}).keys()).intersect(E).isEmpty()){var I="At least one of "+E.join(", ")+" is required";E.forEach(function(C){F[C]=I})}return j(F)},isDaytime:function B(C){var D=(Date.now()+C)%(24*60*60*1e3),E=D/(60*60*1e3);return E>=6},fullThreadData:function B(C,D,E){var F=C.get(E);if(!F)return null;return F.update("intents",function(G){return(G||i()).map(function(H){var I=q(D,H),J=r(F,I);return J})})},threadPath:function B(C){var D=C.threadid,E=C.intentid,F=C.taskid,G=C.eventid,H=E?"/intent/"+E:"",I=F?"/task/"+F:"",J=G?"/event/"+G:"";return"/inbox/"+D+H+(I||J)},updateInWhen:function B(C,D,E){var F={};if(C.getIn(D,F)!==F)return C.updateIn(D,E);return C},getRequirement:function B(C,D){return C.get("requirements",i()).find(function(E){return E.get("name")===D})}};function q(B,C){var D=B.getIn(["byIntent",C.get("id")],j());return C.set("events",D)}function r(B,C){var D=B.getIn(["tasks-by-intent",C.get("id")]);return C.set("tasks",D)}function s(B){var C=arguments.length<=1||arguments[1]===undefined?"OzPureComponent":arguments[1];return c("React").createClass({displayName:C,mixins:[c("OzImmutablePureRenderMixin")],render:function D(){return B(this.props)}})}function t(B,C){__p&&__p();var D=arguments.length<=2||arguments[2]===undefined?1e3:arguments[2],E=l();return function(){for(var F=arguments.length,G=Array(F),H=0;H<F;H++)G[H]=arguments[H];var I=C.apply(this,G);if(E.get(I))return E.get(I);else{var J=B.apply(this,G);E=E.set(I,J).takeLast(D);return J}}.bind(this)}var u=0;function v(){return u++}function w(){var B=new Date(),C=new Date(Date.UTC(B.getFullYear(),B.getMonth(),B.getDate())),D=new Date(+C);D.setFullYear(C.getFullYear()+n.RANGE_IN_YEARS);return{dateRestraints:[c("DatePickerRestraints").enforceDateIsNoEarlierThan(C),c("DatePickerRestraints").enforceDateIsNoLaterThan(D)]}}c("ErrorUtils").addListener(function(B){var C=A({level:"error",message:"[unhandled-error]["+B.name+"] "+B.message,data:"--stack\n"+B.stack+"\n\n--originalError\n"+B._originalError});z(C);y(C)});function x(B,C){return function(){for(var D=arguments.length,E=Array(D),F=0;F<D;F++)E[F]=arguments[F];var G=E[0],H=E.slice(1);window.console.log(B,G,H);var I=A({level:B,message:G,data:H});z(I);C&&y(I)}}function y(B){var C=new(c("BanzaiScuba"))(c("OzConfig").getStaticConfig("scubaCategory"));Object.entries(B).forEach(function(D){var E=D[0],F=D[1];Number.isSafeInteger(F)?C.addInteger(E,F):C.addNormal(E,F)});C.post()}function z(B){var C=c("LogHistory").getInstance("oz-logger");(C[B.level]||C.debug).call(C,B.message,"")}function A(B){return babelHelpers["extends"]({},B,{uid:c("OzConfig").getStaticConfig("uid"),public_name:c("OzConfig").getStaticConfig("publicName"),rev:c("OzConfig").getStaticConfig("rev"),timestamp:p.serverNow()})}f.exports=p}),null);
__d("OzServerTime",["OzStores","OzAPI"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("OzStores").ServerOffsetStore,i;function j(){return Math.floor(Date.now()-h.data.get("offsetMs"))}function k(){window.clearInterval(i)}function l(){c("OzAPI").timestamp();k();i=window.setInterval(function(){return c("OzAPI").timestamp()},1e3*60*60*3)}f.exports={serverNow:j,setup:l,tearDown:k}}),null);
__d("OzStores",["invariant","OzHelpers","immutable","OzActions","Reflux"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("immutable").List,j=c("immutable").Map,k=c("immutable").OrderedMap,l=c("immutable").OrderedSet,m=c("immutable").Set,n=c("immutable").Iterable,o=c("Reflux").createStore({init:function N(){this.data=j();this.listenTo(c("OzActions").updateRequirements,this._onUpdateRequirements)},getInitialState:function N(){return this.data},_onUpdateRequirements:function N(O){this.data=this.data.withMutations(function(P){O.forEach(function(Q){var R=Q.get("name"),S=P.get(R,j()).merge(Q).update("wit-intent-uuids",function(T){return T&&T.toSet()||m()});P.set(R,S)})});c("OzHelpers").debug("[oz] updated RequirementStore");this.trigger(this.data)}}),p=c("Reflux").createStore({init:function N(){this.data=l();this.listenTo(c("OzActions").addBubble,this._onAddBubble)},getInitialState:function N(){return this.data},_onAddBubble:function N(O){j.isMap(O)||h(0);this.data=this.data.add(O).takeLast(100);this.trigger(this.data)},metrics:function N(){return j({bubbleCount:this.data.count()})}}),q=c("Reflux").createStore({init:function N(){this.data=k();this.listenTo(c("OzActions").addAutopilot,this._onAddAutopilot)},getInitialState:function N(){return this.data},_onAddAutopilot:function N(O){j.isMap(O)||h(0);this.data=this.data.set(O.get("id"),O.get("data")).takeLast(100);this.trigger(this.data)}}),r="id",s=c("Reflux").createStore({init:function N(){this.data=j();this.listenTo(c("OzActions").updateWitIntents,this._onUpdateWitIntents)},getInitialState:function N(){return this.data},_onUpdateWitIntents:function N(O){c("immutable").List.isList(O)||h(0);this.data=this.data.withMutations(function(P){return O.reduce(function(Q,R){return Q.set(R.get(r),R)},P)});this.trigger(this.data)},metrics:function N(){return j({witIntentCount:this.data.count()})}}),t=c("Reflux").createStore({init:function N(){this.data=j();this.listenTo(c("OzActions").activateThread,this._onActivateThread)},getInitialState:function N(){return this.data},_onActivateThread:function N(O){var P=O.threadID,Q=O.intentID,R=O.taskID,S=O.eventID;c("OzHelpers").info("[store/activeThread] set active thread: ",{threadID:P,intentID:Q,taskID:R,eventID:S});this.data=this.data.set("oldThreadID",this.data.get("threadID")).set("threadID",P).set("activeIntent",Q).set("activeTask",R).set("activeEvent",S);this.trigger(this.data)}}),u="user-id",v=function v(N,O){return N.reduce(function(P,Q){P[Q.get(O)]=Q;return P},{})};function w(N,O){__p&&__p();j.isMap(N)&&j.isMap(O)||h(0);var P=v(N,"offline-threading-id"),Q=v(N,"mid");return N.withMutations(function(R){__p&&__p();return O.valueSeq().filterNot(function(S){var T=S.get("attachments");if(T)return T.first()&&T.first().getIn(["xma","body"])===null;return false}).reduce(function(S,T){__p&&__p();var U=T.get("offline-threading-id"),V=T.get("mid"),W=U&&P[U]||V&&Q[V]||S.get(c("OzHelpers").msgID(T));if(W){S=S["delete"](c("OzHelpers").msgID(W));T=W.merge(T);U=T.get("offline-threading-id");V=T.get("mid")}U&&(P[U]=T);V&&(Q[V]=T);return S.set(c("OzHelpers").msgID(T),T)},R)})}var x=function x(N,O,P){__p&&__p();switch(P){case"messages":return w(N,O);case"intents":case"reminders":var Q=j().withMutations(function(T){return(N||i()).reduce(function(T,U){return T.set(U.get("id"),U)},T)}),R=O.reduce(function(T,U){var V=U.get("id");return T.set(V,(T.get(V)||j()).merge(U))},Q).valueSeq().toList();return R;case"tasks":var S=O.map(function(T){return T.get("intent-id")}).toSet();return N.filterNot(function(T){return S.has(T.get("intent-id"))}).concat(O);case"light-thread":return N&&O;default:return O}},y=function y(N){return N.set("tasks-by-intent",N.get("tasks",i()).groupBy(function(O){return O.get("intent-id")}))},z=function z(N){typeof N==="function"||h(0);return function(O,P){j.isMap(P)&&j.isMap(O)||h(0);var Q=P.get(u),R=(O.get(Q)||j()).mergeWith(N,P),S=y(R);return O.set(Q,S)}},A=c("Reflux").createStore({init:function N(){this.data=j();this.updatedAt=Date.now();this.listenTo(c("OzActions").updateThreads,this._onUpdateThreads);this.listenTo(c("OzActions").maybeUpdateThreads,this._onMaybeUpdateThreads);this.listenTo(c("OzActions").clearReassignState,this._onClearReassignState);this.listenTo(c("OzActions").deleteTask,this._onDeleteTask)},getInitialState:function N(){return this.data},_onUpdateThreads:function N(O){i.isList(O)||h(0);this.data=this.data.withMutations(function(P){return O.reduce(z(x),P)});this.updatedAt=Date.now();this.trigger(this.data)},_onMaybeUpdateThreads:function N(O){__p&&__p();i.isList(O)||h(0);var P=O.filter(function(Q){return this.data.has(Q.get(u))}.bind(this));if(P.isEmpty()){c("OzHelpers").debug("[threads] not updating partial threads");return}this.data=this.data.withMutations(function(Q){return P.reduce(z(x),Q)});this.updatedAt=Date.now();this.trigger(this.data)},_onClearReassignState:function N(){this.data=this.data.map(function(O){return O.get("ui-reassign")?O["delete"]("ui-reassign"):O});this.trigger(this.data)},_onDeleteTask:function N(O,P){this.data=this.data.updateIn([O,"tasks"],function(Q){return Q.filterNot(function(R){return R.get("id")===P})});this.trigger(this.data)},metrics:function N(){return j({threadCount:this.data.count(),taskCount:this.data.reduce(function(O,P){return P.get("tasks",i()).count()+O},0)})}}),B=c("Reflux").createStore({init:function N(){this.data=this._make(null,null);this.listenTo(c("OzActions").showDialog,this._onShowDialog);this.listenTo(c("OzActions").hideDialog,this._onHideDialog)},getInitialState:function N(){return this.data},_make:function N(O,P){return{dialogClass:O,dialogProps:P}},_onShowDialog:function N(O,P){this.data=this._make(O,P);this.trigger(this.data)},_onHideDialog:function N(){this.data=this._make(null,null);this.trigger(this.data)}}),C=c("Reflux").createStore({init:function N(){this.data=j();this.listenTo(c("OzActions").updateMerchants,this._onUpdateMerchants);this.listenTo(c("OzActions").deleteMerchants,this._onDeleteMerchants)},getInitialState:function N(){return this.data},_onUpdateMerchants:function N(O){i.isList(O)||h(0);this.data=this.data.withMutations(function(P){return O.reduce(function(Q,R){var S=R.get("id"),T=Q.get(S,j()).merge(R);return Q.set(S,T)},P)});c("OzHelpers").debug("[oz] updated merchants",this.data.toJS());this.trigger(this.data)},_onDeleteMerchants:function N(O){i.isList(O)||h(0);this.data=O.reduce(function(P,Q){return P["delete"](Q)},this.data);c("OzHelpers").debug("[oz] deleted merchants",this.data.toJS());this.trigger(this.data)},metrics:function N(){return j({merchantCount:this.data.count()})}}),D=c("Reflux").createStore({init:function N(){this.data=j();this.listenTo(c("OzActions").updateReps,this._onUpdateReps);this.listenTo(c("OzActions").replaceReps,this._onReplaceReps)},getInitialState:function N(){return this.data},_onReplaceReps:function N(O){this.data=j().withMutations(function(P){O.reduce(function(Q,R){return Q.set(R.get("fbid"),R)},P)});this.trigger(this.data)},_onUpdateReps:function N(O){this.data=this.data.withMutations(function(P){return O.reduce(function(Q,R){return Q.mergeIn([R.get("fbid")],R)},P)});this.trigger(this.data)},metrics:function N(){return j({repCount:this.data.count()})}}),E=c("Reflux").createStore({init:function N(){this.data=j();this.listenTo(c("OzActions").replaceHumans,this._onReplace)},getInitialState:function N(){return this.data},_onReplace:function N(O){this.data=O;this.trigger(this.data)},metrics:function N(){return j({humanCount:this.data.count()})}}),F=c("Reflux").createStore({init:function N(){this.data=j({queue:j({showTags:m(),hideTags:m()}),all:j({showTags:m(),hideTags:m()})});this.listenTo(c("OzActions").updateQueueFilters,this._onUpdateFilters)},getInitialState:function N(){return this.data},_onUpdateFilters:function N(O){this.data=this.data.merge(O);this.trigger(this.data)}}),G=c("Reflux").createStore({init:function N(){this._data=j();this.listenTo(c("OzActions").sendMessageStart,this._onShiftSending.bind(this,1));this.listenTo(c("OzActions").sendMessageFinish,this._onShiftSending.bind(this,-1))},getInitialState:function N(){return this._data},_onShiftSending:function N(O,P){this._data=this._data.update(P,function(Q){return(Q||0)+O});this.trigger(this._data)}}),H=c("Reflux").createStore({init:function N(){this.data=j({byIntent:j(),byThread:j(),byId:j()});this.listenTo(c("OzActions").addHandledEvents,this._onAddHandledEvents)},getInitialState:function N(){return this.data},_onAddHandledEvents:function N(O){this.data=this.data.withMutations(function(P){O.reduce(function(Q,R){return Q.setIn(["byIntent",R.get("intent-id"),R.get("id")],R).setIn(["byId",R.get("id")],R)},P)});this.trigger(this.data)},metrics:function N(){return j({handledEventCount:this.data.get("byId").count()})}}),I=c("Reflux").createStore({init:function N(){this.data=j({offsetMs:0});this.listenTo(c("OzActions").updateServerOffset,this._onUpdateServerOffset)},getInitialState:function N(){return this.offsetMs},_onUpdateServerOffset:function N(O){var P=O.offsetMs;this.data=this.data.set("offsetMs",P);this.trigger(this.data)}}),J=j({state:"loading",error:null,result:null,skip:false}),K=c("Reflux").createStore({init:function N(){this.data=j({skywalker:J,init:J,"wit-intents":J,merchants:J,humans:J,requirements:J});this.listenTo(c("OzActions").updateLoadingState,this._onUpdateLoadingState)},getInitialState:function N(){return this.data},_onUpdateLoadingState:function N(O){var P=O.component,Q=O.state,R=O.error,S=O.result,T=O.skip;c("OzHelpers").info("[store/loading] "+Q+" "+P);if(!this.data.has(P))c("OzHelpers").warn("[store/loading] "+P+" wasn't listed in LoadingStore.init");this.data=this.data.set(P,j({state:Q,error:R,result:S,skip:T}));this.trigger(this.data)}}),L=c("Reflux").createStore({init:function N(){this.data=j();this.listenTo(c("OzActions").updateCalendarEvents,this._onUpdateCalendarEvents)},getInitialState:function N(){return this.data},_onUpdateCalendarEvents:function N(O){var P=O.tid,Q=O.calendarEvents,R=Q&&Q.sort?Q:[];this.data=this.data.set(P,R.sort(function(S,T){var U=new Date(S.startDate),V=new Date(T.startDate);return U.getTime()-V.getTime()}));this.trigger(this.data)},metrics:function N(){return j({calendarEventCount:this.data.count()})}}),M=c("Reflux").createStore({init:function N(){this.data=j({isStalled:false});this.listenTo(c("OzActions").skywalkerMessage,this._onSkywalkerMessage);this.listenTo(c("OzActions").skywalkerStalled,this._onSkywalkerStalled)},getInitialState:function N(){return this.data},_onSkywalkerMessage:function N(O){var P=O.timestamp;this.data=this.data.set("last-receive-ts",P).set("isStalled",false);this.trigger(this.data)},_onSkywalkerStalled:function N(){this.data=this.data.set("isStalled",true);this.trigger(this.data)}});f.exports={ActiveThreadStore:t,BubbleStore:p,DialogStore:B,MerchantStore:C,AutopilotStore:q,QueueFilterStore:F,RepStore:D,HumanStore:E,LoadingStore:K,RequirementStore:o,ThreadStore:A,WitIntentStore:s,PendingMessageStateStore:G,HandledEventsStore:H,ServerOffsetStore:I,CalendarEventStore:L,SkywalkerStore:M}}),null);
__d("OzAJAX",["invariant","Promise","OzHelpers","OzNotify","OzConfig","URI"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={metrics:{pendingCount:0,requestCount:0,failedCount:0,totalRequestMs:0,averageRequestMs:0},updateMetricsStart:function m(){i.metrics.pendingCount+=1},updateMetricsEnd:function m(n,o){var p=i.metrics;p.pendingCount-=1;if(!n.status||n.status===0||n.status>399)p.failedCount+=1;p.requestCount+=1;p.totalRequestMs+=o;p.averageRequestMs=Math.round(p.totalRequestMs/p.requestCount)},ajax:function m(n){__p&&__p();var o=n.type,p=n.headers,q=n.params,r=n.body,s=n.url;q=k(q);var t={type:o,url:s,headers:p,params:q,body:r};i.updateMetricsStart();var u=Date.now();return j(t).then(function(v){i.updateMetricsEnd(v,Date.now()-u);return JSON.parse(v.responseText)},function(v){i.updateMetricsEnd(v,Date.now()-u);var w=void 0;try{w=JSON.parse(v.responseText)}catch(x){}l(w||{},v,t);throw w||v})},beacon:function m(n){window.navigator&&window.navigator.sendBeacon||h(0);var o=n.params,p=n.body,q=n.url;o=k(o);return window.navigator.sendBeacon(new(c("URI"))(q).addQueryData(o).toString(),new Blob([p],{type:"application/json"}))},buildURI:function m(){var n=c("OzConfig").getStaticConfig("API_PATH");n||h(0);for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return[n].concat(p).join("/")}};function j(m){__p&&__p();var n=m.type,o=m.headers,p=m.params,q=m.body,r=m.url;return new(c("Promise"))(function(s,t){__p&&__p();var u=new XMLHttpRequest(),v=new(c("URI"))(r);if(p)v.addQueryData(p);u.timeout=1e3*60*3;u.open(n,v.toString(),true);if(o)for(var w=Object.keys(o),x=Array.isArray(w),y=0,w=x?w:w[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var z;if(x){if(y>=w.length)break;z=w[y++]}else{y=w.next();if(y.done)break;z=y.value}var A=z;u.setRequestHeader(A,o[A])}u.onreadystatechange=function(){if(u.readyState!==4)return;if(u.status===200)s(u);else t(u)};u.send(q)})}function k(m){c("OzConfig").getStaticConfig("authToken")||h(0);c("OzConfig").getStaticConfig("uid")||h(0);c("OzConfig").getStaticConfig("API_VERSION")||h(0);return babelHelpers["extends"]({xs:c("OzConfig").getStaticConfig("authToken"),c_user:c("OzConfig").getStaticConfig("uid"),rep_name:c("OzConfig").getStaticConfig("fullName"),v:c("OzConfig").getStaticConfig("API_VERSION")},m)}function l(m,n,o){c("OzHelpers").error("[oz-api] backend rejected",m,n,o);var p=m.error||"Something went wrong, the team has been notified already.";if(m.info)c("OzNotify").info(p);else if(n.status===400)c("OzNotify").warn(p);else if(n.status===0)c("OzNotify").error("Something went wrong. If this continues, please contact the Wit oncall");else c("OzNotify").error(p)}f.exports=i}),null);
__d("OzDateTimePicker.react",["cssVar","cx","OzHelpers","joinClasses","AbstractDateTimePicker.react","AdsTimezone","Arbiter","BUIDatePicker.react","BUITimeInput.react","DatePickerRestraints","immutable","LocalDateTime","OzConfig","ReactComponentWithPureRenderMixin","React","ReactDOM","Reflux","SUIAudiencePlatformTheme","SUITheme","SUITimeZoneSelector.react","Timezone","XUIError.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes,m=c("immutable").Map,n=c("React").createClass({displayName:"OzDateTimePicker",mixins:[c("ReactComponentWithPureRenderMixin"),c("Reflux").connect(c("OzConfig").ConfigStore,"config")],propTypes:babelHelpers["extends"]({dateRestraints:l.arrayOf(l.func),disabled:l.bool,height:l.oneOf(["short","tall"]),layout:l.oneOf(["one-line","two-line","three-line"]),onChange:l.func.isRequired,showTimezoneName:l.bool,timestamp:l.number,timezone:l.string},c("XUIError.react").PropTypes),getDefaultProps:function w(){return{dateRestraints:u(),disabled:false,height:"short",layout:"one-line",showTimezoneName:true,timezone:q()}},render:function w(){var x=this.props,y=x.className,z=x.dateRestraints,A=x.disabled,B=x.height,C=x.layout,D=x.onChange,E=x.showTimezoneName,F=x.timestamp,G=x.timezone,H=x.xuiError,I=x.xuiErrorAlignh,J=x.xuiErrorPosition,K=babelHelpers.objectWithoutProperties(x,["className","dateRestraints","disabled","height","layout","onChange","showTimezoneName","timestamp","timezone","xuiError","xuiErrorAlignh","xuiErrorPosition"]),L={xuiError:H,xuiErrorAlignh:I,xuiErrorPosition:J},M=t(G),N=o(F,M),O=c("joinClasses")("_3hma"+(A?" _3hmb":""),y),P=C==="two-line"&&E&&202||!E&&110||"auto";return c("React").createElement(c("XUIError.react"),L,c("React").createElement("div",{className:O},c("React").createElement(c("AbstractDateTimePicker.react"),babelHelpers["extends"]({},K,{className:"_3hmc",classNames:{innerWrapper:"_3hmd"},datePicker:c("React").createElement(c("BUIDatePicker.react"),{className:"_3hme",dateRestraints:this._dateRestraints(M),height:B,placeholder:"mm/dd/yyyy"}),disabled:A,onChange:function(N){return this._handleChange(N,M)}.bind(this),timeInput:c("React").createElement(c("BUITimeInput.react"),{className:"_3hml"+(C!=="three-line"?" _3hmm":"")+(C==="three-line"?" _3hmn":""),height:B}),timezoneID:M,value:N})),c("React").createElement(v,{style:!F&&{display:"none"},className:"_3hmo"+(C==="one-line"?" _3hmm":"")+(C!=="one-line"?" _3hmn":""),isDisabled:A,onChange:function(Q){return this._handleChange(N,Q.get("timeZoneId"))}.bind(this),shouldShowSubtitleInSelector:E,value:c("SUITimeZoneSelector.react").VALUE({timeZoneId:M}),width:P})))},_handleChange:function w(x,y){var z=p(x,y),A=r(y);this.props.onChange({timestamp:z,timezone:A})},_dateRestraints:function w(x){return this.props.dateRestraints&&this.props.dateRestraints.map(function(y){return function(z){return y(z&&z.toDateTime(x).toDate())}})}});function o(w,x){try{if(w&&x!=null)return c("LocalDateTime").fromInstant(Math.round(w/1e3),x);else return null}catch(y){c("OzHelpers").warn("[dateTimePicker] cannot convert to LocalDateTime",w,x,y);return null}}function p(w,x){try{if(w&&x!=null){var y=w.toInstant(x)*1e3,z=y-y%6e4;return z}else return null}catch(A){c("OzHelpers").warn("[dateTimePicker] cannot convert from LocalDateTime",w,x,A);return null}}function q(){var w=c("Timezone").getEnvironmentTimezoneID();w==null&&c("OzHelpers").warn("[dateTimePicker] could not get environment time zone");return r(w)}function r(w){var x=c("AdsTimezone").names[w];x==null&&c("OzHelpers").warn("[dateTimePicker] unknown timezone id",w);return x}var s=m(c("AdsTimezone").names.map(function(w,x){return[w,x]}));function t(w){var x=s.get(w);x===undefined&&c("OzHelpers").warn("[timezoneIDForName] unrecognized timezone",w);return x||s.get("America/Los_Angeles")}function u(){var w=new Date(),x=new Date(Date.UTC(w.getFullYear(),w.getMonth(),w.getDate())),y=new Date(+x),z=new Date(+x);y.setFullYear(x.getFullYear()-5);z.setFullYear(x.getFullYear()+5);return[c("DatePickerRestraints").enforceDateIsNoEarlierThan(y),c("DatePickerRestraints").enforceDateIsNoLaterThan(z)]}j=babelHelpers.inherits(v,c("React").PureComponent);k=j&&j.prototype;v.prototype.componentDidMount=function(){"use strict";c("ReactDOM").findDOMNode(this.refs.timezoneSelector).addEventListener("focusout",function(w){return window.setTimeout(function(w){return c("Arbiter").inform("reflow")})})};v.prototype.render=function(){"use strict";return c("React").createElement(c("SUITimeZoneSelector.react"),babelHelpers["extends"]({},this.props,{ref:"timezoneSelector",theme:c("SUIAudiencePlatformTheme")}))};function v(){"use strict";j.apply(this,arguments)}n.timezoneIDForName=t;f.exports=n}),null);
__d("MediaEffectMetadataScheduleDatePicker.react",["cx","fbt","DateConsts","DatePickerRestraints","DateTime","Grid.react","Link.react","MediaEffectMetadataValidationUtils","OzDateTimePicker.react","React","XUICloseButton.react","XUIText.react","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("Grid.react").GridItem;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MediaEffectMetadataScheduleDatePicker2=function(s){var t=s&&s.timezone;if(!s||!s.timestamp)this.props.onEndTimeChange(null,t);else this.props.onEndTimeChange(new Date(s.timestamp),t)}.bind(this),this.$MediaEffectMetadataScheduleDatePicker3=function(s){var t=s&&s.timezone;if(!s||!s.timestamp)this.props.onStartTimeChange(null,t);else this.props.onStartTimeChange(new Date(s.timestamp),t)}.bind(this),this.$MediaEffectMetadataScheduleDatePicker4=function(){if(!this.props.startTime)return;var s=new Date(this.props.startTime);s.setDate(s.getDate()+c("DateConsts").DAYS_PER_WEEK);this.props.onEndTimeChange(s,this.props.timezone)}.bind(this),this.$MediaEffectMetadataScheduleDatePicker5=function(){this.props.onEndTimeChange(null,this.props.timezone)}.bind(this),o}m.prototype.$MediaEffectMetadataScheduleDatePicker1=function(){var n=this.props,o=n.startTime,p=n.endTime,q=c("MediaEffectMetadataValidationUtils").validateTimeRange(o,p);if(!q)return i._("Time range is invalid.");return null};m.prototype.render=function(){__p&&__p();var n=this.props.startTime||new Date(),o=c("OzDateTimePicker.react").timezoneIDForName(this.props.timezone),p=[c("DatePickerRestraints").enforceDateIsNoEarlierThan(c("DateTime").now(o).startOfDay().toDate())],q=null;if(this.props.endTime){var r=this.props.endTime,s=new(c("DateTime"))(r/1e3,o);p.push(c("DatePickerRestraints").enforceDateIsNoLaterThan(s.endOfDay().toDate()));var t=new(c("DateTime"))(n/1e3,o);q=c("React").createElement(c("OzDateTimePicker.react"),{dateRestraints:[c("DatePickerRestraints").enforceDateIsNoEarlierThan(t.startOfDay().toDate())],disabled:this.props.disabled,height:"tall",layout:"two-line",onChange:this.$MediaEffectMetadataScheduleDatePicker2,timestamp:r.getTime(),timezone:this.props.timezone,xuiError:this.$MediaEffectMetadataScheduleDatePicker1()})}else q=this.props.disabled?i._("Not specified"):c("React").createElement(c("Link.react"),{onClick:this.$MediaEffectMetadataScheduleDatePicker4},i._("add an end date"));var u="_9vd";return c("React").createElement(c("Grid.react"),{alignv:"middle",className:"_3-8m",cols:3},c("React").createElement(l,null,c("React").createElement(c("XUIText.react"),null,i._("Start"))),c("React").createElement(l,null,c("React").createElement("div",{className:c("joinClasses")(u,"_3-8h _2pir")},c("React").createElement(c("OzDateTimePicker.react"),{dateRestraints:p,disabled:this.props.disabled,height:"tall",layout:"two-line",onChange:this.$MediaEffectMetadataScheduleDatePicker3,timestamp:n.getTime(),timezone:this.props.timezone}))),c("React").createElement(l,null),c("React").createElement(l,null,c("React").createElement(c("XUIText.react"),null,i._("End"))),c("React").createElement(l,null,c("React").createElement("div",{className:c("joinClasses")(u,"_3-8h _2pir")},q)),c("React").createElement(l,null,this.props.endTime&&!this.props.disabled?c("React").createElement(c("XUICloseButton.react"),{className:"_3-9a",onClick:this.$MediaEffectMetadataScheduleDatePicker5,size:"small"}):null))};f.exports=m}),null);
__d("MediaEffectMetadataSchedule.react",["cx","fbt","MediaEffectEditorFunnelLogger","MediaEffectMetadataScheduleDatePicker.react","MediaEffectProfilePolicy","React","XUIRadioList.react","MediaEffectCard.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("XUIRadioList.react").Item,m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MediaEffectMetadataSchedule1=function(t){if(t==="no_constrain")this.props.onDateRangeChange(null,null,null);else this.props.onDateRangeChange(new Date(),null,null)}.bind(this),this.$MediaEffectMetadataSchedule4=function(t,u){var v=this.props.startTime;c("MediaEffectEditorFunnelLogger").logChangeEndTime();this.props.onDateRangeChange(v,t,u)}.bind(this),this.$MediaEffectMetadataSchedule5=function(t,u){var v=this.props.endTime;c("MediaEffectEditorFunnelLogger").logChangeStartTime();this.props.onDateRangeChange(t,v,u)}.bind(this),p}n.prototype.$MediaEffectMetadataSchedule2=function(){if(this.props.startTime||this.props.endTime)return"specified";else return"no_constrain"};n.prototype.$MediaEffectMetadataSchedule3=function(){if(this.$MediaEffectMetadataSchedule2()!=="specified")return null;return c("React").createElement("div",{className:"_2pis"},c("React").createElement(c("MediaEffectMetadataScheduleDatePicker.react"),babelHelpers["extends"]({onEndTimeChange:this.$MediaEffectMetadataSchedule4,onStartTimeChange:this.$MediaEffectMetadataSchedule5},this.props)))};n.prototype.render=function(){var o=!this.props.owner||this.props.owner.policies.includes(c("MediaEffectProfilePolicy").USE_TRAILING_REVIEW)?i._("Make active right away"):i._("Make active once approved");return c("React").createElement(c("MediaEffectCard.react"),{className:"_64q4",title:i._("Schedule"),tooltip:i._("Choose whether your effect will be available for people to use immediately once it's approved or only between specific dates.")},c("React").createElement(c("XUIRadioList.react"),{disabled:this.props.disabled,onValueChange:this.$MediaEffectMetadataSchedule1,selectedValue:this.$MediaEffectMetadataSchedule2()},c("React").createElement(l,{disabled:this.props.disabled,value:"no_constrain"},o),c("React").createElement(l,{disabled:this.props.disabled,value:"specified"},i._("Set a start and end date"))),this.$MediaEffectMetadataSchedule3())};n.propTypes={endTime:m.oneOfType([m.oneOf([null]),m.instanceOf(Date)]),onDateRangeChange:m.func.isRequired,startTime:m.oneOfType([m.oneOf([null]),m.instanceOf(Date)]),timezone:m.string};f.exports=n}),null);
__d("MediaEffectMetadataRecord",["FXEntMediaEffectSubmissionStatus","immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("immutable").Record;h=babelHelpers.inherits(k,j({attributedOwnerID:null,connectAppID:null,effectHasText:false,endTime:null,fbPageLiked:null,fbCatalogGKs:[],fbBoosted:false,fbEligibilityGKs:[],fbExperimentID:null,fbOnlyMediaRestriction:false,fbRankWeight:null,fbWhitelistCheckEligibility:false,fbWhitelistedUsers:[],gatelogic:null,humanReadableDescription:null,igCameraFormat:null,id:null,inspirationCategoryNames:[],locales:[],location:null,locationPageID:null,name:null,offlineOnly:false,placeDescription:null,productVisibilityPolicy:null,productionVerification:false,rejectReasons:null,saveAsDraft:false,selectedCategoryID:null,selectedInstructionID:null,selectedInstagramAttributionID:null,selectedOwnerID:null,selectedTemplateCategoryID:null,selfBirthday:false,startTime:null,sourceTemplateID:null,submissionStatus:c("FXEntMediaEffectSubmissionStatus").DRAFT,tags:[],thumbnail:null,thumbnailURI:null,timezone:null,timingSchedule:null,locationTarget:"everyone",hasFrameNameError:false,adsTargetingSpec:"{age_min: 13, age_max: 65}",use_owner_selector:true}));i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("MediaEffectMetadataStore",["FluxReduceStore","LocationConstants","MediaEffectFlowType","MediaEffectFrameCreateDialogDataStore","MediaEffectFrameEditorDispatcher","MediaEffectMaskUploadDataStore","MediaEffectMetadataRecord","MediaEffectMetadataValidationUtils","MediaEffectMetadataViewStore","MediaEffectPlaceDescriptionRecord"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxReduceStore"));i=h&&h.prototype;j.prototype.getInitialState=function(){return new(c("MediaEffectMetadataRecord"))()};j.prototype.reduce=function(k,l){__p&&__p();var m=void 0,n=void 0,o=void 0,p=void 0;switch(l.type){case"add/tag":m=k.get("tags");m.push(l.data);k=k.set("tags",m);break;case"apply/template":k=k.set("sourceTemplateID",l.templateFBID);break;case"clear/template":k=k.set("sourceTemplateID",null);break;case"remove/tag":var q=l.data;m=k.get("tags");m=m.filter(function(t){return t.uniqueID!==q.uniqueID&&t.title!==q.title});k=k.set("tags",m);break;case"add/fbWhitelistedUser":n=k.get("fbWhitelistedUsers");n.push(l.data);k=k.set("fbWhitelistedUsers",n);break;case"remove/fbWhitelistedUser":var r=l.data;n=k.get("fbWhitelistedUsers");n=n.filter(function(t){return t.uniqueID!==r.uniqueID&&t.name!==r.name});k=k.set("fbWhitelistedUsers",n);break;case"save/draft":k=k.set("saveAsDraft",true);break;case"select/instruction":k=k.set("selectedInstructionID",l.instructionID);break;case"update/category":k=k.set("selectedCategoryID",l.value);break;case"change/connectAppID":k=this.getState().set("connectAppID",l.appID);break;case"update/effectID":k=this.getState().set("id",l.effectID);break;case"update/fbRankingStrategy":k=k.set("fbBoosted",l.value==="BOOST");if(l.value!=="MANUAL")k=k.set("fbRankWeight",null);break;case"update/fbRankWeight":k=k.set("fbRankWeight",l.value);break;case"update/fbWhitelistCheckEligibility":k=k.set("fbWhitelistCheckEligibility",l.value);break;case"update/fbCatalogGKs":k=k.set("fbCatalogGKs",l.value);break;case"update/fbEligibilityGKs":k=k.set("fbEligibilityGKs",l.value);break;case"update/fbOnlyMediaRestriction":k=k.set("fbOnlyMediaRestriction",l.value);break;case"update/fbPageLiked":k=k.set("fbPageLiked",l.value);break;case"update/gatelogic":k=k.set("gatelogic",l.value);break;case"update/igCameraFormat":k=k.set("igCameraFormat",l.value);break;case"update/locales":k=k.set("locales",l.value);break;case"update/locationPageID":k=k.set("locationPageID",l.value);if(l.value===null)k=k.set("placeDescription",null);break;case"update/location":k=k.set("location",l.value);break;case"update/locationTarget":k=k.set("locationTarget",l.value);break;case"update/name":k=k.set("name",l.value);break;case"update/offlineOnly":k=k.set("offlineOnly",l.value);break;case"update/productVisibilityPolicy":k=k.set("productVisibilityPolicy",l.value);break;case"update/selectedInstagramAttributionID":k=k.set("selectedInstagramAttributionID",l.value);break;case"update/selectedOwnerID":k=k.set("selectedOwnerID",l.value);break;case"update/selfBirthday":k=k.set("selfBirthday",l.value);break;case"update/thumbnail":k=k.set("thumbnail",l.thumbnail);break;case"update/timingSchedule":k=k.set("timingSchedule",l.value);break;case"update/adsTargetingSpec":k=k.set("adsTargetingSpec",l.adsTargetingSpec);break;case"update/scheduleRange":k=k.set("startTime",l.startTime).set("endTime",l.endTime).set("timezone",l.timezone);break;case"update/nameValidation":k=k.set("hasFrameNameError",l.isError);break;case"init/effectMetadata":var s=Object.assign({},l.data.activationJSData);s=Object.assign(s,l.data.metadataJSData);if(s.startTime)s.startTime=new Date(s.startTime*1e3);if(s.endTime)s.endTime=new Date(s.endTime*1e3);if(s.locationPageID)s.locationTarget="targeted";if(s.location){s.locationTarget="targeted";s.location.distance_unit=c("LocationConstants").KILOMETER_UNIT;s.location=new(c("MediaEffectPlaceDescriptionRecord"))(s.location)}k=new(c("MediaEffectMetadataRecord"))(s);break;case"update/effectHasText":k=k.set("effectHasText",l.value);break;case"update/humanReadableDescription":k=k.set("humanReadableDescription",l.value);break;case"update/productionVerification":k=k.set("productionVerification",l.value);break;case"set/placeDescription":k=k.set("placeDescription",l.placeDescription);break;case"select/templateCategoryID":k=k.set("selectedTemplateCategoryID",l.value);break;case"select/attributedOwnerID":k=k.set("attributedOwnerID",l.value);break;case"remove/inspirationCategoryNames":o=l.value;p=k.get("inspirationCategoryNames");p=p.filter(function(t){return t!==o});k=k.set("inspirationCategoryNames",p);break;case"add/inspirationCategoryNames":o=l.value;p=k.get("inspirationCategoryNames");p.push(o);k=k.set("inspirationCategoryNames",p);break;case"update/setUseOwnerSelector":k=k.set("use_owner_selector",l.value);break}return k};j.prototype.getUseOwnerSelector=function(){return this.getState().get("use_owner_selector")};j.prototype.hasEffectID=function(){return this.getState().get("id")!==null};j.prototype.getRequestData=function(k){__p&&__p();var l=this.getState(),m=l.get("selectedOwnerID"),n=l.get("location"),o=n?{page_id:n.key||undefined,location:n.manual_geo?{latitude:n.latitude,longitude:n.longitude,radius_km:n.radius}:undefined,constrain_eligibility:!!n.constrain_eligibility}:undefined,p={connected_app_id:l.get("connectAppID"),effect_description:c("MediaEffectMaskUploadDataStore").getState().effectDescription,end_time:l.get("endTime")?Math.floor(l.get("endTime").getTime()/1e3):undefined,flow_type:c("MediaEffectFrameCreateDialogDataStore").getState().flowType,instagram_attribution_id:l.get("selectedInstagramAttributionID"),media_effect_category:l.get("selectedCategoryID"),media_effect_owner:m,media_effect_save_as_draft:l.get("saveAsDraft"),media_effect_tags:l.get("tags").map(function(s){return s.title}),name:l.get("name"),start_time:l.get("startTime")?Math.floor(l.get("startTime").getTime()/1e3):undefined,source_template_id:l.get("sourceTemplateID"),targeting_place_page:l.get("locationPageID"),targeting_place:o,timezone:l.get("timezone"),ads_targeting_spec:l.get("adsTargetingSpec")};if(!k)return p;var q=l.get("selectedTemplateCategoryID");if(q!==null)q=[q];else q=[];p=Object.assign(p,{fb_catalog_gks:l.get("fbCatalogGKs").length>0?l.get("fbCatalogGKs"):undefined,fb_eligibility_gks:l.get("fbEligibilityGKs").length>0?l.get("fbEligibilityGKs"):undefined,fb_only_media_restriction:l.get("fbOnlyMediaRestriction"),fb_page_liked:l.get("fbPageLiked")||undefined,fb_ranking_boosted:l.get("fbBoosted"),fb_ranking_weight:l.get("fbRankWeight"),fb_whitelisted_user_ids:l.get("fbWhitelistedUsers").map(function(s){return s.uniqueID}),fb_whitelist_check_eligibility:l.get("fbWhitelistCheckEligibility"),gatelogic:l.get("gatelogic"),has_text:l.get("effectHasText"),human_readable_description:l.get("humanReadableDescription"),ig_camera_format:l.get("igCameraFormat"),locales:l.get("locales"),meida_effect_instruction:l.get("selectedInstructionID"),media_effect_template_categories:q,offline_only:!!l.get("offlineOnly"),product_visibility_policy:l.get("productVisibilityPolicy"),self_birthday:!!l.get("selfBirthday"),timing_schedule:l.get("timingSchedule"),thumbnail:l.get("thumbnail"),ads_targeting_spec:l.get("adsTargetingSpec"),inspiration_category_names:l.get("inspirationCategoryNames")});var r=l.get("attributedOwnerID");if(r!==null)p.attributed_owner=r;else delete p.attributed_owner;return p};j.prototype.isBasicMetadataValid=function(){__p&&__p();var k=this.getState(),l=c("MediaEffectFrameCreateDialogDataStore").getState().flowType===c("MediaEffectFlowType").TEMPLATE;if(k.get("hasFrameNameError"))return false;if(!c("MediaEffectMetadataValidationUtils").validateTimeRange(k.get("startTime"),k.get("endTime")))return false;if(k.get("locationTarget")==="targeted"&&!c("MediaEffectMetadataValidationUtils").validateLocationPageID(k.get("locationPageID"))&&!c("MediaEffectMetadataValidationUtils").validateLocation(k.get("location")))return false;if(l&&k.selectedTemplateCategoryID===null)return false;return true};j.prototype.isOwnerValid=function(){var k=this.getState(),l=k.get("selectedOwnerID"),m=!k.get("id");if(!c("MediaEffectMetadataValidationUtils").validateOwnerID(l))return false;if(m){var n=k.get("productionVerification"),o=c("MediaEffectMetadataViewStore").getOwner(l);if(o&&o.isProductionFirstParty&&!n)return false}return true};j.prototype.isNameValid=function(){return c("MediaEffectMetadataValidationUtils").validateName(this.getState().get("name"))};j.prototype.isAllMetadataValid=function(){if(!this.isNameValid())return false;if(!this.isOwnerValid())return false;return this.isBasicMetadataValid()};function j(){h.apply(this,arguments)}f.exports=new j(c("MediaEffectFrameEditorDispatcher"))}),null);
__d("XMediaEffectTagsDataSourceController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/media_effect/datasource/tags/",{is_featured:{type:"Bool",defaultValue:false},value:{type:"String"}})}),null);
__d("MediaEffectMetadataTagsTypeahead.react",["fbt","MediaEffectEditorFunnelLogger","React","SearchableEntry","WebAsyncSearchSource","XMediaEffectTagsDataSourceController","XUITokenizer.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=10;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.componentDidUpdate=function(){if(this.state.resetQueryString)this.setState({resetQueryString:false})};function m(n){j.constructor.call(this,n);this.searchSource=new(c("WebAsyncSearchSource"))({queryRequests:[{uri:c("XMediaEffectTagsDataSourceController").getURIBuilder().setBool("is_featured",false).getURI()}]});this.state={resetQueryString:false}}m.prototype.render=function(){return c("React").createElement(c("XUITokenizer.react"),{disabled:this.props.disabled,entries:this.props.tags.map(function(n){return new(c("SearchableEntry"))({title:n.title,uniqueID:n.uniqueID||n.title})}),limit:l,onAddEntryAttempt:this.$MediaEffectMetadataTagsTypeahead1.bind(this),onEnterWithoutSelection:this.$MediaEffectMetadataTagsTypeahead2.bind(this),onRemoveEntryAttempt:this.$MediaEffectMetadataTagsTypeahead3.bind(this),placeholder:h._("Add up to 10 keywords"),queryString:this.state.resetQueryString?"":undefined,searchSource:this.searchSource,tokenizeQueryStringOnBlur:this.$MediaEffectMetadataTagsTypeahead2.bind(this)})};m.prototype.$MediaEffectMetadataTagsTypeahead1=function(n){__p&&__p();this.$MediaEffectMetadataTagsTypeahead2();if(this.props.tags.length>=l)return;var o=n.getTitle();if(!o||!o.length)return;var p=this.props.tags.map(function(r){return r.title});if(p.includes(o))return;var q=n.getUniqueID();this.$MediaEffectMetadataTagsTypeahead4();this.props.onAddTag({uniqueID:q,title:o})};m.prototype.$MediaEffectMetadataTagsTypeahead3=function(n){this.$MediaEffectMetadataTagsTypeahead2();var o=n.getUniqueID(),p=n.getTitle();this.$MediaEffectMetadataTagsTypeahead4();this.props.onRemoveTag({uniqueID:o,title:p})};m.prototype.$MediaEffectMetadataTagsTypeahead2=function(){this.setState({resetQueryString:true})};m.prototype.$MediaEffectMetadataTagsTypeahead4=function(){c("MediaEffectEditorFunnelLogger").logChangeTag()};m.propTypes={disabled:k.bool,tags:k.array,onAddTag:k.func.isRequired,onRemoveTag:k.func.isRequired};m.defaultProps={tags:[]};f.exports=m}),null);
__d("MediaEffectProfileOwnerTile.react",["cx","ProfileTile.react","React"],(function a(b,c,d,e,f,g,h){"use strict";var i=function i(j){return c("React").createElement(c("ProfileTile.react"),{id:j.owner.id,imageProps:{className:"_etu"},name:j.owner.name,tileProps:{className:"_etv"},titleProps:{className:"_eu3"}})};f.exports=i}),null);
__d("MediaEffectOwnerByline.react",["MediaEffectEventOwnerBylineTileContainer.react","MediaEffectProfileOwnerTile.react","React"],(function a(b,c,d,e,f,g){"use strict";var h=function h(i){switch(i.owner.type){case"event":return c("React").createElement(c("MediaEffectEventOwnerBylineTileContainer.react"),null);default:return c("React").createElement(c("MediaEffectProfileOwnerTile.react"),{owner:i.owner})}};f.exports=h}),null);
__d("MediaEffectDialogValidationConfigs",["fbt","MediaEffectValidationTypes"],(function a(b,c,d,e,f,g,h){"use strict";var i,j=(i={},i[c("MediaEffectValidationTypes").CANVAS_COVERAGE_LIMIT]={title:h._("Please Review Your Frame"),content:h._("Frames can't cover too much canvas space with opaque pixels.")},i[c("MediaEffectValidationTypes").ASSET_NUMBER_LIMIT]={title:h._("Please Review Your Frame"),content:h._("Please limit the number of images in a frame to no more than 15.")},i),k=[c("MediaEffectValidationTypes").CANVAS_COVERAGE_LIMIT,c("MediaEffectValidationTypes").ASSET_NUMBER_LIMIT];function l(m){return j[m]}f.exports={getContentByType:l,blockingTypes:k}}),null);
__d("MediaEffectValidationStore",["FluxReduceStore","immutable","MediaEffectDialogValidationConfigs","MediaEffectFrameEditorDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxReduceStore"));i=h&&h.prototype;j.prototype.getInitialState=function(){return c("immutable").Set()};j.prototype.reduce=function(k,l){switch(l.type){case"validation/add":return k.add(l.validation);case"validation/remove":return k.remove(l.validation);case"init/dialog":return c("immutable").Set()}return k};j.prototype.getBlockingValidation=function(){__p&&__p();for(var k=c("MediaEffectDialogValidationConfigs").blockingTypes,l=Array.isArray(k),m=0,k=l?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n;if(l){if(m>=k.length)break;n=k[m++]}else{m=k.next();if(m.done)break;n=m.value}var o=n;if(this.getState().has(o))return o}return null};function j(){h.apply(this,arguments)}f.exports=new j(c("MediaEffectFrameEditorDispatcher"))}),null);
__d("MediaEffectValidationDialogContainer.react",["fbt","FluxContainer","MediaEffectDialogValidationConfigs","MediaEffectFrameEditorDispatcher","MediaEffectMetadataActionCreators","MediaEffectValidationStore","React","XUIButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","nullthrows"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$MediaEffectValidationDialogContainer1=function(){this.state.validationType&&c("MediaEffectMetadataActionCreators").removeValidation(this.state.validationType)}.bind(this),m}k.getStores=function(){return[c("MediaEffectValidationStore")]};k.calculateState=function(){return{validationType:c("MediaEffectValidationStore").getBlockingValidation()}};k.prototype.componentWillMount=function(){c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};k.prototype.render=function(){return this.state.validationType?c("React").createElement(c("XUIDialog.react"),{layerHideOnBlur:false,shown:true,width:445},c("React").createElement(c("XUIDialogTitle.react"),{showCloseButton:false},c("MediaEffectDialogValidationConfigs").getContentByType(this.state.validationType).title),c("React").createElement(c("XUIDialogBody.react"),null,c("MediaEffectDialogValidationConfigs").getContentByType(c("nullthrows")(this.state.validationType)).content),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIButton.react"),{label:h._("OK"),onClick:this.$MediaEffectValidationDialogContainer1,use:"confirm"}))):null};f.exports=c("FluxContainer").create(k)}),null);
__d("MediaEffectFrameEditorTemplateGrid.react",["cx","ix","Grid.react","MediaEffectMetadataActionCreators","Image.react","React","ScrollableArea.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l,m,n=c("Grid.react").GridItem;j=babelHelpers.inherits(o,c("React").PureComponent);k=j&&j.prototype;function o(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.$TemplateButton1=function(){c("MediaEffectMetadataActionCreators").applyTemplate(this.props.template)}.bind(this),r}o.prototype.render=function(){var q=this.props.template?this.props.template.previewURL:i("86677");return c("React").createElement("a",{className:"_2w6x"+(this.props.selected?" _2w6_":"")+" _3-fi"+(!this.props.template?" _2w70":"")+" _3-fj",href:"#",onClick:this.$TemplateButton1},c("React").createElement(c("Image.react"),{className:"_2w71",src:q}))};l=babelHelpers.inherits(p,c("React").PureComponent);m=l&&l.prototype;p.prototype.render=function(){var q=98*this.props.rows+6,r=this.props,s=r.activeTemplate,t=r.showNoTemplate,u=r.templates;return c("React").createElement("div",{className:"_2w72"},c("React").createElement(c("ScrollableArea.react"),{height:q},c("React").createElement("div",{className:"_2w73"},c("React").createElement(c("Grid.react"),{cols:2},t?c("React").createElement(n,null,c("React").createElement(o,{selected:s===null})):null,u.toArray().map(function(v){return c("React").createElement(n,{key:v.templateFBID},c("React").createElement(o,{selected:v===s||s&&s.sourceTemplateFBID&&v.templateFBID===s.sourceTemplateFBID,template:v}))})))))};function p(){l.apply(this,arguments)}p.defaultProps={rows:3,showNoTemplate:true};f.exports=p}),null);
__d("MediaEffectColorPaletteWheel.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l;i=babelHelpers.inherits(m,c("React").PureComponent);j=i&&i.prototype;m.prototype.render=function(){var o=360*this.props.size,p=Math.max(o,180)-180,q=Math.min(o,180);return c("React").createElement("div",{className:"_3p7c",style:{transform:"rotate("+this.props.offset*360+"deg)"}},c("React").createElement("div",{className:"_3p7f _3p7e"},c("React").createElement("div",{className:"_3p7d",style:{backgroundColor:this.props.color,transform:"translateX(-100%) rotate("+p+"deg)"}})),c("React").createElement("div",{className:"_3p7g _3p7e"},c("React").createElement("div",{className:"_3p7d",style:{backgroundColor:this.props.color,transform:"translateX(-100%) rotate("+q+"deg)"}})))};function m(){i.apply(this,arguments)}k=babelHelpers.inherits(n,c("React").PureComponent);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.$MediaEffectColorPaletteWheel1=function(){this.props.onHover&&this.props.onHover(true)}.bind(this),this.$MediaEffectColorPaletteWheel2=function(){this.props.onHover&&this.props.onHover(false)}.bind(this),p}n.prototype.render=function(){var o=this.props.ratio.reduce(function(r,s){return r+s},0),p=this.props.ratio.map(function(r,s){return this.props.ratio.slice(0,s).reduce(function(t,u){return t+u},0)/o}.bind(this)),q=this.props.palette.components.map(function(r,s){return c("React").createElement(m,{color:r.toRGB(),key:s,offset:p[s],size:this.props.ratio[s]/o})}.bind(this));return c("React").createElement("div",{className:"_3p7b",onClick:this.props.onClick,onMouseEnter:this.$MediaEffectColorPaletteWheel1,onMouseLeave:this.$MediaEffectColorPaletteWheel2,role:"presentation",style:{height:this.props.size,width:this.props.size}},q)};n.defaultProps={ratio:[4,3,2,1],size:50};f.exports=n}),null);
__d("MediaEffectFrameEditorTemplatePaletteSelector.react",["cx","MediaEffectColorPaletteWheel.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l;i=babelHelpers.inherits(m,c("React").PureComponent);j=i&&i.prototype;function m(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$PaletteWheelSelector1=function(t){this.props.onPaletteSelect(t?this.props.palette:null)}.bind(this),p}m.prototype.render=function(){return c("React").createElement("div",{className:"_4xob"},c("React").createElement(c("MediaEffectColorPaletteWheel.react"),{onHover:this.$PaletteWheelSelector1,palette:this.props.palette}))};k=babelHelpers.inherits(n,c("React").PureComponent);l=k&&k.prototype;n.prototype.render=function(){return c("React").createElement("div",{className:"_4xob"},this.props.colorPalettes.map(function(o,p){return c("React").createElement(m,{key:p,onPaletteSelect:this.props.onPaletteSelect,palette:o})}.bind(this)))};function n(){k.apply(this,arguments)}f.exports=n}),null);
__d("MediaEffectFrameEditorTemplatePaletteSelectorContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectFrameEditorTemplatePaletteSelector.react","MediaEffectTemplateDataStore","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("MediaEffectTemplateDataStore")]};j.calculateState=function(k,l,m){return{colorPalettes:c("MediaEffectTemplateDataStore").getState().systemColorPalettes}};j.prototype.componentWillMount=function(){c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};j.prototype.render=function(){var k=babelHelpers["extends"]({},this.props,this.state);return c("React").createElement(c("MediaEffectFrameEditorTemplatePaletteSelector.react"),k)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j,{withProps:true})}),null);
__d("MediaEffectFrameEditorTemplatePanel.react",["cx","fbt","immutable","MediaEffectFrameEditorBirthdayCelebrationTemplateSelector.react","MediaEffectFrameEditorMultiCategoryTemplateSelector.react","MediaEffectFrameEditorTemplateGrid.react","MediaEffectFrameEditorTemplateVariationPicker.react","React","XUIText.react","mediaEffectGKCheck"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("immutable").List;function m(o){var p=o.templates;if(!p||p.size<2||!c("mediaEffectGKCheck")("media_effect_frame_editor_template_variations"))return null;return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{className:"_38wf",display:"block"},i._("Color Palette")),c("React").createElement(c("MediaEffectFrameEditorTemplateVariationPicker.react"),{activeTemplate:o.activeTemplate,templates:p}))}j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;n.prototype.$MediaEffectFrameEditorTemplatePanel1=function(o,p){__p&&__p();if(o===1||p<=5){var q=this.props.categories.reduce(function(t,u){return t.concat(u)},l());return c("React").createElement(c("MediaEffectFrameEditorTemplateGrid.react"),{activeTemplate:this.props.activeTemplate,templates:q})}if(o===2&&this.props.categories.has("Birthdays")&&this.props.categories.get("Birthdays").size>0&&this.props.categories.has("Celebrations")&&this.props.categories.get("Celebrations").size>0){var r=this.props.categories.get("Birthdays"),s=this.props.categories.get("Celebrations");return c("React").createElement(c("MediaEffectFrameEditorBirthdayCelebrationTemplateSelector.react"),{activeTemplate:this.props.activeTemplate,birthdayTemplates:r,celebrationTemplates:s})}return c("React").createElement(c("MediaEffectFrameEditorMultiCategoryTemplateSelector.react"),{activeTemplate:this.props.activeTemplate,categories:this.props.categories})};n.prototype.render=function(){var o=this.props,p=o.activeTemplate,q=o.categories,r=q.count(),s=q.reduce(function(t,u){return t+u.size},0);if(r===0||s===0)return null;return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{className:"_38wf",display:"block"},i._("Template")),this.$MediaEffectFrameEditorTemplatePanel1(r,s),c("React").createElement("div",{className:"_3-8x"},c("React").createElement(m,{activeTemplate:p,templates:this.props.variations})))};function n(){j.apply(this,arguments)}f.exports=n}),null);
__d("MediaEffectFrameEditorTemplatePanelContainer.react",["FluxContainer","immutable","MediaEffectFrameEditorDispatcher","MediaEffectFrameEditorTemplatePanel.react","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorDataStore","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").List;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;k.getStores=function(){return[c("MediaEffectReactFrameEditorDataStore"),c("MediaEffectReactFrameEditorCanvasDataStore")]};k.calculateState=function(l,m){var n=c("MediaEffectReactFrameEditorDataStore").getState(),o=c("MediaEffectReactFrameEditorCanvasDataStore").getState();return{activeTemplate:o.getTemplate(n.templateFBID),categories:o.templateCategories.map(function(p){return j(p.map(function(q){return o.templates.get(q)}))}),templates:o.templates,variations:o.getTemplateVariants(n.templateFBID)}};k.prototype.componentWillMount=function(){c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};k.prototype.render=function(){var l=babelHelpers["extends"]({},this.props,this.state);return c("React").createElement(c("MediaEffectFrameEditorTemplatePanel.react"),l)};function k(){h.apply(this,arguments)}k.defaultProps={};f.exports=c("FluxContainer").create(k,{withProps:true})}),null);
__d("MediaEffectFrameEditorTemplateVariationPicker.react",["cx","Grid.react","MediaEffectMetadataActionCreators","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("Grid.react").GridItem;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MediaEffectFrameEditorTemplateVariationPicker1=function(r){return function(){return c("MediaEffectMetadataActionCreators").applyTemplate(r)}},n}l.prototype.render=function(){return c("React").createElement(c("Grid.react"),{cols:5},this.props.templates.map(function(m){return c("React").createElement(k,{key:m.templateFBID},c("React").createElement("a",{className:"_18pf _2w6x"+(m===this.props.activeTemplate?" _2w6_":"")+" _zjf",href:"#",onClick:this.$MediaEffectFrameEditorTemplateVariationPicker1(m),style:{backgroundColor:m.getColor()}}))}.bind(this)))};f.exports=l}),null);
__d("MediaEffectFrameEditorTemplatePaletteComponentEditor.react",["cx","Event","FBSimpleSlider.react","React","SubscriptionsHandler","chroma","color-picker"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l;i=babelHelpers.inherits(m,c("React").PureComponent);j=i&&i.prototype;m.prototype.render=function(){return c("React").createElement("div",null,c("React").createElement("span",null,this.props.label),c("React").createElement(c("FBSimpleSlider.react"),{max:1,min:0,onChange:this.props.onChange,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,value:this.props.value}))};function m(){i.apply(this,arguments)}k=babelHelpers.inherits(n,c("React").PureComponent);l=k&&k.prototype;function n(o){__p&&__p();l.constructor.call(this,o);this.$MediaEffectFrameEditorTemplatePaletteComponentEditor4=function(p){var q=this.props.component;if(!q)return;var r=c("chroma").hex(p).hsl();if(isNaN(r[0]))r[0]=q.hue;this.props.onComponentChange(q.set("hue",r[0]/360).set("saturation",r[1]).set("lightness",r[2]))}.bind(this);this.$MediaEffectFrameEditorTemplatePaletteComponentEditor5=function(p){var q=this.props.component;if(!q)return;this.props.onComponentChange(q.set("hueVariation",p/2))}.bind(this);this.$MediaEffectFrameEditorTemplatePaletteComponentEditor6=function(p){var q=this.props.component;if(!q)return;this.props.onComponentChange(q.set("saturationVariation",p))}.bind(this);this.$MediaEffectFrameEditorTemplatePaletteComponentEditor7=function(p){var q=this.props.component;if(!q)return;this.props.onComponentChange(q.set("lightnessVariation",p))}.bind(this);this.$MediaEffectFrameEditorTemplatePaletteComponentEditor8=function(){if(this.props.onHighlightComponent)this.props.onHighlightComponent(this.props.componentIndex);this.$MediaEffectFrameEditorTemplatePaletteComponentEditor2=true}.bind(this);this.$MediaEffectFrameEditorTemplatePaletteComponentEditor3=function(){if(this.$MediaEffectFrameEditorTemplatePaletteComponentEditor2){if(this.props.onHighlightComponent)this.props.onHighlightComponent(null);this.$MediaEffectFrameEditorTemplatePaletteComponentEditor2=false}}.bind(this);this.$MediaEffectFrameEditorTemplatePaletteComponentEditor1=new(c("SubscriptionsHandler"))()}n.prototype.componentWillMount=function(){this.$MediaEffectFrameEditorTemplatePaletteComponentEditor1.addSubscriptions(c("Event").listen(document.body,"mouseup",this.$MediaEffectFrameEditorTemplatePaletteComponentEditor3))};n.prototype.componentWillUnmount=function(){this.$MediaEffectFrameEditorTemplatePaletteComponentEditor1.release()};n.prototype.render=function(){var o=this.props.component;return c("React").createElement("div",{className:"_1m8o"},o?c("React").createElement("div",null,c("React").createElement("div",{className:"_5-nq",onMouseDown:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor8},c("React").createElement(c("color-picker"),{color:o.toRGB(),onChange:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor4})),this.props.showVariation?c("React").createElement("div",null,c("React").createElement(m,{label:"Hue Variation",onChange:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor5,onMouseDown:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor8,onMouseUp:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor3,value:o.hueVariation*2}),c("React").createElement(m,{label:"Saturation Variation",onChange:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor6,onMouseDown:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor8,onMouseUp:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor3,value:o.saturationVariation}),c("React").createElement(m,{label:"Lightness Variation",onChange:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor7,onMouseDown:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor8,onMouseUp:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor3,value:o.lightnessVariation})):null):null)};n.defaultProps={showVariation:true,onHighlightComponent:null};f.exports=n}),null);
__d("MediaEffectFrameEditorTemplatePaletteComponentSelector.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l,m=4;i=babelHelpers.inherits(n,c("React").PureComponent);j=i&&i.prototype;function n(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.$PaletteComponentButton1=function(){this.props.onButtonClick(this.props.index)}.bind(this),this.$PaletteComponentButton2=function(){if(this.props.onHighlightComponent)this.props.onHighlightComponent(this.props.index)}.bind(this),this.$PaletteComponentButton3=function(){if(this.props.onHighlightComponent)this.props.onHighlightComponent(null)}.bind(this),q}n.prototype.render=function(){return c("React").createElement("a",{className:"_wru _2w6x"+(this.props.selected?" _2w6_":"")+" _3-fi",href:"#",onClick:this.$PaletteComponentButton1,onMouseEnter:this.$PaletteComponentButton2,onMouseLeave:this.$PaletteComponentButton3,style:{backgroundColor:this.props.color}},this.props.index)};k=babelHelpers.inherits(o,c("React").PureComponent);l=k&&k.prototype;o.prototype.render=function(){return c("React").createElement("div",{className:"_2__5"},this.props.colorPalette.components.map(function(p,q){return c("React").createElement(n,{color:p.toRGB(),index:q+1,key:q+1,onButtonClick:this.props.onButtonClick,onHighlightComponent:this.props.onHighlightComponent,selected:this.props.selectedComponentIndex===q+1})}.bind(this)),this.props.onAddComponent&&this.props.colorPalette.components.size<m?c("React").createElement("a",{className:"_wru",href:"#",onClick:this.props.onAddComponent},"+"):null)};function o(){k.apply(this,arguments)}o.defaultProps={onAddComponent:null,onHighlightComponent:null};f.exports=o}),null);
__d("MediaEffectTemplateColorStep.react",["cx","MediaEffectColorPaletteComponentRecord","MediaEffectFrameEditorPixelCanvasContainer.react","MediaEffectFrameEditorTemplatePaletteComponentEditor.react","MediaEffectFrameEditorTemplatePaletteComponentSelector.react","MediaEffectFrameEditorTemplatePaletteSelectorContainer.react","MediaEffectMetadataActionCreators","React","colr-convert"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;function k(l){__p&&__p();j.constructor.call(this,l);this.$MediaEffectTemplateColorStep1=[];this.$MediaEffectTemplateColorStep2=function(m){if(m[3]===0)return;this.$MediaEffectTemplateColorStep1.push(m);if(this.state.selectedComponentIndex)c("MediaEffectMetadataActionCreators").setTemplateSourceColorPalette(this.props.colorPalette.set("components",this.props.colorPalette.components.set(this.state.selectedComponentIndex-1,this.$MediaEffectTemplateColorStep3())))}.bind(this);this.$MediaEffectTemplateColorStep4=function(){this.$MediaEffectTemplateColorStep1=[]}.bind(this);this.$MediaEffectTemplateColorStep5=function(m){this.setState({selectedComponentIndex:m})}.bind(this);this.$MediaEffectTemplateColorStep6=function(){var m=this.props.colorPalette.set("components",this.props.colorPalette.components.push(new(c("MediaEffectColorPaletteComponentRecord"))()));c("MediaEffectMetadataActionCreators").setTemplateSourceColorPalette(m);this.setState({selectedComponentIndex:m.components.size})}.bind(this);this.$MediaEffectTemplateColorStep7=function(m){var n=this.state.selectedComponentIndex;if(!n)return;var o=this.props.colorPalette.set("components",this.props.colorPalette.components.set(n-1,m));c("MediaEffectMetadataActionCreators").setTemplateSourceColorPalette(o)}.bind(this);this.$MediaEffectTemplateColorStep8=function(m){this.setState({transformPalette:m})}.bind(this);this.$MediaEffectTemplateColorStep9=function(m){this.setState({highlightComponent:m})}.bind(this);this.state={selectedComponentIndex:this.props.colorPalette.components.size>0?1:null,transformPalette:null,highlightComponent:null}}k.prototype.$MediaEffectTemplateColorStep3=function(){__p&&__p();var l=this.$MediaEffectTemplateColorStep1.map(c("colr-convert").rgb.hsl),m=l.map(function(x){return x[0]/360}).sort(),n=l.map(function(x){return x[1]/100}),o=l.map(function(x){return x[2]/100}),p=n.reduce(function(x,y){return Math.max(x,y)}),q=n.reduce(function(x,y){return Math.min(x,y)}),r=o.reduce(function(x,y){return Math.max(x,y)}),s=o.reduce(function(x,y){return Math.min(x,y)}),t=m.map(function(w,x){return x===m.length-1?m[0]-w+1:m[x+1]-w}),u=t.indexOf(Math.max.apply(Math,t)),v=1-t[u],w=m[u]-v/2;if(w<0)w+=1;return new(c("MediaEffectColorPaletteComponentRecord"))({hue:w,saturation:(p+q)/2,lightness:(r+s)/2,hueVariation:Math.min(v*1.1+.05,.5),saturationVariation:Math.min((p-q)/2*1.1+.1,1),lightnessVariation:Math.min((r-s)/2*1.1+.1,1)})};k.prototype.render=function(){return c("React").createElement("div",{className:"_2yb8"},c("React").createElement("div",{className:"_2yb9"},c("React").createElement("div",{className:"_2yba"},c("React").createElement(c("MediaEffectFrameEditorPixelCanvasContainer.react"),{highlightComponent:this.state.highlightComponent,onAddSample:this.$MediaEffectTemplateColorStep2,onSamplingStart:this.$MediaEffectTemplateColorStep4,sourcePalette:this.props.colorPalette,transformPalette:this.state.transformPalette})),c("React").createElement(c("MediaEffectFrameEditorTemplatePaletteComponentSelector.react"),{colorPalette:this.props.colorPalette,onAddComponent:this.$MediaEffectTemplateColorStep6,onButtonClick:this.$MediaEffectTemplateColorStep5,onHighlightComponent:this.$MediaEffectTemplateColorStep9,selectedComponentIndex:this.state.selectedComponentIndex}),c("React").createElement(c("MediaEffectFrameEditorTemplatePaletteComponentEditor.react"),{component:this.state.selectedComponentIndex?this.props.colorPalette.components.get(this.state.selectedComponentIndex-1):null,componentIndex:this.state.selectedComponentIndex,onComponentChange:this.$MediaEffectTemplateColorStep7,onHighlightComponent:this.$MediaEffectTemplateColorStep9})),c("React").createElement(c("MediaEffectFrameEditorTemplatePaletteSelectorContainer.react"),{onPaletteSelect:this.$MediaEffectTemplateColorStep8}))};f.exports=k}),null);
__d("MediaEffectTemplateColorStepContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectTemplateColorStep.react","MediaEffectTemplateDataStore","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("MediaEffectTemplateDataStore")]};j.calculateState=function(k,l){var m=c("MediaEffectTemplateDataStore").getState();return{colorPalette:m.sourceColorPalette}};j.prototype.componentWillMount=function(){c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};j.prototype.render=function(){return c("React").createElement(c("MediaEffectTemplateColorStep.react"),this.state)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("MediaEffectTemplateDataStore",["FluxReduceStore","immutable","MediaEffectColorPaletteRecord","MediaEffectFrameCreateDialogDataStore","MediaEffectFrameEditorDispatcher","MediaEffectReactFrameDeserializer","MediaEffectReactFrameEditorDataStore","MediaEffectReactFrameEditorImageAssetRecord","MediaEffectTemplateVariationRecord"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l=c("immutable").List,m=c("immutable").Map,n=c("immutable").Record,o=1,p=3;function q(){return o++}h=babelHelpers.inherits(r,n({systemColorPalettes:l(),userColorPalettes:l(),sourceColorPalette:new(c("MediaEffectColorPaletteRecord"))({components:l()}),templateVariations:m(),currentTemplateVariationID:null,sourceFrameData:c("MediaEffectReactFrameEditorDataStore").getInitialState()}));i=h&&h.prototype;r.prototype.withSystemColorPalettes=function(t){var u=this.systemColorPalettes.withMutations(function(v){t.forEach(function(w){var x=c("MediaEffectReactFrameDeserializer").deserializeColorPalette(w);if(!v.contains(x))v.push(x)})});while(u.size<p)u=u.push(c("MediaEffectColorPaletteRecord").random());return this.set("systemColorPalettes",u)};r.prototype.withVariationMutation=function(t,u){var v=this.templateVariations,w=v.get(t);if(!w)return this;return this.set("templateVariations",v.set(t,w.withMutations(u)))};r.prototype.reset=function(){return new r().set("systemColorPalettes",this.systemColorPalettes)};function r(){h.apply(this,arguments)}j=babelHelpers.inherits(s,c("FluxReduceStore"));k=j&&j.prototype;s.prototype.getInitialState=function(){return new r()};s.prototype.reduce=function(t,u){__p&&__p();if(!c("MediaEffectFrameCreateDialogDataStore").isTemplateFlow())return t;switch(u.type){case"add/systemColorPalettes":t=t.withSystemColorPalettes(u.paletteData);break;case"set/userColorPalette":t=t.set("userColorPalettes",t.userColorPalettes.set(u.index-1,u.palette));break;case"set/currentTemplateVariation":t=t.set("currentTemplateVariationID",u.localTemplateID);break;case"change/step":t=t.set("currentTemplateVariationID",null);break;case"set/templateSourceColorPalette":t=t.set("sourceColorPalette",u.palette);break;case"new/templateVariation":var v=q(),w=u.templateVariation.set("localTemplateID",v);t=t.set("templateVariations",t.templateVariations.set(v,w));t=t.set("currentTemplateVariationID",v);w.frameData.assets.forEach(function(A){if(A instanceof c("MediaEffectReactFrameEditorImageAssetRecord"))A.uploadForVariation(v)});break;case"init/frameData":t=this.$MediaEffectTemplateDataStore1(t.reset());var x=u.data;if(x){t=t.set("sourceColorPalette",c("MediaEffectReactFrameDeserializer").deserializeColorPalette(x.color_palette));x.variations.forEach(function(w){var v=q();t=t.set("templateVariations",t.templateVariations.set(v,new(c("MediaEffectTemplateVariationRecord"))({localTemplateID:v,colorPalette:c("MediaEffectReactFrameDeserializer").deserializeColorPalette(w.color_palette),templateVariationFBID:w.fbid,frameData:c("MediaEffectReactFrameDeserializer").deserializeData(w)})))})}break;case"add/image":case"replace/image":case"add/text":case"duplicate/asset":case"update/assetPosition":case"update/assetSize":case"update/assetNativeSize":case"update/asset/raise":case"update/asset/lower":case"delete/asset":case"update/textContent":case"update/textFonts":case"update/textColors":case"update/textAlignments":case"update/asset/contentMustBeUpdated":t=this.$MediaEffectTemplateDataStore1(t);break;case"update/stickerFBID":var y=u.localAssetID,z=u.stickerFBID;if(!u.localTemplateID)t.set("sourceFrameData",t.sourceFrameData.withAssetMutation(y,function(A){return A.set("stickerFBID",z)}));else t=t.withVariationMutation(u.localTemplateID,function(w){return w.set("frameData",w.frameData.withAssetMutation(y,function(A){return A.set("stickerFBID",z)}))});break}return t};s.prototype.$MediaEffectTemplateDataStore1=function(t){c("MediaEffectFrameEditorDispatcher").waitFor([c("MediaEffectReactFrameEditorDataStore").getDispatchToken()]);if(!t.currentTemplateVariationID)t=t.set("sourceFrameData",c("MediaEffectReactFrameEditorDataStore").getState());else t=t.withVariationMutation(t.currentTemplateVariationID,function(u){return u.set("frameData",c("MediaEffectReactFrameEditorDataStore").getState())});return t};s.prototype.getFrameData=function(t){var u=this.getState();if(!t)return u.sourceFrameData;else return u.templateVariations.get(t).frameData};function s(){j.apply(this,arguments)}f.exports=new s(c("MediaEffectFrameEditorDispatcher"))}),null);
__d("MediaEffectTemplatePalettePicker.react",["cx","MediaEffectColorPaletteWheel.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l;i=babelHelpers.inherits(m,c("React").PureComponent);j=i&&i.prototype;function m(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$PaletteWheelSelector1=function(t){this.props.previewPalette(t?this.props.palette:null)}.bind(this),this.$PaletteWheelSelector2=function(){this.props.selectPalette(this.props.palette,this.props.userIndex)}.bind(this),p}m.prototype.render=function(){return c("React").createElement("div",{className:"_4xob"},c("React").createElement(c("MediaEffectColorPaletteWheel.react"),{onClick:this.$PaletteWheelSelector2,onHover:this.$PaletteWheelSelector1,palette:this.props.palette}))};k=babelHelpers.inherits(n,c("React").PureComponent);l=k&&k.prototype;n.prototype.render=function(){return c("React").createElement("div",{className:"_w63"},c("React").createElement(m,{palette:this.props.sourcePalette,previewPalette:this.props.previewPalette,selectPalette:this.props.selectPalette,userIndex:null}),this.props.systemPalettes.map(function(o,p){return c("React").createElement(m,{key:p,palette:o,previewPalette:this.props.previewPalette,selectPalette:this.props.selectPalette,userIndex:null})}.bind(this)),this.props.userPalettes.map(function(o,p){return c("React").createElement(m,{key:p,palette:o,previewPalette:this.props.previewPalette,selectPalette:this.props.selectPalette,userIndex:p+1})}.bind(this)))};function n(){k.apply(this,arguments)}f.exports=n}),null);
__d("MediaEffectTemplateNewColorStep.react",["cx","MediaEffectFrameEditorPixelCanvasContainer.react","MediaEffectFrameEditorTemplatePaletteComponentEditor.react","MediaEffectFrameEditorTemplatePaletteComponentSelector.react","MediaEffectMetadataActionCreators","MediaEffectTemplatePalettePicker.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;function k(l){__p&&__p();j.constructor.call(this,l);this.$MediaEffectTemplateNewColorStep1=function(m){this.setState({selectedComponentIndex:m})}.bind(this);this.$MediaEffectTemplateNewColorStep2=function(m){var n=this.state.selectedComponentIndex;if(!n)return;var o=this.state.selectedPalette.set("components",this.state.selectedPalette.components.set(n-1,m)),p=this.state.selectedUserPaletteIndex,q=p?p:this.props.userPalettes.size+1;c("MediaEffectMetadataActionCreators").setUserColorPalette(o,q);this.setState({selectedUserPaletteIndex:q,selectedPalette:o})}.bind(this);this.$MediaEffectTemplateNewColorStep3=function(m,n){this.setState({selectedPalette:m,selectedUserPaletteIndex:n,selectedComponentIndex:1})}.bind(this);this.$MediaEffectTemplateNewColorStep4=function(m){this.setState({previewPalette:m})}.bind(this);this.state={selectedComponentIndex:this.props.sourcePalette.components.size>0?1:null,previewPalette:null,selectedUserPaletteIndex:null,selectedPalette:l.sourcePalette}}k.prototype.render=function(){return c("React").createElement("div",{className:"_2yb9"},c("React").createElement(c("MediaEffectTemplatePalettePicker.react"),{previewPalette:this.$MediaEffectTemplateNewColorStep4,selectPalette:this.$MediaEffectTemplateNewColorStep3,sourcePalette:this.props.sourcePalette,systemPalettes:this.props.systemPalettes,userPalettes:this.props.userPalettes}),c("React").createElement(c("MediaEffectFrameEditorTemplatePaletteComponentSelector.react"),{colorPalette:this.state.selectedPalette,onButtonClick:this.$MediaEffectTemplateNewColorStep1,selectedComponentIndex:this.state.selectedComponentIndex}),c("React").createElement(c("MediaEffectFrameEditorTemplatePaletteComponentEditor.react"),{component:this.state.selectedComponentIndex&&this.state.selectedPalette?this.state.selectedPalette.components.get(this.state.selectedComponentIndex-1):null,componentIndex:this.state.selectedComponentIndex,onComponentChange:this.$MediaEffectTemplateNewColorStep2,showVariation:false}),c("React").createElement("div",{className:"_2yba"},c("React").createElement(c("MediaEffectFrameEditorPixelCanvasContainer.react"),{sourcePalette:this.props.sourcePalette,transformPalette:this.state.previewPalette?this.state.previewPalette:this.state.selectedPalette})))};f.exports=k}),null);
__d("MediaEffectTemplateNewColorStepContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectTemplateDataStore","MediaEffectTemplateNewColorStep.react","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("MediaEffectTemplateDataStore")]};j.calculateState=function(k,l){var m=c("MediaEffectTemplateDataStore").getState();return{sourcePalette:m.sourceColorPalette,systemPalettes:m.systemColorPalettes,userPalettes:m.userColorPalettes}};j.prototype.componentWillMount=function(){c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};j.prototype.render=function(){return c("React").createElement(c("MediaEffectTemplateNewColorStep.react"),this.state)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("MediaEffectTemplateVariationCanvas.react",["cx","MediaEffectReactFrameEditorCanvasContainer.react","React","ResponsiveBlock.react","Vector","mediaEffectGKCheck"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.$MediaEffectTemplateVariationCanvas2=function(m,n){this.setState({size:new(c("Vector"))(m,n)})}.bind(this);this.state={size:null}}k.prototype.componentDidMount=function(){this.$MediaEffectTemplateVariationCanvas1=true};k.prototype.componentWillUnmount=function(){this.$MediaEffectTemplateVariationCanvas1=false};k.prototype.setState=function(l){if(this.$MediaEffectTemplateVariationCanvas1)j.setState.call(this,l)};k.prototype.$MediaEffectTemplateVariationCanvas3=function(){var l=this.state.size;if(!l)return null;return c("React").createElement("div",{className:"_3g0k"},c("React").createElement(c("MediaEffectReactFrameEditorCanvasContainer.react"),{enableEditorFreeText:c("mediaEffectGKCheck")("media_effect_template")||c("mediaEffectGKCheck")("media_effect_frame_editor_free_text"),enableFontSettingsDialog:c("mediaEffectGKCheck")("media_effect_font_settings_dialog"),height:l.y,width:l.x}))};k.prototype.render=function(){return c("React").createElement("div",{className:"_2yba"},c("React").createElement(c("ResponsiveBlock.react"),{className:"_3g0j",onResize:this.$MediaEffectTemplateVariationCanvas2},this.$MediaEffectTemplateVariationCanvas3()))};f.exports=k}),null);
__d("MediaEffectTemplateVariationRecord",["regeneratorRuntime","Promise","immutable","MediaEffectColorPaletteRecord","MediaEffectReactFrameEditorDataStore","MediaEffectTemplateDataStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").Map,k=c("immutable").Record;h=babelHelpers.inherits(l,k({localTemplateID:null,colorPalette:c("MediaEffectColorPaletteRecord"),templateVariationFBID:null,frameData:c("MediaEffectReactFrameEditorDataStore").getInitialState()}));i=h&&h.prototype;l.fromSourceTemplate=function m(n){__p&&__p();var o,p,q,r,s,t,u;return c("regeneratorRuntime").async(function v(w){__p&&__p();while(1)switch(w.prev=w.next){case 0:o=c("MediaEffectTemplateDataStore").getState();p=o.sourceColorPalette;q=o.sourceFrameData;r=q.assets.valueSeq().toArray().map(function(x){return x.reColored(p,n)});w.next=6;return c("regeneratorRuntime").awrap(c("Promise").all(r));case 6:s=w.sent;t=j(s.map(function(x){return[x.localAssetID,x]}));u=q.withMutations(function x(y){return c("regeneratorRuntime").async(function z(A){while(1)switch(A.prev=A.next){case 0:y.set("frameFBID",null);y.set("templateFBID",null);y.set("assets",t);case 3:case"end":return A.stop()}},null,this)});return w.abrupt("return",new l({colorPalette:n,frameData:u}));case 10:case"end":return w.stop()}},null,this)};function l(){h.apply(this,arguments)}f.exports=l}),null);
__d("MediaEffectTemplateVariationAvailablePalettePicker.react",["cx","MediaEffectColorPaletteWheel.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l;i=babelHelpers.inherits(m,c("React").PureComponent);j=i&&i.prototype;function m(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$PaletteWheelSelector1=function(t){this.props.previewPalette(t?this.props.palette:null)}.bind(this),this.$PaletteWheelSelector2=function(){this.props.createVariation(this.props.palette)}.bind(this),p}m.prototype.render=function(){return c("React").createElement("div",{className:"_4xob"},c("React").createElement(c("MediaEffectColorPaletteWheel.react"),{onClick:this.$PaletteWheelSelector2,onHover:this.$PaletteWheelSelector1,palette:this.props.palette}))};k=babelHelpers.inherits(n,c("React").PureComponent);l=k&&k.prototype;n.prototype.render=function(){return c("React").createElement("div",{className:"_w63"},this.props.colorPalettes.map(function(o,p){return c("React").createElement(m,{createVariation:this.props.createVariation,key:p,palette:o,previewPalette:this.props.previewPalette})}.bind(this)))};function n(){k.apply(this,arguments)}f.exports=n}),null);
__d("MediaEffectTemplateVariationSelector.react",["cx","MediaEffectColorPaletteWheel.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l;i=babelHelpers.inherits(m,c("React").PureComponent);j=i&&i.prototype;function m(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$PaletteWheelSelector1=function(){if(!this.props.onVariationSelect)return;this.props.onVariationSelect(this.props.localTemplateID)}.bind(this),p}m.prototype.render=function(){return c("React").createElement("div",{className:"_4xob"},c("React").createElement(c("MediaEffectColorPaletteWheel.react"),{onClick:this.$PaletteWheelSelector1,palette:this.props.palette}))};k=babelHelpers.inherits(n,c("React").PureComponent);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.$MediaEffectTemplateVariationSelector1=function(){if(!this.props.onVariationSelect)return;this.props.onVariationSelect(null)}.bind(this),p}n.prototype.render=function(){return c("React").createElement("div",{className:"_w64"},c("React").createElement("div",{className:"_4xob"},c("React").createElement(c("MediaEffectColorPaletteWheel.react"),{onClick:this.$MediaEffectTemplateVariationSelector1,palette:this.props.sourceColorPalette})),this.props.templateVariations.valueSeq().map(function(o){return c("React").createElement(m,{key:o.localTemplateID,localTemplateID:o.localTemplateID,onVariationSelect:this.props.onVariationSelect,palette:o.colorPalette,selected:this.props.currentTemplateVariationID===o.localTemplateID})}.bind(this)))};f.exports=n}),null);
__d("MediaEffectTemplateVariationStep.react",["cx","immutable","MediaEffectFrameEditorConstants","MediaEffectFrameEditorPixelCanvasContainer.react","MediaEffectMetadataActionCreators","MediaEffectTemplateVariationAvailablePalettePicker.react","MediaEffectTemplateVariationCanvas.react","MediaEffectTemplateVariationSelector.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("immutable").OrderedSet,l=c("MediaEffectFrameEditorConstants").EDITOR_BUFFER_SIZE;i=babelHelpers.inherits(m,c("React").PureComponent);j=i&&i.prototype;function m(n){__p&&__p();j.constructor.call(this,n);this.$MediaEffectTemplateVariationStep1=function(o){c("MediaEffectMetadataActionCreators").setCurrentTemplateVariation(o);this.$MediaEffectTemplateVariationStep2(null)}.bind(this);this.$MediaEffectTemplateVariationStep3=function(o){c("MediaEffectMetadataActionCreators").createNewTemplateVariation(o);this.$MediaEffectTemplateVariationStep2(null)}.bind(this);this.$MediaEffectTemplateVariationStep2=function(o){this.setState({previewPalette:o})}.bind(this);this.state={previewPalette:null}}m.prototype.render=function(){var n=k(this.props.templateVariations.valueSeq().map(function(p){return p.colorPalette})),o=k(this.props.systemPalettes).union(this.props.userPalettes).subtract(n).toList();return c("React").createElement("div",{className:"_w62"},c("React").createElement(c("MediaEffectTemplateVariationAvailablePalettePicker.react"),{colorPalettes:o,createVariation:this.$MediaEffectTemplateVariationStep3,previewPalette:this.$MediaEffectTemplateVariationStep2}),c("React").createElement(c("MediaEffectTemplateVariationSelector.react"),{currentTemplateVariationID:this.props.currentTemplateVariationID,onVariationSelect:this.$MediaEffectTemplateVariationStep1,sourceColorPalette:this.props.sourceColorPalette,templateVariations:this.props.templateVariations}),this.state.previewPalette?c("React").createElement("div",{className:"_2yba"},c("React").createElement("div",{style:{position:"absolute",top:l,bottom:l,left:l,right:l}},c("React").createElement(c("MediaEffectFrameEditorPixelCanvasContainer.react"),{sourcePalette:this.props.sourceColorPalette,transformPalette:this.state.previewPalette?this.state.previewPalette:this.props.sourceColorPalette}))):c("React").createElement(c("MediaEffectTemplateVariationCanvas.react"),null))};f.exports=m}),null);
__d("MediaEffectTemplateVariationStepContainer.react",["FluxContainer","MediaEffectFrameEditorDispatcher","MediaEffectTemplateDataStore","MediaEffectTemplateVariationStep.react","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("MediaEffectTemplateDataStore")]};j.calculateState=function(k,l){var m=c("MediaEffectTemplateDataStore").getState();return{systemPalettes:m.systemColorPalettes,userPalettes:m.userColorPalettes,sourceColorPalette:m.sourceColorPalette,templateVariations:m.templateVariations,currentTemplateVariationID:m.currentTemplateVariationID}};j.prototype.componentWillMount=function(){c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.constructor.getStores())};j.prototype.render=function(){var k=babelHelpers["extends"]({},this.props,this.state);return c("React").createElement(c("MediaEffectTemplateVariationStep.react"),k)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("XMediaEffectFrameAsyncSubmitController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/effects/frame/submit/",{flow_type:{type:"Enum",required:true,enumType:1},creation_referrer:{type:"Enum",enumType:1},source_id:{type:"FBID"},action_context:{type:"String"},active_tab:{type:"Enum",enumType:1},preview_on_camera:{type:"Bool",defaultValue:false}})}),null);
__d("XMediaEffectMaskAsyncUploadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/effects/ar_effect/upload/",{effect_id:{type:"FBID"},preview_on_camera:{type:"Bool",defaultValue:false},need_update_review:{type:"Bool",defaultValue:false},review_job_id:{type:"FBID"}})}),null);
__d("MediaEffectRequestBuilder",["invariant","regeneratorRuntime","AsyncResponse","AsyncUploadRequest","FXEntMediaEffectSubmissionStatus","immutable","MediaEffectFrameCreateDialogDataStore","MediaEffectMaskUploadDataStore","MediaEffectMetadataActionCreators","MediaEffectMetadataStore","MediaEffectReactFrameEditorDataStore","MediaEffectReactFrameSerializer","MediaEffectTemplateDataStore","MediaEffectUserContext","XMediaEffectAsyncEditController","XMediaEffectFrameAsyncSubmitController","XMediaEffectMaskAsyncUploadController","emptyFunction"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l,m,n,o,p,q,r;function s(y){this.effectID=y;this.fbOnly=c("MediaEffectUserContext").includesFBOnly;this.previewOnCamera=false;this.onSuccessComplete=c("emptyFunction");this.onFailureComplete=c("emptyFunction")}s.forCreate=function(){return new this(null)};s.forUpdate=function(y){return new this(y)};s.prototype.setOnSuccessComplete=function(y){this.onSuccessComplete=y;return this};s.prototype.setOnFailureComplete=function(y){this.onFailureComplete=y;return this};s.prototype.setSendPreviewNotification=function(y){this.previewOnCamera=y;return this};s.prototype.genRequest=function y(){return c("regeneratorRuntime").async(function z(A){while(1)switch(A.prev=A.next){case 0:throw new Error("Abstract method!");case 1:case"end":return A.stop()}},null,this)};s.prototype.genSend=function y(){var z;return c("regeneratorRuntime").async(function A(B){while(1)switch(B.prev=B.next){case 0:B.next=2;return c("regeneratorRuntime").awrap(this.genRequest());case 2:z=B.sent;z.send();case 4:case"end":return B.stop()}},null,this)};i=babelHelpers.inherits(t,s);j=i&&i.prototype;t.prototype.getFrameData=function(y,z,A){return c("immutable").Map(c("MediaEffectMetadataStore").getRequestData(this.fbOnly)).withMutations(function(B){y.toSeq().forEach(function(C,D){B.set(D,C)});if(z)B.set("color_palette",z);if(A)B.set("variant_of_template",A)})};t.prototype.getFrameUploadRequest=function(y){var z=c("MediaEffectFrameCreateDialogDataStore").getState(),A=c("XMediaEffectFrameAsyncSubmitController").getURIBuilder().setString("action_context",JSON.stringify(z.eventDialogContext.actionContext)).setEnum("active_tab",z.eventDialogContext.activeTab).setFBID("source_id",z.sourceID).setEnum("flow_type",z.flowType).setEnum("creation_referrer",z.creationReferrer).setBool("preview_on_camera",this.previewOnCamera).getURI(),B=y.toObject();String(B.fbid)===String(this.effectID)||h(0);var C={thumbnail_file:B.thumbnail};return new(c("AsyncUploadRequest"))().setURI(A).setAllowCrossOrigin(false).setData(B).setFiles(C)};function t(){i.apply(this,arguments)}k=babelHelpers.inherits(u,t);l=k&&k.prototype;u.prototype.genRequest=function y(){__p&&__p();var z,A,B;return c("regeneratorRuntime").async(function C(D){__p&&__p();while(1)switch(D.prev=D.next){case 0:D.next=2;return c("regeneratorRuntime").awrap(c("MediaEffectReactFrameSerializer").genSerializeFrame(c("MediaEffectReactFrameEditorDataStore").getState()));case 2:z=D.sent;A=c("immutable").Map(z);B=this.getFrameUploadRequest(this.getFrameData(A,null));B.subscribe("success",function(E,F){this.onSuccessComplete(F.getResponse())}.bind(this));B.subscribe("failure",function(E,F){this.onFailureComplete(F.getResponse())}.bind(this));return D.abrupt("return",B);case 8:case"end":return D.stop()}},null,this)};function u(){k.apply(this,arguments)}m=babelHelpers.inherits(v,t);n=m&&m.prototype;v.prototype.genRequest=function y(){__p&&__p();var z,A,B,C;return c("regeneratorRuntime").async(function D(E){__p&&__p();while(1)switch(E.prev=E.next){case 0:z=c("MediaEffectTemplateDataStore").getState();E.next=3;return c("regeneratorRuntime").awrap(c("MediaEffectReactFrameSerializer").genSerializeFrame(c("MediaEffectReactFrameEditorDataStore").getState()));case 3:A=E.sent;B=c("immutable").Map(A);C=this.getFrameUploadRequest(this.getFrameData(B,z.sourceColorPalette.toString()));C.subscribe("success",function(F,G){__p&&__p();var H=0,I=G.getResponse(),J=I.payload;z.templateVariations.map(function K(L){__p&&__p();var A,M;return c("regeneratorRuntime").async(function N(O){__p&&__p();while(1)switch(O.prev=O.next){case 0:O.next=2;return c("regeneratorRuntime").awrap(c("MediaEffectReactFrameSerializer").genSerializeFrame(L.frameData));case 2:A=O.sent;M=this.getFrameUploadRequest(this.getFrameData(c("immutable").Map(A),L.colorPalette.toString(),J.effect.id));M.subscribe("success",function(F,P){H++;if(H===z.templateVariations.count())this.onSuccessComplete(J)}.bind(this));M.send();case 6:case"end":return O.stop()}},null,this)}.bind(this))}.bind(this));C.subscribe("failure",function(F,G){this.onFailureComplete(G.getResponse())}.bind(this));return E.abrupt("return",C);case 9:case"end":return E.stop()}},null,this)};function v(){m.apply(this,arguments)}o=babelHelpers.inherits(w,s);p=o&&o.prototype;w.prototype.genRequest=function(){return this.getRequest()};w.prototype.getRequest=function(){__p&&__p();var y=c("XMediaEffectMaskAsyncUploadController").getURIBuilder().setFBID("effect_id",this.effectID).setBool("preview_on_camera",this.previewOnCamera).getURI(),z=c("MediaEffectMetadataStore").getState(),A=c("MediaEffectMetadataStore").getRequestData(this.fbOnly),B=A.media_effect_save_as_draft,C=Object.assign({},A);A.media_effect_save_as_draft=true;var D=c("MediaEffectMaskUploadDataStore").getRequestFiles(),E=D.effect_review_material_id,F=D.thumbnail_file,G=babelHelpers.objectWithoutProperties(D,["effect_review_material_id","thumbnail_file"]);C.effect_review_material_id=E;C.need_update_review=(G.mask_files&&G.mask_files.length>0||G.project_file&&G.project_file.name.endsWith(".arexport"))&&this.effectID&&z.submissionStatus===c("FXEntMediaEffectSubmissionStatus").APPROVED;var H=new(c("AsyncUploadRequest"))().setURI(y).setAllowCrossOrigin(false).setData(C).setFiles({mask_thumbnail_file:F});H.subscribe("failure",function(I,J){this.onFailureComplete(J.getResponse())}.bind(this));H.subscribe("success",function(I,J){__p&&__p();var K=J.getResponse().payload.effect.id;c("MediaEffectMetadataActionCreators").updateEffectID(K);var L=J.getResponse().payload.updateReviewJobID,M=c("XMediaEffectMaskAsyncUploadController").getURIBuilder().setFBID("effect_id",K).setFBID("review_job_id",L).getURI(),N=new(c("AsyncUploadRequest"))().setURI(M).setAllowCrossOrigin(false).setData(C).setFiles(G);N.subscribe("complete",function(I,O){__p&&__p();var P=O.find(function(R){return!R.isSuccess()});if(P){this.onFailureComplete(P.getResponse());return}if(!B){C.media_effect_save_as_draft=false;var Q=new(c("AsyncUploadRequest"))().setURI(M).setAllowCrossOrigin(false).setData(C);Q.subscribe("success",function(I,J){this.onSuccessComplete(J.getResponse())}.bind(this));Q.subscribe("failure",function(I,J){this.onFailureComplete(J.getResponse())}.bind(this));Q.send()}else this.onSuccessComplete(O.length?O[O.length-1].getResponse():J.getResponse())}.bind(this));N.send()}.bind(this));return H};function w(){o.apply(this,arguments)}q=babelHelpers.inherits(x,s);r=q&&q.prototype;x.prototype.genRequest=function(){return this.getRequest()};x.prototype.getRequest=function(){var y=c("XMediaEffectAsyncEditController").getURIBuilder().setFBID("media_effect_id",this.effectID).getURI(),z=c("MediaEffectMetadataStore").getRequestData(this.fbOnly),A={thumbnail_file:z.thumbnail},B=new(c("AsyncUploadRequest"))().setURI(y).setAllowCrossOrigin(false).setData(z).setFiles(A);B.subscribe("success",function(C,D){this.onSuccessComplete(D.getResponse())}.bind(this));B.subscribe("failure",function(C,D){this.onFailureComplete(D.getResponse())}.bind(this));return B};function x(){q.apply(this,arguments)}f.exports={forMask:w,forFrame:u,forTemplate:v,forMetadata:x}}),null);
__d("EventPermalinkCameraFramesCreateWithDefaultFrame.react",["cx","fbt","ix","MediaEffectMetadataActionCreators","AsyncDialog","AsyncRequest","Button.react","DialogX","EventsActionsLogger","EventPermalinkCameraFramesLogging","FBToggleSwitch.react","FXEntMediaEffectStatus","Image.react","MediaEffectFlowType","MediaEffectCreateStep","MediaEffectHubViewTab","MediaEffectOwnerHubHeader.react","MediaEffectCreationReferrer","React","XMediaEffectCreateDialogController","XUICard.react","XUIText.react","XUICardSection.react","BackgroundImage.react"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=100,n=158;k=babelHelpers.inherits(o,c("React").PureComponent);l=k&&k.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.$EventPermalinkCameraFramesCreateWithDefaultFrame1=function(){c("EventPermalinkCameraFramesLogging").logClick(c("EventsActionsLogger").Target.FRAME_CREATE_RHC,this.props.eventID,this.props.actionContext);var u=c("XMediaEffectCreateDialogController").getURIBuilder().setEnum("flow_type",c("MediaEffectFlowType").EVENT).setFBID("source_id",this.props.eventID).setEnum("step",c("MediaEffectCreateStep").CREATE).setEnum("ref",c("MediaEffectCreationReferrer").EVENT_PAGE).getURI(),v=this.props.effect.effectData.id;c("AsyncDialog").send(new(c("AsyncRequest"))(u),function(w){w.subscribe(["hide","success"],function(x,event){this.props.effectUpdateHandler(v)}.bind(this))}.bind(this))}.bind(this),q}o.prototype.componentWillMount=function(){c("MediaEffectMetadataActionCreators").initFrameData(this.props.effect.effectEditorData)};o.prototype.isToggleEnabled=function(){var p=this.props.effect.effectData.status;return p===c("FXEntMediaEffectStatus").INACTIVE||p===c("FXEntMediaEffectStatus").ACTIVE};o.prototype.render=function(){var p=this.props.effect.effectData,q=p.status;return c("React").createElement(c("XUICard.react"),{className:"_634s"},c("React").createElement(c("MediaEffectOwnerHubHeader.react"),{title:this.props.title,hubLinkTab:c("MediaEffectHubViewTab").LEARN}),c("React").createElement(c("XUICardSection.react"),null,c("React").createElement("div",{className:"_46ca"},p.hasEnabledActivations?c("React").createElement(c("Image.react"),{src:j("353079")}):c("React").createElement(c("Image.react"),{src:j("353078")}),c("React").createElement("div",{className:"_46cb"},this.isToggleEnabled()?c("React").createElement(c("FBToggleSwitch.react"),{checked:q===c("FXEntMediaEffectStatus").ACTIVE,animate:true,onToggle:function(){return this.props.toggleEventHandler(p.id,q===c("FXEntMediaEffectStatus").INACTIVE)}.bind(this),tooltip:q===c("FXEntMediaEffectStatus").ACTIVE?i._("Your camera frame is on"):i._("Your camera frame is off")}):null),c("React").createElement("div",{className:"_46cd"},c("React").createElement(c("BackgroundImage.react"),{backgroundSize:"contain",height:n,src:p.thumbnailPortrait,width:m})),c("React").createElement("div",{className:"_46cf"},c("React").createElement(c("XUIText.react"),{size:"header4",weight:"bold",className:"_46cg"},i._("Help people share at your event")),c("React").createElement("p",{className:"_46ch"},i._("You can use the default camera frame or create a custom one for your guests to use in photos and videos they share.")),c("React").createElement("div",{className:"_46ci"},c("React").createElement(c("Button.react"),{onClick:this.$EventPermalinkCameraFramesCreateWithDefaultFrame1,use:"default",label:i._("Upload New")}))))))};f.exports=o}),null);
__d("MediaEffectAnalyticsStats.react",["cx","fbt","React","XUIText.react","intlSummarizeNumber"],(function a(b,c,d,e,f,g,h,i){"use strict";var j=function j(k){return c("React").createElement("div",{className:"_1rem"},c("React").createElement(c("XUIText.react"),{className:"_4vei",size:k.size,weight:k.weight},i._("{count}",[i.param("count",c("intlSummarizeNumber")(k.count))])),c("React").createElement(c("XUIText.react"),null,k.label))};f.exports=j}),null);
__d("XMediaEffectHubEditSettingsAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/edit_settings/async/",{table_results_per_page:{type:"Int"},hub_actor:{type:"FBID"},view_all:{type:"Bool",defaultValue:false},table_layout:{type:"String"},table_columns:{type:"StringVector"}})}),null);
__d("MediaEffectOwnerSelectorContainer.react",["cx","fbt","AsyncRequest","FluxContainer","Image.react","MediaEffectHubDispatcher","MediaEffectMetadataActionCreators","MediaEffectMetadataStore","MediaEffectMetadataViewStore","React","XMediaEffectHubEditSettingsAsyncController","XUISingleSelector.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("XUISingleSelector.react").Option;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MediaEffectOwnerSelectorContainer2=function(s){this.$MediaEffectOwnerSelectorContainer1(s.value)}.bind(this),o}m.getStores=function(){return[c("MediaEffectMetadataViewStore"),c("MediaEffectMetadataStore")]};m.calculateState=function(){var n=c("MediaEffectMetadataStore").getState().get("selectedOwnerID"),o=c("MediaEffectMetadataViewStore").getState().get("ownersData");return{selectedOwner:c("MediaEffectMetadataViewStore").getOwner(n),ownersData:o}};m.prototype.$MediaEffectOwnerSelectorContainer1=function(n){__p&&__p();c("MediaEffectMetadataActionCreators").changeOwner(n);c("MediaEffectMetadataActionCreators").resetLocation();var o=this.state.ownersData.find(function(o){return o.id===n});if(o===undefined)return;var p=c("XMediaEffectHubEditSettingsAsyncController").getURIBuilder();if(o.type!=="event"){p.setFBID("hub_actor",n).setBool("view_all",false);c("MediaEffectHubDispatcher").dispatch({type:"view_store/update_actor",payload:o});c("MediaEffectHubDispatcher").dispatch({type:"update/view_all",payload:false})}else{c("MediaEffectHubDispatcher").dispatch({type:"update/view_all",payload:true});p.setBool("view_all",true)}var q=p.getURI();new(c("AsyncRequest"))().setURI(q).send()};m.prototype.render=function(){var n=0,o=this.state,p=o.ownersData,q=o.selectedOwner,r=this.props.disabled,s=p.map(function(v){return c("React").createElement(l,{icon:c("React").createElement(c("Image.react"),{className:"_5hh3",src:v.src}),key:v.id,value:v.id},v.name)}),t=c("React").createElement(l,{value:n},i._("Select Owner")),u=q?q.id:n;return c("React").createElement(c("XUISingleSelector.react"),{defaultValue:u,disabled:r,maxheight:500,maxwidth:268,onChange:this.$MediaEffectOwnerSelectorContainer2,size:"xlarge",value:u},u===n?t:null,s)};f.exports=c("FluxContainer").create(m,{withProps:true})}),null);
__d("MediaEffectMetadataOwner.react",["cx","fbt","MediaEffectCard.react","MediaEffectMetadataActionCreators","MediaEffectMetadataValidationUtils","MediaEffectOwnerSelectorContainer.react","MediaEffectWebdriverIDs","React","XUICheckboxInput.react","XUIError.react","XUISingleSelector.react","mediaEffectGKCheck"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("XUISingleSelector.react").Option;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MediaEffectMetadataOwner1=function(s){this.props.onOwnerChange(s.value)}.bind(this),o}m.prototype.$MediaEffectMetadataOwner2=function(){var n=this.props,o=n.isValidating,p=n.selectedOwner;if(o){var q=p?p.id:null,r=p?p.isProductionFirstParty:false,s=c("MediaEffectMetadataValidationUtils").validateOwnerID(q);if(!s)return i._("Please select an owner");if(r&&!this.props.productionVerification)return"You must confirm you wish to create a production effect"}return null};m.prototype.$MediaEffectMetadataOwner3=function(){return c("React").createElement("div",{className:"_2pid"},"Choosing this Owner will result in a production effect, which will be launched publicly according to its schedule and other constraints once it is submitted. If you are trying to create an effect for testing, please use a test owner or contact the ar_platform oncall for help.",c("React").createElement("div",{className:"_2pid"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.props.productionVerification,onChange:this.$MediaEffectMetadataOwner4}),c("React").createElement("label",null,"I know what I am doing and want to create a production effect")))};m.prototype.$MediaEffectMetadataOwner4=function(event){c("MediaEffectMetadataActionCreators").changeProductionVerification(event.target.checked)};m.prototype.render=function(){var n=0,o=this.props.selectedOwner,p=o?o.id:n,q=this.props.ownersData;if(!c("mediaEffectGKCheck")("ce_allow_event_owner_in_hub_flow"))q=q.filter(function(u){return u.type.toLowerCase()!=="event"});var r=i._("You can assign yourself or a Page to be the effects's owner. The owner's name and profile picture may appear next to it."),s=o&&o.isProductionFirstParty,t=s?this.$MediaEffectMetadataOwner3():null;return c("React").createElement(c("MediaEffectCard.react"),{className:s?"_2ex3":"",title:i._("Effect by"),tooltip:r},c("React").createElement(c("XUIError.react"),{xuiError:this.$MediaEffectMetadataOwner2()},c("React").createElement("div",{"data-testid":c("MediaEffectWebdriverIDs").LWE_EFFECT_OWNER_POPOVER_BUTTON},c("React").createElement(c("MediaEffectOwnerSelectorContainer.react"),{disabled:this.props.disabled}),t)))};f.exports=m}),null);
__d("MediaEffectShareReferrer",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CONFIRM_DIALOG:"confirm_dialog",DETAIL_DIALOG:"detail_dialog",HUB_EFFECT_PREVIEW:"hub_effect_preview"})}),null);
__d("XMediaEffectAsyncRequestEffectNotificationController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/async/request_notification/",{effect_id:{type:"FBID"},share_actor_id:{type:"FBID"},share_target_id:{type:"FBID"}})}),null);
__d("XMediaEffectAsyncRequestTryEffectNotificationController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/async/request_try_effect_notification/",{request_source:{type:"Enum",defaultValue:"direct",enumType:1},effect_id:{type:"FBID"},__asyncDialog:{type:"Int"}})}),null);
__d("XMediaEffectHubEffectArchiveAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/effects/async/archive/",{effect_ids:{type:"FBIDVector",required:true}})}),null);
__d("XMediaEffectShareEffectDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/media_effect/share/dialog/",{page_id:{type:"FBID"},effect_id:{type:"FBID"},ref:{type:"Enum",required:true,enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("MediaEffectHubEffectActionConfig",["fbt","AsyncDialog","AsyncRequest","AsyncResponse","immutable","MediaEffectCreateStep","MediaEffectCreationReferrer","MediaEffectFlowType","MediaEffectHubDispatcher","MediaEffectHubFunnelLogger","MediaEffectMetadataDataLoader","MediaEffectShareReferrer","React","SimpleXUIDialog","URI","XMediaEffectAsyncRequestEffectNotificationController","XMediaEffectAsyncRequestTryEffectNotificationController","XMediaEffectCreateDialogController","XMediaEffectHubEffectArchiveAsyncController","XMediaEffectShareEffectDialogController","XProfilePictureOverlayLandingController","XUIDialogButton.react","XUIDialogCancelButton.react","goURI"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("immutable").Set;function j(v,w,x,y){c("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_ACTIVE_STATUS_CHANGE","send:"+(v?"enable":"disable"));c("MediaEffectMetadataDataLoader").changeActiveStatus(v,w).then(function(z){var w=z.payload.effects;c("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_ACTIVE_STATUS_CHANGE","receive");c("MediaEffectHubDispatcher").dispatch({type:"effects_edited",payload:{effects:w}});x&&x()})["catch"](function(z){c("AsyncResponse").defaultErrorHandler(z);y&&y()}).done()}function k(v,w,x){__p&&__p();c("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_ARCHIVE","send");var y=c("XMediaEffectHubEffectArchiveAsyncController").getURIBuilder().setFBIDVector("effect_ids",v.toSeq().map(function(z){return z.id}).toArray()).getURI();new(c("AsyncRequest"))().setURI(y).setHandler(function(z){var v=z.payload.effects;c("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_ARCHIVE","receive");c("MediaEffectHubDispatcher").dispatch({type:"effects_edited",payload:{effects:v}});c("MediaEffectHubDispatcher").dispatch({type:"effects_selected",payload:{effectIDs:i()}});w&&w()}).setErrorHandler(function(z){c("AsyncResponse").defaultErrorHandler(z);x&&x()}).send()}var l={getLabel:function v(){return h._("Turn On")},onClick:j.bind(null,true)},m={getLabel:function v(){return h._("Turn Off")},onClick:j.bind(null,false)},n={getLabel:function v(){return h._("Edit")},onClick:function v(w){c("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_OPEN","menu-edit");var x=c("XMediaEffectCreateDialogController").getURIBuilder().setEnum("flow_type",c("MediaEffectFlowType").BASIC_HUB).setEnum("step",c("MediaEffectCreateStep").EDIT).setFBID("media_effect_id",w.id).setEnum("ref",c("MediaEffectCreationReferrer").HUB).getURI();c("AsyncDialog").send(new(c("AsyncRequest"))(x))}},o={getLabel:function v(){return h._("Duplicate")},onClick:function v(w){c("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_DUPLICATE");var x=c("XMediaEffectCreateDialogController").getURIBuilder().setEnum("flow_type",c("MediaEffectFlowType").BASIC_HUB).setEnum("step",c("MediaEffectCreateStep").DUPLICATE).setFBID("media_effect_id",w.id).setEnum("ref",c("MediaEffectCreationReferrer").HUB).getURI();c("AsyncDialog").send(new(c("AsyncRequest"))(x))}},p={getLabel:function v(){return h._("Debug")},onClick:function v(w){var x=w.id.toString(),y=new(c("URI"))("/intern/fx/debug/").setQueryData({effectid:x});c("goURI")(y)}},q={getLabel:function v(){return h._("Archive")},onClick:function v(w,x,y){return c("SimpleXUIDialog").showEx(h._("Once you archive a frame, it will be unavailable for people to use. You won't be able to make the frame active again."),h._({"*":"Archive Frames?","_1":"Archive Frame?"},[h.plural(w.size)]),c("React").createElement("div",null,c("React").createElement(c("XUIDialogCancelButton.react"),{action:"cancel"}),c("React").createElement(c("XUIDialogButton.react"),{action:"cancel",label:h._("Archive"),onClick:function v(){return k(w,x,y)},use:"confirm"})))}},r={getLabel:function v(){return h._("Add to Profile Picture")},onClick:function v(w){c("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_CHANGE_PROFILE_PICTURE");var x=w.profileFrame&&w.profileFrame.id;if(x){var y=c("XProfilePictureOverlayLandingController").getURIBuilder().setInt("selected_overlay_id",x).setInt("profile_id",w.owner.id).getURI();c("goURI")(y)}}},s={getLabel:function v(){return h._("Preview On Mobile")},onClick:function v(w){var x=c("XMediaEffectAsyncRequestEffectNotificationController").getURIBuilder().setFBID("effect_id",w).getURI();new(c("AsyncRequest"))(x).setHandler(function(y){c("SimpleXUIDialog").show(h._("Check your notification on mobile to preview the frame."))}).setErrorHandler(function(y){c("SimpleXUIDialog").show(h._("There was a problem sending the notification."))}).send()}},t={onClick:function v(w,x,y){var z=c("XMediaEffectAsyncRequestTryEffectNotificationController").getURIBuilder().setFBID("effect_id",w).getURI();new(c("AsyncRequest"))(z).setHandler(function(A){return x&&x()}).setErrorHandler(function(A){return y&&y()}).send()}},u={getLabel:function v(){return h._("Share as Page")},onClick:function v(w){var x=c("XMediaEffectShareEffectDialogController").getURIBuilder().setFBID("page_id",w.owner.id.toString()).setFBID("effect_id",w.id.toString()).setEnum("ref",c("MediaEffectShareReferrer").HUB_EFFECT_PREVIEW).getURI();c("AsyncDialog").send(new(c("AsyncRequest"))(x))}};f.exports={activate:l,archive:q,debug:p,changeActiveStatus:j,changeProfilePicture:r,deactivate:m,duplicate:o,edit:n,previewOnMobile:s,tryEffectOnMobileAction:t,shareEffect:u}}),null);
__d("MediaEffectNeedsAttentionReason",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({WILL_DEPRECATE_SOON:"will_deprecate_soon",UPDATE_REVIEW_REJECTED:"update_review_rejected",WAS_AUTOUPGRADED:"was_autoupgraded",HAS_ERRORS:"has_errors"})}),null);
__d("MediaEffectStatusText.react",["MediaEffectHubStrings","React"],(function a(b,c,d,e,f,g){"use strict";var h=function h(i){var j=i.status,k=c("MediaEffectHubStrings").getTextForMajorStatus(j);if(!k)return null;var l=c("MediaEffectHubStrings").getTextForMinorStatus(j);return c("React").createElement("span",null,k,l?c("React").createElement("span",null," (",l,")"):null)};f.exports=h}),null);
__d("MediaEffectStatusIndicator.react",["cssVar","cx","fbt","ContextualDialogArrow","FXEntMediaEffectStatus","JSXDOM","MediaEffectAnalyticsStats.react","MediaEffectNeedsAttentionReason","MediaEffectStatusText.react","React","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogTitle.react","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m,n,o,p;k=babelHelpers.inherits(q,c("ContextualDialogArrow"));l=k&&k.prototype;q.prototype.__getArrow=function(){return c("JSXDOM").i({className:"_6536"})};function q(){k.apply(this,arguments)}m=babelHelpers.inherits(r,c("React").PureComponent);n=m&&m.prototype;function r(){var s;(s=n.constructor).call.apply(s,[this].concat(Array.prototype.slice.call(arguments)));this.getStatusRef=function(){return this.statusRef}.bind(this);this.getStatusRef=this.getStatusRef.bind(this)}r.prototype.render=function(){var s=this.props,t=s.mediaEffect,u=s.className,v=r.statusClasses[t.status],w=r.statusPopovers[t.status]||r.statusPopovers[t.needsAttentionReason],x=null;if(w)x=c("React").createElement(c("XUIContextualDialog.react"),{arrowBehavior:q,autoFocus:false,className:"_6537",contextRef:this.getStatusRef,hoverContextRef:this.getStatusRef,position:"right",width:260},c("React").createElement(c("XUIContextualDialogTitle.react"),null,c("React").createElement("div",{style:{color:"#ffffff",fontSize:"13px",lineHeight:"16px"}},w.title)),c("React").createElement(c("XUIContextualDialogBody.react"),{className:"_1fw7"},w.text));return c("React").createElement("div",{className:c("joinClasses")("_2l7i"+(this.props.showOneLine?" _oer":""),u),style:{width:this.props.width}},c("React").createElement("div",{ref:function(y){return this.statusRef=y}.bind(this)},c("React").createElement("span",{className:c("joinClasses")("_3-8_ _4ppg _2l7h",v)}),c("React").createElement("span",{className:"_4ppi"},c("React").createElement(c("MediaEffectStatusText.react"),{status:t.status}))),x,this.props.showOneLine&&t.status!==c("FXEntMediaEffectStatus").NOT_APPROVED&&t.activateCount>0?c("React").createElement(c("MediaEffectAnalyticsStats.react"),{count:t.activateCount,label:j._({"*":"Uses","_1":"Use"},[j.plural(t.activateCount)])}):null)};r.statusClasses=(o={},o[c("FXEntMediaEffectStatus").DRAFT]="_2l85",o[c("FXEntMediaEffectStatus").SCHEDULED]="_2l88",o[c("FXEntMediaEffectStatus").ACTIVE]="_2l7j",o[c("FXEntMediaEffectStatus").IN_REVIEW]="_2l7j",o[c("FXEntMediaEffectStatus").NEEDS_ATTENTION]="_2l7j",o[c("FXEntMediaEffectStatus").INACTIVE]="_2l86",o[c("FXEntMediaEffectStatus").ARCHIVED]="_2l86",o[c("FXEntMediaEffectStatus").COMPLETED]="_2l86",o[c("FXEntMediaEffectStatus").NOT_APPROVED]="_2l89",o[c("FXEntMediaEffectStatus").DEPRECATED]="_2l86",o);r.statusPopovers=(p={},p[c("MediaEffectNeedsAttentionReason").WILL_DEPRECATE_SOON]={title:j._("Your Effect is Out of Date"),text:j._("This effect was created an old version of AR Studio which will be deprecated soon. Please update AR Studio to the latest version and resubmit your effect.")},p[c("MediaEffectNeedsAttentionReason").WAS_AUTOUPGRADED]={title:j._("Effect has been upgraded"),text:j._("This has been done to make sure that it can still be viewed")},p[c("FXEntMediaEffectStatus").DEPRECATED]={title:j._("Your Effect Requires an Update"),text:j._("This effect was created with an AR Studio version that was deprecated. To have your effect appear in the camera again, update AR Studio to the latest version and resubmit the effect.")},p);f.exports=r}),null);
__d("MediaEffectGenerationType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({AUTO_GENERATED:"auto_generated",USER_GENERATED:"user_generated",UNKNOWN:""})}),null);
__d("MediaEffectOwnerHubEffectCard.react",["cx","fbt","AsyncDialog","AsyncRequest","ContextualDialogArrow","ContextualLayerAutoFlip","FXEntMediaEffectStatus","Layout.react","List.react","MediaEffectMetadataActionCreators","Link.react","Log","MediaEffectCreateStep","MediaEffectHubViewTab","MediaEffectOwnerHubHeader.react","MediaEffectReactFrameEditorPreviewCanvasContainer.react","MediaEffectStatusIndicator.react","PopoverMenu.react","React","ReactXUIMenu","XMediaEffectCreateDialogController","XUICard.react","XUICardSection.react","XUIText.react","MediaEffectCreationReferrer"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("Layout.react").Column,m=c("Layout.react").FillColumn,n=c("ReactXUIMenu").Item,o="archive",p="toggle";j=babelHelpers.inherits(q,c("React").PureComponent);k=j&&j.prototype;function q(){__p&&__p();var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=k.constructor).call.apply(r,[this].concat(u)),this.onEffectLinkClick=function(){var w=c("XMediaEffectCreateDialogController").getURIBuilder().setEnum("flow_type",this.props.flowType).setEnum("step",c("MediaEffectCreateStep").EDIT).setFBID("media_effect_id",this.props.effectID).setEnum("ref",c("MediaEffectCreationReferrer").HUB).getURI();c("AsyncDialog").send(new(c("AsyncRequest"))(w),function(x){x.subscribe(["hide","success"],function(y,event){this.props.effectUpdateHandler(this.props.effectID)}.bind(this))}.bind(this))}.bind(this),this.onMenuItemClick=function(event,w){var x=w.item.getValue();switch(x){case p:if(this.isToggleEnabled())this.props.toggleEventHandler(this.props.effectID,this.props.effect.effectData.status===c("FXEntMediaEffectStatus").INACTIVE);break;case o:this.props.archiveEventHandler(this.props.effect.effectData);break;default:c("Log").warn("Unexpected action sent to this handler: "+x)}}.bind(this),s}q.prototype.componentWillMount=function(){c("MediaEffectMetadataActionCreators").initFrameData(this.props.effect.effectEditorData)};q.prototype.buildMenu=function(){var r=this.props.effect.effectData.status,s=r===c("FXEntMediaEffectStatus").INACTIVE?i._("Turn On"):i._("Turn Off"),t=this.isToggleEnabled();return c("React").createElement(c("ReactXUIMenu"),{onItemClick:this.onMenuItemClick},c("React").createElement(n,{value:p},c("React").createElement("span",{className:(t?"_2ugo":"")+(!t?" _2ugp":"")},s)),c("React").createElement(n,{value:o},i._("Archive")))};q.prototype.isToggleEnabled=function(){var r=this.props.effect.effectData.status;return r===c("FXEntMediaEffectStatus").INACTIVE||r===c("FXEntMediaEffectStatus").ACTIVE};q.prototype.render=function(){return c("React").createElement(c("XUICard.react"),null,c("React").createElement(c("MediaEffectOwnerHubHeader.react"),{hubLinkTab:c("MediaEffectHubViewTab").MANAGE,title:this.props.title}),c("React").createElement(c("XUICardSection.react"),null,c("React").createElement(c("Layout.react"),{className:"_2ugq"},c("React").createElement(l,null,c("React").createElement(c("MediaEffectReactFrameEditorPreviewCanvasContainer.react"),{previewHeight:80,previewWidth:80})),c("React").createElement(m,{className:"_2ugr"},c("React").createElement(c("List.react"),{border:"none",spacing:"small"},c("React").createElement("li",null,c("React").createElement(c("Link.react"),{href:"#",onClick:this.onEffectLinkClick},c("React").createElement(c("XUIText.react"),null,this.props.effect.effectData.name))),c("React").createElement("li",null,c("React").createElement(c("MediaEffectStatusIndicator.react"),{className:"_2ugs",mediaEffect:this.props.effect.effectData})),c("React").createElement("li",null,c("React").createElement(c("XUIText.react"),null,i._({"*":{"*":"{activateCount} Uses","_1":"{activateCount} Use"}},[i.param("activateCount",this.props.effect.effectData.activateCount,[0]),i.plural(this.props.effect.effectData.activateCount)]))))),c("React").createElement(l,{className:"_2ugt"},c("React").createElement(c("PopoverMenu.react"),{alignh:"right",behaviors:[c("ContextualDialogArrow")],layerBehaviors:[c("ContextualLayerAutoFlip")],menu:this.buildMenu(),position:"below"},c("React").createElement("div",{className:"_2ugu"}))))))};f.exports=q}),null);
__d("MediaEffectOwnerHubNullStateCard.react",["cx","invariant","EventPermalinkCameraFramesCreate.react","EventPermalinkCameraFramesCreateWithDefaultFrame.react","MediaEffectFlowType","MediaEffectGenerationType","MediaEffectOwnerHubHeader.react","React","XUICard.react","XUICardSection.react","idx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;l.prototype.render=function(){var m;switch(this.props.flowType){case c("MediaEffectFlowType").EVENT:var n=(m=this.props)!=null?(m=m.optionalData)!=null?m.eventActionContext:m:m;n||i(0);var o=this.props.effect;if(o&&o.effectData&&o.effectData.generationType===c("MediaEffectGenerationType").AUTO_GENERATED)return c("React").createElement(c("EventPermalinkCameraFramesCreateWithDefaultFrame.react"),{actionContext:n,effect:o,effectUpdateHandler:this.props.effectUpdateHandler,eventID:this.props.owner,flowType:this.props.flowType,key:"EffectCard"+o.effectData.id,title:this.props.title,toggleEventHandler:this.props.toggleEventHandler});else return c("React").createElement(c("EventPermalinkCameraFramesCreate.react"),{actionContext:n,eventID:this.props.owner,title:this.props.title});default:return c("React").createElement(c("XUICard.react"),{className:"_634s"},c("React").createElement(c("MediaEffectOwnerHubHeader.react"),{title:this.props.title}),c("React").createElement(c("XUICardSection.react"),null,c("React").createElement("div",{className:"_fw6"},"No data!")))}};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("MediaEffectStoreSharedDispatcher",["ExplicitRegistrationReactDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationReactDispatcher"));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:false})}),null);
__d("XMediaEffectAsyncFetchEffectController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/async_load_effect/",{effect_ids:{type:"FBIDSet"}})}),null);
__d("MediaEffectStore",["AsyncRequest","FluxLoadObjectStore","LoadObject","MediaEffectGenerationType","MediaEffectStoreSharedDispatcher","XMediaEffectAsyncFetchEffectController","idx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxLoadObjectStore"));i=h&&h.prototype;function j(k){i.constructor.call(this,k);k.explicitlyRegisterStore(this)}j.prototype.reduce=function(k,l){__p&&__p();switch(l.action){case"media_effect/add":return this.__handleOne(k,l.key,l.value);case"media_effect_saved":var m=k.filter(function(p,q){var r,s=p.getValue();return((r=s)!=null?(r=r.effectData)!=null?r.generationType:r:r)===c("MediaEffectGenerationType").USER_GENERATED});return this.__handleOne(m,l.effect.effectData.id,l.effect);case"media_effect/bootstrap":l.bootstrapData.forEach(function(p){k.set(p.effect,c("LoadObject").withValue(p.data))});break;case"media_effect/error":return this.__handleOne(k,l.key,l.error);case"media_effect/reload":this.__load(l.key);return k.remove(l.key);case"media_effect/remove":return k.remove(l.key);case"media_effect/update_effect":var n=k.get(l.key).getValue();if(n){var o=Object.assign({},n);o.effectData=l.effectData;return this.__handleOne(k.remove(l.key),l.key,o)}break}return k};j.prototype.__load=function(k){var l=c("XMediaEffectAsyncFetchEffectController").getURIBuilder().setFBIDSet("effect_ids",[k]).getURI();new(c("AsyncRequest"))(l).setHandler(function(m){c("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect/add",key:k,value:m.getPayload().effects[0]})}).setErrorHandler(function(m){c("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect/error",key:k,error:m.getError()})}).send()};f.exports=new j(c("MediaEffectStoreSharedDispatcher"))}),null);
__d("XMediaEffectAsyncFetchController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/async_load/",{owner_ids:{type:"FBIDSet"},creator_ids:{type:"FBIDSet"},statuses:{type:"EnumSet",enumType:null},types:{type:"EnumSet",enumType:null},creation_date_range:{type:"StringToIntMap"},effect_id:{type:"FBID"},effect_name:{type:"String"},effect_tag:{type:"String"},whitelisted:{type:"Bool",defaultValue:false},gatekeeper:{type:"String"}})}),null);
__d("MediaEffectOwnerStore",["AsyncRequest","FluxLoadObjectStore","FXEntMediaEffectStatus","LoadObject","MediaEffectStore","MediaEffectStoreSharedDispatcher","XMediaEffectAsyncFetchController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=[c("FXEntMediaEffectStatus").ACTIVE,c("FXEntMediaEffectStatus").COMPLETED,c("FXEntMediaEffectStatus").DRAFT,c("FXEntMediaEffectStatus").IN_REVIEW,c("FXEntMediaEffectStatus").INACTIVE,c("FXEntMediaEffectStatus").NOT_APPROVED,c("FXEntMediaEffectStatus").SCHEDULED];h=babelHelpers.inherits(k,c("FluxLoadObjectStore"));i=h&&h.prototype;function k(l){i.constructor.call(this,l);l.explicitlyRegisterStore(this)}k.prototype.reduce=function(l,m){__p&&__p();switch(m.action){case"media_effect_owner/add":return this.__handleOne(l,m.key,{ownerID:m.key,effects:m.effects});case"media_effect_owner/bootstrap":m.bootstrapData.forEach(function(s){l.set(s.ownerID,c("LoadObject").withValue(s))});break;case"media_effect_owner/error":return this.__handleOne(l,m.key,m.error);case"media_effect_owner/reload":this.__load(m.key);return l.remove(m.key);case"media_effect_owner/remove":return l.remove(m.key);case"media_effect_owner/update_add_effect":var n=l.get(m.key).getValue();if(n){n.effects.push(m.effect);return this.__handleOne(l,m.key,{ownerID:m.key,effects:n.effects})}break;case"media_effect_saved":var o=m.effect.effectData.owner.id,p=l.get(o).getValue();if(p){this.$MediaEffectOwnerStore1();return this.__handleOne(l,o,{ownerID:o,effects:c("MediaEffectStore").getState().keySeq().toArray()})}break;case"media_effect_owner/update_remove_effect":var q=l.get(m.key).getValue();if(q)if(q.effects.indexOf(m.effect)>=0){var r=q.effects;r.splice(r.indexOf(m.effect),1);return this.__handleOne(l,m.key,{ownerID:m.key,effects:r})}break}return l};k.prototype.$MediaEffectOwnerStore1=function(){c("MediaEffectStoreSharedDispatcher").waitFor([c("MediaEffectStore").getDispatchToken()])};k.prototype.__load=function(l){var m=c("XMediaEffectAsyncFetchController").getURIBuilder().setFBIDSet("owner_ids",[l]).setEnumSet("statuses",j).getURI();new(c("AsyncRequest"))(m).setHandler(function(n){c("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect_owner/add",key:l,effects:n.payload.effects.map(function(o){return o.id})})}).setErrorHandler(function(n){c("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect_owner/error",key:l,error:n.getError()})}).send()};f.exports=new k(c("MediaEffectStoreSharedDispatcher"))}),null);
__d("MediaEffectStoresBootstrapper",["MediaEffectFrameEditorDispatcher","MediaEffectMetadataActionCreators","MediaEffectOwnerStore","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorDataStore","MediaEffectStore","MediaEffectStoreSharedDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=[c("MediaEffectReactFrameEditorDataStore"),c("MediaEffectReactFrameEditorCanvasDataStore")],i=[c("MediaEffectStore"),c("MediaEffectOwnerStore")],j={isBootstrapped:false,getEditorStores:function k(){return h},getMediaEffectStores:function k(){return i},bootstrap:function k(){if(this.isBootstrapped)return;c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.getEditorStores());c("MediaEffectStoreSharedDispatcher").explicitlyRegisterStores(this.getMediaEffectStores());this.bootstrapFontData();this.isBootstrapped=true},bootstrapWithData:function k(l){__p&&__p();if(this.isBootstrapped)return;c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.getEditorStores());c("MediaEffectStoreSharedDispatcher").explicitlyRegisterStores(this.getMediaEffectStores());if(l.fontData)c("MediaEffectMetadataActionCreators").addFontData(l.fontData);else this.bootstrapFontData();if(l.ownerData)c("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect_owner/bootstrap",bootstrapData:l.ownerData});if(l.effectData)c("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect/bootstrap",bootstrapData:l.effectData});this.isBootstrapped=true},bootstrapFontData:function k(){c("MediaEffectMetadataActionCreators").bootstrapFontData()}};f.exports=j}),null);
__d("MediaEffectOwnerHubContainer.react",["cx","AsyncRequest","AsyncResponse","CenteredContainer.react","FluxContainer","immutable","MediaEffectFlowType","MediaEffectGenerationType","MediaEffectHubEffectActionConfig","MediaEffectOwnerHubEffectCard.react","MediaEffectOwnerHubHeader.react","MediaEffectOwnerHubNullStateCard.react","MediaEffectOwnerStore","MediaEffectStore","MediaEffectStoresBootstrapper","MediaEffectStoreSharedDispatcher","React","XMediaEffectHubEffectActivationAsyncController","XUICard.react","XUISpinner.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l,m,n,o=c("immutable").Set;i=babelHelpers.inherits(p,c("React").PureComponent);j=i&&i.prototype;p.prototype.render=function(){return c("React").createElement(c("XUICard.react"),null,c("React").createElement(c("MediaEffectOwnerHubHeader.react"),{title:this.props.title}),c("React").createElement(c("XUICard.react"),null,c("React").createElement(c("CenteredContainer.react"),{className:"_60ll"},c("React").createElement(c("XUISpinner.react"),{size:"large"}))))};function p(){i.apply(this,arguments)}k=babelHelpers.inherits(q,c("React").PureComponent);l=k&&k.prototype;q.prototype.render=function(){return c("React").createElement(c("XUICard.react"),null,c("React").createElement(c("MediaEffectOwnerHubHeader.react"),{title:this.props.title}),c("React").createElement(c("XUICard.react"),null,c("React").createElement("div",{className:"_5-nb"},this.props.errorMessage)))};function q(){k.apply(this,arguments)}m=babelHelpers.inherits(r,c("React").PureComponent);n=m&&m.prototype;r.getStores=function(){return[c("MediaEffectStore"),c("MediaEffectOwnerStore")]};r.calculateState=function(s){__p&&__p();var t={isLoading:true};if(!s)return t;var u=c("MediaEffectOwnerStore").get(s.ownerID);if(u.hasError()){var v=u.getError();if(v)t={errorMessage:v.message,isError:true,isLoading:false}}if(!u.hasValue())return t;var w=s.defaultFlowType,x=u.getValueEnforcing().effects;if(x.length===0)t={effectData:null,effectIDs:[],flowType:w,isError:false,isLoading:false,selectedEffectIndex:-1};else{var y=s.selectedEffectIndex<x.length&&s.selectedEffectIndex>=0?s.selectedEffectIndex:0,z=c("MediaEffectStore").get(x[y]);if(z.hasError()){var A=z.getError();if(A)t={errorMessage:A.message,isError:true,isLoading:false}}else if(z.hasValue()){var B=z.getValueEnforcing();w=B.effectData.flowType;t={effectData:B,effectIDs:x,flowType:w,isError:false,isLoading:false,selectedEffectIndex:y}}else t={isLoading:true}}return t};function r(s){__p&&__p();n.constructor.call(this,s);this.effectUpdateHandler=function(v){var w=this.state.effectIDs.length>0&&this.state.selectedEffectIndex>=0?this.state.effectIDs[this.state.selectedEffectIndex]:"";if(v===w)this.setState({isLoading:true});c("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect/reload",key:v})}.bind(this);this.toggleEventHandler=function(v,w){var x=c("XMediaEffectHubEffectActivationAsyncController").getURIBuilder().setBool("activate",w).setFBIDVector("effect_ids",[v]).getURI();new(c("AsyncRequest"))().setURI(x).setHandler(function(y){var z=y.getPayload().effects;z.map(function(A){c("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect/update_effect",key:A.id,effectData:A})})}).setErrorHandler(function(y){c("AsyncResponse").defaultErrorHandler(y)}).send()};this.archiveEventHandler=function(v){c("MediaEffectHubEffectActionConfig").archive.onClick(o([v]),function(){this.setState({isLoading:true});c("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect_owner/update_remove_effect",key:this.state.ownerID,effect:v.id})}.bind(this))}.bind(this);var t={defaultFlowType:s.flowType?s.flowType:c("MediaEffectFlowType").BASIC_HUB,effectData:null,effectIDs:[],errorMessage:"",flowType:s.flowType?s.flowType:c("MediaEffectFlowType").BASIC_HUB,isError:false,isLoading:true,ownerID:s.owner,selectedEffectIndex:-1},u=r.calculateState(t);this.state=Object.assign({},t,u)}r.prototype.componentWillMount=function(){c("MediaEffectStoresBootstrapper").bootstrap()};r.prototype.render=function(){__p&&__p();var s=this.props,t=s.title,u=s.optionalData,v=this.state,w=v.effectData,x=v.effectIDs,y=v.errorMessage,z=v.flowType,A=v.isError,B=v.isLoading,C=v.ownerID;if(A)return c("React").createElement(q,{errorMessage:y,title:t});else if(B)return c("React").createElement(p,{title:t});else if(x.length>0&&w&&w.effectData.generationType===c("MediaEffectGenerationType").USER_GENERATED){var D=w;return c("React").createElement(c("MediaEffectOwnerHubEffectCard.react"),{archiveEventHandler:this.archiveEventHandler,effect:D,effectID:D.effectData.id,effectUpdateHandler:this.effectUpdateHandler,flowType:z,key:"EffectCard"+D.effectData.id,title:t,toggleEventHandler:this.toggleEventHandler})}else return c("React").createElement(c("MediaEffectOwnerHubNullStateCard.react"),{effect:w,effectUpdateHandler:this.effectUpdateHandler,flowType:z,optionalData:u,owner:C,title:t,toggleEventHandler:this.toggleEventHandler})};f.exports=c("FluxContainer").create(r)}),null);
__d("MediaEffectOwnerHubWidgetInit",["MediaEffectOwnerHubContainer.react","MediaEffectStoresBootstrapper","React","ReactRenderer"],(function a(b,c,d,e,f,g){"use strict";var h={init:function i(j){if(j.bootstrapData)c("MediaEffectStoresBootstrapper").bootstrapWithData(j.bootstrapData);else c("MediaEffectStoresBootstrapper").bootstrap();c("ReactRenderer").renderComponent(c("React").createElement(c("MediaEffectOwnerHubContainer.react"),j.ownerWidgetProps),j.root)}};f.exports=h}),null);